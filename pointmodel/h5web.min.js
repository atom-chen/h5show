
function float2int(a){return 0|a}function radian2angle(a){return a/Math.PI*180}function angle2radian(a){return a/180*Math.PI}function getChiNum(a){return keyChi[a]}function hexToArgb(a,b,c){return void 0===b&&(b=!0),void 0===c&&(c=null),c||(c=new Vector3D),c.w=b?a>>24&255:0,c.x=a>>16&255,c.y=a>>8&255,c.z=255&a,c}function hexToArgbNum(a,b,c){return void 0===b&&(b=!0),void 0===c&&(c=null),c=hexToArgb(a,b,c),c.scaleBy(1/255),c}function getBaseUrl(){return Scene_data.supportBlob?"":"_base"}function strokeFilter(a,b,c,d){function e(a,c){return 4*(c*b+a)}function f(a,b){var c;return c=e(a-1,b),i[c+3]>0?!0:(c=e(a+1,b),i[c+3]>0?!0:(c=e(a,b+1),i[c+3]>0?!0:(c=e(a,b-1),i[c+3]>0?!0:!1)))}for(var g=hexToArgb(d),h=a.getImageData(0,0,b,c),i=h.data,j=new Array,k=1;b-1>k;k++)for(var l=0;c-1>l;l++){var m=e(k,l);0==i[m+3]&&f(k,l)&&j.push(m)}for(var k=0;k<j.length;k++)i[j[k]]=g.x,i[j[k]+1]=g.y,i[j[k]+2]=g.z,i[j[k]+3]=g.w;a.putImageData(h,0,0)}function trim(a){return trimRight(trimLeft(a))}function trimLeft(a){if(null==a)return"";var b=new String(" 	\n\r"),c=new String(a);if(-1!=b.indexOf(c.charAt(0))){for(var d=0,e=c.length;e>d&&-1!=b.indexOf(c.charAt(d));)d++;c=c.substring(d,e)}return c}function trimRight(a){if(null==a)return"";var b=new String(" 	\n\r"),c=new String(a);if(-1!=b.indexOf(c.charAt(c.length-1))){for(var d=c.length-1;d>=0&&-1!=b.indexOf(c.charAt(d));)d--;c=c.substring(0,d+1)}return c}function TweenMoveTo(a,b,c){c.ease=Linear.easeInOut,TweenLite.to(a,b,c)}function getScencdStr(a){var b=Math.floor(a/60%60),c=Math.floor(a%60);return String(10>b?"0":"")+String(b)+":"+String(10>c?"0":"")+String(c)}function random(a){return Math.floor(Math.random()*a)}function randomByItem(a){return a[random(a.length)]}function makeArray(a,b){a||console.log("有错");for(var c=0;c<a.length;c++)b.push(a[c])}function unZip(a){var b=new Uint8Array(a),c=new Zlib.Inflate(b),d=c.decompress();return d.buffer}function getZipByte(a){var b=a.readInt(),c=a.buffer.slice(a.position,a.position+b);a.position+=b;var d=unZip(c);return new ByteArray(d)}function getUrlParam(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)"),c=window.location.search.substr(1).match(b);return null!=c?decodeURI(c[2]):null}function copy2clipboard(a){var b=document.createElement("textarea");b.style.fontSize="12pt",b.style.position="absolute",b.style["z-index"]=-1,b.style.background="transparent",b.style.border="transparent",b.style.color="white",b.setAttribute("readonly",""),document.body.appendChild(b),b.value=a,b.select(),b.setSelectionRange(0,b.value.length);try{document.execCommand("copy")}catch(c){alert("不支持复制")}setTimeout(function(){document.body.removeChild(b)},1e3)}function getBit(a,b){return Boolean(a>>(31&b)&1)}function OperationFailedToString(a,b,c){return a==OprateResult.OPRATE_TYPE_LOGIN?b==OprateResult.OPRATE_RESULT_SUCCESS?" 登录 - 成功 - "+c:b==OprateResult.OPRATE_RESULT_NAME_REPEAT?" 登录 - 名称重复 - "+c:b==OprateResult.OPRATE_RESULT_NAME_ILLEGAL?" 登录 - 名称非法 - "+c:b==OprateResult.OPRATE_RESULT_CHAR_CAP?" 登录 - 角色数量达到上限 - "+c:b==OprateResult.OPRATE_RESULT_SCENED_CLOSE?" 登录 - 场景服未开启 - "+c:b==OprateResult.OPRATE_RESULT_SCENED_ERROR?" 登录 - 场景服重置，其实就是崩了一个场景服换一个新的 - "+c:b==OprateResult.OPRATE_RESULT_LOGINED_IN?" 登录 - 角色已登录 - "+c:b==OprateResult.OPRATE_RESULT_OTHER_LOGINED?" 登录 - 角色其他地方登录 - "+c:b==OprateResult.OPRATE_RESULT_GAME_VERSION_ERROR?" 登录 - 游戏版本不对 - "+c:b==OprateResult.OPRATE_RESULT_MAP_VERSION_ERROR?" 登录 - 地图素材版本不对 - "+c:b==OprateResult.OPRATE_RESULT_DATA_VERSION_ERROR?" 登录 - data素材版本不对 - "+c:b==OprateResult.OPRATE_RESULT_VERSION_FORMAT_ERROR?" 登录 - 客户端发来的版本信息格式不对 - "+c:b==OprateResult.OPRATE_RESULT_APPD_ERROR?" 登录 - 应用服异常重启 - "+c:b==OprateResult.OPRATE_RESULT_LOCK_ACCOUNT?" 登录 - 帐号被封 - "+c:b==OprateResult.OPRATE_RESULT_LOCK_IP?" 登录 - IP被封 - "+c:b==OprateResult.OPRATE_RESULT_APPD_CLOSE?" 登录 - 应用服未开启 - "+c:b==OprateResult.OPRATE_RESULT_NAME_TOO_LONG?" 登录 - 名字太长 - "+c:b==OprateResult.OPRATE_RESULT_NAME_HAS_PINGBI?" 登录 - 有屏蔽词 - "+c:b==OprateResult.OPRATE_RESULT_LOGOUT_UNFINISHED?" 登录 - 该角色上一次的登出未完成，请等待 - "+c:b==OprateResult.OPRATE_RESULT_PID_OR_SID_ERROR?" 登录 - 服务器id或者平台id错误 - "+c:b==OprateResult.OPRATE_RESULT_DB_RESULT_ERROR?" 登录 - 数据库查询出问题了 - "+c:b==OprateResult.OPRATE_RESULT_MERGE_SERVER?" 登录 - 合服了 - "+c:b==OprateResult.OPRATE_RESULT_PLAYER_ZIBAO?" 登录 - 自爆 - "+c:b==OprateResult.OPRATE_RESULT_GENDER_ILLEGAL?" 登录 - 角色种类异常 - "+c:"未知错误1  OPRATE_TYPE_LOGIN "+b+"    "+c:a==OprateResult.OPRATE_TYPE_KICKING?b==OprateResult.KICKING_TYPE_GM_LOCK_IP?" 踢人 - 封IP - "+c:b==OprateResult.KICKING_TYPE_GM_LOCK_ACCOUNT?" 踢人 - 封号 - "+c:b==OprateResult.KICKING_TYPE_GM_KICKING?" 踢人 - 从GM表中读取的踢人 - "+c:b==OprateResult.KICKING_TYPE_KUANGCHANG_RELIVE?" 踢人 - 荒芜矿场非法复活 - "+c:b==OprateResult.KICKING_TYPE_FUCK_PINGBI?" 踢人 - 聊天点带屏蔽词 - "+c:b==OprateResult.KICKING_TYPE_QUEST_GET_ITEM?" 踢人 - 刷物品 - "+c:b==OprateResult.KICKING_TYPE_NOT_MONEY?" 踢人 - 钱负数还继续消费 - "+c:"未知错误1  OPRATE_TYPE_KICKING "+b+"    "+c:a==OprateResult.OPRATE_TYPE_JUMP?b==OprateResult.JUMP_RESULT_NOMAL?" 跳 - 无，默认结果 - "+c:b==OprateResult.JUMP_RESULT_DEAD?" 跳 - 死了你还跳，果断是诈尸 - "+c:b==OprateResult.JUMP_RESULT_ENERGY?" 跳 - 体力不足 - "+c:b==OprateResult.JUMP_RESULT_MAP_CANT_JUMP?" 跳 - 地图无法跳跃 - "+c:b==OprateResult.JUMP_RESULT_CANT_JUMP?" 跳 - 玩家被限制不能跳跃 - "+c:b==OprateResult.JUMP_RESULT_MAX_DISTANCE?" 跳 - 超过最大距离 - "+c:b==OprateResult.JUMP_RESULT_WRONG_COORD?" 跳 - 无效坐标，障碍点之流 - "+c:b==OprateResult.JUMP_RESULT_SPELL_CD?" 跳 - 跳跃技能cd中 - "+c:b==OprateResult.JUMP_RESULT_NOT_ACTIVE_SPELL?" 跳 - 2段跳没有激活 - "+c:"未知错误1  OPRATE_TYPE_JUMP "+b+"    "+c:a==OprateResult.OPRATE_TYPE_ATTK_LOSE?b==OprateResult.ATTACK_LOST_CANTATTACK?" 攻击失败 - 被限制不能攻击 - "+c:b==OprateResult.ATTACK_LOST_TARGET_DEAD?" 攻击失败 - 目标已经死亡 - "+c:b==OprateResult.ATTACK_LOST_NEED_TARGET?" 攻击失败 - 攻击需要一个目标 - "+c:b==OprateResult.ATTACK_LOST_OUT_OF_RANGE?" 攻击失败 - 超出攻击范围 - "+c:b==OprateResult.ATTACK_LOST_WRONG_TARGET?" 攻击失败 - 错误的目标 - "+c:b==OprateResult.ATTACK_LOST_MOVING?" 攻击失败 - 正在移动状态下不能攻击 - "+c:"未知错误1  OPRATE_TYPE_ATTK_LOSE "+b+"    "+c:a==OprateResult.OPRATE_TYPE_SPELL_LOSE?b==OprateResult.LOST_RESON_SPELL_DOENT_EXIST?" 技能释放失败 - 技能不存在 - "+c:b==OprateResult.LOST_RESON_NOT_HAVE_SPELL?" 技能释放失败 - 你没有这个技能 - "+c:b==OprateResult.LOST_RESON_NOT_ENOUGH_ANGER?" 技能释放失败 - 怒气值不足 - "+c:b==OprateResult.LOST_RESON_SPELL_COOLDOWN?" 技能释放失败 - 冷却 - "+c:b==OprateResult.LOST_RESON_ALREADY_CAST?" 技能释放失败 - 已经在施法 - "+c:b==OprateResult.LOST_RESON_TARGET_DEAD?" 技能释放失败 - 目标已经死亡 - "+c:b==OprateResult.LOST_RESON_NEED_TARGET?" 技能释放失败 - 此技能需要一个目标 - "+c:b==OprateResult.LOST_RESON_JUMP_DENY?" 技能释放失败 - 跳跃状态不能施法 - "+c:b==OprateResult.LOST_RESON_SCENE_DENY?" 技能释放失败 - 场景禁止施法 - "+c:b==OprateResult.LOST_RESON_CAN_NOT_CAST?" 技能释放失败 - 无法施法 - "+c:b==OprateResult.LOST_RESON_HAS_CONFLICT_SPELL?" 技能释放失败 - 有技能冲突 - "+c:b==OprateResult.LOST_RESON_NOTHAS_CHUZHAN?" 技能释放失败 - 当前没有出战兵种 - "+c:b==OprateResult.LOST_RESON_WRONG_FACTION?" 技能释放失败 - 同一阵营不能攻击（争霸天下用） - "+c:b==OprateResult.LOST_RESON_ACTIVE_SPELL_SUCCESS?" 技能释放失败 - 技能激活成功 - "+c:b==OprateResult.LOST_RESON_IN_SAFE_ZONE?" 技能释放失败 - 安全区域不能攻击（大沼泽用） - "+c:b==OprateResult.LOST_RESON_YXT_WRONG_FACTION?" 技能释放失败 - 同一阵营不能攻击（英雄帖用） - "+c:b==OprateResult.LOST_RESON_PVP_STATE?" 技能释放失败 - PVP状态不能释放 - "+c:"未知错误1  OPRATE_TYPE_SPELL_LOSE "+b+"    "+c:a==OprateResult.OPRATE_TYPE_INTERACTION?b==OprateResult.INTERACTION_TOO_FAR?" 交互,如使用GAMEOBJ 与NPC对话，交接任务等 - NPC太远 - "+c:b==OprateResult.INTERACTION_BOOK_DAILYNUM_FULL?" 交互,如使用GAMEOBJ 与NPC对话，交接任务等 - 奇遇日常任务次数已满 - "+c:b==OprateResult.INTERACTION_NO_ENOUGH_ENDURANCE?" 交互,如使用GAMEOBJ 与NPC对话，交接任务等 - 精力值不够 - "+c:b==OprateResult.INTERACTION_JHM_ERROR?" 交互,如使用GAMEOBJ 与NPC对话，交接任务等 - 激活码错误 - "+c:b==OprateResult.INTERACTION_WORSHIP?" 交互,如使用GAMEOBJ 与NPC对话，交接任务等 - 城主膜拜 - "+c:b==OprateResult.INTERACTION_JHM_HAVE?" 交互,如使用GAMEOBJ 与NPC对话，交接任务等 - 激活码奖励已领取 - "+c:b==OprateResult.INTERACTION_JHM_IS_USED?" 交互,如使用GAMEOBJ 与NPC对话，交接任务等 - 激活码已使用 - "+c:b==OprateResult.INTERACTION_JHM_NOT_USE_RANGE?" 交互,如使用GAMEOBJ 与NPC对话，交接任务等 - 不在使用范围内 - "+c:"未知错误1  OPRATE_TYPE_INTERACTION "+b+"    "+c:a==OprateResult.OPRATE_TYPE_USE_GAMEOBJECT?b==OprateResult.USE_GAMEOBJECT_SUCCEED?" 使用游戏对象 - 使用游戏对象成功 - "+c:b==OprateResult.USE_GAMEOBJECT_FAIL?" 使用游戏对象 - 使用游戏对象失败 - "+c:b==OprateResult.USE_GAMEOBJECT_QUEST?" 使用游戏对象 - 采集成功 - "+c:b==OprateResult.USE_GAMEOBJECT_TOO_FAST?" 使用游戏对象 - 采集速度太快 - "+c:"未知错误1  OPRATE_TYPE_USE_GAMEOBJECT "+b+"    "+c:a==OprateResult.OPRATE_TYPE_BAG?b==OprateResult.BAG_RESULT_NULL?" 包裹 - 路过的 - "+c:b==OprateResult.BAG_RESULT_ITEM_NOT_EXIST?" 包裹 - 物品不存在 - "+c:b==OprateResult.BAG_RESULT_CHANGE_ERROR?" 包裹 - 交换位置错误 - "+c:b==OprateResult.BAG_RESULT_DESTROY_BIND?" 包裹 - 删除绑定的 - "+c:b==OprateResult.BAG_RESULT_ITEM_NOT_SELF?" 包裹 - 不是自己的物品 - "+c:b==OprateResult.BAG_RESULT_REPAIR_FULL?" 包裹 - 修理耐久已满的物品 - "+c:b==OprateResult.BAG_RESULT_BAG_NOT_EXIST?" 包裹 - 包裹不存在 - "+c:b==OprateResult.BAG_RESULT_POS_NOT_EXIST?" 包裹 - 包裹位置不存在 - "+c:b==OprateResult.BAG_RESULT_DESTROY_TOOMUCH?" 包裹 - 数量不够删 - "+c:b==OprateResult.BAG_RESULT_BAN_FOR_TRADE?" 包裹 - 交易中不允许操作 - "+c:b==OprateResult.BAG_RESULT_SPLIT_FAILURE?" 包裹 - 物品拆分失败 - "+c:b==OprateResult.BAG_RESULT_LACK_USER?" 包裹 - 数量不够删 - "+c:b==OprateResult.BAG_RESULT_BAG_FULL?" 包裹 - 包裹放不下 - "+c:b==OprateResult.BAG_RESULT_MAX_COUNT?" 包裹 - 超过最大拥有数 - "+c:b==OprateResult.BAG_RESULT_SELL_BIND?" 包裹 - 定物品不允许出售 - "+c:b==OprateResult.BAG_RESULT_REPAIR_OK?" 包裹 - 铜钱宝箱开启成功 - "+c:b==OprateResult.BAG_RESULT_REPAIR_MONEY_LACK?" 包裹 - 钱不够无法修理 - "+c:b==OprateResult.BAG_RESULT_EXTENSION_BAG?" 包裹 - 包裹不支持扩展 - "+c:b==OprateResult.BAG_RESULT_EXTENSION_MAX_SIZE?" 包裹 - 包裹大小已经最大 - "+c:b==OprateResult.BAG_RESULT_EXTENSION_MATERIAL_LACK?" 包裹 - 包裹扩展材料不足 - "+c:b==OprateResult.BAG_RESULT_EXTENSION_TRADE?" 包裹 - 交易中不允许包裹扩展 - "+c:b==OprateResult.BAG_RESULT_USE_ITEM_COUNT_MAX?" 包裹 - 使用物品数量达到上限 - "+c:b==OprateResult.BAG_RESULT_NOT_ITEM?" 包裹 - 没开出物品 - "+c:b==OprateResult.BAG_RESULT_ITEM_USEING?" 包裹 - 物品使用中 - "+c:b==OprateResult.BAG_RESULT_GET_ITEMS?" 包裹 - 获得物品（元宝卡） - "+c:b==OprateResult.BAG_RESULT_USE_ITEMS?" 包裹 - 使用物品（装备宝箱） - "+c:b==OprateResult.BAG_RESULT_GET_ITEMS_ORANGE?" 包裹 - 开启橙色装备 - "+c:b==OprateResult.BAG_RESULT_USE_ITEMS_GENERALS?" 包裹 - 使用物品（将魂使用） - "+c:b==OprateResult.BAG_RESULT_GET_ITEMS_CABX?" 包裹 - 获得 财神宝箱 - "+c:b==OprateResult.BAG_RESULT_GET_ITEMS_CABX_BUFF?" 包裹 - 获得 财神宝箱的buff 提示 - "+c:b==OprateResult.BAG_RESULT_ALREADY_KAIGUANG?" 包裹 - 设备已经开光 - "+c:b==OprateResult.BAG_RESULT_EXCHANGE_SUCCESS?" 包裹 - 穿上装备成功 - "+c:b==OprateResult.BAG_RESULT_OPEN_ITEMS_SUCCESS?" 包裹 - 打开物品成功（用于概率获得） - "+c:b==OprateResult.BAG_RESULT_OPEN_ITEMS_FAIL?" 包裹 - 打开物品失败（用于概率获得） - "+c:b==OprateResult.BAG_RESULT_GET_ITEMS_GENERALS_EQUIP?" 包裹 - 使用物品获得武将装备 - "+c:b==OprateResult.BAG_RESULT_GET_SHOWHAND_JIEZHI?" 包裹 - 获得梭哈戒指 - "+c:b==OprateResult.BAG_RESULT_USE_WUJIANG_EXP_CARD?" 包裹 - 使用武将经验卡 - "+c:b==OprateResult.BAG_RESULT_USE_ITEMS_SUCCESS?" 包裹 - 物品使用成功 - "+c:b==OprateResult.BAG_RESULT_BAG_FULL_SEND_MAIL?" 包裹 - 包裹已满 发送邮箱提示 - "+c:b==OprateResult.BAG_RESULT_BAG_FULL_AUTO_SELL?" 包裹 - 包裹已满自动出售 - "+c:"未知错误1  OPRATE_TYPE_BAG "+b+"    "+c:a==OprateResult.OPRATE_TYPE_TRADE?b==OprateResult.TRADE_RESULT_TYPE_NOT_TARGET?" 交易 - 没有交易对象 - "+c:b==OprateResult.TRADE_RESULT_TYPE_TRADEING?" 交易 - 已经交易中无法继续处理交易申请 - "+c:b==OprateResult.TRADE_RESULT_TYPE_NOT_TRADE?" 交易 - 非交易进行中无效操作 - "+c:b==OprateResult.TRADE_RESULT_TYPE_BAG_SIZE?" 交易 - 包裹空间不足交易失败 - "+c:b==OprateResult.TRADE_RESULT_TYPE_UNRECOGNISED?" 交易 - 未确认交易物品 - "+c:b==OprateResult.TRADE_RESULT_TYPE_TARGET_CANCEL?" 交易 - 对方交已取消交易 - "+c:b==OprateResult.TRADE_RESULT_TYPE_LACK_MONEY?" 交易 - 金钱不足 - "+c:b==OprateResult.TRADE_RESULT_TYPE_IS_BIND?" 交易 - 绑定物品不允许交易 - "+c:"未知错误1  OPRATE_TYPE_TRADE "+b+"    "+c:a==OprateResult.OPRATE_TYPE_CHAT?b==OprateResult.CHAT_RESULT_NOT_PLAYER?" 聊天 - 找不到玩家 - "+c:b==OprateResult.CHAT_RESULT_IS_GAG?" 聊天 - 被禁言 - "+c:b==OprateResult.CHAT_LEVEL_WHISPER_LEVEL_NO?" 聊天 - 私聊等级不足 - "+c:b==OprateResult.CHAT_LEVEL_WORLD_LEVEL_NO?" 聊天 - 世界聊天等级不足 - "+c:b==OprateResult.CHAT_RESULT_CHECK_LIMIT?" 聊天 - 您说话太快了，赶紧练级等等再聊天吧… - "+c:b==OprateResult.CHAT_RESULT_NO_FACTION?" 聊天 - 你暂无帮派 - "+c:b==OprateResult.CHAT_RESULT_NO_GROUP?" 聊天 - 你暂无队伍 - "+c:"未知错误1  OPRATE_TYPE_CHAT "+b+"    "+c:a==OprateResult.OPERTE_TYPE_RECEIVE_GIFT_PACKS?b==OprateResult.RECEIVE_GIFT_PACKS_NOT_FIND?" 领取补偿礼包 - 找不到这条补偿礼包 - "+c:b==OprateResult.RECEIVE_GIFT_PACKS_CHAR_ERROR?" 领取补偿礼包 - 这礼包不是你的 - "+c:b==OprateResult.RECEIVE_GIFT_PACKS_CHAR_CREATE?" 领取补偿礼包 - 礼包指定的发放起始时间在你角色创建时间之前 - "+c:b==OprateResult.RECEIVE_GIFT_PACKS_RECEIVED?" 领取补偿礼包 - 该礼包你已经领取过了 - "+c:b==OprateResult.RECEIVE_GIFT_PACKS_ONLINE_AWARD?" 领取补偿礼包 - 在线礼包奖励 - "+c:b==OprateResult.RECEIVE_GIFT_PACKS_ONLINE_XIANSHI?" 领取补偿礼包 - 在线礼包显示用 - "+c:"未知错误1  OPERTE_TYPE_RECEIVE_GIFT_PACKS "+b+"    "+c:a==OprateResult.OPERTE_TYPE_QUEST?b==OprateResult.INVALIDREASON_QUEST_FAILED_LOW_LEVEL?" 任务 -  等级太低 You are not high enough level for that quest. - "+c:b==OprateResult.INVALIDREASON_QUEST_FAILED_WRONG_RACE?" 任务 -  这个任务对于你的角色类别是无效的 That quest is not available to your race. - "+c:b==OprateResult.INVALIDREASON_QUEST_ALREADY_DONE?" 任务 -  任务已经完成 You have completed that quest. - "+c:b==OprateResult.INVALIDREASON_QUEST_ONLY_ONE_TIMED?" 任务 -  任务只能做一次 You can only be on one timed quest at a time. - "+c:b==OprateResult.INVALIDREASON_QUEST_ALREADY_ON?" 任务 -  已经在任务中 You are already on that quest. - "+c:b==OprateResult.INVALIDREASON_QUEST_FAILED_EXPANSION?" 任务 -  物品太少 This quest requires an expansion enabled account. - "+c:b==OprateResult.INVALIDREASON_QUEST_ALREADY_ON2?" 任务 -  已经在任务中 ? You are already on that quest. - "+c:b==OprateResult.INVALIDREASON_QUEST_FAILED_MISSING_ITEMS?" 任务 -  没有完成任务需要的物品 You don't have the required items with you. Check storage. - "+c:b==OprateResult.INVALIDREASON_QUEST_FAILED_NOT_ENOUGH_MONEY?" 任务 -  没有足够的金钱完成任务 You don't have enough money for that quest. - "+c:b==OprateResult.INVALIDREASON_DAILY_QUESTS_REMAINING?" 任务 -  你已经完成了每天的25个任务 You have already completed 25 daily quests today. - "+c:b==OprateResult.INVALIDREASON_QUEST_FAILED_CAIS?" 任务 -  有疲劳时间无法完成任务 You cannot complete quests once you have reached tired time. - "+c:b==OprateResult.INVALIDREASON_DAILY_QUEST_COMPLETED_TODAY?" 任务 -  已经完成当天的任务 You have completed that daily quest today. - "+c:b==OprateResult.INVALIDREASON_QUEST_FINISH_ALL_RIHUAN?" 任务 - 完成所有日环任务了 - "+c:"未知错误1  OPERTE_TYPE_QUEST "+b+"    "+c:a==OprateResult.OPERTE_TYPE_NPCBUY?b==OprateResult.QUEST_TYPE_PROCESS?" 购买商品 - 任务进度, 名字:1/1 - "+c:"未知错误1  OPERTE_TYPE_NPCBUY "+b+"    "+c:a==OprateResult.OPERTE_TYPE_FUBEN?b==OprateResult.NPC_BUY_ITEM_NO_EXIST?" 副本 - 物品不存在 - "+c:b==OprateResult.NPC_BUY_ITEM_UNDER?" 副本 - 下架的物品 - "+c:b==OprateResult.NPC_BUY_ITEM_NO_OPEN?" 副本 - 商品还未到开放时间 - "+c:b==OprateResult.NPC_BUY_ITEM_OUT_TIME?" 副本 - 商品已过期 - "+c:b==OprateResult.NPC_BUY_BAG_OUT_SIZE?" 副本 - 包裹放不下了 - "+c:b==OprateResult.NPC_BUY_MONEY_NO_ENOUGH?" 副本 - 钱不够了 - "+c:b==OprateResult.NPC_BUY_MONEY_TRANSFINITE?" 副本 - 购买金额过大 - "+c:b==OprateResult.NPC_BUY_SELL_OUT?" 副本 - 超出商品限购次数 - "+c:"未知错误1  OPERTE_TYPE_FUBEN "+b+"    "+c:a==OprateResult.OPERTE_TYPE_KUAFU?b==OprateResult.FUBEN_OPRATE_NO_GROUP_STATE?" 跨服 - 玩家不在组队状态 - "+c:b==OprateResult.FUBEN_OPRATE_NOT_TWO_PEOPLE?" 跨服 - 队伍不是2个人 - "+c:b==OprateResult.FUBEN_OPRATE_NO_ENERGY?" 跨服 - 体力不足 - "+c:b==OprateResult.FUBEN_OPRATE_NO_MONEY?" 跨服 - 元宝不足 - "+c:b==OprateResult.FUBEN_OPRATE_TEAM_NO_LEVEL?" 跨服 - 队友等级不足 - "+c:b==OprateResult.FUBEN_OPRATE_TEAM_NO_ENERGY?" 跨服 - 队友体力不足 - "+c:b==OprateResult.FUBEN_OPRATE_NO_GROUP?" 跨服 - 队伍已经解散 - "+c:b==OprateResult.FUBEN_OPRATE_SEND_TEAM_FRIEND?" 跨服 - 邀请队友进入组队副本 - "+c:b==OprateResult.FUBEN_OPRATE_TEAM_REFUSE_ENETR?" 跨服 - 队友拒绝进入组队副本 - "+c:b==OprateResult.FUBEN_OPRATE_TEAM_ON_FUBEN_MAP?" 跨服 - 队友在副本地图中 - "+c:b==OprateResult.FUBEN_OPRATE_TEAM_HAVE_FLAGS?" 跨服 - 队友已经发起邀请了 - "+c:b==OprateResult.FUBEN_OPRATE_REFRESH_BOSS?" 跨服 - 副本刷出boss - "+c:b==OprateResult.FUBEN_OPRATE_KILLED_BOSS?" 跨服 - 玩家成功击杀了boss - "+c:b==OprateResult.FUBEN_OPRATE_MORE_TIMES?" 跨服 - 全屏秒杀超过最大次数 - "+c:b==OprateResult.FUBEN_OPRATE_NO_CREATURES?" 跨服 - 全屏秒杀当前没有怪物 - "+c:"未知错误1  OPERTE_TYPE_KUAFU "+b+"    "+c:a==OprateResult.OPERTE_TYPE_RANK_LIST?b==OprateResult.KUAFU_OPERATE_CONN_DISCONN?" 排行榜 - 游戏服与世界服的链接断开了 - "+c:b==OprateResult.KUAFU_OPERATE_HASNOT_REGISTER?" 排行榜 - 本服还没有向世界服注册成功 - "+c:"未知错误1  OPERTE_TYPE_RANK_LIST "+b+"    "+c:a==OprateResult.OPERTE_TYPE_CLOSE?b==OprateResult.RANK_LIST_OPERATE_SUCCEED?" 连接关闭 - 成功 - "+c:b==OprateResult.RANK_LIST_OPERATE_TYPE_ERROR?" 连接关闭 - 查询类型错误 - "+c:b==OprateResult.RANK_LIST_OPERATE_OUT_OF_RANGE?" 连接关闭 - 查询范围超出界限 - "+c:b==OprateResult.RANK_LIST_OPERATE_MAX_LIKE?" 连接关闭 - 点赞已超过最大次数 - "+c:b==OprateResult.RANK_LIST_OPERATE_HAS_LIKE?" 连接关闭 - 已点过赞了 - "+c:"未知错误1  OPERTE_TYPE_CLOSE "+b+"    "+c:a==OprateResult.OPERTE_TYPE_HOSTING?b==OprateResult.ACTIVITY_OPERATE_NOTVIP?" 托管 - 你不是vip无法领取vip奖励 - "+c:b==OprateResult.ACTIVITY_OPERATE_NOENOUGH?" 托管 - 活跃度不够无法领取 - "+c:b==OprateResult.ACTIVITY_OPERATE_HASGET?" 托管 - 已经领取过该奖励 - "+c:"未知错误1  OPERTE_TYPE_HOSTING "+b+"    "+c:a==OprateResult.OPERTE_TYPE_STRENGTH?b==OprateResult.ACHIEVE_OPERATE_NO_FIND?" 强化 - 找不到成就 - "+c:b==OprateResult.ACHIEVE_OPERATE_NO_GET?" 强化 - 尚未达成成就 - "+c:b==OprateResult.ACHIEVE_OPERATE_HASGET?" 强化 - 已经领取过成就奖励 - "+c:b==OprateResult.ACHIEVE_OPERATE_NO_ALL?" 强化 - 总成就不够无法领取 - "+c:b==OprateResult.ACHIEVE_OPERATE_TITLE_SUC?" 强化 - 设置称号成功 - "+c:b==OprateResult.ACHIEVE_OPERATE_TITLE_FAL?" 强化 - 称号不存在无法设置 - "+c:b==OprateResult.ACHIEVE_OPERATE_NO_MONEY?" 强化 - 钱不够了不能找回 - "+c:"未知错误1  OPERTE_TYPE_STRENGTH "+b+"    "+c:a==OprateResult.OPERTE_TYPE_CHANGE_BATTLE_MODE_LOSE?b==OprateResult.ATHLETICS_OPERATE_NO_LEV?" 切换战斗模式失败 - 等级不够{1}，不能参加3v3 - "+c:b==OprateResult.ATHLETICS_OPERATE_NO_FORCE?" 切换战斗模式失败 - 战力不够{1}，不能参加3v3 - "+c:b==OprateResult.ATHLETICS_OPERATE_NO_OPEN?" 切换战斗模式失败 - 不在活动时间，不能参加 - "+c:b==OprateResult.ATHLETICS_OPERATE_NO_TIME_BUY?" 切换战斗模式失败 - 3v3次数已用完，可以购买次数 - "+c:b==OprateResult.ATHLETICS_OPERATE_NO_TIME?" 切换战斗模式失败 - 3v3次数已用完，请明天再来 - "+c:b==OprateResult.ATHLETICS_OPERATE_IN_MATCH?" 切换战斗模式失败 - 正在匹配中 - "+c:b==OprateResult.ATHLETICS_OPERATE_MAX_BUY?" 切换战斗模式失败 - 超出最大购买次数 - "+c:b==OprateResult.ATHLETICS_OPERATE_NO_MONEY?" 切换战斗模式失败 - 超出最大购买次数 - "+c:b==OprateResult.ATHLETICS_OPERATE_HAS_DAY_REWARD?" 切换战斗模式失败 - 已经领取该奖励 - "+c:b==OprateResult.ATHLETICS_OPERATE_NO_DAY_REWARD?" 切换战斗模式失败 - 尚未到达次数{1} - "+c:"未知错误1  OPERTE_TYPE_CHANGE_BATTLE_MODE_LOSE "+b+"    "+c:a==OprateResult.OPERTE_TYPE_SOCIAL?b==OprateResult.ATHLETICS_OPERATE_BUFF_OCCUR?" 社交 - buff产生 - "+c:"未知错误1  OPERTE_TYPE_SOCIAL "+b+"    "+c:a==OprateResult.OPERTE_TYPE_FACTION?b==OprateResult.DOUJIAN_OPERATE_NO_LEV?" 帮派 - 等级不够，需要{0}才能参与斗剑台 - "+c:b==OprateResult.DOUJIAN_OPERATE_ZHUCHENG?" 帮派 - 只能在主城中参加活动 - "+c:b==OprateResult.DOUJIAN_OPERATE_NO_TIME?" 帮派 - 挑战次数已满 - "+c:b==OprateResult.DOUJIAN_OPERATE_IN_CD?" 帮派 - 挑战CD中 - "+c:b==OprateResult.DOUJIAN_OPERATE_MAX_TIME?" 帮派 - 超过最大购买次数 - "+c:b==OprateResult.DOUJIAN_OPERATE_NO_MONEY?" 帮派 - 元宝不足购买斗剑次数 - "+c:b==OprateResult.DOUJIAN_OPERATE_NO_MONEY_CD?" 帮派 - 元宝不足不能清理CD - "+c:"未知错误1  OPERTE_TYPE_FACTION "+b+"    "+c:a==OprateResult.OPERTE_TYPE_FIELD_BOSS?b==OprateResult.DOUJIAN_OPERATE_SELF_BATTLE?" 野外BOSS - 自己正在被别人挑战 - "+c:b==OprateResult.DOUJIAN_OPERATE_OTHER_BATTLE?" 野外BOSS - 挑战的人正在被别人挑战 - "+c:b==OprateResult.DOUJIAN_OPERATE_COUNTDOWN?" 野外BOSS - 刷新在冷却中 - "+c:"未知错误1  OPERTE_TYPE_FIELD_BOSS "+b+"    "+c:a==OprateResult.OPERTE_TYPE_WORLD_BOSS?b==OprateResult.PLAYER_CLOSE_OPERTE_APPD_ONE1?" 世界BOSS - 插入单个物品时，包裹id 超过最大值 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_APPD_ONE2?" 世界BOSS - 创建玩家其他的对象的时候，发现之前已经创建过了 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_APPD_ONE3?" 世界BOSS - 托管到期 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_APPD_ONE4?" 世界BOSS - GM命令 踢人 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_APPD_ONE5?" 世界BOSS - GM命令 回档数据 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_APPD_ONE6?" 世界BOSS -  踢玩家下线 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE4?" 世界BOSS - 帐号信息不完整 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE5?" 世界BOSS - Char_Create put  fail! - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE6?" 世界BOSS - 登录时候不是我的角色 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE7?" 世界BOSS - 待定 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE8?" 世界BOSS - 跨服回来的玩家 m_player 不存在 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE9?" 世界BOSS - 初始化数据库数据失败 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE10?" 世界BOSS - 看看有没有玩家数据需要修复或者升级的 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE11?" 世界BOSS - 重设元宝数量 取数据时失败 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE12?" 世界BOSS - 踢人 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE13?" 世界BOSS - 如果连接不存在,则根据解开的session结果进行创建对应的session实例(on_create_conn_get_session create_sesstion duplicate) - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE14?" 世界BOSS - 客户端连接失败 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE15?" 世界BOSS - 把玩家由pk服回到游戏服,登录失败 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE16?" 世界BOSS - 检测跨服玩家是否可以登陆 -玩家不存在 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE17?" 世界BOSS - 检测跨服玩家是否可以登陆 -超时 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE18?" 世界BOSS - 登陆队列 context->GetGuid().empty(） - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE19?" 世界BOSS - 合服检测 手游下线 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE20?" 世界BOSS - 通知场景服玩家加入地图 m_scened_conn不存在 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE21?" 世界BOSS - 玩家加入地图实例时，玩家binlg不存在  - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE22?" 世界BOSS - 玩家加入地图 创建实例失败 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE23?" 世界BOSS - 如果已登录过 !m_account.empty() - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE24?" 世界BOSS - 帐号名称超长 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE25?" 世界BOSS - 验证是否可以登录本服验证失败 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE26?" 世界BOSS - 账户表数据不存在 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE27?" 世界BOSS - 玩家已在线关闭掉旧链接 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE28?" 世界BOSS - 手游登录，但是还没有玩家角色 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE39?" 世界BOSS - 数据准备完毕，玩家开始登录 玩家不存在 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE40?" 世界BOSS - 获取sessionKey对象,已经登录过 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE41?" 世界BOSS - 获取sessionKey对象，帐户名称，并且判断一下是否超长(超长则失败) - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE42?" 世界BOSS - 获取sessionKey对象，Get_Session: other_data size is wrong - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE43?" 世界BOSS - 获取sessionKey对象，验证session_key是否可以登录这个服务器（为不可登录时候断开） - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE44?" 世界BOSS - 获取sessionKey对象，LogindContext::Get_Session:%s load account fail(获取帐号表数据异常) - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE45?" 世界BOSS - 获取sessionKey对象，LogindContext::Get_Session:%s Get_Chars_List fail（获取角色列表数据异常） - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE46?" 世界BOSS - 跨服读取数据失败 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE47?" 世界BOSS - 运气不好，登录时碰上正在释放自己数据 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE48?" 世界BOSS - 合服检测，从服玩家状态 不为 STATUS_LOGGEDIN - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE49?" 世界BOSS - 封号 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE50?" 世界BOSS - 踢人 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE51?" 世界BOSS - 玩家不存在时关闭连接 LuaPlayerLogin %s, but not found - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE52?" 世界BOSS - 角色在其他地方登陆 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE53?" 世界BOSS - 登陆是无法获得数据 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE54?" 世界BOSS - 登陆时 player login call puts fail %s, fd %u - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE55?" 世界BOSS - on_create_conn_get_session create_mobile_context duplicate - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE56?" 世界BOSS - 登陆失败 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE57?" 世界BOSS - Gm命令 @自爆 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE58?" 世界BOSS - PK服登陆数据异常 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_ONE59?" 世界BOSS - 从数据库读取玩家数据失败 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_2046?" 世界BOSS - 一个角色对应两个账号	 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_2047?" 世界BOSS - 改名字的时候找不到account，刷新就可以过了 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_LOGDIN_2048?" 世界BOSS - session的account不等于player的account,简单来说,串号了. - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_SCREND_ONE29?" 世界BOSS - 停止移动，地图模板为null - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_SCREND_ONE30?" 世界BOSS - 对象移动，地图模板为null - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_SCREND_ONE31?" 世界BOSS - 对象移动的时候  状态不为 STATUS_LOGGEDIN  时候 （assert error: Handle_Unit_Move  ASSERT(status_ == STATUS_LOGGEDIN)） - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_SCREND_ONE32?" 世界BOSS - 传送是 状态不为 STATUS_LOGGEDIN （ScenedContext::Teleport status_ != STATUS_LOGGEDIN） - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_SCREND_ONE33?" 世界BOSS - 如果玩家未正确的加入地图，这个时间传送也是失败的 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_SCREND_ONE34?" 世界BOSS - 任务链条中断 assert error: Handle_QuestGiver_Status_Query  ASSERT(questGetter) - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_SCREND_ONE35?" 世界BOSS - 玩家被杀死时，地图数据不存在 Player::OnKilled ASSERT(GetMap()) - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_SCREND_ONE36?" 世界BOSS - 加入地图宠物不存在的时候  Player::OnJoinMap ASSERT(m_pets.empty()) - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_SCREND_ONE37?" 世界BOSS - 任务管理者不存在的时候 Player::Create ASSERT(!m_questMgr) - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_SCREND_ONE38?" 世界BOSS - 传送超时1分钟 - "+c:b==OprateResult.PLAYER_CLOSE_OPERTE_POLICED_4001?" 世界BOSS - 在日志服重复登录 - "+c:"未知错误1  OPERTE_TYPE_WORLD_BOSS "+b+"    "+c:a==OprateResult.OPRATE_TYPE_MOUNT_QICHENG?b==OprateResult.OPERTE_TYPE_FACTION_IS_HAVE?" 坐骑骑乘 - 你已经在帮派中 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_NAME_ERR?" 坐骑骑乘 - 帮派名称超过6个字符 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_NAME_HAVE_FUCK?" 坐骑骑乘 - 帮派名称中有非法字符 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_NAME_REPEAT?" 坐骑骑乘 - 帮派名称重复 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_CREATE_MAX?" 坐骑骑乘 - 帮派数量达到上限 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_CREATE_COST?" 坐骑骑乘 - 元宝不足无法创建帮派 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_NOT_MANAGER?" 坐骑骑乘 - 不是帮主或副帮主无法编辑 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_NOTICE_ERR?" 坐骑骑乘 - 帮派公告超过144个字符 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_NOTICE_ERR_PB?" 坐骑骑乘 - 帮派公告包含非法字符 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_LEV_LOW?" 坐骑骑乘 - 等级不够，不能加入帮派 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_MEMBER_MAX_COUNT?" 坐骑骑乘 - 帮派人数已满无法加入 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_JOIN_SUCESS?" 坐骑骑乘 - 恭喜你加入帮派 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_FACTION_REFUSED_JOIN?" 坐骑骑乘 - 你被拒绝加入帮派 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_KICKED?" 坐骑骑乘 - 你被移出帮派 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_KICK_SUCCESS?" 坐骑骑乘 - 踢出帮派成员 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_MAX_ZHIWEI?" 坐骑骑乘 - 职位人数已满 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_APPOINT_SUCCESS?" 坐骑骑乘 - 任命成功 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_PROMOTED?" 坐骑骑乘 - 你被任命为 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_APPOINT_NOSELF?" 坐骑骑乘 - 自己不能任命自己  - "+c:b==OprateResult.OPERTE_TYPE_FACTION_DONATIONMAX?" 坐骑骑乘 - 捐献次数超过最大次数 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_DONATION_GOLD?" 坐骑骑乘 - 捐献所需金币不够 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_DONATION_YB?" 坐骑骑乘 - 捐献所需元宝不够 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_SHOP_NUMLOW?" 坐骑骑乘 - 商品剩余数量不足无法购买 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_DEVOTE?" 坐骑骑乘 - 帮贡不足 - "+c:b==OprateResult.OPEATE_TYPE_FACTION_MONEY_ERR?" 坐骑骑乘 - 帮派资金不足 - "+c:b==OprateResult.OPEATE_TYPE_FACTION_LEVEL_UP?" 坐骑骑乘 - 帮派升级成功 - "+c:b==OprateResult.OPEATE_TYPE_FACTION_NOT_JOIN?" 坐骑骑乘 - 没有可以加入的帮派 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_PLAYER_OFFLINE?" 坐骑骑乘 - 对方不在线,无法加入成员 - "+c:"未知错误1  OPRATE_TYPE_MOUNT_QICHENG "+b+"    "+c:a==OprateResult.OPRATE_TYPE_TELEPORT?b==OprateResult.OPERTE_TYPE_FACTION_BOSS_START?" 传送 - 召唤boss - "+c:"未知错误1  OPRATE_TYPE_TELEPORT "+b+"    "+c:a==OprateResult.OPRATE_TYPE_UPGRADE?b==OprateResult.OPERTE_TYPE_FACTION_GIFT_THANK?" 游戏中的升级操作 - 感谢完成 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_GIFT_THANK_ALL?" 游戏中的升级操作 - 全部感谢完成 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_GIFT_GET_EXREWARD?" 游戏中的升级操作 - 领取成功 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_GIFT_GET_EXREWARD_ALL?" 游戏中的升级操作 - 全部领取成功 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_GIFT_SEND?" 游戏中的升级操作 - 赠送成功 - "+c:b==OprateResult.OPERTE_TYPE_FACTION_GIFT_SEND_FAIL?" 游戏中的升级操作 - 赠送成功 - "+c:"未知错误1  OPRATE_TYPE_UPGRADE "+b+"    "+c:a==OprateResult.OPRATE_TYPE_ACTIVITY?b==OprateResult.OPERTE_TYPE_FACTION_GIFT_NOTICE?" 活动 - 礼物广播 - "+c:"未知错误1  OPRATE_TYPE_ACTIVITY "+b+"    "+c:a==OprateResult.OPRATE_TYPE_ACHIEVE?b==OprateResult.OPERTE_TYPE_FACTION_BOSSDEFENSE_TIME_ERROR?" 成就 - 非法时间 无法挑战boss - "+c:"未知错误1  OPRATE_TYPE_ACHIEVE "+b+"    "+c:a==OprateResult.OPRATE_TYPE_ATHLETICS?b==OprateResult.OPERTE_TYPE_SOCIAL_HAS_SEND?" 竞技 - 好友请求信息已发送 - "+c:b==OprateResult.OPERTE_TYPE_SOCIAL_NOT_FIND?" 竞技 - 角色不存在或者角色不在线 - "+c:b==OprateResult.OPERTE_TYPE_SOCIAL_SELF_FULL?" 竞技 - 自己好友列表已满 - "+c:b==OprateResult.OPERTE_TYPE_SOCIAL_TARGET_FULL?" 竞技 - 对方好友列表已满 - "+c:b==OprateResult.OPERTE_TYPE_SOCIAL_ALREADY_FRIEND?" 竞技 - 对方已经是你的好友 - "+c:b==OprateResult.OPERTE_TYPE_SOCIAL_ADD_MYSELF?" 竞技 - 不能自己添加自己为好友 - "+c:b==OprateResult.OPERTE_TYPE_SOCIAL_HAS_SEND_ADD?" 竞技 - 已经发送申请 - "+c:b==OprateResult.OPERTE_TYPE_SOCIAL_NO_MONEY?" 竞技 - 元宝或者金币不足 - "+c:b==OprateResult.OPERTE_TYPE_SOCIAL_NOT_ENEMY?" 竞技 - 对方不是仇人 - "+c:b==OprateResult.OPERTE_TYPE_SOCIAL_ENEMY_OFFLINE?" 竞技 - 对方处于离线中 - "+c:b==OprateResult.OPERTE_TYPE_SOCIAL_ENEMY_NOT_IN_FIELD?" 竞技 - 对方不在野外 - "+c:b==OprateResult.OPERTE_TYPE_SOCIAL_REVENGE_TIMES_NOT_ENOUGH?" 竞技 - 复仇传送次数不足 - "+c:b==OprateResult.OPERTE_TYPE_SOCIAL_RENAME_SUCCESS?" 竞技 - 改名成功 - "+c:b==OprateResult.OPERTE_TYPE_SOCIAL_OTHNER_FACTION?" 竞技 - 对方已在帮派 - "+c:b==OprateResult.OPERTE_TYPE_SOCIAL_SAME_FACTION?" 竞技 - 对方已在同帮派 - "+c:"未知错误1  OPRATE_TYPE_ATHLETICS "+b+"    "+c:a==OprateResult.OPRATE_TYPE_XIANFU?b==OprateResult.HOSTING_OPERTE_IS_SELF?" 仙府夺宝 - 无法对自己操作 - "+c:b==OprateResult.HOSTING_OPERTE_LEVEL_NOT?" 仙府夺宝 - 等级不足 - "+c:b==OprateResult.HOSTING_OPERTE_IS_HOSTING?" 仙府夺宝 - 托管中 - "+c:b==OprateResult.HOSTING_OPERTE_IS_HOSTING_APPLY?" 仙府夺宝 - 托管申请 - "+c:b==OprateResult.HOSTING_OPERTE_FRIEND_NOT?" 仙府夺宝 - 好友不存在 - "+c:b==OprateResult.HOSTING_OPERTE_HAS_NOT_24H?" 仙府夺宝 - 还没到24小时 - "+c:b==OprateResult.HOSTING_OPERTE_FRIEND_OUTLINE?" 仙府夺宝 - 好友不在线 - "+c:b==OprateResult.HOSTING_OPERTE_FRIEND_ERR?" 仙府夺宝 - 托管好友错误 - "+c:b==OprateResult.HOSTING_OPERTE_NOT_HOSTING?" 仙府夺宝 - 不在托管中 - "+c:b==OprateResult.HOSTING_OPERTE_FRIEND_ONLINE?" 仙府夺宝 - 好友在线 - "+c:b==OprateResult.HOSTING_OPERTE_LOGIN_HOSTING?" 仙府夺宝 - 托管登录中 - "+c:b==OprateResult.HOSTING_OPERTE_FRIEND_APPLY?" 仙府夺宝 - 申请发送 - "+c:b==OprateResult.HOSTING_OPERTE_LOGIN?" 仙府夺宝 - 登录 - "+c:b==OprateResult.HOSTING_OPERTE_SUCCESS?" 仙府夺宝 - 托管申请成功 - "+c:b==OprateResult.HOSTING_OPERTE_CANCEL?" 仙府夺宝 - 取消托管 - "+c:b==OprateResult.HOSTING_OPERTE_REFUSED?" 仙府夺宝 - 拒绝托管 - "+c:b==OprateResult.HOSTING_OPERTE_NOT_DUE_TO?" 仙府夺宝 - 托管未到期 - "+c:b==OprateResult.HOSTING_OPERTE_FRIEND_HOSTING_LOGIN?" 仙府夺宝 - 对方托管登录中，无法操作 - "+c:b==OprateResult.HOSTING_OPERTE_FRIEND_NOT_HAS_YOU?" 仙府夺宝 - 对方好友列表没有你 - "+c:"未知错误1  OPRATE_TYPE_XIANFU "+b+"    "+c:a==OprateResult.OPRATE_TYPE_REWARD?b==OprateResult.STRENGTH_OPERTE_FAIL?" 获得物品 - 强化失败 - "+c:"未知错误1  OPRATE_TYPE_REWARD "+b+"    "+c:a==OprateResult.OPRATE_TYPE_DOUJIAN?b==OprateResult.BATTLE_MODE_OPERTE_PEACE_MODE_DENY?" 斗剑台 - 战斗中不能切换和平模式 - "+c:b==OprateResult.BATTLE_MODE_OPERTE_PEACE_MODE_IN_CD?" 斗剑台 - 和平模式在CD中 - "+c:"未知错误1  OPRATE_TYPE_DOUJIAN "+b+"    "+c:a==OprateResult.OPRATE_TYPE_GEM?b==OprateResult.FIELD_BOSS_OPERTE_WILL_START?" 宝石 - 野外BOSS即将在{1}分钟后开启, 请大家安排好时间 - "+c:b==OprateResult.FIELD_BOSS_OPERTE_WILL_OCCUR?" 宝石 - 野外boss即将出现，请各位大侠做好准备 - "+c:b==OprateResult.FIELD_BOSS_OPERTE_OCCUR?" 宝石 - 野外boss已经在各个地图刷新，请各位大侠火速前往击杀 查看详情 - "+c:b==OprateResult.FIELD_BOSS_OPERTE_BOSS_BORN?" 宝石 - {1}已出现在{2}，请各位大侠火速前往击杀 立即前往 - "+c:b==OprateResult.FIELD_BOSS_OPERTE_BOSS_KILL?" 宝石 - {1}已被成功击杀！恭喜{2}获得{3}1分钟的优先开启权利 - "+c:b==OprateResult.FIELD_BOSS_OPERTE_PROTECT?" 宝石 - 九龙宝箱保护时间结束，静待各位大侠开启 - "+c:b==OprateResult.FIELD_BOSS_OPERTE_PICKED?" 宝石 - 恭喜{1}最终开启九龙宝箱，获得XXXX - "+c:b==OprateResult.FIELD_BOSS_OPERTE_TOO_FAR?" 宝石 - 太远了，你不可能开启这个宝箱 - "+c:"未知错误1  OPRATE_TYPE_GEM "+b+"    "+c:"未知错误2   "+a+"  "+b+"    "+c}function getKeyProById(a){return keyProp[a-1]}function getKeyCostById(a){return costProp[a]}function getKeyCostItem(a){return costItemProp[a]}function getColorQua(a){return this.quaColorAry[a];
}function getRoleUrl(a){return-1!=a.search("2242")&&console.log("2242224222422242"),"0"==a&&console.log("没有这个装备"),"role/"+a+getBaseUrl()+".txt"}function getRoleUIUrl(a){return-1!=a.search("6013")&&console.log("6013"),"0"==a&&console.log("没有这个装备"),"role/ui/"+a+getBaseUrl()+".txt"}function getSkillUrl(a){a&&0!=a.length||console.log("没有技能");var b="skill/"+a+getBaseUrl()+".txt";return b.replace(".txt","_byte.txt")}function getModelUrl(a){return"model/"+a+getBaseUrl()+".txt"}function getModelUIUrl(a){return"model/"+a+getBaseUrl()+".txt"}function getMapUrl(a){return"map/"+a+".txt"}function getfactionmapUrl(a){return"ui/load/map/world/"+a+".png"}function getZipMapUrl(a){return"map/"+a+"/"}function getactivityIconUrl(a){return"ui/load/activity/at/"+a+".png"}function getTouPic(a){return 1==a?"ui/touA.png":"ui/touB.png"}function getVipIconUrl(a){return"ui/load/Vip/"+a+".png"}function getFactionBuildMapUrl(a){return"ui/load/map/factionbuildmap/"+a+".png"}function geteqiconIconUrl(a){return"ui/eqicon/"+a+".png"}function getstrongerIconUrl(a){return"ui/load/stronger/"+a+".png"}function getgemIconUrl(a){return"ui/load/gem/"+a+".png"}function getRoleIconUrl(a){return"ui/load/role/"+a+".png"}function getTeamcopyIconUrl(a){return"ui/load/teamcopy/"+a+".png"}function getSuccesspromptUrl(a){return"ui/load/toptip/txt/"+a+".png"}function getSkillIconUrl(a){return"ui/skillicon/"+a+".png"}function getMountIconUrl(a){return"ui/load/mount/photo/"+a+".png"}function getload_IconUrl(a){return"ui/load/icon/"+a+".png"}function getload_LogingiftUrl(a){return"ui/load/Logingift/Name/"+a+".png"}function getload_LogingiftInfoUrl(a){return"ui/load/Logingift/Info/"+a+".png"}function getUIIconUrl(a){return"ui/uiicon/"+a+".png"}function getQueenIconUrl(a){return Scene_data.fileRoot+"ui/load/queen/"+a+".jpg"}function getUItimeOutUrl(a){return"ui/load/timeOut/"+a+".png"}function getUIpkGradeUrl(a){return"ui/load/pkGrade/"+a+".png"}function getUItittleUrl(a){return"ui/load/tittle/"+a+".png"}function getOutBossUiUrl(a,b){return b?"ui/tittlename/oboss/t_"+a+".png":"ui/tittlename/oboss/"+a+".png"}function getForceByAtt(a,b){var c=0;return c}function Snum(a){return a>999999?float2int(a/1e4)+"万":a>999999999?float2int(a/1e8)+"亿":String(a)}function converItem2Cost(a){var b=TableData.getInstance().getData(TableData.tb_item_template,a[0]).money_type;return[b,a[1]]}function getresIdByreward(a){switch(a){case 1:return 0;case 3:return 2;case 11:return 10;case 10:return 9;case 7:return 6;case 8:return 12;case 9:return 8;case 12:return 11}}function getServerAndName(a){var b=a.split(",");return 3==b.length?b[1]+b[2]:a}function getBaseName(a){var b=a.split(",");return 3==b.length?b[2]:a}function getAvataByID(a){var b=tb.TB_creature_template.get_TB_creature_template(a);return b.avatar}function traceNoTabelData(){throw console.log("数据表无"),new Error("数据表无")}(function(){"use strict";function a(a,b){var c=a.split("."),d=h;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function b(a){var b,c,d,e,f,g,h,j,k,l,m=a.length,n=0,o=Number.POSITIVE_INFINITY;for(j=0;m>j;++j)a[j]>n&&(n=a[j]),a[j]<o&&(o=a[j]);for(b=1<<n,c=new(i?Uint32Array:Array)(b),d=1,e=0,f=2;n>=d;){for(j=0;m>j;++j)if(a[j]===d){for(g=0,h=e,k=0;d>k;++k)g=g<<1|1&h,h>>=1;for(l=d<<16|j,k=g;b>k;k+=f)c[k]=l;++e}++d,e<<=1,f<<=1}return[c,n,o]}function c(a,b){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=i?new Uint8Array(a):a,this.m=!1,this.i=k,this.s=!1,(b||!(b={}))&&(b.index&&(this.a=b.index),b.bufferSize&&(this.h=b.bufferSize),b.bufferType&&(this.i=b.bufferType),b.resize&&(this.s=b.resize)),this.i){case j:this.b=32768,this.c=new(i?Uint8Array:Array)(32768+this.h+258);break;case k:this.b=0,this.c=new(i?Uint8Array:Array)(this.h),this.e=this.A,this.n=this.w,this.j=this.z;break;default:throw Error("invalid inflate mode")}}function d(a,b){for(var c,d=a.f,e=a.d,f=a.input,g=a.a,h=f.length;b>e;){if(g>=h)throw Error("input buffer is broken");d|=f[g++]<<e,e+=8}return c=d&(1<<b)-1,a.f=d>>>b,a.d=e-b,a.a=g,c}function e(a,b){for(var c,d,e=a.f,f=a.d,g=a.input,h=a.a,i=g.length,j=b[0],k=b[1];k>f&&!(h>=i);)e|=g[h++]<<f,f+=8;return c=j[e&(1<<k)-1],d=c>>>16,a.f=e>>d,a.d=f-d,a.a=h,65535&c}function f(a){function c(a,b,c){var f,g,h,i=this.q;for(h=0;a>h;)switch(f=e(this,b)){case 16:for(g=3+d(this,2);g--;)c[h++]=i;break;case 17:for(g=3+d(this,3);g--;)c[h++]=0;i=0;break;case 18:for(g=11+d(this,7);g--;)c[h++]=0;i=0;break;default:i=c[h++]=f}return this.q=i,c}var f,g,h,j,k=d(a,5)+257,l=d(a,5)+1,m=d(a,4)+4,n=new(i?Uint8Array:Array)(p.length);for(j=0;m>j;++j)n[p[j]]=d(a,3);if(!i)for(j=m,m=n.length;m>j;++j)n[p[j]]=0;f=b(n),g=new(i?Uint8Array:Array)(k),h=new(i?Uint8Array:Array)(l),a.q=0,a.j(b(c.call(a,k,f,g)),b(c.call(a,l,f,h)))}function g(a,b){var d,e;switch(this.input=a,this.a=0,(b||!(b={}))&&(b.index&&(this.a=b.index),b.verify&&(this.B=b.verify)),d=a[this.a++],e=a[this.a++],15&d){case E:this.method=E;break;default:throw Error("unsupported compression method")}if(0!==((d<<8)+e)%31)throw Error("invalid fcheck flag:"+((d<<8)+e)%31);if(32&e)throw Error("fdict flag is not supported");this.r=new c(a,{index:this.a,bufferSize:b.bufferSize,bufferType:b.bufferType,resize:b.resize})}var h=this,i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView,j=0,k=1,l={u:j,t:k};c.prototype.k=function(){for(;!this.m;){var a=d(this,3);switch(1&a&&(this.m=!0),a>>>=1){case 0:var b=this.input,c=this.a,e=this.c,g=this.b,h=b.length,l=void 0,m=void 0,n=e.length,o=void 0;if(this.d=this.f=0,c+1>=h)throw Error("invalid uncompressed block header: LEN");if(l=b[c++]|b[c++]<<8,c+1>=h)throw Error("invalid uncompressed block header: NLEN");if(m=b[c++]|b[c++]<<8,l===~m)throw Error("invalid uncompressed block header: length verify");if(c+l>b.length)throw Error("input buffer is broken");switch(this.i){case j:for(;g+l>e.length;){if(o=n-g,l-=o,i)e.set(b.subarray(c,c+o),g),g+=o,c+=o;else for(;o--;)e[g++]=b[c++];this.b=g,e=this.e(),g=this.b}break;case k:for(;g+l>e.length;)e=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(i)e.set(b.subarray(c,c+l),g),g+=l,c+=l;else for(;l--;)e[g++]=b[c++];this.a=c,this.b=g,this.c=e;break;case 1:this.j(B,D);break;case 2:f(this);break;default:throw Error("unknown BTYPE: "+a)}}return this.n()};var m,n,o=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=i?new Uint16Array(o):o,q=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],r=i?new Uint16Array(q):q,s=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],t=i?new Uint8Array(s):s,u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],v=i?new Uint16Array(u):u,w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=i?new Uint8Array(w):w,y=new(i?Uint8Array:Array)(288);for(m=0,n=y.length;n>m;++m)y[m]=143>=m?8:255>=m?9:279>=m?7:8;var z,A,B=b(y),C=new(i?Uint8Array:Array)(30);for(z=0,A=C.length;A>z;++z)C[z]=5;var D=b(C);c.prototype.j=function(a,b){var c=this.c,f=this.b;this.o=a;for(var g,h,i,j,k=c.length-258;256!==(g=e(this,a));)if(256>g)f>=k&&(this.b=f,c=this.e(),f=this.b),c[f++]=g;else for(h=g-257,j=r[h],0<t[h]&&(j+=d(this,t[h])),g=e(this,b),i=v[g],0<x[g]&&(i+=d(this,x[g])),f>=k&&(this.b=f,c=this.e(),f=this.b);j--;)c[f]=c[f++-i];for(;8<=this.d;)this.d-=8,this.a--;this.b=f},c.prototype.z=function(a,b){var c=this.c,f=this.b;this.o=a;for(var g,h,i,j,k=c.length;256!==(g=e(this,a));)if(256>g)f>=k&&(c=this.e(),k=c.length),c[f++]=g;else for(h=g-257,j=r[h],0<t[h]&&(j+=d(this,t[h])),g=e(this,b),i=v[g],0<x[g]&&(i+=d(this,x[g])),f+j>k&&(c=this.e(),k=c.length);j--;)c[f]=c[f++-i];for(;8<=this.d;)this.d-=8,this.a--;this.b=f},c.prototype.e=function(){var a,b,c=new(i?Uint8Array:Array)(this.b-32768),d=this.b-32768,e=this.c;if(i)c.set(e.subarray(32768,c.length));else for(a=0,b=c.length;b>a;++a)c[a]=e[a+32768];if(this.g.push(c),this.l+=c.length,i)e.set(e.subarray(d,d+32768));else for(a=0;32768>a;++a)e[a]=e[d+a];return this.b=32768,e},c.prototype.A=function(a){var b,c,d,e,f=this.input.length/this.a+1|0,g=this.input,h=this.c;return a&&("number"==typeof a.p&&(f=a.p),"number"==typeof a.v&&(f+=a.v)),2>f?(c=(g.length-this.a)/this.o[2],e=258*(c/2)|0,d=e<h.length?h.length+e:h.length<<1):d=h.length*f,i?(b=new Uint8Array(d),b.set(h)):b=h,this.c=b},c.prototype.n=function(){var a,b,c,d,e,f=0,g=this.c,h=this.g,j=new(i?Uint8Array:Array)(this.l+(this.b-32768));if(0===h.length)return i?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(b=0,c=h.length;c>b;++b)for(a=h[b],d=0,e=a.length;e>d;++d)j[f++]=a[d];for(b=32768,c=this.b;c>b;++b)j[f++]=g[b];return this.g=[],this.buffer=j},c.prototype.w=function(){var a,b=this.b;return i?this.s?(a=new Uint8Array(b),a.set(this.c.subarray(0,b))):a=this.c.subarray(0,b):(this.c.length>b&&(this.c.length=b),a=this.c),this.buffer=a},g.prototype.k=function(){var a,b,c=this.input;if(a=this.r.k(),this.a=this.r.a,this.B){b=(c[this.a++]<<24|c[this.a++]<<16|c[this.a++]<<8|c[this.a++])>>>0;var d=a;if("string"==typeof d){var e,f,g=d.split("");for(e=0,f=g.length;f>e;e++)g[e]=(255&g[e].charCodeAt(0))>>>0;d=g}for(var h,i=1,j=0,k=d.length,l=0;k>0;){h=k>1024?1024:k,k-=h;do i+=d[l++],j+=i;while(--h);i%=65521,j%=65521}if(b!==(j<<16|i)>>>0)throw Error("invalid adler-32 checksum")}return a};var E=8;a("Zlib.Inflate",g),a("Zlib.Inflate.prototype.decompress",g.prototype.k);var F,G,H,I,J={ADAPTIVE:l.t,BLOCK:l.u};if(Object.keys)F=Object.keys(J);else for(G in F=[],H=0,J)F[H++]=G;for(H=0,I=F.length;I>H;++H)G=F[H],a("Zlib.Inflate.BufferType."+G,J[G])}).call(this);var BaseEvent=function(){function a(a){this.type=a}return a.COMPLETE="complete",a}(),EventDispatcher=function(){function a(){this._eventsMap=null}return a.prototype.addEventListener=function(a,b,c){this._eventsMap||(this._eventsMap=new Object);var d=this._eventsMap[a];d||(d=this._eventsMap[a]=[]);for(var e={listener:b,thisObject:c},f=0;f<d.length;f++){var g=d[f];if(g.listener==b&&g.thisObject==c)return}d.push(e)},a.prototype.removeEventListener=function(a,b,c){if(null!=this._eventsMap)for(var d=this._eventsMap[a],e=0;d&&e<d.length;e++){var f=d[e];if(f.listener==b&&f.thisObject==c)return void d.splice(e,1)}},a.prototype.dispatchEvent=function(a){var b=this._eventsMap;if(!b)return!0;var c=b[a.type];if(!c)return!0;var d=c.length;if(0==d)return!0;a.target=this;for(var e=0;d>e;e++){var f=c[e];f.listener.call(f.thisObject,a)}},a}(),GC=function(){function a(){}return a.prototype.destory=function(){},a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ResCount=function(a){function b(){a.apply(this,arguments),this._useNum=0,this.idleTime=0}return __extends(b,a),Object.defineProperty(b.prototype,"useNum",{get:function(){return this._useNum},set:function(a){this._useNum=a,0==this._useNum&&(this.idleTime=0)},enumerable:!0,configurable:!0}),b.prototype.clearUseNum=function(){this._useNum--,this._useNum<=0&&(this.idleTime=b.GCTime)},b.GCTime=1e6,b}(GC),ResGC=function(){function a(){var a=this;this._dic=new Object,TimeUtil.addTimeTick(1e6,function(){a.gc()})}return a.prototype.gc=function(){for(var a in this._dic){var b=this._dic[a];b.useNum<=0&&(b.idleTime++,b.idleTime>=ResCount.GCTime&&(console.log("清理 -"+a),b.destory(),delete this._dic[a]))}},a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Object3D=function(a){function b(b,c,d){void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),a.call(this),this._x=b,this._y=c,this._z=d,this._scaleX=1,this._scaleY=1,this._scaleZ=1,this._rotationX=0,this._rotationY=0,this._rotationZ=0,this.posMatrix=new Matrix3D}return __extends(b,a),b.prototype.toString=function(){return"Object3D("+String(this._x)+","+String(this._y)+","+String(this._z)+")"},Object.defineProperty(b.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this.updateMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this.updateMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"z",{get:function(){return this._z},set:function(a){this._z=a,this.updateMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"scale",{set:function(a){this._scaleX=this._scaleY=this._scaleZ=a,this.updateMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"scaleX",{get:function(){return this._scaleX},set:function(a){this._scaleX=a,this.updateMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"scaleY",{get:function(){return this._scaleY},set:function(a){this._scaleY=a,this.updateMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"scaleZ",{get:function(){return this._scaleZ},set:function(a){this._scaleZ=a,this.updateMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"rotationX",{get:function(){return this._rotationX},set:function(a){this._rotationX=a,this.updateMatrix(),this.updateRotationMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"rotationY",{get:function(){return this._rotationY},set:function(a){this._rotationY=a,this.updateMatrix(),this.updateRotationMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"rotationZ",{get:function(){return this._rotationZ},set:function(a){this._rotationZ=a,this.updateMatrix(),this.updateRotationMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"px",{get:function(){return 0},set:function(a){},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"py",{get:function(){return 0},set:function(a){},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"pz",{get:function(){return 0},set:function(a){},enumerable:!0,configurable:!0}),b.prototype.updateMatrix=function(){this.posMatrix.identity(),this.posMatrix.appendScale(this._scaleX,this._scaleY,this._scaleZ),this.posMatrix.appendRotation(this._rotationX,Vector3D.X_AXIS),this.posMatrix.appendRotation(this._rotationY,Vector3D.Y_AXIS),this.posMatrix.appendRotation(this._rotationZ,Vector3D.Z_AXIS),this.posMatrix.appendTranslation(this._x,this._y,this._z)},b.prototype.updateRotationMatrix=function(){},b}(EventDispatcher),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Camera3D=function(a){function b(){a.call(this),this._distance=500,this.lastFoucs3D=new Vector3D,this.needChange=!0,this.cameraMatrix=new Matrix3D}return __extends(b,a),Object.defineProperty(b.prototype,"distance",{get:function(){return this._distance},set:function(a){this._distance=a},enumerable:!0,configurable:!0}),b.prototype.lookAt=function(a){this.lookAtTarget=a},Object.defineProperty(b.prototype,"astarRect",{set:function(a){this._astarRect=new Rectangle,this._astarRect.x=a.x,this._astarRect.y=a.y,this._astarRect.width=a.width,this._astarRect.height=a.height,this._midPos=new Vector3D,this._midPos.x=this._astarRect.x+this._astarRect.width/2,this._midPos.z=this._astarRect.y+this._astarRect.height/2,this._scaleVec=new Vector3D,this._scaleVec.x=(this._astarRect.width-100)/this._astarRect.width,this._scaleVec.z=(this._astarRect.height-100)/this._astarRect.height},enumerable:!0,configurable:!0}),b.prototype.update=function(){if(this.lookAtTarget){var a=28;if(this._astarRect&&this._astarRect.width<600){var b=new Vector3D;b.x=(this.lookAtTarget.px-this._midPos.x)*this._scaleVec.x+this._midPos.x,b.z=(this.lookAtTarget.pz-this._midPos.z)*this._scaleVec.z+this._midPos.z,b.y=this.lookAtTarget.py,Scene_data.focus3D.x=b.x,Scene_data.focus3D.y=b.y+a,Scene_data.focus3D.z=b.z}else Scene_data.focus3D.x=this.lookAtTarget.px,Scene_data.focus3D.y=this.lookAtTarget.py+a,Scene_data.focus3D.z=this.lookAtTarget.pz;this.lastFoucs3D.x!=Scene_data.focus3D.x||this.lastFoucs3D.y!=Scene_data.focus3D.y||this.lastFoucs3D.z!=Scene_data.focus3D.z?(this.lastFoucs3D.x=Scene_data.focus3D.x,this.lastFoucs3D.y=Scene_data.focus3D.y,this.lastFoucs3D.z=Scene_data.focus3D.z,this.needChange=!0):this.needChange=!1}},Object.defineProperty(b.prototype,"postion",{get:function(){return new Vector3D(this.x,this.y,this.z)},enumerable:!0,configurable:!0}),b}(Object3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ObjData=function(a){function b(){a.call(this),this.vertices=new Array,this.uvs=new Array,this.indexs=new Array,this.lightuvs=new Array,this.normals=new Array,this.tangents=new Array,this.bitangents=new Array,this.treNum=0,this.compressBuffer=!1,this.hasdispose=!1}return __extends(b,a),b.prototype.destory=function(){this.vertices.length=0,this.vertices=null,this.uvs.length=0,this.uvs=null,this.indexs.length=0,this.indexs=null,this.lightuvs.length=0,this.lightuvs=null,this.normals.length=0,this.normals=null,this.tangents.length=0,this.tangents=null,this.bitangents.length=0,this.bitangents=null,this.vertexBuffer&&(Scene_data.context3D.deleteBuffer(this.vertexBuffer),this.vertexBuffer=null),this.uvBuffer&&(Scene_data.context3D.deleteBuffer(this.uvBuffer),this.uvBuffer=null),this.indexBuffer&&(Scene_data.context3D.deleteBuffer(this.indexBuffer),this.indexBuffer=null),this.lightUvBuffer&&(Scene_data.context3D.deleteBuffer(this.lightUvBuffer),this.lightUvBuffer=null),this.normalsBuffer&&(Scene_data.context3D.deleteBuffer(this.normalsBuffer),this.normalsBuffer=null),this.tangentBuffer&&(Scene_data.context3D.deleteBuffer(this.tangentBuffer),this.tangentBuffer=null),this.bitangentBuffer&&(Scene_data.context3D.deleteBuffer(this.bitangentBuffer),this.bitangentBuffer=null),this.hasdispose=!0},b}(ResCount),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},MeshData=function(a){function b(){a.apply(this,arguments),this.boneIDAry=new Array,this.boneWeightAry=new Array,this.boneNewIDAry=new Array,this.particleAry=new Array}return __extends(b,a),b.prototype.destory=function(){a.prototype.destory.call(this),this.materialParam&&(this.materialParam.destory(),this.materialParam=null,this.materialParamData=null),this.boneIDAry.length=0,this.boneWeightAry.length=0,this.boneNewIDAry.length=0,this.boneIDAry=null,this.boneWeightAry=null,this.boneNewIDAry=null,this.boneWeightBuffer&&(Scene_data.context3D.deleteBuffer(this.boneWeightBuffer),this.boneWeightBuffer=null),this.boneIdBuffer&&(Scene_data.context3D.deleteBuffer(this.boneIdBuffer),this.boneIdBuffer=null),this.material&&this.material.clearUseNum(),this.particleAry.length=0,this.particleAry=null},b}(ObjData),BindParticle=function(){function a(a,b){this.url=a,this.socketName=b}return a}(),Dictionary=function(){function a(a){this._keys=new Array,this._values=new Array;for(var b=0;a&&b<a.length;b++)this[a[b].key]=a[b].value,this._keys.push(a[b].key),this._values.push(a[b].value)}return a.prototype.add=function(a,b){this[a]=b,this._keys.push(a),this._values.push(b)},a.prototype.has=function(a){return this[a]?!0:!1},a.prototype.remove=function(a){var b=this._keys.indexOf(a,0);this._keys.splice(b,1),this._values.splice(b,1),delete this[a]},a.prototype.keys=function(){return this._keys},a.prototype.values=function(){return this._values},a.prototype.containsKey=function(a){return"undefined"==typeof this[a]?!1:!0},a.prototype.toLookup=function(){return this},a}(),WeakSet=function(){function a(){this._item=new Array}return a.prototype.add=function(a){this._item.push(a)},a.prototype.has=function(a){for(var b=0;b<this._item.length;b++)if(this._item[b]==a)return!0;return!1},a}(),ColorType=function(){function a(){}return a.Orange7a2f21="[7a2f21]",a.Orange9a683f="[9a683f]",a.Orange853d07="[853d07]",a.Brown6a4936="[6a4936]",a.Brown623424="[623424]",a.Brownac8965="[ac8965]",a.Reddb4051="[db4051]",a.Redd92200="[d92200]",a.Brownd8d49c="[d8d49c]",a.color843b11="[843b11]",a.colorb96d49="[b96d49]",a.colorcd2000="[cd2000]",a.colorfef3d7="[fef3d7]",a.color9a683f="[9a683f]",a.Brown7a2f21="[7a2f21]",a.Brown40120a="[40120a]",a.Browndf9a68="[df9a68]",a.Browndb39264="[b39264]",a.colorefe4c4="[efe4c4]",a.color802626="[802626]",a.color9f7b4d="[9f7b4d]",a.color4b0808="[4b0808]",a.Green98ec2c="[98ec2c]",a.Green56da35="[56da35]",a.Green20a200="[20a200]",a.Greenadff00="[adff00]",a.Green2ca937="[2ca937]",a.Green464b11="[464b11]",a.Yellowf7d253="[f7d253]",a.Yellowffecc6="[ffecc6]",a.Yellowffd500="[ffd500]",a.Yellowffe9b4="[ffe9b4]",a.Yellowedce7e="[edce7e]",a.color4c1c07="[4c1c07]",a.Whiteffffff="[ffffff]",a.Whitefffce6="[fffce6]",a.Black000000="[000000]",a.Whitefff4d6="[fff4d6]",a.Coffeeff9200="[ff9200]",a.color2daa35="[2daa35]",a.color4392ff="[4392ff]",a.colorb759ff="[b759ff]",a.colorff7200="[ff7200]",a.colorce0a00="[ce0a00]",a.coloraa874a="[aa874a]",a.colorffecc6="[ffecc6]",a.colorfde87e="[fde87e]",a.colord6e7ff="[d6e7ff]",a}(),BitMapData=function(){function a(a,b){this.width=a,this.height=b;var c=UIManager.getInstance().getContext2D(this.width,this.height,!1);this.imgData=c.getImageData(0,0,this.width,this.height);for(var d=0;d<this.imgData.data.length;d+=4)this.imgData.data[d+0]=255,this.imgData.data[d+1]=255,this.imgData.data[d+2]=255,this.imgData.data[d+3]=255}return a.prototype.getIndexByPos=function(a,b){var c=b*this.width+a;return 4*c},a.prototype.setRgb=function(a,b,c){a=Math.round(a),b=Math.round(b);var d=this.getIndexByPos(a,b);this.imgData.data[d+0]=255*c.x,this.imgData.data[d+1]=255*c.y,this.imgData.data[d+2]=255*c.z,this.imgData.data[d+3]=255},a.prototype.getRgb=function(a,b){a=Math.round(a),b=Math.round(b);var c=new Vector3D,d=this.getIndexByPos(a,b);return c.x=this.imgData.data[d+0]/255,c.y=this.imgData.data[d+1]/255,c.z=this.imgData.data[d+2]/255,c.w=1,c},a}(),Context3D=function(){function a(){this.setTextureNum=0,this.setProgramNum=0}return a.prototype.init=function(a){var b=a.getContext("webgl",{stencil:!0,alpha:!0,depth:!0,antialias:!1})||a.getContext("experimental-webgl",{stencil:!0,alpha:!0,depth:!0,antialias:!1});this.renderContext=b,this._contextSetTest=new ContextSetTest},a.prototype.resetSize=function(a,b){this.renderContext.viewport(0,0,a,b)},a.prototype.uploadBuff3D=function(a){var b=this.renderContext.createBuffer();return this.renderContext.bindBuffer(this.renderContext.ARRAY_BUFFER,b),this.renderContext.bufferData(this.renderContext.ARRAY_BUFFER,new Float32Array(a),this.renderContext.STATIC_DRAW),b},a.prototype.uploadBuff3DArrayBuffer=function(a){var b=this.renderContext.createBuffer();return this.renderContext.bindBuffer(this.renderContext.ARRAY_BUFFER,b),this.renderContext.bufferData(this.renderContext.ARRAY_BUFFER,a,this.renderContext.STATIC_DRAW),b},a.prototype.uploadBuff3DByBuffer=function(a,b){this.renderContext.bindBuffer(this.renderContext.ARRAY_BUFFER,a),this.renderContext.bufferData(this.renderContext.ARRAY_BUFFER,new Float32Array(b),this.renderContext.STATIC_DRAW)},a.prototype.uploadIndexBuff3D=function(a){var b=this.renderContext.createBuffer();return this.renderContext.bindBuffer(this.renderContext.ELEMENT_ARRAY_BUFFER,b),this.renderContext.bufferData(this.renderContext.ELEMENT_ARRAY_BUFFER,new Uint16Array(a),this.renderContext.STATIC_DRAW),b},a.prototype.uploadIndexBuff3DByBuffer=function(a,b){this.renderContext.bindBuffer(this.renderContext.ELEMENT_ARRAY_BUFFER,a),this.renderContext.bufferData(this.renderContext.ELEMENT_ARRAY_BUFFER,new Uint16Array(b),this.renderContext.STATIC_DRAW)},a.prototype.update=function(){this._contextSetTest.clear(),this.renderContext.bindFramebuffer(this.renderContext.FRAMEBUFFER,null),this.renderContext.clearColor(63/255,63/255,63/255,1),this.renderContext.clearDepth(1),this.renderContext.clearStencil(0),this.renderContext.enable(this.renderContext.DEPTH_TEST),this.renderContext.depthMask(!0),this.renderContext.enable(this.renderContext.BLEND),this.renderContext.frontFace(this.renderContext.CW),this.renderContext.clear(this.renderContext.COLOR_BUFFER_BIT|this.renderContext.DEPTH_BUFFER_BIT|this.renderContext.STENCIL_BUFFER_BIT),this.setBlendParticleFactors(0),this.renderContext.disable(this.renderContext.CULL_FACE),this.setTextureNum=0,this.setProgramNum=0},a.prototype.updateFBO=function(a){this.renderContext.bindFramebuffer(this.renderContext.FRAMEBUFFER,a.frameBuffer),this.renderContext.clearColor(63/255,63/255,63/255,1),this.renderContext.clearDepth(1),this.renderContext.clearStencil(0),this.renderContext.enable(this.renderContext.DEPTH_TEST),this.renderContext.depthMask(!0),this.renderContext.enable(this.renderContext.BLEND),this.renderContext.frontFace(this.renderContext.CW),this.renderContext.clear(this.renderContext.COLOR_BUFFER_BIT|this.renderContext.DEPTH_BUFFER_BIT|this.renderContext.STENCIL_BUFFER_BIT),this.setBlendParticleFactors(0),this.renderContext.disable(this.renderContext.CULL_FACE)},a.prototype.setDepthTest=function(a){a?this.renderContext.enable(this.renderContext.DEPTH_TEST):this.renderContext.disable(this.renderContext.DEPTH_TEST)},a.prototype.setWriteDepth=function(a){this._contextSetTest.testZbuffer(a)||this.renderContext.depthMask(a)},a.prototype.setBlendParticleFactors=function(a){if(!this._contextSetTest.testBlend(a))switch(a){case 0:this.renderContext.blendFunc(this.renderContext.ONE,this.renderContext.ONE_MINUS_SRC_ALPHA);break;case 1:this.renderContext.blendFunc(this.renderContext.ONE,this.renderContext.ONE);break;case 2:this.renderContext.blendFunc(this.renderContext.DST_COLOR,this.renderContext.ZERO);break;case 3:this.renderContext.blendFunc(this.renderContext.ONE,this.renderContext.ONE_MINUS_SRC_COLOR);break;case 4:this.renderContext.blendFunc(this.renderContext.SRC_ALPHA,this.renderContext.ONE);break;case-1:this.renderContext.blendFunc(this.renderContext.SRC_ALPHA,this.renderContext.ONE_MINUS_SRC_ALPHA)}},a.prototype.setProgram=function(a){this._contextSetTest.testProgram(a)||(this.renderContext.useProgram(a),this.setProgramNum++)},a.prototype.getLocation=function(a,b){return this.renderContext.getUniformLocation(a,b)},a.prototype.setVcMatrix3fv=function(a,b,c){this.renderContext.uniformMatrix3fv(a.getWebGLUniformLocation(b),!1,c)},a.prototype.setVcMatrix4fv=function(a,b,c){this.renderContext.uniformMatrix4fv(a.getWebGLUniformLocation(b),!1,c)},a.prototype.setVpMatrix=function(a,b){this._contextSetTest.testVp()||this.renderContext.uniformMatrix4fv(a.getWebGLUniformLocation("vpMatrix3D"),!1,b)},a.prototype.setVc4fv=function(a,b,c){this.renderContext.uniform4fv(a.getWebGLUniformLocation(b),c)},a.prototype.setVc1fv=function(a,b,c){this.renderContext.uniform1fv(a.getWebGLUniformLocation(b),c)},a.prototype.setVc3fv=function(a,b,c){this.renderContext.uniform3fv(a.getWebGLUniformLocation(b),c)},a.prototype.setVc2fv=function(a,b,c){this.renderContext.uniform2fv(a.getWebGLUniformLocation(b),c)},a.prototype.setVcFloat=function(a,b,c){this.renderContext.uniform1fv(a.getWebGLUniformLocation(b),c)},a.prototype.setVcMatrix4fvLocation=function(a,b){this.renderContext.uniformMatrix4fv(a,!1,b)},a.prototype.setVcMatrix2fvLocation=function(a,b){this.renderContext.uniformMatrix2fv(a,!1,b)},a.prototype.setVc4fvLocation=function(a,b){this.renderContext.uniform4fv(a,b)},a.prototype.setVa=function(a,b,c){this._contextSetTest.testVa(c),this.renderContext.bindBuffer(this.renderContext.ARRAY_BUFFER,c),this.renderContext.enableVertexAttribArray(a),this.renderContext.vertexAttribPointer(a,b,this.renderContext.FLOAT,!1,0,0)},a.prototype.pushVa=function(a){return this._contextSetTest.testVa(a)?!0:(this.renderContext.bindBuffer(this.renderContext.ARRAY_BUFFER,a),!1)},a.prototype.setVaOffset=function(a,b,c,d){this._contextSetTest.enableVaAry[a]||(this.renderContext.enableVertexAttribArray(a),this._contextSetTest.enableVaAry[a]=!0),this.renderContext.vertexAttribPointer(a,b,this.renderContext.FLOAT,!1,c,d)},a.prototype.clearVa=function(a){this._contextSetTest.enableVaAry[a]=!1,this.renderContext.disableVertexAttribArray(a)},a.prototype.drawCall=function(a,b){this.renderContext.bindBuffer(this.renderContext.ELEMENT_ARRAY_BUFFER,a),this.renderContext.drawElements(this.renderContext.TRIANGLES,b,this.renderContext.UNSIGNED_SHORT,0)},a.prototype.drawLine=function(a,b){this.renderContext.bindBuffer(this.renderContext.ELEMENT_ARRAY_BUFFER,a),this.renderContext.drawElements(this.renderContext.LINES,b,this.renderContext.UNSIGNED_SHORT,0)},a.prototype.setRenderTexture=function(a,b,c,d,e){void 0===e&&(e=!0),e&&this._contextSetTest.testTexture(b,c)||(0==d?this.renderContext.activeTexture(this.renderContext.TEXTURE0):1==d?this.renderContext.activeTexture(this.renderContext.TEXTURE1):2==d?this.renderContext.activeTexture(this.renderContext.TEXTURE2):3==d?this.renderContext.activeTexture(this.renderContext.TEXTURE3):4==d?this.renderContext.activeTexture(this.renderContext.TEXTURE4):5==d?this.renderContext.activeTexture(this.renderContext.TEXTURE5):6==d&&this.renderContext.activeTexture(this.renderContext.TEXTURE6),this.renderContext.bindTexture(this.renderContext.TEXTURE_2D,c),this.renderContext.uniform1i(a.getWebGLUniformLocation(b),d),this.setTextureNum++)},a.prototype.setRenderTextureCube=function(a,b,c,d){0==d?this.renderContext.activeTexture(this.renderContext.TEXTURE0):1==d?this.renderContext.activeTexture(this.renderContext.TEXTURE1):2==d?this.renderContext.activeTexture(this.renderContext.TEXTURE2):3==d?this.renderContext.activeTexture(this.renderContext.TEXTURE3):4==d?this.renderContext.activeTexture(this.renderContext.TEXTURE4):5==d?this.renderContext.activeTexture(this.renderContext.TEXTURE5):6==d&&this.renderContext.activeTexture(this.renderContext.TEXTURE6),this.renderContext.bindTexture(this.renderContext.TEXTURE_CUBE_MAP,c),this.renderContext.uniform1i(this.renderContext.getUniformLocation(a,b),d)},a.prototype.updateTexture=function(a,b,c,d){this.renderContext.bindTexture(this.renderContext.TEXTURE_2D,a),this.renderContext.texSubImage2D(this.renderContext.TEXTURE_2D,0,b,c,this.renderContext.RGBA,this.renderContext.UNSIGNED_BYTE,d)},a.prototype.getTexture=function(a,b,c,d){void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0);var e=new Rectangle(0,0,Math.pow(2,Math.ceil(Math.log(a.width)/Math.log(2))),Math.pow(2,Math.ceil(Math.log(a.height)/Math.log(2))));if(e.width!=a.width||e.height!=a.height){console.log("图片尺寸不为2幂");var f=UIManager.getInstance().getContext2D(e.width,e.height,!1);return f.drawImage(a,0,0,a.width,a.height,0,0,e.width,e.height),this.getTexture(f.canvas,0,0)}var g=this.renderContext.createTexture();this.renderContext.bindTexture(this.renderContext.TEXTURE_2D,g),this.renderContext.texImage2D(this.renderContext.TEXTURE_2D,0,this.renderContext.RGBA,this.renderContext.RGBA,this.renderContext.UNSIGNED_BYTE,a);var h;h=0==c?this.renderContext.LINEAR:this.renderContext.NEAREST;var i;return 0==c?0==d?i=this.renderContext.LINEAR:1==d?i=this.renderContext.LINEAR_MIPMAP_LINEAR:2==d&&(i=this.renderContext.LINEAR_MIPMAP_NEAREST):0==d?i=this.renderContext.NEAREST:1==d?i=this.renderContext.NEAREST_MIPMAP_LINEAR:2==d&&(i=this.renderContext.NEAREST_MIPMAP_NEAREST),this.renderContext.texParameteri(this.renderContext.TEXTURE_2D,this.renderContext.TEXTURE_MAG_FILTER,h),this.renderContext.texParameteri(this.renderContext.TEXTURE_2D,this.renderContext.TEXTURE_MIN_FILTER,i),0==b?(this.renderContext.texParameteri(this.renderContext.TEXTURE_2D,this.renderContext.TEXTURE_WRAP_S,this.renderContext.REPEAT),this.renderContext.texParameteri(this.renderContext.TEXTURE_2D,this.renderContext.TEXTURE_WRAP_T,this.renderContext.REPEAT)):(this.renderContext.texParameteri(this.renderContext.TEXTURE_2D,this.renderContext.TEXTURE_WRAP_S,this.renderContext.CLAMP_TO_EDGE),
this.renderContext.texParameteri(this.renderContext.TEXTURE_2D,this.renderContext.TEXTURE_WRAP_T,this.renderContext.CLAMP_TO_EDGE)),0!=d&&this.renderContext.generateMipmap(this.renderContext.TEXTURE_2D),g},a.prototype.creatTexture=function(a,b,c){void 0===c&&(c=0);var d=this.renderContext.createTexture();return this.renderContext.bindTexture(this.renderContext.TEXTURE_2D,d),this.renderContext.texParameteri(this.renderContext.TEXTURE_2D,this.renderContext.TEXTURE_MAG_FILTER,this.renderContext.LINEAR),this.renderContext.texParameteri(this.renderContext.TEXTURE_2D,this.renderContext.TEXTURE_MIN_FILTER,this.renderContext.LINEAR),0==c?(this.renderContext.texParameteri(this.renderContext.TEXTURE_2D,this.renderContext.TEXTURE_WRAP_S,this.renderContext.REPEAT),this.renderContext.texParameteri(this.renderContext.TEXTURE_2D,this.renderContext.TEXTURE_WRAP_T,this.renderContext.REPEAT)):(this.renderContext.texParameteri(this.renderContext.TEXTURE_2D,this.renderContext.TEXTURE_WRAP_S,this.renderContext.CLAMP_TO_EDGE),this.renderContext.texParameteri(this.renderContext.TEXTURE_2D,this.renderContext.TEXTURE_WRAP_T,this.renderContext.CLAMP_TO_EDGE)),this.renderContext.texImage2D(this.renderContext.TEXTURE_2D,0,this.renderContext.RGB,a,b,0,this.renderContext.RGB,this.renderContext.UNSIGNED_BYTE,null),d},a.prototype.createFramebuffer=function(){var a=this.renderContext.createFramebuffer();return this.renderContext.bindFramebuffer(this.renderContext.FRAMEBUFFER,a),a},a.prototype.deleteBuffer=function(a){a||console.log("aaa12"),this.renderContext.deleteBuffer(a),0!=this.renderContext.getError()&&console.log("aaa12")},a.prototype.deleteTexture=function(a){this.renderContext.deleteTexture(a)},a.prototype.deleteShader=function(a){this.renderContext.deleteShader(a.vShader),this.renderContext.deleteShader(a.fShader),this.renderContext.deleteProgram(a.program)},a.prototype.cullFaceBack=function(a){this._contextSetTest.testCull(a)||(a?(this.renderContext.enable(this.renderContext.CULL_FACE),this.renderContext.cullFace(this.renderContext.BACK)):this.renderContext.disable(this.renderContext.CULL_FACE))},a.prototype.getFBO=function(){var a=FBO.fw,b=FBO.fh,c=this.renderContext.createFramebuffer();this.renderContext.bindFramebuffer(this.renderContext.FRAMEBUFFER,c);var d=this.renderContext.createRenderbuffer();this.renderContext.bindRenderbuffer(this.renderContext.RENDERBUFFER,d),this.renderContext.renderbufferStorage(this.renderContext.RENDERBUFFER,this.renderContext.DEPTH_COMPONENT16,a,b),this.renderContext.framebufferRenderbuffer(this.renderContext.FRAMEBUFFER,this.renderContext.DEPTH_ATTACHMENT,this.renderContext.RENDERBUFFER,d);var e=this.renderContext.createTexture();this.renderContext.bindTexture(this.renderContext.TEXTURE_2D,e),this.renderContext.texImage2D(this.renderContext.TEXTURE_2D,0,this.renderContext.RGBA,a,b,0,this.renderContext.RGBA,this.renderContext.UNSIGNED_BYTE,null),this.renderContext.texParameteri(this.renderContext.TEXTURE_2D,this.renderContext.TEXTURE_MAG_FILTER,this.renderContext.LINEAR),this.renderContext.texParameteri(this.renderContext.TEXTURE_2D,this.renderContext.TEXTURE_MIN_FILTER,this.renderContext.LINEAR),this.renderContext.framebufferTexture2D(this.renderContext.FRAMEBUFFER,this.renderContext.COLOR_ATTACHMENT0,this.renderContext.TEXTURE_2D,e,0),this.renderContext.bindTexture(this.renderContext.TEXTURE_2D,null),this.renderContext.bindRenderbuffer(this.renderContext.RENDERBUFFER,null),this.renderContext.bindFramebuffer(this.renderContext.FRAMEBUFFER,null);var f=new FBO;return f.frameBuffer=c,f.depthBuffer=d,f.texture=e,f},a}(),FBO=function(){function a(){}return a.fw=512,a.fh=512,a}(),ContextSetTest=function(){function a(){this.enableVaAry=new Array,this.vaAry=new Array,this._blendType=-1e3,this._cullType=!1,this._zbufferType=!0,this._vpMatrix=!1}return a.prototype.testTexture=function(a,b){return this._textureDic[a]==b?!0:(this._textureDic[a]=b,!1)},a.prototype.testProgram=function(a){return this._program==a?!0:(this._program=a,this._textureDic=new Object,this._vpMatrix=!1,!1)},a.prototype.testVa=function(a){return this._vabuffer==a?!0:(this._vabuffer=a,!1)},a.prototype.clear=function(){this._blendType=-1e3,this._cullType=!1,this._vpMatrix=!1,this._program=null},a.prototype.testBlend=function(a){return this._blendType==a?!0:(this._blendType=a,!1)},a.prototype.testCull=function(a){return this._cullType==a?!0:(this._cullType=a,!1)},a.prototype.testZbuffer=function(a){return this._zbufferType==a?!0:(this._zbufferType=a,!1)},a.prototype.testVp=function(){return this._vpMatrix?!0:(this._vpMatrix=!0,!1)},a}(),Scene_data=function(){function a(){}return Object.defineProperty(a,"viewMatrx3D",{get:function(){return a._viewMatrx3D},set:function(b){a._viewMatrx3D=b},enumerable:!0,configurable:!0}),a.sceneViewHW=500,a.fileRoot="res/",a.verticalScene=!1,a.effectsLev=2,a.camFar=1e3,a.frameTime=1e3/60,a.MAX_NUMBER=1e7,a.user=0,a.scaleLight=[2],a.useByte=!0,a.fogColor=[0,0,0],a.fogData=[1e3,.003],a.gameAngle=0,a.sceneNumId=0,a.supportBlob=!1,a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ProgrmaManager=function(a){function b(){a.call(this)}return __extends(b,a),b.getInstance=function(){return this._instance||(this._instance=new b),this._instance},b.prototype.getProgram=function(a){return this._dic[a]?this._dic[a]:(alert("please registe Program=>"+a),null)},b.prototype.registe=function(a,b){this._dic[a]||(b.encode(),b.useNum=1,b.name=a,this._dic[a]=b)},b.prototype.getMaterialProgram=function(a,b,c,d,e){void 0===d&&(d=null),void 0===e&&(e=!1);var f=a+"_"+c.url;if(d){for(var g=0;g<d.length;g++)f+="_"+d[g];f+=e?"true_":"false_"}if(this._dic[f])return this._dic[f].useNum++,this._dic[f];e&&(d=[c.usePbr,c.useNormal,c.hasFresnel,c.useDynamicIBL,c.lightProbe,c.directLight,c.noLight,c.fogMode]);var h=new b;h.paramAry=d,h.fragment=c.shaderStr;var i=h.encode();return h.useNum++,i||(console.log("**********错误"+f),console.log(h.vertex),console.log(h.fragment)),this._dic[f]=h,h},b.prototype.outShader=function(a){var b=a.split("\n");console.log("----");for(var c=0;c<b.length;c++){var d='"';d+=b[c],c<b.length-1?(d+="\\n",d+='"',d+="+"):d+='"',console.log(d)}console.log("----")},b.prototype.gc=function(){a.prototype.gc.call(this)},b}(ResGC),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Shader3D=function(a){function b(){a.call(this),this.fragment=this.getFragmentShaderString()}return __extends(b,a),b.prototype.encode=function(){this.vertex=this.getVertexShaderString();var a=Scene_data.context3D.renderContext;this.program=a.createProgram(),this.vShader=a.createShader(a.VERTEX_SHADER),this.fShader=a.createShader(a.FRAGMENT_SHADER),a.shaderSource(this.vShader,this.vertex),a.shaderSource(this.fShader,this.fragment),a.compileShader(this.vShader),a.compileShader(this.fShader),a.attachShader(this.program,this.vShader),a.attachShader(this.program,this.fShader),this.binLocation(a),a.linkProgram(this.program),this.localDic=new Object;var b=a.getProgramInfoLog(this.program),c=a.getShaderInfoLog(this.vShader),d=a.getShaderInfoLog(this.fShader);return""!=b?""==c&&""==d?!0:(console.log("shader error: "+b+","+c+","+d),!1):!0},b.prototype.getWebGLUniformLocation=function(a){var b=this.localDic[a];return b?b:(this.localDic[a]=Scene_data.context3D.getLocation(this.program,a),this.localDic[a])},b.prototype.binLocation=function(a){},b.prototype.getVertexShaderString=function(){return""},b.prototype.getFragmentShaderString=function(){return""},b.prototype.destory=function(){this.vertex=null,this.fragment=null,this.name=null,this.localDic=null,Scene_data.context3D.deleteShader(this)},b}(ResCount),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},BuildShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Position"),a.bindAttribLocation(this.program,1,"v2CubeTexST")},b.prototype.getVertexShaderString=function(){var a="attribute vec3 v3Position;attribute vec2 v2CubeTexST;uniform mat4 viewMatrix3D;uniform mat4 camMatrix3D;uniform mat4 posMatrix3D;varying vec2 v_texCoord;void main(void){   v_texCoord = vec2(v2CubeTexST.x, v2CubeTexST.y);   vec4 vt0= vec4(v3Position, 1.0);   vt0 = posMatrix3D * vt0;   vt0 = camMatrix3D * vt0;   vt0 = viewMatrix3D * vt0;   gl_Position = vt0;}";return a},b.prototype.getFragmentShaderString=function(){var a=" precision mediump float;\nuniform sampler2D s_texture;\nuniform vec4 testconst;uniform vec4 testconst2;varying vec2 v_texCoord;\nvoid main(void)\n{\nvec4 infoUv = texture2D(s_texture, v_texCoord.xy);\nvec4 test = vec4(0,0,0,1);\ntest.xyz = mix(vec3(1,1,1)*0.5,testconst.xyz,0.5);\ninfoUv.xyz = test.xyz * infoUv.xyz;\ngl_FragColor = infoUv;\n}";return a},b.buildShader="BuildShader",b}(Shader3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},MaterialShader=function(a){function b(){a.call(this),this.name="Material_shader"}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Position"),a.bindAttribLocation(this.program,1,"v2CubeTexST");var b=this.paramAry[0],c=this.paramAry[1],d=(this.paramAry[4],this.paramAry[5]),e=this.paramAry[6];d||e||a.bindAttribLocation(this.program,2,"v2lightuv"),b?(a.bindAttribLocation(this.program,3,"v3Normal"),c&&(a.bindAttribLocation(this.program,4,"v3Tangent"),a.bindAttribLocation(this.program,5,"v3Bitangent"))):d&&a.bindAttribLocation(this.program,3,"v3Normal")},b.prototype.getVertexShaderString=function(){var a=this.paramAry[0],b=this.paramAry[1],c=(this.paramAry[2],this.paramAry[3],this.paramAry[4],this.paramAry[5]),d=this.paramAry[6],e=this.paramAry[7],f="attribute vec3 v3Position;\nattribute vec2 v2CubeTexST;\nvarying vec2 v0;\n";return c?f+="varying vec3 v2;\n":d||(f+="attribute vec2 v2lightuv;\nvarying vec2 v2;\n"),a?(f+="attribute vec3 v3Normal;\nvarying vec3 v1;\n",f+=b?"varying mat3 v4;\n":"varying vec3 v4;\n"):0!=e&&(f+="varying vec3 v1;\n"),b&&(f+="attribute vec3 v3Tangent;\nattribute vec3 v3Bitangent;\n"),c&&(a||(f+="attribute vec3 v3Normal;\n"),f+="uniform vec3 sunDirect;\nuniform vec3 sunColor;\nuniform vec3 ambientColor;\n"),f+="uniform mat4 vpMatrix3D;\nuniform mat4 posMatrix3D;\nuniform mat3 rotationMatrix3D;\n",f+="void main(void){\nv0 = vec2(v2CubeTexST.x, v2CubeTexST.y);\nvec4 vt0= vec4(v3Position, 1.0);\nvt0 = posMatrix3D * vt0;\n",c||d||(f+="v2 = vec2(v2lightuv.x, v2lightuv.y);\n"),(a||0!=e)&&(f+="v1 = vec3(vt0.x,vt0.y,vt0.z);\n"),f+="vt0 = vpMatrix3D * vt0;\n",a&&(f+=b?"v4 = mat3(rotationMatrix3D * v3Tangent,rotationMatrix3D * v3Bitangent, rotationMatrix3D * v3Normal);\n":"v4 = rotationMatrix3D * v3Normal;\n"),c&&(f+=a?"float suncos = dot(v4.xyz,sunDirect.xyz);\n":"vec3 n = rotationMatrix3D * v3Normal;\nfloat suncos = dot(n.xyz,sunDirect.xyz);\n",f+="suncos = clamp(suncos,0.0,1.0);\nv2 = sunColor * suncos + ambientColor;"),f+="gl_Position = vt0;}"},b.prototype.outstr=function(a){for(var b=a.split(";"),c=0;c<b.length;c++){var d=String(trim(b[c]));console.log('"'+d+';"+')}},b.prototype.getFragmentShaderString=function(){var a="uniform sampler2D s_texture1;\nuniform vec4 testconst;varying vec2 v_texCoord;\nvoid main(void)\n{\nvec4 infoUv = texture2D(s_texture, v_texCoord.xy);\ninfoUv.xyz = testconst.xyz * infoUv.xyz;\ngl_FragColor = infoUv;\n}";return a},b.MATERIAL_SHADER="Material_shader",b}(Shader3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},MaterialAnimShader=function(a){function b(){a.call(this),this.name="Material_Anim_shader"}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"pos"),a.bindAttribLocation(this.program,1,"v2Uv"),a.bindAttribLocation(this.program,2,"boneID"),a.bindAttribLocation(this.program,3,"boneWeight");var b=this.paramAry[0],c=this.paramAry[1],d=this.paramAry[4],e=this.paramAry[5];b?(a.bindAttribLocation(this.program,4,"normal"),c&&(a.bindAttribLocation(this.program,5,"tangent"),a.bindAttribLocation(this.program,6,"bitangent"))):(d||e)&&a.bindAttribLocation(this.program,4,"normal")},b.getMd5M44Str=function(){var a="vec4 qdv(vec4 q,vec3 d, vec3 v ){\nvec3 t = 2.0 * cross(q.xyz, v);\nvec3 f = v + q.w * t + cross(q.xyz, t);\nreturn  vec4(f.x+d.x,f.y+d.y,f.z+d.z,1.0);\n }\nvec4 getQDdata(vec3 vdata){\nvec4 tempnum = qdv(boneQ[int(boneID.x)],boneD[int(boneID.x)],vdata) * boneWeight.x;\ntempnum += qdv(boneQ[int(boneID.y)],boneD[int(boneID.y)],vdata) * boneWeight.y;\ntempnum += qdv(boneQ[int(boneID.z)],boneD[int(boneID.z)],vdata)* boneWeight.z;\ntempnum += qdv(boneQ[int(boneID.w)],boneD[int(boneID.w)],vdata) * boneWeight.w;\ntempnum.x = tempnum.x*-1.0;\nreturn  tempnum;\n }\n";return a},b.getMd5M44NrmStr=function(){var a="vec4 qdvNrm(vec4 q, vec3 v ){\nvec3 t = 2.0 * cross(q.xyz, v);\nvec3 f = v + q.w * t + cross(q.xyz, t);\nreturn  vec4(f.x,f.y,f.z,1.0);\n }\nvec4 getQDdataNrm(vec3 vdata){\nvec4 tempnum = qdvNrm(boneQ[int(boneID.x)],vdata) * boneWeight.x;\ntempnum += qdvNrm(boneQ[int(boneID.y)],vdata) * boneWeight.y;\ntempnum += qdvNrm(boneQ[int(boneID.z)],vdata)* boneWeight.z;\ntempnum += qdvNrm(boneQ[int(boneID.w)],vdata) * boneWeight.w;\ntempnum.x = tempnum.x*-1.0;\ntempnum.xyz = normalize(tempnum.xyz);\nreturn  tempnum;\n }\n";return a},b.prototype.getVertexShaderString=function(){var a=this.paramAry[0],c=this.paramAry[1],d=(this.paramAry[2],this.paramAry[3],this.paramAry[4]),e=this.paramAry[5],f=this.paramAry[6],g="attribute vec4 pos;\nattribute vec2 v2Uv;\nattribute vec4 boneID;\nattribute vec4 boneWeight;\nvarying vec2 v0;\nuniform vec4 boneQ[54];\nuniform vec3 boneD[54];\nuniform mat4 vpMatrix3D;\nuniform mat4 posMatrix3D;\n";return d?g+="uniform vec3 sh[9];\nvarying vec3 v2;\n":e?g+="uniform vec3 sunDirect;\nuniform vec3 sunColor;\nuniform vec3 ambientColor;\nvarying vec3 v2;\n":f||(g+="varying vec2 v2;\n"),a?(g+="attribute vec4 normal;\nuniform mat4 rotationMatrix3D;\nvarying vec3 v1;\n",g+=c?"varying mat3 v4;\n":"varying vec3 v4;\n",c&&(g+="attribute vec4 tangent;\nattribute vec4 bitangent;\n")):(d||e)&&(g+="attribute vec4 normal;\nuniform mat4 rotationMatrix3D;\n"),g+=b.getMd5M44Str()+b.getMd5M44NrmStr()+"void main(void){\nv0 = v2Uv;\nvec4 vt0 = getQDdata(vec3(pos.x,pos.y,pos.z));\nvt0.xyz = vt0.xyz*1.0;\nvt0 = posMatrix3D * vt0;\n",a&&(g+="v1 = vec3(vt0.x,vt0.y,vt0.z);\n"),g+="vt0 = vpMatrix3D * vt0;\ngl_Position = vt0;\n",a?g+=c?"vec4 vt2 = getQDdataNrm(vec3(tangent.x,tangent.y,tangent.z));\nvt2 = rotationMatrix3D * vt2;\nvt2.xyz = normalize(vt2.xyz);\nvec4 vt1 = getQDdataNrm(vec3(bitangent.x,bitangent.y,bitangent.z));\nvt1 = rotationMatrix3D * vt1;\nvt1.xyz = normalize(vt1.xyz);\nvt0 = getQDdataNrm(vec3(normal.x,normal.y,normal.z));\nvt0 = rotationMatrix3D * vt0;\nvt0.xyz = normalize(vt0.xyz);\nv4 = mat3(vec3(vt2.x,vt2.y,vt2.z),vec3(vt1.x,vt1.y,vt1.z),vec3(vt0.x,vt0.y,vt0.z));\n":"vt0 = getQDdataNrm(vec3(normal.x,normal.y,normal.z));\nvt0 = rotationMatrix3D * vt0;\nvt0.xyz = normalize(vt0.xyz);\nv4 = vec3(vt0.x,vt0.y,vt0.z);\n":(d||e)&&(g+="vt0 = getQDdataNrm(vec3(normal.x,normal.y,normal.z));\nvt0 = rotationMatrix3D * vt0;\nvt0.xyz = normalize(vt0.xyz);\n"),d?g+="vec3 lpb = sh[0] * 0.28209479177387814;\nlpb += sh[1] * (vt0.y * -0.4886025119029199);\nlpb += sh[2] * (vt0.z * 0.4886025119029199);\nlpb += sh[3] * (vt0.x * -0.4886025119029199);\nlpb += sh[4] * (vt0.x * vt0.y * 1.0925484305920792);\nlpb += sh[5] * (vt0.z * vt0.y * -1.0925484305920792);\nlpb += sh[6] * ((3.0 * vt0.z * vt0.z - 1.0) * 0.31539156525252005);\nlpb += sh[7] * (vt0.z * vt0.x * -1.0925484305920792);\nlpb += sh[8] * ((vt0.x * vt0.x - vt0.y * vt0.y) * 0.5462742152960396);\nv2 = lpb;\n":e?g+="float suncos = dot(vt0.xyz,sunDirect.xyz);\nsuncos = clamp(suncos,0.0,1.0);\nv2 = sunColor * suncos + ambientColor;":f||(g+="v2 = v2Uv;\n"),g+="}"},b.prototype.getFragmentShaderString=function(){var a="uniform sampler2D s_texture1;\nuniform vec4 testconst;varying vec2 v_texCoord;\nvoid main(void)\n{\nvec4 infoUv = texture2D(s_texture, v_texCoord.xy);\ninfoUv.xyz = testconst.xyz * infoUv.xyz;\ngl_FragColor = infoUv;\n}";return a},b.MATERIAL_ANIM_SHADER="Material_Anim_shader",b}(Shader3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},MaterialBatchAnimShader=function(a){function b(){a.call(this),this.name="Material_Batch_Anim_Shader"}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"pos"),a.bindAttribLocation(this.program,1,"v2Uv"),a.bindAttribLocation(this.program,2,"boneID"),a.bindAttribLocation(this.program,3,"boneWeight");var b=this.paramAry[0],c=this.paramAry[1],d=this.paramAry[4],e=this.paramAry[5];b?(a.bindAttribLocation(this.program,4,"normal"),c&&(a.bindAttribLocation(this.program,5,"tangent"),a.bindAttribLocation(this.program,6,"bitangent"))):(d||e)&&a.bindAttribLocation(this.program,4,"normal")},b.prototype.getVertexShaderString=function(){var a=this.paramAry[0],b=this.paramAry[1],c=(this.paramAry[2],this.paramAry[3],this.paramAry[4]),d=this.paramAry[5],e=this.paramAry[6],f="precision mediump float;\nattribute vec4 pos;\nattribute vec3 v2Uv;\nattribute vec4 boneID;\nattribute vec4 boneWeight;\nvarying vec2 v0;\nuniform mat4 bone[19];\nuniform mat4 viewMatrix3D;\nuniform mat4 camMatrix3D;\nuniform mat4 posMatrixAry[6];\n";return c?f+="varying vec3 v2;\n":d?f+="uniform vec3 sunDirect;\nuniform vec3 sunColor;\nuniform vec3 ambientColor;\nvarying vec3 v2;\n":e||(f+="varying vec2 v2;\n"),a?(f+="attribute vec4 normal;\nuniform mat4 rotationMatrix3D;\nvarying vec3 v1;\n",f+=b?"varying mat3 v4;\n":"varying vec3 v4;\n",b&&(f+="attribute vec4 tangent;\nattribute vec4 bitangent;\n")):(c||d)&&(f+="attribute vec4 normal;\nuniform mat4 rotationMatrix3D;\n"),f+="void main(void){\nv0 = vec2(v2Uv.xy);\nvec4 vt0 = bone[int(boneID.x)] * pos * boneWeight.x;\nvt0 += bone[int(boneID.y)] * pos * boneWeight.y;\nvt0 += bone[int(boneID.z)] * pos * boneWeight.z;\nvt0 += bone[int(boneID.w)] * pos * boneWeight.w;\nvt0 = posMatrixAry[int(v2Uv.z)] * vt0;\n",a&&(f+="v1 = vec3(vt0.x,vt0.y,vt0.z);\n"),f+="vt0 = camMatrix3D * vt0;\nvt0 = viewMatrix3D * vt0;\ngl_Position = vt0;\n",a?f+=b?"vec4 vt2 = bone[int(boneID.x)] * tangent * boneWeight.x;\nvt2 += bone[int(boneID.y)] * tangent * boneWeight.y;\nvt2 += bone[int(boneID.z)] * tangent * boneWeight.z;\nvt2 += bone[int(boneID.w)] * tangent * boneWeight.w;\nvt2 = rotationMatrix3D * vt2;\nvt2.xyz = normalize(vt2.xyz);\nvec4 vt1 = bone[int(boneID.x)] * bitangent * boneWeight.x;\nvt1 += bone[int(boneID.y)] * bitangent * boneWeight.y;\nvt1 += bone[int(boneID.z)] * bitangent * boneWeight.z;\nvt1 += bone[int(boneID.w)] * bitangent * boneWeight.w;\nvt1 = rotationMatrix3D * vt1;\nvt1.xyz = normalize(vt1.xyz);\nvt0 = bone[int(boneID.x)] * normal * boneWeight.x;\nvt0 += bone[int(boneID.y)] * normal * boneWeight.y;\nvt0 += bone[int(boneID.z)] * normal * boneWeight.z;\nvt0 += bone[int(boneID.w)] * normal * boneWeight.w;\nvt0 = rotationMatrix3D * vt0;\nvt0.xyz = normalize(vt0.xyz);\nv4 = mat3(vec3(vt2.x,vt2.y,vt2.z),vec3(vt1.x,vt1.y,vt1.z),vec3(vt0.x,vt0.y,vt0.z));\n":"vt0 = bone[int(boneID.x)] * normal * boneWeight.x;\nvt0 += bone[int(boneID.y)] * normal * boneWeight.y;\nvt0 += bone[int(boneID.z)] * normal * boneWeight.z;\nvt0 += bone[int(boneID.w)] * normal * boneWeight.w;\nvt0 = rotationMatrix3D * vt0;\nvt0.xyz = normalize(vt0.xyz);\nv4 = vec3(vt0.x,vt0.y,vt0.z);\n":(c||d)&&(f+="vt0 = bone[int(boneID.x)] * normal * boneWeight.x;\nvt0 += bone[int(boneID.y)] * normal * boneWeight.y;\nvt0 += bone[int(boneID.z)] * normal * boneWeight.z;\nvt0 += bone[int(boneID.w)] * normal * boneWeight.w;\nvt0 = rotationMatrix3D * vt0;\nvt0.xyz = normalize(vt0.xyz);\n"),c?f+="vec3 lpb = normalize(vec3(1.0,1.0,-1.0));\nfloat lp = min(0.0,dot(lpb,vec3(vt0.xyz)));\nlp = lp * 2.0 + 0.7;\nv2 = vec3(lp,lp,lp);\n":d?f+="float suncos = dot(vt0.xyz,sunDirect.xyz);\nsuncos = clamp(suncos,0.0,1.0);\nv2 = sunColor * suncos + ambientColor;":e||(f+="v2 = v2Uv;\n"),f+="}"},b.prototype.getFragmentShaderString=function(){var a="uniform sampler2D s_texture1;\nuniform vec4 testconst;varying vec2 v_texCoord;\nvoid main(void)\n{\nvec4 infoUv = texture2D(s_texture, v_texCoord.xy);\ninfoUv.xyz = testconst.xyz * infoUv.xyz;\ngl_FragColor = infoUv;\n}";return a},b}(Shader3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},SkyShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Position"),a.bindAttribLocation(this.program,1,"v3Normal")},b.prototype.getVertexShaderString=function(){var a="attribute vec3 v3Position;attribute vec3 v3Normal;uniform mat4 viewMatrix3D;uniform mat4 camMatrix3D;uniform mat4 posMatrix3D;varying vec3 vNormal;void main(void){   vNormal = vec3(v3Normal.x, v3Normal.y,v3Normal.z);   vec4 vt0= vec4(v3Position, 1.0);   vt0 = posMatrix3D * vt0;   vt0 = camMatrix3D * vt0;   vt0 = viewMatrix3D * vt0;   gl_Position = vt0;}";return a},b.prototype.getFragmentShaderString=function(){var a="precision mediump float;\nuniform samplerCube s_texture;\nvarying vec3 vNormal;\nvoid main(void)\n{\nvec4 infoUv = textureCube(s_texture, vNormal);\ngl_FragColor = infoUv;\n}";return a},b.Sky_Shader="SkyShader",b}(Shader3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3DShadowShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Pos"),a.bindAttribLocation(this.program,1,"v2uv")},b.prototype.getVertexShaderString=function(){var a="attribute vec3 v3Pos;attribute vec3 v2uv;uniform mat4 viewMatrix3D;uniform mat4 camMatrix3D;uniform vec4 pos[30];varying vec2 v_texCoord;void main(void){   v_texCoord = vec2(v2uv.x, v2uv.y);   vec3 vt1= vec3(v3Pos.xyz * pos[int(v2uv.z)].w + pos[int(v2uv.z)].xyz);   vec4 vt0= vec4(vt1, 1.0);   vt0 = camMatrix3D * vt0;   vt0 = viewMatrix3D * vt0;   gl_Position = vt0;}";return a},b.prototype.getFragmentShaderString=function(){var a=" precision mediump float;\nuniform sampler2D s_texture;\nvarying vec2 v_texCoord;\nvoid main(void)\n{\nvec4 infoUv = texture2D(s_texture, v_texCoord.xy);\ninfoUv.xyz *= infoUv.w;\ngl_FragColor = infoUv;\n}";return a},b.Display3DShadowShader="Display3DShadowShader",b}(Shader3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},UIShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Pos"),a.bindAttribLocation(this.program,1,"v2uv")},b.prototype.getVertexShaderString=function(){var a="attribute vec3 v3Pos;attribute vec3 v2uv;uniform vec4 ui[50];uniform vec4 ui2[50];varying vec2 v_texCoord;void main(void){   vec4 data = ui2[int(v2uv.z)];   v_texCoord = vec2(v2uv.x * data.x + data.z, v2uv.y * data.y + data.w);   data = ui[int(v2uv.z)];   vec3 pos = vec3(0.0,0.0,0.0);   pos.xy = v3Pos.xy * data.zw * 2.0;   pos.x += data.x * 2.0 - 1.0;   pos.y += -data.y * 2.0 + 1.0;   vec4 vt0= vec4(pos, 1.0);   gl_Position = vt0;}";return a},b.prototype.getFragmentShaderString=function(){var a=" precision mediump float;\nuniform sampler2D s_texture;\nvarying vec2 v_texCoord;\nvoid main(void)\n{\nvec4 infoUv = texture2D(s_texture, v_texCoord.xy);\ninfoUv.xyz *= infoUv.w;\ngl_FragColor = infoUv;\n}";return a},b.UI_SHADER="UIShader",b}(Shader3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},UIImageShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Pos"),a.bindAttribLocation(this.program,1,"v2uv")},b.prototype.getVertexShaderString=function(){var a="attribute vec3 v3Pos;attribute vec2 v2uv;uniform vec2 scale;varying vec2 v_texCoord;void main(void){   v_texCoord = vec2(v2uv.x, v2uv.y);   vec4 vt0= vec4(v3Pos.x*scale.x,v3Pos.y*scale.y,v3Pos.z,1.0);   gl_Position = vt0;}";return a},b.prototype.getFragmentShaderString=function(){var a=" precision mediump float;\nuniform sampler2D s_texture;\nuniform float alpha;varying vec2 v_texCoord;\nvoid main(void)\n{\nvec4 infoUv = texture2D(s_texture, v_texCoord.xy);\ninfoUv.xyz *= infoUv.w * alpha;\ngl_FragColor = infoUv;\n}";return a},b.UI_IMG_SHADER="UI_img_Shader",b}(Shader3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},UIMaskShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Pos")},b.prototype.getVertexShaderString=function(){var a="attribute vec3 v3Pos;uniform vec4 ui;void main(void){   vec3 pos = vec3(0.0,0.0,0.0);   pos.xy = v3Pos.xy * ui.zw * 2.0;   pos.x += ui.x * 2.0 - 1.0;   pos.y += -ui.y * 2.0 + 1.0;   vec4 vt0= vec4(pos, 1.0);   gl_Position = vt0;}";return a},b.prototype.getFragmentShaderString=function(){var a=" precision mediump float;\nvoid main(void)\n{\ngl_FragColor = vec4(0.5,0.5,0.5,1.0);\n}";return a},b.UI_MASK_SHADER="UImaskShader",b}(Shader3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Movie2DShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Pos"),a.bindAttribLocation(this.program,1,"v2uv")},b.prototype.getVertexShaderString=function(){var a="attribute vec3 v3Pos;attribute vec3 v2uv;uniform mat4 viewMatrix3D;\nuniform mat4 camMatrix3D;\nuniform mat4 watchCamMatrix3D;\nuniform vec4 posdata[24];uniform vec2 outuv;varying vec2 v_texCoord;void main(void){   vec4 data = posdata[int(v2uv.z)];   vec4 vt0= vec4(v3Pos * data.w,1.0);   vt0= watchCamMatrix3D * vt0;   vt0.xyz += data.xyz;   v_texCoord = vec2(v2uv.x,v2uv.y) + outuv;   gl_Position = viewMatrix3D * camMatrix3D * vt0;}";return a},b.prototype.getFragmentShaderString=function(){var a=" precision mediump float;\nuniform sampler2D s_texture;\nvarying vec2 v_texCoord;\nvoid main(void)\n{\nvec4 infoUv = texture2D(s_texture, v_texCoord.xy);\ninfoUv.xyz *= infoUv.w;\nif(infoUv.w < 0.1){discard;}\ngl_FragColor = infoUv;\n}";return a},b.MOVIE2D_SHADER="Movie2DShader",b}(Shader3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Sprite2DShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Pos"),a.bindAttribLocation(this.program,1,"v2uv")},b.prototype.getVertexShaderString=function(){var a="attribute vec3 v3Pos;attribute vec3 v2uv;uniform mat4 viewMatrix3D;\nuniform mat4 camMatrix3D;\nuniform mat4 watchCamMatrix3D;\nuniform vec4 posdata[12];varying vec2 v_texCoord;void main(void){   vec4 data = posdata[int(v2uv.z)];   vec4 vt0= vec4(v3Pos * data.w,1.0);   vt0= watchCamMatrix3D * vt0;   vt0.xyz += data.xyz;   v_texCoord = vec2(v2uv.x,v2uv.y);   gl_Position = viewMatrix3D * camMatrix3D * vt0;}";return a},b.prototype.getFragmentShaderString=function(){var a=" precision mediump float;\nuniform sampler2D s_texture;\nvarying vec2 v_texCoord;\nvoid main(void)\n{\nvec4 infoUv = texture2D(s_texture, v_texCoord.xy);\ninfoUv.xyz *= infoUv.w;\nif(infoUv.w < 0.1){discard;}\ngl_FragColor = infoUv;\n}";return a},b.SPRITE2D_SHADER="Sprite2DShader",b}(Shader3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},TerrainDisplay3DShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Position"),a.bindAttribLocation(this.program,1,"v2TexCoord")},b.prototype.getVertexShaderString=function(){var a="attribute vec3 v3Position;attribute vec2 v2TexCoord;\nuniform mat4 viewMatrix3D;uniform mat4 camMatrix3D;uniform mat4 posMatrix3D;varying vec2 v0;\nvoid main(void){ v0 = v2TexCoord;   vec4 vt0= vec4(v3Position, 1.0);   vt0 = posMatrix3D * vt0;   vt0 = camMatrix3D * vt0;   vt0 = viewMatrix3D * vt0;   gl_Position = vt0;}";return a},b.prototype.getFragmentShaderString=function(){var a="precision mediump float;uniform sampler2D idmaptexture;uniform sampler2D infotexture;uniform sampler2D sixtexture;uniform sampler2D lightexture;vec4 qdvNrm(float indx ,vec2 uvpos){vec2 sixuvTx=uvpos; float ccavid= floor(indx*255.0);if (ccavid==0.0) {\n} else  if (ccavid==1.0){\nsixuvTx.x=sixuvTx.x+0.5;} else  if (ccavid==2.0){sixuvTx.y=sixuvTx.y+0.5;}else{sixuvTx.x=sixuvTx.x+0.5;sixuvTx.y=sixuvTx.y+0.5;}; sixuvTx.x=sixuvTx.x+0.001;sixuvTx.y=sixuvTx.y+0.001;vec4 sixUvColor = texture2D(sixtexture, sixuvTx.xy);\nreturn  sixUvColor;\n }\nvarying vec2 v0;void main(void){vec4 idUv = texture2D(idmaptexture, v0.xy);\nvec4 infoUv = texture2D(infotexture, v0.xy);\nvec4 sixUv = texture2D(sixtexture, v0.xy);\nvec4 lightUv = texture2D(lightexture, v0.xy);\nvec2 sixuv=fract(v0*10.0);  sixuv=sixuv*0.498; vec4 tempnumA = qdvNrm(idUv.x,sixuv) * infoUv.x;\nvec4 tempnumB = qdvNrm(idUv.y,sixuv) * infoUv.y;\nvec4 tempnumC = qdvNrm(idUv.z,sixuv) * infoUv.z;\nvec4 tempnumD = tempnumA+tempnumB+tempnumC;\n tempnumD.xyz=tempnumD.xyz*lightUv.xyz*2.0; gl_FragColor = tempnumD;}";return a},b.TerrainDisplay3DShader="TerrainDisplay3DShader",b}(Shader3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3D=function(a){function b(){a.call(this),this.sceneVisible=!0,this._hasDestory=!1,this._onStage=!1}return __extends(b,a),b.prototype.update=function(){},Object.defineProperty(b.prototype,"onStage",{get:function(){return this._onStage},enumerable:!0,configurable:!0}),b.prototype.addStage=function(){this._onStage=!0},b.prototype.removeStage=function(){this._onStage=!1},b.prototype.resize=function(){},b.prototype.destory=function(){this.objData&&this.objData.useNum--},b}(Object3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3DSprite=function(a){function b(){a.call(this),this.time=0,this.dynamic=!1,this._rotationMatrix=new Matrix3D}return __extends(b,a),Object.defineProperty(b.prototype,"rotationData",{get:function(){return this._rotationData},set:function(a){this._rotationData=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"aabbVect",{get:function(){if(!this._aabbVect){
var a=this.aabb,b=a.x,c=a.y,d=a.z,e=a.width,f=a.height,g=a.depth;this._aabbVect=new Array,this._aabbVect.push(new Vector3D(b,c,d)),this._aabbVect.push(new Vector3D(b+e,c,d)),this._aabbVect.push(new Vector3D(b,c+f,d)),this._aabbVect.push(new Vector3D(b,c,d+g)),this._aabbVect.push(new Vector3D(b+e,c+f,d)),this._aabbVect.push(new Vector3D(b+e,c,d+g)),this._aabbVect.push(new Vector3D(b,c+f,d+g)),this._aabbVect.push(new Vector3D(b+e,c+f,d+g))}return this._aabbVect},enumerable:!0,configurable:!0}),b.prototype.setObjUrl=function(a){var b=this;this.objurl=a,ObjDataManager.getInstance().getObjData(Scene_data.fileRoot+a,function(a){b.objData=a,b.material&&(b.objData.tangentBuffer||ObjDataManager.getInstance().creatTBNBuffer(b.objData))})},b.prototype.setLightMapUrl=function(a){var b=this;if(a&&""!=a){var c=Scene_data.fileRoot+a;TextureManager.getInstance().getTexture(c,function(a){b.lightMapTextureRes=a})}},Object.defineProperty(b.prototype,"lightMapTexture",{get:function(){return this.lightMapTextureRes||console.log("无光照贴图------------------------------------"),this.lightMapTextureRes.texture},enumerable:!0,configurable:!0}),b.prototype.setMaterialUrl=function(a,b){var c=this;void 0===b&&(b=null),a=a.replace("_byte.txt",".txt"),a=a.replace(".txt","_byte.txt"),this.materialUrl=Scene_data.fileRoot+a,MaterialManager.getInstance().getMaterialByte(this.materialUrl,function(a){c.material=a,c.material.useNormal&&c.objData&&!c.objData.tangentBuffer&&ObjDataManager.getInstance().creatTBNBuffer(c.objData),(c.material.usePbr||c.material.directLight)&&(c.rotationData=new Float32Array(9),c.updateRotationMatrix()),b&&(c.materialParam=new MaterialBaseParam,c.materialParam.setData(c.material,b))},null,!0,MaterialShader.MATERIAL_SHADER,MaterialShader)},Object.defineProperty(b.prototype,"lightProbe",{get:function(){return this._lightProbe},set:function(a){if(this._lightProbe=a,this._lightProbe&&!this.resultSHVec){this.resultSHVec=new Array;for(var b=[.4444730390920146,-.3834955622240026,-.33124467509627725,.09365654209093091,-.05673310882817577,.2120523322966496,.02945768486978205,-.04965996229802928,-.1136529129285836],c=0;9>c;c++)this.resultSHVec.push(new Vector3D(b[c],b[c],b[c]))}},enumerable:!0,configurable:!0}),b.prototype.update=function(){(this.dynamic||this.sceneVisible)&&this.updateMaterial()},b.prototype.updateMaterial=function(){this.material&&this.objData&&(Scene_data.context3D.setBlendParticleFactors(this.material.blendMode),Scene_data.context3D.cullFaceBack(this.material.backCull),this.updateBind(),Scene_data.context3D.setProgram(this.material.program),Scene_data.context3D.setWriteDepth(this.material.writeZbuffer),Scene_data.context3D.setVcMatrix4fv(this.material.shader,"posMatrix3D",this.posMatrix.m),this.setCam(),this.setMaterialVc(this.material,this.materialParam),this.setMaterialTexture(this.material,this.materialParam),this.setDirectLight(this.material),this.setMaterialVa(),Scene_data.context3D.drawCall(this.objData.indexBuffer,this.objData.treNum))},b.prototype.setMaterialVa=function(){this.objData.compressBuffer?this.setMaterialVaCompress():this.setMaterialVaIndependent()},b.prototype.setMaterialVaIndependent=function(){Scene_data.context3D.setVa(0,3,this.objData.vertexBuffer),Scene_data.context3D.setVa(1,2,this.objData.uvBuffer),this.material.directLight||this.material.noLight||Scene_data.context3D.setVa(2,2,this.objData.lightUvBuffer),(this.material.usePbr||this.material.directLight)&&(Scene_data.context3D.setVa(3,3,this.objData.normalsBuffer),Scene_data.context3D.setVcMatrix3fv(this.material.shader,"rotationMatrix3D",this.rotationData),console.log("不可以走这里")),this.material.useNormal&&(Scene_data.context3D.setVa(4,3,this.objData.tangentBuffer),Scene_data.context3D.setVa(5,3,this.objData.bitangentBuffer))},b.prototype.setMaterialVaCompress=function(){var a=Scene_data.context3D.pushVa(this.objData.vertexBuffer);a||(Scene_data.context3D.setVaOffset(0,3,this.objData.stride,0),Scene_data.context3D.setVaOffset(1,2,this.objData.stride,this.objData.uvsOffsets),this.material.directLight||this.material.noLight||Scene_data.context3D.setVaOffset(2,2,this.objData.stride,this.objData.lightuvsOffsets),(this.material.usePbr||this.material.directLight)&&Scene_data.context3D.setVaOffset(3,3,this.objData.stride,this.objData.normalsOffsets),this.material.useNormal&&(Scene_data.context3D.setVaOffset(4,3,this.objData.stride,this.objData.tangentsOffsets),Scene_data.context3D.setVaOffset(5,3,this.objData.stride,this.objData.bitangentsOffsets)))},b.prototype.setDirectLight=function(a){a.directLight&&(Scene_data.context3D.setVc3fv(a.shader,"ambientColor",Scene_data.light.ambientColor),Scene_data.context3D.setVc3fv(a.shader,"sunDirect",Scene_data.light.sunDirect),Scene_data.context3D.setVc3fv(a.shader,"sunColor",Scene_data.light.sunColor),Scene_data.context3D.setVcMatrix3fv(this.material.shader,"rotationMatrix3D",this.rotationData))},b.prototype.setCam=function(){Scene_data.context3D.setVpMatrix(this.material.shader,Scene_data.vpMatrix.m)},b.prototype.setBind=function(a,b){this.bindTarget=a,this.bindSocket=b,this.bindMatrix=new Matrix3D},b.prototype.setGroup=function(a,b,c){this._isInGroup=!0,this._groupPos=a,this._groupRotation=b,this._groupScale=c,this.groupMatrix=new Matrix3D,this.groupRotationMatrix=new Matrix3D,this.groupMatrix.isIdentity=!1,this.groupMatrix.identity(),this.groupMatrix.appendScale(c.x,c.y,c.z),this.groupMatrix.appendRotation(b.x,Vector3D.X_AXIS),this.groupMatrix.appendRotation(b.y,Vector3D.Y_AXIS),this.groupMatrix.appendRotation(b.z,Vector3D.Z_AXIS),this.groupMatrix.appendTranslation(a.x,a.y,a.z),this.groupRotationMatrix.isIdentity=!1,this.groupRotationMatrix.identity(),this.groupRotationMatrix.prependRotation(b.z,Vector3D.Z_AXIS),this.groupRotationMatrix.prependRotation(b.y,Vector3D.Y_AXIS),this.groupRotationMatrix.prependRotation(b.x,Vector3D.X_AXIS)},b.prototype.updateBind=function(){this.bindTarget&&(this.posMatrix.identity(),this.posMatrix.appendScale(this._scaleX,this._scaleY,this._scaleZ),this._isInGroup&&this.posMatrix.append(this.groupMatrix),this.bindTarget.getSocket(this.bindSocket,this.bindMatrix),this.posMatrix.append(this.bindMatrix),this.bindMatrix.copyTo(this._rotationMatrix),this._rotationMatrix.identityPostion(),this._isInGroup&&this._rotationMatrix.prepend(this.groupRotationMatrix))},b.prototype.setBaseMaterialVc=function(a){var b=0;a.hasTime&&(b=(TimeUtil.getTimer()-this.time)%1e5*.001),(a.hasTime||a.usePbr||a.useKill)&&Scene_data.context3D.setVc4fv(a.shader,"fc0",[1,0,a.killNum,b]),a.scaleLightMap&&Scene_data.context3D.setVcFloat(a.shader,"scalelight",Scene_data.scaleLight),(a.usePbr||1==a.fogMode)&&this.setCamPos(a),0!=a.fogMode&&(Scene_data.context3D.setVc2fv(a.shader,"fogdata",Scene_data.fogData),Scene_data.context3D.setVc3fv(a.shader,"fogcolor",Scene_data.fogColor))},b.prototype.setCamPos=function(a){a.updateCam(Scene_data.cam3D.x/100,Scene_data.cam3D.y/100,Scene_data.cam3D.z/100)},b.prototype.setMaterialVc=function(a,b){if(void 0===b&&(b=null),!(a.fcNum<=0)){var c=0;a.hasTime&&(c=(TimeUtil.getTimer()-this.time)%1e5*.001),a.update(c),this.setCamPos(a),b&&b.update(),Scene_data.context3D.setVc4fv(a.shader,"fc",a.fcData)}},b.prototype.setMaterialTexture=function(a,b){void 0===b&&(b=null);for(var c=a.texList,d=0;d<c.length;d++)if(c[d].type==TexItem.LIGHTMAP)Scene_data.context3D.setRenderTexture(a.shader,c[d].name,this.lightMapTexture,c[d].id);else if(c[d].type==TexItem.LTUMAP&&Scene_data.pubLut)Scene_data.context3D.setRenderTexture(a.shader,c[d].name,Scene_data.pubLut,c[d].id);else if(c[d].type==TexItem.CUBEMAP)if(a.useDynamicIBL);else{var e=Math.floor(5*a.roughness);if(Scene_data.skyCubeMap){var f=Scene_data.skyCubeMap[e];Scene_data.context3D.setRenderTextureCube(a.program,c[d].name,f,c[d].id)}}else c[d].texture&&Scene_data.context3D.setRenderTexture(a.shader,c[d].name,c[d].texture,c[d].id);if(b)for(d=0;d<b.dynamicTexList.length;d++)b.dynamicTexList[d].target&&Scene_data.context3D.setRenderTexture(a.shader,b.dynamicTexList[d].target.name,b.dynamicTexList[d].texture,b.dynamicTexList[d].target.id)},b.prototype.checkMaterialTexture=function(a){for(var b=a.texList,c=0;c<b.length;c++)if(b[c].type==TexItem.LIGHTMAP){if(!this.lightMapTexture)return!1}else if(b[c].type==TexItem.LTUMAP){if(!Scene_data.pubLut)return!1}else if(b[c].type==TexItem.CUBEMAP){if(a.useDynamicIBL);else if(!Scene_data.skyCubeMap)return!1}else if(!b[c].texture)return!1;return!0},b.prototype.updateRotationMatrix=function(){try{this._rotationMatrix.identity(),this._rotationMatrix.appendRotation(this._rotationX,Vector3D.X_AXIS),this._rotationMatrix.appendRotation(this._rotationY,Vector3D.Y_AXIS),this._rotationMatrix.appendRotation(this._rotationZ,Vector3D.Z_AXIS),this.rotationData&&this._rotationMatrix.getRotaion(this.rotationData)}catch(a){console.log("在此处理错误1")}},b.prototype.setPos=function(a){this.x=a.x,this.y=a.y+10,this.z=a.z},b.prototype.destory=function(){a.prototype.destory.call(this),this.name=null,this.objurl=null,this.picUrl=null,this.materialUrl=null,this.material&&this.material.useNum--,this.materialParam&&(this.materialParam.destory(),this.materialParam=null),this.lightMapTextureRes&&this.lightMapTextureRes.clearUseNum(),this._rotationMatrix=null,this.rotationData=null,this.bindMatrix=null,this.bindTarget=null,this.bindSocket=null,this._groupPos=null,this._groupRotation=null,this._groupScale=null,this.groupMatrix=null,this.groupRotationMatrix=null},b}(Display3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3DSky=function(a){function b(){a.call(this),this.shader=ProgrmaManager.getInstance().getProgram(SkyShader.Sky_Shader),this.program=this.shader.program}return __extends(b,a),b.prototype.setObjUrl=function(a){var b=this;this.objurl=a,ObjDataManager.getInstance().getObjData(Scene_data.fileRoot+a,function(a){b.objData=a})},b.prototype.setCubeUrl=function(a){var b=this;TextureManager.getInstance().loadCubeTexture(a,function(a){b.cubeTextList=a})},b.prototype.update=function(){Scene_data.context3D.setProgram(this.program),Scene_data.context3D.setVcMatrix4fv(this.shader,"viewMatrix3D",Scene_data.viewMatrx3D.m),Scene_data.context3D.setVcMatrix4fv(this.shader,"camMatrix3D",Scene_data.cam3D.cameraMatrix.m),Scene_data.context3D.setVcMatrix4fv(this.shader,"posMatrix3D",this.posMatrix.m),this.cubeTextList&&Scene_data.context3D.setRenderTextureCube(this.program,"s_texture",this.cubeTextList[0],0),Scene_data.context3D.setVa(0,3,this.objData.vertexBuffer),Scene_data.context3D.setVa(1,3,this.objData.normalsBuffer),Scene_data.context3D.drawCall(this.objData.indexBuffer,this.objData.treNum)},b}(Display3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3dMovie=function(a){function b(){a.call(this),this._completeState=0,this._defaultAction="stand",this._curentFrame=0,this._actionTime=0,this._fileScale=1,this.isSinging=!1,this._nextScale=1,this.locationDic=new Object,this._animDic=new Object,this._partDic=new Object,this._partUrl=new Object,this._preLoadActionDic=new Object,this._waitLoadActionDic=new Object,this.showCapsule=!1,this._enablePhysics=!1}return __extends(b,a),Object.defineProperty(b.prototype,"curentAction",{get:function(){return this._curentAction},set:function(a){this._curentAction=a},enumerable:!0,configurable:!0}),b.prototype.fixAstartData=function(a){},b.prototype.setRoleUrl=function(a){var b=this;this.clearMesh(),MeshDataManager.getInstance().getMeshData(a,function(a){b._skinMesh=a,b.fileScale=a.fileScale,b.onStage&&b.addSkinMeshParticle(),b._animDic=a.animDic,b.onMeshLoaded()})},b.prototype.onMeshLoaded=function(){},b.prototype.clearMesh=function(){this.removeSkinMeshParticle(),this._skinMesh&&this._skinMesh.useNum--,this._skinMesh=null,this._animDic=new Object},b.prototype.addSkinMeshParticle=function(){var a=new Array;this._partDic.mesh=a;for(var b=this._skinMesh.meshAry,c=0;c<b.length;c++)for(var d=b[c].particleAry,e=0;e<d.length;e++){var f,g=d[e];f=ParticleManager.getInstance().getParticleByte(Scene_data.fileRoot+g.url),f.dynamic=!0,f.bindSocket=g.socketName,a.push(f),f.bindTarget=this,ParticleManager.getInstance().addParticle(f)}},b.prototype.removeSkinMeshParticle=function(){var a=this._partDic.mesh;if(a){for(var b=0;b<a.length;b++)ParticleManager.getInstance().removeParticle(a[b]),a[b].destory();this._partDic.mesh=null}},b.prototype.roleResCom=function(a,b){},b.prototype.setMeshUrl=function(a,b){var c=this;void 0===b&&(b=1),this._meshUrl=Scene_data.fileRoot+a,MeshDataManager.getInstance().getMeshData(this._meshUrl,function(a){c._skinMesh=a,1!=b&&(c._skinMesh.type=1);for(var d in c._animDic)c.processAnimByMesh(c._animDic[d]);a.loadMaterial(function(a){c.loadMaterialCom(a)}),c.fileScale=a.fileScale},b)},Object.defineProperty(b.prototype,"scale",{get:function(){return this._nextScale},set:function(a){this._nextScale=a,this._scaleX=a*this._fileScale,this._scaleY=a*this._fileScale,this._scaleZ=a*this._fileScale,this.updateMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"fileScale",{set:function(a){this._fileScale=a,this._scaleX=this._nextScale*a,this._scaleY=this._nextScale*a,this._scaleZ=this._nextScale*a,this.updateMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"shadow",{set:function(a){a?this._shadow||(this._shadow=ShadowManager.getInstance().addShadow()):this._shadow&&ShadowManager.getInstance().removeShadow(this._shadow)},enumerable:!0,configurable:!0}),b.prototype.setShadowSize=function(a){this._shadow&&(this._shadow.size=a)},b.prototype.addStage=function(){a.prototype.addStage.call(this),this._shadow&&(this._shadow.visible=!0)},b.prototype.removeStage=function(){a.prototype.removeStage.call(this),this._shadow&&ShadowManager.getInstance().removeShadow(this._shadow);for(var b in this._partDic)for(var c=this._partDic[b],d=0;d<c.length;d++)c[d]instanceof CombineParticle?ParticleManager.getInstance().removeParticle(c[d]):c[d]instanceof Display3DSprite&&SceneManager.getInstance().removeSpriteDisplay(c[d])},b.prototype.loadMaterialCom=function(a){a.lightProbe&&(this.lightProbe=!0)},b.prototype.setCollision=function(a,b){},b.prototype.removePart=function(a){var b=this._partDic[a];if(b){for(var c=0;c<b.length;c++)b[c]instanceof CombineParticle?(ParticleManager.getInstance().removeParticle(b[c]),b[c].destory()):b[c]instanceof Display3DSprite&&(SceneManager.getInstance().removeSpriteDisplay(b[c]),b[c].destory());this._partDic[a]=null,this._partUrl[a]=null}},b.prototype.addPart=function(a,b,c){var d=this;if(this._partUrl[a]!=c){this._partUrl[a]&&this.removePart(a),this._partDic[a]||(this._partDic[a]=new Array),this._partUrl[a]=c;var e=this._partDic[a];GroupDataManager.getInstance().getGroupData(Scene_data.fileRoot+c,function(a){d.loadPartRes(b,a,e)})}},b.prototype.loadPartRes=function(a,b,c){for(var d=0;d<b.dataAry.length;d++){var e,f,g,h=b.dataAry[d];if(h.isGroup&&(e=new Vector3D(h.x,h.y,h.z),f=new Vector3D(h.rotationX,h.rotationY,h.rotationZ),g=new Vector3D(h.scaleX,h.scaleY,h.scaleZ)),h.types==BaseRes.SCENE_PARTICLE_TYPE){var i=ParticleManager.getInstance().getParticleByte(Scene_data.fileRoot+h.particleUrl);c.push(i),i.bindTarget=this,i.bindSocket=a,i.dynamic=!0,ParticleManager.getInstance().addParticle(i),h.isGroup&&i.setGroup(e,f,g)}else if(h.types==BaseRes.PREFAB_TYPE){var j=new Display3DSprite;j.setObjUrl(h.objUrl),j.setMaterialUrl(h.materialUrl,h.materialInfoArr),j.dynamic=!0,c.push(j),j.setBind(this,a),SceneManager.getInstance().addSpriteDisplay(j),h.isGroup&&j.setGroup(e,f,g)}}},b.prototype.getSocket=function(a,b){if(b.identity(),!this._skinMesh)return void b.append(this.posMatrix);if(!this._skinMesh.boneSocketDic[a])return void((a="none")?b.appendTranslation(this._x,this._y,this._z):b.append(this.posMatrix));var c,d=this._skinMesh.boneSocketDic[a],e=d.index;c=this.getFrameMatrix(e),b.appendScale(1/this._scaleX,1/this._scaleY,1/this._scaleZ),b.appendRotation(d.rotationX,Vector3D.X_AXIS),b.appendRotation(d.rotationY,Vector3D.Y_AXIS),b.appendRotation(d.rotationZ,Vector3D.Z_AXIS),b.appendTranslation(d.x,d.y,d.z),c&&(b.append(this._skinMesh.bindPosInvertMatrixAry[e]),b.append(c)),b.append(this.posMatrix)},b.prototype.getSunType=function(){return 0},b.prototype.getFrameMatrix=function(a){if(this._animDic[this.curentAction]){var b=this._animDic[this.curentAction];return b.matrixAry[this._curentFrame][a]}if(this._animDic[this._defaultAction]){var b=this._animDic[this._defaultAction];return b.matrixAry[this._curentFrame][a]}return null},b.prototype.addAction=function(a,b,c){void 0===c&&(c=!1),this._preLoadActionDic[a]=b,a==this._defaultAction||a==this.curentAction?this.setAnimUrl(a,b):c&&this.setAnimUrl(a,b)},b.prototype.setAnimUrl=function(a,b){var c=this;this._waitLoadActionDic[a]=!0,AnimManager.getInstance().getAnimData(b,function(b){c._animDic[a]=b,c.processAnimByMesh(b),c._waitLoadActionDic[a]=!1})},b.prototype.play=function(a,b,c){return void 0===b&&(b=0),void 0===c&&(c=!0),this.curentAction!=a?(this.curentAction=a,this._completeState=b,this._actionTime=0,this.updateFrame(0),this._animDic.hasOwnProperty(a)?!0:(!this._waitLoadActionDic[a]&&this._preLoadActionDic[a]&&this.setAnimUrl(a,this._preLoadActionDic[a]),!1)):void 0},b.prototype.processAnimByMesh=function(a){if(this._skinMesh&&!a.hasProcess){for(var b=0;b<a.matrixAry.length;b++)for(var c=a.matrixAry[b],d=0;d<c.length;d++)c[d].prepend(this._skinMesh.bindPosMatrixAry[d]);a.hasProcess=!0}},b.prototype.update=function(){if(this._skinMesh){this.lightProbe&&(this.resultSHVec=LightProbeManager.getInstance().getData(new Vector3D(this.x,this.y+10,this.z))),this.updateBind();for(var a=0;a<this._skinMesh.meshAry.length;a++)this.updateMaterialMesh(this._skinMesh.meshAry[a]);this.showCapsule&&this.updateShowCapsule()}},b.prototype.updateFrame=function(a){this._actionTime+=a;var b;if(this.curentAction&&this._animDic[this.curentAction])b=this.curentAction;else{if(!this._animDic[this._defaultAction])return;b=this._defaultAction}var c=this._animDic[b];this._curentFrame=float2int(this._actionTime/(2*Scene_data.frameTime)),this._curentFrame>=c.matrixAry.length&&(0==this._completeState?(this._actionTime=0,this._curentFrame=0):1==this._completeState?this._curentFrame=c.matrixAry.length-1:2==this._completeState?(this._curentFrame=0,this._completeState=0,this.changeAction(this.curentAction)):3==this._completeState)},b.prototype.changeAction=function(a){this.curentAction=this._defaultAction},b.prototype.destory=function(){a.prototype.destory.call(this),this._skinMesh&&this._skinMesh.useNum--;for(var b in this._partDic)for(var c=this._partDic[b],d=0;d<c.length;d++)c[d]instanceof CombineParticle?c[d].destory():c[d]instanceof Display3DSprite&&c[d].destory();this._partDic=null},b.prototype.updateShowCapsule=function(){this.capsuleLineSprite?(this.capsuleLineSprite.x=this.x,this.capsuleLineSprite.y=this.y+this._capsule.radius,this.capsuleLineSprite.z=this.z,this.capsuleLineSprite.update()):(this.capsuleLineSprite=new LineDisplaySprite,this.capsuleLineSprite.clear(),this.capsuleLineSprite.baseColor=new Vector3D(1,0,0,1),this.drawCylinder(this._capsule.radius,this._capsule.height),this.drawBall(this._capsule.radius),this.capsuleLineSprite.upToGpu())},b.prototype.drawBall=function(a){var b,c,d,e,f,g,h,i=a,j=12;for(f=0;j>=f;f++)for(d=null,e=j/2;j>e;e++)b=new Vector3D(i,0,0),c=new Matrix3D,c.appendRotation(360/j*e,Vector3D.Z_AXIS),b=c.transformVector(b),g=new Matrix3D,g.appendRotation(360/j*f,Vector3D.Y_AXIS),b=g.transformVector(b),d&&this.capsuleLineSprite.makeLineMode(d,b),d=b.clone();for(f=1;4>=f;f++)for(g=new Matrix3D,g.appendRotation(-20*f,Vector3D.Z_AXIS),h=g.transformVector(new Vector3D(i,0,0)),d=null,e=0;j>e;e++)b=h.clone(),c=new Matrix3D,c.appendRotation(360/j*e,Vector3D.Y_AXIS),b=c.transformVector(b),d&&this.capsuleLineSprite.makeLineMode(d,b),e==j-1&&this.capsuleLineSprite.makeLineMode(h,b),d=b.clone()},b.prototype.drawCylinder=function(a,b){var c,d,e,f=a,g=b,h=12;for(e=0;h>e;e++){var i=new Vector3D(f,0,0),j=new Vector3D(f,+g,0),k=new Matrix3D;k.appendRotation(e*(360/h),Vector3D.Y_AXIS);var l=k.transformVector(i),m=k.transformVector(j);this.capsuleLineSprite.makeLineMode(l,m),this.capsuleLineSprite.makeLineMode(m,new Vector3D(0,+g,0)),e==h-1&&(this.capsuleLineSprite.makeLineMode(l,i),this.capsuleLineSprite.makeLineMode(m,j)),(c||d)&&(this.capsuleLineSprite.makeLineMode(l,c),this.capsuleLineSprite.makeLineMode(m,d)),c=l.clone(),d=m.clone()}},b.prototype.setVcMatrix=function(a){Scene_data.context3D.setVpMatrix(a.material.shader,Scene_data.vpMatrix.m),Scene_data.context3D.setVcMatrix4fv(a.material.shader,"posMatrix3D",this.posMatrix.m)},b.prototype.setVa=function(a){a.compressBuffer?this.setVaCompress(a):this.setVaIndependent(a)},b.prototype.setVaIndependent=function(a){Scene_data.context3D.setVa(0,3,a.vertexBuffer),Scene_data.context3D.setVa(1,2,a.uvBuffer),Scene_data.context3D.setVa(2,4,a.boneIdBuffer),Scene_data.context3D.setVa(3,4,a.boneWeightBuffer),a.material.usePbr?(Scene_data.context3D.setVa(4,4,a.normalsBuffer),Scene_data.context3D.setVcMatrix4fv(a.material.shader,"rotationMatrix3D",this._rotationMatrix.m),a.material.useNormal&&(Scene_data.context3D.setVa(5,4,a.tangentBuffer),Scene_data.context3D.setVa(6,4,a.bitangentBuffer))):(a.material.lightProbe||a.material.directLight)&&(Scene_data.context3D.setVa(4,4,a.normalsBuffer),Scene_data.context3D.setVcMatrix4fv(a.material.shader,"rotationMatrix3D",this._rotationMatrix.m))},b.prototype.setVaCompress=function(a){var b=Scene_data.context3D.pushVa(a.vertexBuffer);b||(Scene_data.context3D.setVaOffset(0,3,a.stride,0),Scene_data.context3D.setVaOffset(1,2,a.stride,a.uvsOffsets),Scene_data.context3D.setVaOffset(2,4,a.stride,a.boneIDOffsets),Scene_data.context3D.setVaOffset(3,4,a.stride,a.boneWeightOffsets),a.material.usePbr?(Scene_data.context3D.setVaOffset(4,3,a.stride,a.normalsOffsets),Scene_data.context3D.setVcMatrix4fv(a.material.shader,"rotationMatrix3D",this._rotationMatrix.m),a.material.useNormal&&(Scene_data.context3D.setVaOffset(5,3,a.stride,a.tangentsOffsets),Scene_data.context3D.setVaOffset(6,3,a.stride,a.bitangentsOffsets))):(a.material.lightProbe||a.material.directLight)&&(Scene_data.context3D.setVaOffset(4,3,a.stride,a.normalsOffsets),Scene_data.context3D.setVcMatrix4fv(a.material.shader,"rotationMatrix3D",this._rotationMatrix.m)))},b.prototype.updateMaterialMesh=function(a){a.material&&(Scene_data.context3D.setProgram(a.material.program),Scene_data.context3D.cullFaceBack(a.material.backCull),Scene_data.context3D.setBlendParticleFactors(a.material.blendMode),this.setVcMatrix(a),this.setMaterialVc(a.material,a.materialParam),this.setMaterialTexture(a.material,a.materialParam),this.setVa(a),this.setDirectLight(a.material),this.setMeshVc(a),Scene_data.context3D.drawCall(a.indexBuffer,a.treNum))},b.prototype.setLightProbeVc=function(a){if(a.lightProbe)for(var b=0;b<this.resultSHVec.length;b++)Scene_data.context3D.setVc3fv(a.shader,"sh["+b+"]",[this.resultSHVec[b].x,this.resultSHVec[b].y,this.resultSHVec[b].z])},b.prototype.setMeshVc=function(a){var b;if(this._animDic[this.curentAction])b=this._animDic[this.curentAction];else{if(!this._animDic[this._defaultAction])return;b=this._animDic[this._defaultAction]}var c=b.boneQPAry[a.uid][this._curentFrame];Scene_data.context3D.setVc4fv(a.material.shader,"boneQ",c.quat),Scene_data.context3D.setVc3fv(a.material.shader,"boneD",c.pos)},b.prototype.setPos=function(b){a.prototype.setPos.call(this,b),this._shadow&&(this._shadow.x=b.x,this._shadow.y=b.y+8,this._shadow.z=b.z)},Object.defineProperty(b.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this.updateMatrix(),this._shadow&&(this._shadow.x=a),this.changePos()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this.updateMatrix(),this._shadow&&(this._shadow.y=a),this.changePos()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"z",{get:function(){return this._z},set:function(a){this._z=a,this.updateMatrix(),this._shadow&&(this._shadow.z=a),this.changePos()},enumerable:!0,configurable:!0}),b.prototype.changePos=function(){},b}(Display3DSprite),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3dBatchMovie=function(a){function b(){a.call(this),this.batchNum=0,this.batchPos=new Array}return __extends(b,a),Object.defineProperty(b.prototype,"fileScale",{set:function(a){this._fileScale=a;for(var b=0;b<this.batchPos.length;b++)this.batchPos[b].fileScale=a},enumerable:!0,configurable:!0}),b.prototype.addSun=function(a){this.batchPos.push(a),a.fileScale=this._fileScale},b.prototype.setVcMatrix=function(a){Scene_data.context3D.setVcMatrix4fv(a.material.shader,"viewMatrix3D",Scene_data.viewMatrx3D.m),Scene_data.context3D.setVcMatrix4fv(a.material.shader,"camMatrix3D",Scene_data.cam3D.cameraMatrix.m),Scene_data.context3D.setVcMatrix4fv(a.material.shader,"rotationMatrix3D",this._rotationMatrix.m);for(var b=0;b<this.batchPos.length;b++)Scene_data.context3D.setVcMatrix4fv(a.material.shader,"posMatrixAry["+b+"]",this.batchPos[b].posMatrix.m)},b.prototype.setLightProbeVc=function(a){},b.prototype.setVa=function(a){Scene_data.context3D.setVa(0,3,a.vertexBuffer),Scene_data.context3D.setVa(1,3,a.uvBuffer),Scene_data.context3D.setVa(2,4,a.boneIdBuffer),Scene_data.context3D.setVa(3,4,a.boneWeightBuffer),a.material.usePbr?(Scene_data.context3D.setVa(4,4,a.normalsBuffer),a.material.useNormal&&(Scene_data.context3D.setVa(5,4,a.tangentBuffer),Scene_data.context3D.setVa(6,4,a.bitangentBuffer))):(a.material.lightProbe||a.material.directLight)&&Scene_data.context3D.setVa(4,4,a.normalsBuffer)},b.prototype.addStage=function(){if(a.prototype.addStage.call(this),this.batchPos.length)for(var b=0;b<this.batchPos.length;b++)this.batchPos[b].add()},b.prototype.removeStage=function(){if(a.prototype.removeStage.call(this),this.batchPos.length)for(var b=0;b<this.batchPos.length;b++)this.batchPos[b].remove()},b}(Display3dMovie),Movie3D=function(a){function b(){a.apply(this,arguments),this.posData=[0,0,0,10],this.hasReach=!1,this._fileScale=1}return __extends(b,a),Object.defineProperty(b.prototype,"shadow",{set:function(a){a&&(this._shadow||(this._shadow=ShadowManager.getInstance().addShadow(),this._shadow.x=this._x,this._shadow.y=this._y,this._shadow.z=this._z))},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"fileScale",{set:function(a){this._fileScale=a,this._scaleX*=a,this._scaleY*=a,this._scaleZ*=a,this.updateMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"scale",{set:function(a){this._scaleX=a*this._fileScale,this._scaleY=a*this._fileScale,this._scaleZ=a*this._fileScale,this.posData[3]=20*a,this.updateMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this.posData[0]=a,this.updateMatrix(),this._shadow&&(this.retinueShadowFix?this._shadow.x=a+this.retinueShadowFix.x:this._shadow.x=a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this.posData[1]=a,this.updateMatrix(),this._shadow&&(this.retinueShadowFix?this._shadow.y=a+this.retinueShadowFix.y+2:this._shadow.y=a+2)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"z",{get:function(){return this._z},set:function(a){this._z=a,this.posData[2]=a,this.updateMatrix(),this._shadow&&(this.retinueShadowFix?this._shadow.z=a+this.retinueShadowFix.z:this._shadow.z=a)},enumerable:!0,configurable:!0}),b.prototype.add=function(){this._shadow&&(this._shadow.visible=!0)},b.prototype.remove=function(){this._shadow&&(this._shadow.visible=!1)},b}(Object3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3dShadow=function(a){function b(){a.call(this),this.needUpdate=!1,this.locationFloat32=new Float32Array(0),this.shadowList=new Array,this.objData=new ObjData,this.shader=ProgrmaManager.getInstance().getProgram(Display3DShadowShader.Display3DShadowShader),this.program=this.shader.program,this.posProLocation=Scene_data.context3D.getLocation(this.program,"pos")}return __extends(b,a),b.prototype.addShadow=function(a){this.shadowList.push(a),a.display=this,this.applyObjData()},b.prototype.removeShadow=function(a){var b=this.shadowList.indexOf(a);-1!=b&&(this.shadowList.splice(b,1),this.applyObjData()),0==this.shadowList.length},b.prototype.stateChage=function(){for(var a=0;a<this.shadowList.length&&!this.shadowList[a].visible;a++);a==this.shadowList.length?this.needUpdate=!1:this.needUpdate=!0},b.prototype.hasIdle=function(){return this.shadowList.length<30},b.prototype.applyObjData=function(){this.objData.vertices.length=0,this.objData.uvs.length=0,this.objData.indexs.length=0;for(var a=1,b=0;b<this.shadowList.length;b++)this.objData.vertices.push(-a,0,a,a,0,a,a,0,-a,-a,0,-a),this.objData.uvs.push(0,0,b,0,1,b,1,1,b,1,0,b),this.objData.indexs.push(4*b,1+4*b,2+4*b,4*b,2+4*b,3+4*b);this.objData.treNum=6*this.shadowList.length,this.objData.vertexBuffer?(Scene_data.context3D.uploadBuff3DByBuffer(this.objData.vertexBuffer,this.objData.vertices),Scene_data.context3D.uploadBuff3DByBuffer(this.objData.uvBuffer,this.objData.uvs),Scene_data.context3D.uploadIndexBuff3DByBuffer(this.objData.indexBuffer,this.objData.indexs)):(this.objData.vertexBuffer=Scene_data.context3D.uploadBuff3D(this.objData.vertices),this.objData.uvBuffer=Scene_data.context3D.uploadBuff3D(this.objData.uvs),this.objData.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(this.objData.indexs))},b.prototype.update=function(){if(this.needUpdate&&0!=this.shadowList.length&&this.objData.treNum){Scene_data.context3D.setBlendParticleFactors(0),Scene_data.context3D.setProgram(this.program),Scene_data.context3D.setVcMatrix4fv(this.shader,"viewMatrix3D",Scene_data.viewMatrx3D.m),Scene_data.context3D.setVcMatrix4fv(this.shader,"camMatrix3D",Scene_data.cam3D.cameraMatrix.m),this.locationFloat32.length!=4*this.shadowList.length&&(this.locationFloat32=new Float32Array(4*this.shadowList.length));for(var a=0;a<this.shadowList.length;a++)this.shadowList[a].visible?(this.locationFloat32[4*a+0]=this.shadowList[a].data[0],this.locationFloat32[4*a+1]=this.shadowList[a].data[1],this.locationFloat32[4*a+2]=this.shadowList[a].data[2],this.locationFloat32[4*a+3]=this.shadowList[a].data[3]):(this.locationFloat32[4*a+0]=0,this.locationFloat32[4*a+1]=1e4,this.locationFloat32[4*a+2]=0,this.locationFloat32[4*a+3]=0);Scene_data.context3D.setVc4fvLocation(this.posProLocation,this.locationFloat32),Scene_data.context3D.setVa(0,3,this.objData.vertexBuffer),Scene_data.context3D.setVa(1,3,this.objData.uvBuffer),Scene_data.context3D.setRenderTexture(this.shader,"s_texture",b.texture,0),Scene_data.context3D.drawCall(this.objData.indexBuffer,this.objData.treNum)}},b}(Display3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3dBg=function(a){function b(){a.call(this),this._scaleData=[1,1],this.shader=ProgrmaManager.getInstance().getProgram(UIImageShader.UI_IMG_SHADER),this.program=this.shader,this.initData()}return __extends(b,a),b.prototype.initData=function(){this.objData=new ObjData,this.objData.vertices.push(-1,1,.99,1,1,.99,1,-1,.99,-1,-1,.99),this.objData.uvs.push(0,0,1,0,1,1,0,1),this.objData.indexs.push(0,1,2,0,2,3),this.objData.treNum=6,this.objData.vertexBuffer=Scene_data.context3D.uploadBuff3D(this.objData.vertices),this.objData.uvBuffer=Scene_data.context3D.uploadBuff3D(this.objData.uvs),
this.objData.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(this.objData.indexs)},b.prototype.resize=function(){this.appleyPos()},b.prototype.setImgInfo=function(a,b,c){this.setImgUrl(a),this._width=b,this._height=c},b.prototype.setImgUrl=function(a){},b.prototype.appleyPos=function(){var a=this._width/Scene_data.stageWidth,b=this._height/Scene_data.stageHeight;b>a?(this._scaleData[0]=1,this._scaleData[1]=this._height/Scene_data.stageHeight/a):(this._scaleData[0]=this._width/Scene_data.stageWidth/b,this._scaleData[1]=1)},b.prototype.update=function(){this.appleyPos(),Scene_data.context3D.setBlendParticleFactors(0),Scene_data.context3D.setProgram(this.program),Scene_data.context3D.setVa(0,3,this.objData.vertexBuffer),Scene_data.context3D.setVa(1,2,this.objData.uvBuffer),Scene_data.context3D.setVc2fv(this.shader,"scale",this._scaleData),Scene_data.context3D.setVcFloat(this.shader,"alpha",[1]),Scene_data.context3D.setRenderTexture(this.shader,"s_texture",this.texture,0),Scene_data.context3D.drawCall(this.objData.indexBuffer,this.objData.treNum)},b}(Display3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display2dMovie=function(a){function b(){a.call(this),this.batchPos=new Array,this._time=0,this._allFrame=12,this._uvData=[0,0],this._uWidth=0,this._vWidth=0,this._state=0,this.frameRate=3,this.objData=new ObjData,this.watchCaramMatrix=new Matrix3D,this.shader=ProgrmaManager.getInstance().getProgram(Movie2DShader.MOVIE2D_SHADER),this.program=this.shader.program}return __extends(b,a),b.prototype.update=function(){this.watchCaramMatrix.identity(),this.watchCaramMatrix.prependRotation(-Scene_data.cam3D.rotationY,Vector3D.Y_AXIS),this.watchCaramMatrix.prependRotation(-Scene_data.cam3D.rotationX,Vector3D.X_AXIS),Scene_data.context3D.setProgram(this.program),Scene_data.context3D.setVcMatrix4fv(this.shader,"viewMatrix3D",Scene_data.viewMatrx3D.m),Scene_data.context3D.setVcMatrix4fv(this.shader,"camMatrix3D",Scene_data.cam3D.cameraMatrix.m),Scene_data.context3D.setVcMatrix4fv(this.shader,"watchCamMatrix3D",this.watchCaramMatrix.m);for(var a=0;a<this.batchPos.length;a++)Scene_data.context3D.setVc4fv(this.shader,"posdata["+a+"]",this.batchPos[a].posData);Scene_data.context3D.setVc2fv(this.shader,"outuv",this._uvData),Scene_data.context3D.setRenderTexture(this.shader,"s_texture",this.movieTexture,0),Scene_data.context3D.setVa(0,3,this.objData.vertexBuffer),Scene_data.context3D.setVa(1,3,this.objData.uvBuffer),Scene_data.context3D.drawCall(this.objData.indexBuffer,this.objData.treNum)},b.prototype.updateFrame=function(a){this._time+=a;var b=float2int(this._time/(2*Scene_data.frameTime)/this.frameRate);b>=this._allFrame&&(0==this._state?(this._time=0,b=0):1==this._state?b=this._allFrame-1:2==this._state?(this.play("stand"),b=0,this._state=0):3==this._state),this._uvData[0]=b*this._uWidth},b.prototype.play=function(a,b){void 0===b&&(b=0),this._state=b,this._time=0,"walk"==a?this._uvData[1]=this._vWidth:-1!=a.indexOf("attack")?this._uvData[1]=2*this._vWidth:this._uvData[1]=0},b.prototype.addSun=function(a){this.batchPos.push(a)},b.prototype.setUrl=function(a){},b.prototype.initData=function(a,b,c,d,e,f){void 0===f&&(f=!1),this.objData.vertices.length=0,this.objData.uvs.length=0,this.objData.indexs.length=0,this._uWidth=c,this._vWidth=d,this._allFrame=e;for(var g=0;a>g;g++){this.objData.vertices.push(-.5*b,1,0,.5*b,1,0,.5*b,0,0,-.5*b,0,0);var h=0;f&&(h=float2int(e*Math.random())*c),this.objData.uvs.push(0+h,0,g,c+h,0,g,c+h,1*d,g,0+h,1*d,g),this.objData.indexs.push(4*g,1+4*g,2+4*g,4*g,2+4*g,3+4*g)}this.objData.treNum=this.objData.indexs.length,this.objData.vertexBuffer?(Scene_data.context3D.uploadBuff3DByBuffer(this.objData.vertexBuffer,this.objData.vertices),Scene_data.context3D.uploadBuff3DByBuffer(this.objData.uvBuffer,this.objData.uvs),Scene_data.context3D.uploadIndexBuff3DByBuffer(this.objData.indexBuffer,this.objData.indexs)):(this.objData.vertexBuffer=Scene_data.context3D.uploadBuff3D(this.objData.vertices),this.objData.uvBuffer=Scene_data.context3D.uploadBuff3D(this.objData.uvs),this.objData.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(this.objData.indexs))},b.prototype.addStage=function(){if(a.prototype.addStage.call(this),this.batchPos.length)for(var b=0;b<this.batchPos.length;b++)this.batchPos[b].add()},b.prototype.removeStage=function(){if(a.prototype.removeStage.call(this),this.batchPos.length)for(var b=0;b<this.batchPos.length;b++)this.batchPos[b].remove()},b}(Display3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3DUISprite=function(a){function b(){a.call(this),this.uiMatrix=new Matrix3D,this.uiMatrix.prependTranslation(0,0,600),this.uiMatrix.prependRotation(-15,Vector3D.X_AXIS),this.uiMatrix.prependRotation(0,Vector3D.Y_AXIS),this.uiViewMatrix=new Matrix3D}return __extends(b,a),b.prototype.loadRes=function(a){var b=this;this.modelRes||(this.modelRes=new ModelRes),this.modelRes.load(Scene_data.fileRoot+getModelUrl(a),function(){b.loadResComFinish()})},b.prototype.loadResComFinish=function(){this.setObjUrl(this.modelRes.objUrl),this.setMaterialUrl(this.modelRes.materialUrl)},b.prototype.loadGroup=function(a){var b=this,c=new GroupRes;c.load(Scene_data.fileRoot+"model/"+a+".txt",function(){b.loadPartRes(c)})},b.prototype.loadPartRes=function(a){for(var b=0;b<a.dataAry.length;b++){var c=a.dataAry[b];c.types==BaseRes.SCENE_PARTICLE_TYPE||c.types==BaseRes.PREFAB_TYPE&&(this.setObjUrl(c.objUrl),this.setMaterialUrl(c.materialUrl,c.materialInfoArr))}},b.prototype.resize=function(){this.uiViewMatrix.identity(),this.uiViewMatrix.perspectiveFieldOfViewLH(1,1,500,5e3),this.uiViewMatrix.appendScale(1e3/Scene_data.stageWidth,1e3/Scene_data.stageHeight,1)},b.prototype.setCam=function(){Scene_data.context3D.setVcMatrix4fv(this.material.shader,"viewMatrix3D",this.uiViewMatrix.m),Scene_data.context3D.setVcMatrix4fv(this.material.shader,"camMatrix3D",this.uiMatrix.m)},b.prototype.update=function(){Scene_data.context3D.setWriteDepth(!0),Scene_data.context3D.setDepthTest(!0),a.prototype.update.call(this),Scene_data.context3D.setWriteDepth(!1),Scene_data.context3D.setDepthTest(!1)},b}(Display3DSprite),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display2DSprite=function(a){function b(){a.call(this),this.batchPos=new Array,this.objData=new ObjData,this.watchCaramMatrix=new Matrix3D,this.shader=ProgrmaManager.getInstance().getProgram(Sprite2DShader.SPRITE2D_SHADER),this.program=this.shader.program}return __extends(b,a),b.prototype.setInfo=function(a,b,c){this._imgAtlas||(this._imgAtlas=new UIAtlas),this._imgAtlas.setInfo(a,b,c)},b.prototype.getSprite=function(a){var b=new Sprite;return b.uvData=this._imgAtlas.getRec(a),b},b.prototype.addSprite=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];for(var c=0;c<a.length;c++)this.batchPos.push(a[c]);this.applyData()},b.prototype.applyData=function(){this.objData.vertices.length=0,this.objData.uvs.length=0,this.objData.indexs.length=0;for(var a=0;a<this.batchPos.length;a++){var b=this.batchPos[a].uvData,c=b.pixelHeight/b.pixelWitdh;this.objData.vertices.push(-.5*b.width,1*c*b.width,0,.5*b.width,1*c*b.width,0,.5*b.width,0,0,-.5*b.width,0,0),this.objData.uvs.push(b.x,b.y,a,b.x+b.width,b.y,a,b.x+b.width,b.y+b.height,a,b.x,b.y+b.height,a),this.objData.indexs.push(4*a,1+4*a,2+4*a,4*a,2+4*a,3+4*a)}this.objData.treNum=this.objData.indexs.length,this.objData.vertexBuffer?(Scene_data.context3D.uploadBuff3DByBuffer(this.objData.vertexBuffer,this.objData.vertices),Scene_data.context3D.uploadBuff3DByBuffer(this.objData.uvBuffer,this.objData.uvs),Scene_data.context3D.uploadIndexBuff3DByBuffer(this.objData.indexBuffer,this.objData.indexs)):(this.objData.vertexBuffer=Scene_data.context3D.uploadBuff3D(this.objData.vertices),this.objData.uvBuffer=Scene_data.context3D.uploadBuff3D(this.objData.uvs),this.objData.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(this.objData.indexs))},b.prototype.update=function(){if(0!=this.batchPos.length){this.watchCaramMatrix.identity(),this.watchCaramMatrix.prependRotation(-Scene_data.cam3D.rotationY,Vector3D.Y_AXIS),this.watchCaramMatrix.prependRotation(-Scene_data.cam3D.rotationX,Vector3D.X_AXIS),Scene_data.context3D.setProgram(this.program),Scene_data.context3D.setVcMatrix4fv(this.shader,"viewMatrix3D",Scene_data.viewMatrx3D.m),Scene_data.context3D.setVcMatrix4fv(this.shader,"camMatrix3D",Scene_data.cam3D.cameraMatrix.m),Scene_data.context3D.setVcMatrix4fv(this.shader,"watchCamMatrix3D",this.watchCaramMatrix.m);for(var a=0;a<this.batchPos.length;a++)Scene_data.context3D.setVc4fv(this.shader,"posdata["+a+"]",this.batchPos[a].posData);Scene_data.context3D.setRenderTexture(this.shader,"s_texture",this._imgAtlas.texture,0),Scene_data.context3D.setVa(0,3,this.objData.vertexBuffer),Scene_data.context3D.setVa(1,3,this.objData.uvBuffer),Scene_data.context3D.drawCall(this.objData.indexBuffer,this.objData.treNum)}},b}(Display3D),Sprite=function(a){function b(){a.apply(this,arguments),this.posData=[0,0,0,100]}return __extends(b,a),b.prototype.setPos=function(a,b,c){this.x=a,this.y=b,this.z=c},Object.defineProperty(b.prototype,"scale",{get:function(){return this._scaleX},set:function(a){this._scaleX=a,this.posData[3]=100*a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"x",{set:function(a){this._x=a,this.posData[0]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{set:function(a){this._y=a,this.posData[1]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"z",{set:function(a){this._z=a,this.posData[2]=a},enumerable:!0,configurable:!0}),b}(Object3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},BaseDiplay3dShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Position"),a.bindAttribLocation(this.program,1,"u2Texture")},b.prototype.getVertexShaderString=function(){var a="attribute vec3 v3Position;attribute vec2 u2Texture;uniform mat4 viewMatrix3D;uniform mat4 camMatrix3D;uniform mat4 posMatrix3D;varying vec2 v_texCoord;void main(void){   v_texCoord = vec2(u2Texture.x, u2Texture.y);   vec4 vt0= vec4(v3Position, 1.0);   vt0 = posMatrix3D * vt0;   vt0 = camMatrix3D * vt0;   vt0 = viewMatrix3D * vt0;   gl_Position = vt0;}";return a},b.prototype.getFragmentShaderString=function(){var a="precision mediump float;\nuniform sampler2D s_texture;\nvarying vec2 v_texCoord;\nvoid main(void)\n{\nvec4 infoUv = texture2D(s_texture, v_texCoord.xy);\ngl_FragColor =infoUv;\n}";return a},b.BaseDiplay3dShader="BaseDiplay3dShader",b}(Shader3D),BaseDiplay3dSprite=function(a){function b(){a.call(this),this.initData()}return __extends(b,a),b.prototype.initData=function(){ProgrmaManager.getInstance().registe(BaseDiplay3dShader.BaseDiplay3dShader,new BaseDiplay3dShader),this.shader=ProgrmaManager.getInstance().getProgram(BaseDiplay3dShader.BaseDiplay3dShader),this.program=this.shader.program,this.objData=new ObjData,this.objData.vertices=new Array,this.objData.vertices.push(0,0,0),this.objData.vertices.push(100,0,0),this.objData.vertices.push(100,0,100),this.objData.uvs=new Array,this.objData.uvs.push(0,0),this.objData.uvs.push(1,0),this.objData.uvs.push(0,1),this.objData.indexs=new Array,this.objData.indexs.push(0,1,2),this.loadTexture(),this.upToGpu()},b.prototype.loadTexture=function(){var a=UIManager.getInstance().getContext2D(128,128,!1);a.fillStyle="rgb(255,0,0)",a.fillRect(0,0,128,128),this._uvTextureRes=TextureManager.getInstance().getCanvasTexture(a)},b.prototype.upToGpu=function(){this.objData.indexs.length&&(this.objData.treNum=this.objData.indexs.length,this.objData.vertexBuffer=Scene_data.context3D.uploadBuff3D(this.objData.vertices),this.objData.uvBuffer=Scene_data.context3D.uploadBuff3D(this.objData.uvs),this.objData.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(this.objData.indexs))},b.prototype.update=function(){this.objData&&this.objData.indexBuffer&&this._uvTextureRes&&(Scene_data.context3D.setProgram(this.shader.program),Scene_data.context3D.setVcMatrix4fv(this.shader,"viewMatrix3D",Scene_data.viewMatrx3D.m),Scene_data.context3D.setVcMatrix4fv(this.shader,"camMatrix3D",Scene_data.cam3D.cameraMatrix.m),Scene_data.context3D.setVcMatrix4fv(this.shader,"posMatrix3D",this.posMatrix.m),Scene_data.context3D.setVa(0,3,this.objData.vertexBuffer),Scene_data.context3D.setVa(1,2,this.objData.uvBuffer),Scene_data.context3D.setRenderTexture(this.shader,"s_texture",this._uvTextureRes.texture,0),Scene_data.context3D.drawCall(this.objData.indexBuffer,this.objData.treNum))},b}(Display3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},GroundDataMesh=function(){function a(){}return a.prototype.mekeUseTexture=function(a){var b=new Rectangle(0,0,Math.pow(2,Math.ceil(Math.log(a.width)/Math.log(2))),Math.pow(2,Math.ceil(Math.log(a.height)/Math.log(2))));if(b.width!=a.width||b.height!=a.height){for(var c=new BitMapData(b.width,b.height),d=0;d<c.width;d++)for(var e=0;e<c.height;e++){var f=a.getRgb(d/c.width*a.width,e/c.height*a.height);c.setRgb(d,e,f)}return c}return a},a.prototype.calibration=function(){this.idBitmap=this.mekeUseTexture(this.idBitmap),this.infoBitmap=this.mekeUseTexture(this.infoBitmap)},a.meshAllgroundData=function(b){for(var c=b.readInt(),d=b.readInt(),e=new Array,f=0;c>f;f++)for(var g=0;d>g;g++){var h=b.readInt(),i=b.readInt(),j=b.readInt(),k=b.readInt(),l=new a;l.idBitmap=new BitMapData(j,k),l.infoBitmap=new BitMapData(j,k),l.tx=h,l.ty=i,e.push(l);for(var m=0;j>m;m++)for(var n=0;k>n;n++){var o,p=b.readByte();switch(p){case 0:o=new Vector3D(0,1,2);break;case 1:o=new Vector3D(0,1,3);break;case 2:o=new Vector3D(0,2,3);break;case 3:o=new Vector3D(1,2,3);break;default:throw new Error("信息索引没有编入")}l.idBitmap.setRgb(m,n,new Vector3D(o.x/255,o.y/255,o.z/255,1));var q=new Vector3D;q.x=b.readByte()+128,q.y=b.readByte()+128,q.z=255-q.x-q.y,l.infoBitmap.setRgb(m,n,new Vector3D(q.x/255,q.y/255,q.z/255,1))}l.calibration()}for(var r=b.readUTF(),s=0;s<e.length;s++)e[s].sixurl=r;return e},a}(),TerrainDisplay3DSprite=function(a){function b(){a.call(this),ProgrmaManager.getInstance().registe(TerrainDisplay3DShader.TerrainDisplay3DShader,new TerrainDisplay3DShader),this.groundShader=ProgrmaManager.getInstance().getProgram(TerrainDisplay3DShader.TerrainDisplay3DShader)}return __extends(b,a),b.prototype.update=function(){this.groundShader&&this.baseSixteenRes&&this.idMapPicDataTexture?this.upDataToDraw():a.prototype.update.call(this)},b.prototype.upDataToDraw=function(){if(this.groundShader&&this.baseSixteenRes){Scene_data.context3D.cullFaceBack(!1),Scene_data.context3D.setProgram(this.groundShader.program),Scene_data.context3D.setVcMatrix4fv(this.groundShader,"viewMatrix3D",Scene_data.viewMatrx3D.m),Scene_data.context3D.setVcMatrix4fv(this.groundShader,"camMatrix3D",Scene_data.cam3D.cameraMatrix.m),Scene_data.context3D.setVcMatrix4fv(this.groundShader,"posMatrix3D",this.posMatrix.m),Scene_data.context3D.setVc4fv(this.groundShader,"colorData",[1,0,1,1]);var a=Scene_data.context3D.pushVa(this.objData.vertexBuffer);a||(Scene_data.context3D.setVaOffset(0,3,this.objData.stride,0),Scene_data.context3D.setVaOffset(1,2,this.objData.stride,this.objData.uvsOffsets)),Scene_data.context3D.setRenderTexture(this.groundShader,"idmaptexture",this.idMapPicDataTexture,0),Scene_data.context3D.setRenderTexture(this.groundShader,"infotexture",this.infoMapPicDataTexture,1),Scene_data.context3D.setRenderTexture(this.groundShader,"sixtexture",this.baseSixteenRes.texture,2),Scene_data.context3D.setRenderTexture(this.groundShader,"lightexture",this.lightMapTexture,3),Scene_data.context3D.drawCall(this.objData.indexBuffer,this.objData.treNum)}},b.prototype.setGrounDataMesh=function(a){var b=this;this.idMapPicDataTexture=Scene_data.context3D.getTexture(a.idBitmap.imgData,0,1),this.infoMapPicDataTexture=Scene_data.context3D.getTexture(a.infoBitmap.imgData,0,1);var c=a.sixurl;TextureManager.getInstance().getTexture(Scene_data.fileRoot+c,function(a){b.baseSixteenRes=a})},b}(Display3DSprite),Engine=function(){function a(){}return a.init=function(b){var c=/ipad/i.test(navigator.userAgent),d=/iPhone/i.test(navigator.userAgent),e=/android/i.test(navigator.userAgent);/iindow/i.test(navigator.userAgent),navigator.userAgent.toLowerCase();c||d||e?Scene_data.isPc=!1:Scene_data.isPc=!0,Scene_data.vpMatrix=new Matrix3D,Scene_data.canvas3D=b,Scene_data.context3D=new Context3D,Scene_data.context3D.init(b),UIManager.getInstance().init(),Scene_data.cam3D=new Camera3D,Scene_data.focus3D=new Object3D,Scene_data.focus3D.x=0,Scene_data.focus3D.y=0,Scene_data.focus3D.z=0,Scene_data.focus3D.rotationY=135,Scene_data.focus3D.rotationX=-45,Scene_data.light=new LightVo,a.testBlob(),a.resetSize(),a.initShadow(),TimeUtil.init(),PathManager.init()},a.resReady=function(){a.initPbr()},a.testBlob=function(){try{new Blob}catch(a){return void(Scene_data.supportBlob=!1)}Scene_data.supportBlob=!0},a.initPbr=function(){Scene_data.pubLut||TextureManager.getInstance().getTexture(Scene_data.fileRoot+"base/brdf_ltu.jpg",function(a){Scene_data.pubLut=a.texture},1),Scene_data.skyCubeMap||TextureManager.getInstance().loadCubeTexture(Scene_data.fileRoot+"base/cube/e",function(a){Scene_data.skyCubeMap=a})},a.initShadow=function(){},a.resetSize=function(){Scene_data.stageWidth=Scene_data.canvas3D.width,Scene_data.stageHeight=Scene_data.canvas3D.height,Scene_data.context3D.resetSize(Scene_data.stageWidth,Scene_data.stageHeight),UIManager.getInstance().resize(),BloodManager.getInstance().resize(),this.resetViewMatrx3D()},a.resetViewMatrx3D=function(){Scene_data.viewMatrx3D?Scene_data.viewMatrx3D.identity():Scene_data.viewMatrx3D=new Matrix3D;var a=Scene_data.stageWidth,b=Scene_data.stageHeight;Scene_data.sceneViewHW=Math.max(a,b),Scene_data.viewMatrx3D.perspectiveFieldOfViewLH(this.sceneCamScale,1,50,Scene_data.camFar),Scene_data.viewMatrx3D.appendScale(1*(Scene_data.sceneViewHW/a*2),a/b*(Scene_data.sceneViewHW/a*2),1)},a.update=function(){TimeUtil.update(),SceneManager.getInstance().update(),FpsMc.update()},a.unload=function(){},a.needVertical=!0,a.needInputTxt=!1,a.sceneCamScale=1.76,a}(),MathClass=function(){function a(){}return a.getArrByStr=function(a){for(var b=a.split(/\s+/g),c=b.length-1;c>=0;c--)String(b[c]).length<1&&b.splice(c,1);return b},a.getCamView=function(a,b){a.update();var c=new Matrix3D;c.appendRotation(-b.rotationX,Vector3D.X_AXIS),c.appendRotation(-b.rotationY,Vector3D.Y_AXIS),c.appendTranslation(b.x,b.y,b.z);var d=c.transformVector(new Vector3D(0,0,-a.distance));return a.x=d.x,a.y=d.y,a.z=d.z,a.rotationX=b.rotationX,a.rotationY=b.rotationY,a.cameraMatrix.identity(),a.cameraMatrix.prependTranslation(0,0,a.distance),a.cameraMatrix.prependRotation(a.rotationX,Vector3D.X_AXIS),a.cameraMatrix.prependRotation(a.rotationY,Vector3D.Y_AXIS),a.cameraMatrix.prependTranslation(-b.x,-b.y,-b.z),this.updateVp(),a.cameraMatrix.m},a.updateVp=function(){Scene_data.vpMatrix.identity(),Scene_data.vpMatrix.prepend(Scene_data.viewMatrx3D),Scene_data.vpMatrix.prepend(Scene_data.cam3D.cameraMatrix)},a.MathCam=function(a){var b=new Matrix3D;b.prependRotation(a.rotationX,Vector3D.X_AXIS),b.prependRotation(a.rotationY,Vector3D.Y_AXIS),b.prependTranslation(-a.x,-a.y,-a.z),a.cameraMatrix.identity(),a.cameraMatrix.append(b)},a.GetViewHitBoxData=function(a){var b=Scene_data.cam3D.cameraMatrix.clone();b.invert();var c=Scene_data.viewMatrx3D.m[0],d=Scene_data.viewMatrx3D.m[5];this.viewBoxVecItem?(this.lastViewScale.x!=c||this.lastViewScale.y!=d)&&(this.viewBoxVecItem[0]=new Vector3D(-a/c,-a/d,a),this.viewBoxVecItem[1]=new Vector3D(-a/c,+a/d,a),this.viewBoxVecItem[2]=new Vector3D(+a/c,-a/d,a),this.viewBoxVecItem[3]=new Vector3D(+a/c,+a/d,a),this.viewBoxVecItem[4]=new Vector3D(0,0,0)):(this.lastViewScale=new Vector2D(c,d),this.viewBoxVecItem=new Array,this.viewBoxVecItem.push(new Vector3D(-a/c,-a/d,a)),this.viewBoxVecItem.push(new Vector3D(-a/c,+a/d,a)),this.viewBoxVecItem.push(new Vector3D(+a/c,-a/d,a)),this.viewBoxVecItem.push(new Vector3D(+a/c,+a/d,a)),this.viewBoxVecItem.push(new Vector3D(0,0,0)))},a.GetViewHitBoxDataCopy=function(a){this.viewBoxVecItem||(this.viewBoxVecItem=new Array,this.viewBoxVecItem.push(new Vector3D),this.viewBoxVecItem.push(new Vector3D),this.viewBoxVecItem.push(new Vector3D),this.viewBoxVecItem.push(new Vector3D));var b=a/(Scene_data.sceneViewHW/2),c=Scene_data.sceneViewHW/2*b,d=Scene_data.stageWidth,e=Scene_data.stageHeight,f=new Matrix3D;f.prependRotation(-Scene_data.cam3D.rotationY,Vector3D.Y_AXIS),f.prependRotation(-Scene_data.cam3D.rotationX,Vector3D.X_AXIS);var g=Scene_data.viewMatrx3D.transformVector(new Vector3D(500,0,500)),h=g.x/g.w,i=.8,j=d/2/h*b*i,k=e/2/h*b*i;this.viewBoxVecItem[0]=this.gettempPos(new Vector3D(-j,-k,c),f),this.viewBoxVecItem[1]=this.gettempPos(new Vector3D(+j,-k,c),f),this.viewBoxVecItem[2]=this.gettempPos(new Vector3D(+j,+k,c),f),this.viewBoxVecItem[3]=this.gettempPos(new Vector3D(-j,+k,c),f)},a.gettempPos=function(a,b){var c=b.transformVector(a);return c=c.add(new Vector3D(Scene_data.cam3D.x,Scene_data.cam3D.y,Scene_data.cam3D.z))},a.mathmidpoint=function(a,b,c){var d,e,f;d=a.x+(b.x-a.x)*c,e=a.y+(b.y-a.y)*c,f=a.z+(b.z-a.z)*c,a.x=d,a.y=e,a.z=f},a.drawbezier=function(a,b){var c=new Array;if(0==a.length)return{x:0,y:0,z:0};for(var d=0;d<a.length;d++)c.push({x:a[d].x,y:a[d].y,z:a[d].z});for(;c.length>1;){for(var e=0;e<c.length-1;e++)this.mathmidpoint(c[e],c[e+1],b);c.pop()}return c[0]},a.math_distance=function(a,b,c,d){return Math.sqrt((d-b)*(d-b)+(c-a)*(c-a))},a.math_angle=function(a,b,c,d){var e=a-c,f=b-d,g=180*Math.atan(f/e)/Math.PI;return g},a.easeIn=function(a,b,c,d){return c*(a/=d)*a+b},a.easeOut=function(a,b,c,d){return-c*(a/=d)*(a-2)+b},a.easeInOut=function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},a.mathDisplay2Dto3DWorldPos=function(a,b,c){void 0===c&&(c=300);var d=Scene_data.cam3D.cameraMatrix.clone(),e=Scene_data.viewMatrx3D.clone();d.invert(),e.invert();var f=new Vector3D;return f.x=b.x-a.x,f.y=b.y-a.y,f.x=2*f.x/a.width-1,f.y=1-2*f.y/a.height,f.w=c,f.x=f.x*f.w,f.y=f.y*f.w,f=e.transformVector(f),f.z=c,f=d.transformVector(f)},a}(),MathUtil=function(){function a(){}return a.mathDisplay2Dto3DWorldPos=function(a,b){void 0===b&&(b=300);var c=b/(Scene_data.sceneViewHW/2),d=Scene_data.sceneViewHW/2*c,e=Scene_data.stageWidth,f=Scene_data.stageHeight,g=new Matrix3D;g.prependRotation(-Scene_data.cam3D.rotationY,Vector3D.Y_AXIS),g.prependRotation(-Scene_data.cam3D.rotationX,Vector3D.X_AXIS);var h=Scene_data.viewMatrx3D.transformVector(new Vector3D(500,0,500)),i=h.x/h.w,j=e/2/i*c,k=f/2/i*c,l=a.x/e*j*2,m=a.y/f*k*2,n=this.gettempPos(new Vector3D(-j+l,+k-m,d),g);return n},a.getGroundPanelPos=function(a){var b=MathClass.mathDisplay2Dto3DWorldPos(new Rectangle(0,0,Scene_data.stageWidth,Scene_data.stageHeight),new Vector2D(a.x,a.y),300),c=new Array;c.push(new Vector3D(0,0,0)),c.push(new Vector3D(-100,0,100)),c.push(new Vector3D(100,0,100));var d=new Vector3D(Scene_data.cam3D.x,Scene_data.cam3D.y,Scene_data.cam3D.z);return this.getLinePlaneInterectPointByTri(d,b,c)},a.gettempPos=function(a,b){var c=b.transformVector(a);return c=c.add(new Vector3D(Scene_data.cam3D.x,Scene_data.cam3D.y,Scene_data.cam3D.z))},a.math3DWorldtoDisplay2DPos=function(a){var b=Scene_data.cam3D.cameraMatrix.clone();b.append(Scene_data.viewMatrx3D.clone());var c=Scene_data.stageWidth,d=Scene_data.stageHeight,e=b.transformVector(a),f=new Vector2D;return f.x=(e.x/e.w+1)*(c/2),f.y=(-e.y/e.w+1)*(d/2),f},a.argbToHex=function(a,b,c,d){var e=a<<24|b<<16|c<<8|d;return e},a.hexToArgb=function(a){var b=new Vector3D;return b.w=a>>24&255,b.x=a>>16&255,b.y=a>>8&255,b.z=255&a,b},a.getLinePlaneInterectPointByTri=function(a,b,c){if(c.length<3)return null;var d=new Vector3D(0,2e3,0);return this.getLineAndPlaneIntersectPoint(a,b,c[0],d)},a.getLineAndPlaneIntersectPoint=function(a,b,c,d){var e=new Vector3D(a.x-b.x,a.y-b.y,a.z-b.z);e.normalize();var f=e.x*d.x+e.y*d.y+e.z*d.z,g=((c.x-a.x)*d.x+(c.y-a.y)*d.y+(c.z-a.z)*d.z)/f,h=new Vector3D;return h.setTo(a.x+e.x*g,a.y+e.y*g,a.z+e.z*g),h},a}(),Matrix3D=function(){function a(){this.isIdentity=!0;var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];this.m=new Float32Array(a)}return a.prototype.clone=function(b){return void 0===b&&(b=null),b||(b=new a),b.m[0]=this.m[0],b.m[1]=this.m[1],b.m[2]=this.m[2],b.m[3]=this.m[3],b.m[4]=this.m[4],b.m[5]=this.m[5],b.m[6]=this.m[6],b.m[7]=this.m[7],b.m[8]=this.m[8],b.m[9]=this.m[9],b.m[10]=this.m[10],b.m[11]=this.m[11],b.m[12]=this.m[12],b.m[13]=this.m[13],b.m[14]=this.m[14],b.m[15]=this.m[15],b},Object.defineProperty(a.prototype,"position",{get:function(){return new Vector3D(this.m[12],this.m[13],this.m[14],this.m[15])},enumerable:!0,configurable:!0}),a.prototype.copyTo=function(a){a.m[0]=this.m[0],a.m[1]=this.m[1],a.m[2]=this.m[2],a.m[3]=this.m[3],a.m[4]=this.m[4],a.m[5]=this.m[5],a.m[6]=this.m[6],a.m[7]=this.m[7],a.m[8]=this.m[8],a.m[9]=this.m[9],a.m[10]=this.m[10],a.m[11]=this.m[11],a.m[12]=this.m[12],a.m[13]=this.m[13],a.m[14]=this.m[14],a.m[15]=this.m[15]},a.prototype.identity=function(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=0,this.m[4]=0,this.m[5]=1,this.m[6]=0,this.m[7]=0,this.m[8]=0,this.m[9]=0,this.m[10]=1,this.m[11]=0,this.m[12]=0,this.m[13]=0,this.m[14]=0,this.m[15]=1},a.prototype.invert=function(){var a=this.m,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15],r=b*g-c*f,s=b*h-d*f,t=b*i-e*f,u=c*h-d*g,v=c*i-e*g,w=d*i-e*h,x=j*o-k*n,y=j*p-l*n,z=j*q-m*n,A=k*p-l*o,B=k*q-m*o,C=l*q-m*p,D=r*C-s*B+t*A+u*z-v*y+w*x;return D?(D=1/D,this.m[0]=(g*C-h*B+i*A)*D,this.m[1]=(d*B-c*C-e*A)*D,this.m[2]=(o*w-p*v+q*u)*D,this.m[3]=(l*v-k*w-m*u)*D,this.m[4]=(h*z-f*C-i*y)*D,this.m[5]=(b*C-d*z+e*y)*D,this.m[6]=(p*t-n*w-q*s)*D,this.m[7]=(j*w-l*t+m*s)*D,this.m[8]=(f*B-g*z+i*x)*D,this.m[9]=(c*z-b*B-e*x)*D,this.m[10]=(n*v-o*t+q*r)*D,this.m[11]=(k*t-j*v-m*r)*D,this.m[12]=(g*y-f*A-h*x)*D,this.m[13]=(b*A-c*y+d*x)*D,this.m[14]=(o*s-n*u-p*r)*D,void(this.m[15]=(j*u-k*s+l*r)*D)):null},a.prototype.invertToMatrix=function(a){var b=this.m,c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a.m[0]=(h*D-i*C+j*B)*E,a.m[1]=(e*C-d*D-f*B)*E,a.m[2]=(p*x-q*w+r*v)*E,a.m[3]=(m*w-l*x-n*v)*E,a.m[4]=(i*A-g*D-j*z)*E,a.m[5]=(c*D-e*A+f*z)*E,a.m[6]=(q*u-o*x-r*t)*E,a.m[7]=(k*x-m*u+n*t)*E,a.m[8]=(g*C-h*A+j*y)*E,a.m[9]=(d*A-c*C-f*y)*E,a.m[10]=(o*w-p*u+r*s)*E,a.m[11]=(l*u-k*w-n*s)*E,a.m[12]=(h*z-g*B-i*y)*E,a.m[13]=(c*B-d*z+e*y)*E,a.m[14]=(p*t-o*v-q*s)*E,void(a.m[15]=(k*v-l*t+m*s)*E)):null},a.prototype.appendTranslation=function(b,c,d){a.tempM.identity(),a.tempM.prependTranslation(b,c,d),this.append(a.tempM)},a.prototype.prependTranslation=function(a,b,c){var d=this.m;d[12]=d[0]*a+d[4]*b+d[8]*c+d[12],d[13]=d[1]*a+d[5]*b+d[9]*c+d[13],d[14]=d[2]*a+d[6]*b+d[10]*c+d[14],d[15]=d[3]*a+d[7]*b+d[11]*c+d[15]},a.prototype.transformVector=function(a){var b=new Vector3D;return b.x=this.m[0]*a.x+this.m[4]*a.y+this.m[8]*a.z+this.m[12]*a.w,b.y=this.m[1]*a.x+this.m[5]*a.y+this.m[9]*a.z+this.m[13]*a.w,b.z=this.m[2]*a.x+this.m[6]*a.y+this.m[10]*a.z+this.m[14]*a.w,b.w=this.m[3]*a.x+this.m[7]*a.y+this.m[11]*a.z+this.m[15]*a.w,b},a.prototype.append=function(b){a.tempM.m[0]=b.m[0],a.tempM.m[1]=b.m[1],a.tempM.m[2]=b.m[2],a.tempM.m[3]=b.m[3],a.tempM.m[4]=b.m[4],a.tempM.m[5]=b.m[5],a.tempM.m[6]=b.m[6],a.tempM.m[7]=b.m[7],a.tempM.m[8]=b.m[8],a.tempM.m[9]=b.m[9],a.tempM.m[10]=b.m[10],a.tempM.m[11]=b.m[11],a.tempM.m[12]=b.m[12],a.tempM.m[13]=b.m[13],a.tempM.m[14]=b.m[14],a.tempM.m[15]=b.m[15],a.tempM.prepend(this),this.m[0]=a.tempM.m[0],this.m[1]=a.tempM.m[1],this.m[2]=a.tempM.m[2],this.m[3]=a.tempM.m[3],this.m[4]=a.tempM.m[4],this.m[5]=a.tempM.m[5],this.m[6]=a.tempM.m[6],this.m[7]=a.tempM.m[7],this.m[8]=a.tempM.m[8],this.m[9]=a.tempM.m[9],this.m[10]=a.tempM.m[10],this.m[11]=a.tempM.m[11],this.m[12]=a.tempM.m[12],this.m[13]=a.tempM.m[13],this.m[14]=a.tempM.m[14],this.m[15]=a.tempM.m[15]},a.prototype.prepend=function(a){var b=a.m,c=this.m,d=this.m,e=d[0],f=d[1],g=d[2],h=d[3],i=d[4],j=d[5],k=d[6],l=d[7],m=d[8],n=d[9],o=d[10],p=d[11],q=d[12],r=d[13],s=d[14],t=d[15],u=b[0],v=b[1],w=b[2],x=b[3];c[0]=u*e+v*i+w*m+x*q,c[1]=u*f+v*j+w*n+x*r,c[2]=u*g+v*k+w*o+x*s,c[3]=u*h+v*l+w*p+x*t,u=b[4],v=b[5],w=b[6],x=b[7],c[4]=u*e+v*i+w*m+x*q,c[5]=u*f+v*j+w*n+x*r,c[6]=u*g+v*k+w*o+x*s,c[7]=u*h+v*l+w*p+x*t,u=b[8],v=b[9],w=b[10],x=b[11],c[8]=u*e+v*i+w*m+x*q,c[9]=u*f+v*j+w*n+x*r,c[10]=u*g+v*k+w*o+x*s,c[11]=u*h+v*l+w*p+x*t,u=b[12],v=b[13],w=b[14],x=b[15],c[12]=u*e+v*i+w*m+x*q,c[13]=u*f+v*j+w*n+x*r,c[14]=u*g+v*k+w*o+x*s,c[15]=u*h+v*l+w*p+x*t},a.prototype.appendRotation=function(b,c){a.tempM.identity(),a.tempM.prependRotation(b,c),this.append(a.tempM)},a.prototype.tomat3=function(){var a=Array.prototype.concat.apply([],arguments);a=[1,0,0,0,1,0,0,0,1];var b=new Float32Array(a);return b[0]=this.m[0],b[1]=this.m[1],b[2]=this.m[2],b[3]=this.m[4],b[4]=this.m[5],b[5]=this.m[6],b[6]=this.m[8],b[7]=this.m[9],b[8]=this.m[10],b},a.prototype.getRotaion=function(a){a[0]=this.m[0],a[1]=this.m[1],a[2]=this.m[2],a[3]=this.m[4],a[4]=this.m[5],a[5]=this.m[6],a[6]=this.m[8],a[7]=this.m[9],a[8]=this.m[10]},a.prototype.identityPostion=function(){this.m[12]=0,this.m[13]=0,this.m[14]=0},Object.defineProperty(a.prototype,"x",{get:function(){return this.m[12]},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.m[13]},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"z",{get:function(){return this.m[14]},enumerable:!0,configurable:!0}),a.prototype.prependRotation=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=this.m,B=this.m,C=b.x,D=b.y,E=b.z,F=Math.sqrt(C*C+D*D+E*E);return Math.abs(F)<1e-6?null:(F=1/F,C*=F,D*=F,E*=F,c=Math.sin(a*Math.PI/180),d=Math.cos(a*Math.PI/180),e=1-d,f=B[0],g=B[1],h=B[2],i=B[3],j=B[4],k=B[5],l=B[6],m=B[7],n=B[8],o=B[9],p=B[10],q=B[11],r=C*C*e+d,s=D*C*e+E*c,t=E*C*e-D*c,u=C*D*e-E*c,v=D*D*e+d,w=E*D*e+C*c,x=C*E*e+D*c,y=D*E*e-C*c,z=E*E*e+d,A[0]=f*r+j*s+n*t,A[1]=g*r+k*s+o*t,A[2]=h*r+l*s+p*t,A[3]=i*r+m*s+q*t,A[4]=f*u+j*v+n*w,A[5]=g*u+k*v+o*w,A[6]=h*u+l*v+p*w,A[7]=i*u+m*v+q*w,A[8]=f*x+j*y+n*z,A[9]=g*x+k*y+o*z,A[10]=h*x+l*y+p*z,A[11]=i*x+m*y+q*z,B!==A&&(A[12]=B[12],A[13]=B[13],A[14]=B[14],A[15]=B[15]),A)},a.prototype.prependScale=function(a,b,c){var d=this.m,e=this.m;return e[0]=d[0]*a,e[1]=d[1]*a,e[2]=d[2]*a,e[3]=d[3]*a,e[4]=d[4]*b,e[5]=d[5]*b,e[6]=d[6]*b,e[7]=d[7]*b,e[8]=d[8]*c,e[9]=d[9]*c,e[10]=d[10]*c,e[11]=d[11]*c,e[12]=d[12],e[13]=d[13],e[14]=d[14],e[15]=d[15],e},a.prototype.appendScale=function(b,c,d){a.tempM.identity(),a.tempM.prependScale(b,c,d),this.append(a.tempM)},a.prototype.perspectiveFieldOfViewLH=function(a,b,c,d){var e=1/Math.tan(a/2),f=e/b,g=this.m;g[0]=f,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=e,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=d/(d-c),g[11]=1,g[12]=0,g[13]=0,g[14]=c*d/(c-d),g[15]=0},a.prototype.fromVtoV=function(a,b){var c=a.cross(b),d=Math.acos(a.dot(b)),e=new Quaternion;e.fromAxisAngle(c,d),e.toMatrix3D(this)},a.prototype.buildLookAtLH=function(a,b,c){var d=this.m,e=new Vector3D;e.x=b.x-a.x,e.y=b.y-a.y,e.z=b.z-a.z,e.normalize();var f=c.cross(e);f.normalize();var g=e.cross(f);d[0]=f.x,
d[1]=g.x,d[2]=e.x,d[3]=0,d[4]=f.y,d[5]=g.y,d[6]=e.y,d[7]=0,d[8]=f.z,d[9]=g.z,d[10]=e.z,d[11]=0,d[12]=-f.dot(a),d[13]=-g.dot(a),d[14]=-e.dot(a),d[15]=1},a.tempM=new a,a}(),Quaternion=function(){function a(a,b,c,d){void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=1),this.x=0,this.y=0,this.z=0,this.w=1,this.x=a,this.y=b,this.z=c,this.w=d}return a.prototype.print=function(){alert(String(this.x)+" "+String(this.y)+" "+String(this.z)+" "+String(this.w))},a.prototype.toEulerAngles=function(a){void 0===a&&(a=null),a||(a=new Vector3D);var b=this.x,c=this.y,d=this.z,e=this.w;return a.x=Math.atan2(2*(e*b+c*d),1-2*(b*b+c*c)),a.y=Math.asin(2*(e*c-d*b)),a.z=Math.atan2(2*(e*d+b*c),1-2*(c*c+d*d)),a},a.prototype.toMatrix3D=function(a){void 0===a&&(a=null),a||(a=new Matrix3D);var b=a.m,c=this.x,d=this.y,e=this.z,f=this.w,g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return b[0]=1-l-o,b[1]=k+r,b[2]=m-q,b[3]=0,b[4]=k-r,b[5]=1-j-o,b[6]=n+p,b[7]=0,b[8]=m+q,b[9]=n-p,b[10]=1-j-l,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,a},a.prototype.fromAxisAngle=function(a,b){var c=Math.sin(b/2),d=Math.cos(b/2);this.x=a.x*c,this.y=a.y*c,this.z=a.z*c,this.w=d,this.normalize()},a.prototype.normalize=function(a){void 0===a&&(a=1);var b=a/Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);this.x*=b,this.y*=b,this.z*=b,this.w*=b},a.prototype.fromMatrix=function(a){var b=[0,0,0,0,0,0,0,0,0];b[0]=a.m[0],b[1]=a.m[1],b[2]=a.m[2],b[3]=a.m[4],b[4]=a.m[5],b[5]=a.m[6],b[6]=a.m[8],b[7]=a.m[9],b[8]=a.m[10];var c,d=b[0]+b[4]+b[8],e=[0,0,0,0];if(d>0)c=Math.sqrt(d+1),e[3]=.5*c,c=.5/c,e[0]=(b[5]-b[7])*c,e[1]=(b[6]-b[2])*c,e[2]=(b[1]-b[3])*c;else{var f=0;b[4]>b[0]&&(f=1),b[8]>b[3*f+f]&&(f=2);var g=(f+1)%3,h=(f+2)%3;c=Math.sqrt(b[3*f+f]-b[3*g+g]-b[3*h+h]+1),e[f]=.5*c,c=.5/c,e[3]=(b[3*g+h]-b[3*h+g])*c,e[g]=(b[3*g+f]+b[3*f+g])*c,e[h]=(b[3*h+f]+b[3*f+h])*c}this.x=e[0],this.y=e[1],this.z=e[2],this.w=e[3]},a.prototype.setMd5W=function(){this.w=1-(this.x*this.x+this.y*this.y+this.z*this.z),this.w<0?this.w=0:this.w=-Math.sqrt(this.w)},a}(),Vector3D=function(){function a(a,b,c,d){void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=1),this.x=0,this.y=0,this.z=0,this.w=1,this.x=a,this.y=b,this.z=c,this.w=d}return a.prototype.normalize=function(){var a=this.length;return 0==a?this:(this.scaleBy(1/a),this)},Object.defineProperty(a.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},enumerable:!0,configurable:!0}),a.prototype.scaleBy=function(a){this.x*=a,this.y*=a,this.z*=a,this.w*=a},a.prototype.divideScalar=function(a){0!=a?(this.x=this.x/a,this.y=this.y/a,this.z=this.z/a):(this.x=0,this.y=0,this.z=0)},a.prototype.distanceToSquared=function(b){return a.distance(this,b)},a.prototype.scaleByW=function(){this.x*=this.w,this.y*=this.w,this.z*=this.w},a.prototype.add=function(b){return new a(this.x+b.x,this.y+b.y,this.z+b.z)},a.prototype.subtract=function(b){return new a(this.x-b.x,this.y-b.y,this.z-b.z)},a.prototype.addByNum=function(a,b,c,d){void 0===d&&(d=0),this.x+=a,this.y+=b,this.z+=c,this.w+=d},a.prototype.setTo=function(a,b,c){this.x=a,this.y=b,this.z=c},a.prototype.setByte=function(a){this.x=a.readFloat(),this.y=a.readFloat(),this.z=a.readFloat()},a.prototype.cross=function(b){return new a(this.y*b.z-this.z*b.y,this.z*b.x-this.x*b.z,this.x*b.y-this.y*b.x)},a.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z},a.prototype.clone=function(){return new a(this.x,this.y,this.z)},a.distance=function(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return Math.sqrt(c*c+d*d+e*e)},a.prototype.toString=function(){return"Vector3D("+String(this.x)+","+String(this.y)+","+String(this.z)+","+String(this.w)+")"},a.X_AXIS=new a(1,0,0),a.Y_AXIS=new a(0,1,0),a.Z_AXIS=new a(0,0,1),a}(),Vector2D=function(){function a(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this.x=0,this.y=0,this.x=a,this.y=b}return a.prototype.normalize=function(){var a=this.length;0!=a&&this.scaleBy(1/a)},Object.defineProperty(a.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),a.prototype.scaleBy=function(a){this.x*=a,this.y*=a},a.prototype.toString=function(){return"Vector2D("+String(this.x)+","+String(this.y)+")"},a.distance=function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)},a}(),Rectangle=function(){function a(a,b,c,d){void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=1),void 0===d&&(d=1),this.x=0,this.y=0,this.width=0,this.height=1,this.x=a,this.y=b,this.width=c,this.height=d}return a.prototype.sets=function(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d},a.prototype.setRec=function(a){this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height},a.prototype.isHitByPoint=function(a,b){return a>=this.x&&b>=this.y&&a<=this.x+this.width&&b<=this.y+this.height},a}(),Circle=function(){function a(a,b,c){void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),this.setData(a,b,c)}return a.prototype.setData=function(a,b,c){this.x=a,this.y=b,this.radius=c},a.prototype.setPos=function(a,b){this.x=a,this.y=b},Object.defineProperty(a.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a},enumerable:!0,configurable:!0}),a.prototype.setRadius=function(a){this.radius=a},a.prototype.testPoint=function(a){var b=this.x-a.x,c=this.y-a.y;return Math.sqrt(b*b+c*c)<this.radius},a}(),Groundposition=function(){function a(){}return a.getGroundPos=function(a,b){var c=-500;if(!this._plantObjectMath){var d=new Vector3D(0,c,500),e=new Vector3D(-500,c,0),f=new Vector3D(500,c,0);this._plantObjectMath=Calculation._PanelEquationFromThreePt(d,e,f),this._plantnormal=new Vector3D(this._plantObjectMath.a,this._plantObjectMath.b,this._plantObjectMath.c),this._plantnormal.normalize(),this._plane_a=new Vector3D(d.x,d.y,d.z)}var g=MathUtil.mathDisplay2Dto3DWorldPos(new Vector2D(a,b),500),h=new Vector3D(Scene_data.cam3D.x,Scene_data.cam3D.y,Scene_data.cam3D.z),i=Calculation.calPlaneLineIntersectPoint(this._plantnormal,this._plane_a,g,h);return i},a}(),ObjectMath=function(){function a(){this.a=0,this.b=0,this.c=0,this.d=0}return a}(),Calculation=function(){function a(){}return a._PanelEquationFromThreePt=function(a,b,c){var d=(b.y-a.y)*(c.z-a.z)-(b.z-a.z)*(c.y-a.y),e=(b.z-a.z)*(c.x-a.x)-(b.x-a.x)*(c.z-a.z),f=(b.x-a.x)*(c.y-a.y)-(b.y-a.y)*(c.x-a.x),g=0-(d*a.x+e*a.y+f*a.z),h=new ObjectMath;return h.a=d,h.b=e,h.c=f,h.d=g,h},a.calPlaneLineIntersectPoint=function(a,b,c,d){var e=new Vector3D,f=a.x,g=a.y,h=a.z,i=b.x,j=b.y,k=b.z,l=c.x-d.x,m=c.y-d.y,n=c.z-d.z,o=d.x,p=d.y,q=d.z,r=l*f+m*g+n*h;if(0==r)return null;var s=((i-o)*f+(j-p)*g+(k-q)*h)/r;return e.x=o+l*s,e.y=p+m*s,e.z=q+n*s,e},a}(),Endian=function(){function a(){}return a.LITTLE_ENDIAN="littleEndian",a.BIG_ENDIAN="bigEndian",a}(),ByteArray=function(){function a(a){this.BUFFER_EXT_SIZE=0,this.optcode=0,this.EOF_byte=-1,this.EOF_code_point=-1,this._setArrayBuffer(a||new ArrayBuffer(this.BUFFER_EXT_SIZE)),this.endian=Endian.BIG_ENDIAN}return a.prototype._setArrayBuffer=function(a){this.write_position=a.byteLength,this.data=new DataView(a),this._position=0},a.prototype.setdata=function(a){this._setArrayBuffer(a.buffer)},Object.defineProperty(a.prototype,"buffer",{get:function(){return this.data.buffer},set:function(a){this.data=new DataView(a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dataView",{get:function(){return this.data},set:function(a){this.data=a,this.write_position=a.byteLength},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0}),a.prototype.getByte=function(a){return this.data.getUint8(a)},a.prototype.setByte=function(a,b){this.data.setUint8(a,b)},Object.defineProperty(a.prototype,"position",{get:function(){return this._position},set:function(a){this._position=a,this.write_position=a>this.write_position?a:this.write_position},enumerable:!0,configurable:!0}),a.prototype.reset=function(){this.clear()},Object.defineProperty(a.prototype,"length",{get:function(){return this.write_position},set:function(a){this.validateBuffer(a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0}),a.prototype.clear=function(){this._setArrayBuffer(new ArrayBuffer(this.BUFFER_EXT_SIZE))},a.prototype.readBoolean=function(){return 0!=this.data.getUint8(this.position++)},a.prototype.readByte=function(){return this.data.getInt8(this.position++)},a.prototype.readBytes=function(a,b,c){void 0===b&&(b=0),void 0===c&&(c=0);for(var d=0;c>d;d++)a.data.setUint8(d+b,this.data.getUint8(this.position++))},a.prototype.readDouble=function(){var b=this.data.getFloat64(this.position,this.endian==Endian.LITTLE_ENDIAN);return this.position+=a.SIZE_OF_FLOAT64,b},a.prototype.readFloat=function(){var b=this.data.getFloat32(this.position,this.endian==Endian.LITTLE_ENDIAN);return this.position+=a.SIZE_OF_FLOAT32,b},a.prototype.readInt=function(){var b=this.data.getInt32(this.position,this.endian==Endian.LITTLE_ENDIAN);return this.position+=a.SIZE_OF_INT32,b},a.prototype.getInt=function(){var a=this.data.getInt32(this.position,this.endian==Endian.LITTLE_ENDIAN);return a},a.prototype.readInt32=function(){return this.readInt()},a.prototype.readShort=function(){this.position>=this.data.byteLength&&console.log("readShort");var b=this.data.getInt16(this.position,this.endian==Endian.LITTLE_ENDIAN);return this.position+=a.SIZE_OF_INT16,b},a.prototype.readFloatTwoByte=function(a){return this.readShort()/a},a.prototype.readFloatOneByte=function(){return(this.readByte()+128)/256},a.prototype.readUnsignedByte=function(){return this.data.getUint8(this.position++)},a.prototype.readUint8=function(){return this.readUnsignedByte()},a.prototype.readInt8=function(){return this.readByte()},a.prototype.readUnsignedInt=function(){var b=this.data.getUint32(this.position,this.endian==Endian.LITTLE_ENDIAN);return this.position+=a.SIZE_OF_UINT32,b},a.prototype.readUint32=function(){return this.readUnsignedInt()},a.prototype.readUint64=function(){return this.readDouble()},a.prototype.readUnsignedShort=function(){var b=this.data.getUint16(this.position,this.endian==Endian.LITTLE_ENDIAN);return this.position+=a.SIZE_OF_UINT16,b},a.prototype.readUint16=function(){return this.readUnsignedShort()},a.prototype.readUTF=function(){var b=this.data.getUint16(this.position,this.endian==Endian.LITTLE_ENDIAN);return this.position+=a.SIZE_OF_UINT16,b>0?this.readUTFBytes(b):""},a.prototype.readString=function(){return this.readUTF()},a.prototype.readUTFBytes=function(a){var b=new Uint8Array(this.buffer,this.bufferOffset+this.position,a);return this.position+=a,this.decodeUTF8(b)},a.prototype.readStringByLen=function(a){return this.readUTFBytes(a)},a.prototype.writeBoolean=function(b){this.validateBuffer(a.SIZE_OF_BOOLEAN),this.data.setUint8(this.position++,b?1:0)},a.prototype.writeByte=function(b){this.validateBuffer(a.SIZE_OF_INT8),this.data.setInt8(this.position++,b)},a.prototype.writeUint8=function(a){this.writeByte(a)},a.prototype.writeInt8=function(a){this.writeByte(a)},a.prototype.writeBytes=function(a,b,c){void 0===b&&(b=0),void 0===c&&(c=0);var d;if(!(0>b)&&!(0>c)&&(d=0==c?a.length-b:Math.min(a.length-b,c),d>0)){this.validateBuffer(d);for(var e=new DataView(a.buffer),f=b;d+b>f;f++)this.data.setUint8(this.position++,e.getUint8(f))}},a.prototype.writeDouble=function(b){this.validateBuffer(a.SIZE_OF_FLOAT64),this.data.setFloat64(this.position,b,this.endian==Endian.LITTLE_ENDIAN),this.position+=a.SIZE_OF_FLOAT64},a.prototype.writeFloat=function(b){this.validateBuffer(a.SIZE_OF_FLOAT32),this.data.setFloat32(this.position,b,this.endian==Endian.LITTLE_ENDIAN),this.position+=a.SIZE_OF_FLOAT32},a.prototype.writeInt=function(b){this.validateBuffer(a.SIZE_OF_INT32),this.data.setInt32(this.position,b,this.endian==Endian.LITTLE_ENDIAN),this.position+=a.SIZE_OF_INT32},a.prototype.writeInt32=function(a){this.writeInt(a)},a.prototype.writeUnsignedShort=function(b){this.validateBuffer(a.SIZE_OF_INT16),this.data.setInt16(this.position,b,this.endian==Endian.LITTLE_ENDIAN),this.position+=a.SIZE_OF_INT16},a.prototype.writeUint16=function(a){this.writeUnsignedShort(a)},a.prototype.writeUint64=function(b){this.validateBuffer(a.SIZE_OF_FLOAT64),this.data.setFloat64(this.position,b,this.endian==Endian.LITTLE_ENDIAN),this.position+=a.SIZE_OF_FLOAT64},a.prototype.writeShort=function(b){this.validateBuffer(a.SIZE_OF_INT16),this.data.setUint16(this.position,b,this.endian==Endian.LITTLE_ENDIAN),this.position+=a.SIZE_OF_INT16},a.prototype.writeUnsignedInt=function(b){this.validateBuffer(a.SIZE_OF_UINT32),this.data.setUint32(this.position,b,this.endian==Endian.LITTLE_ENDIAN),this.position+=a.SIZE_OF_UINT32},a.prototype.writeUint32=function(a){this.writeUnsignedInt(a)},a.prototype.writeUTF=function(b){var c=this.encodeUTF8(b),d=c.length;this.validateBuffer(a.SIZE_OF_UINT16+d),this.data.setUint16(this.position,d,this.endian===Endian.LITTLE_ENDIAN),this.position+=a.SIZE_OF_UINT16,this._writeUint8Array(c,!1)},a.prototype.writeString=function(b){var c=new a;c.writeUTFBytes(b),this.writeUint16(c.length+1),this.writeBytes(c,0,c.length),this.writeByte(0)},a.prototype.writeStringByLen=function(a,b){var c=this.position;this.writeUTFBytes(a),this.position=c+b,this.length=this.position+1},a.prototype.readVector3D=function(a){void 0===a&&(a=!1);var b=new Vector3D;return b.x=this.readFloat(),b.y=this.readFloat(),b.z=this.readFloat(),a&&(b.w=this.readFloat()),b},a.prototype.writeUTFBytes=function(a){this._writeUint8Array(this.encodeUTF8(a))},a.prototype.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},a.prototype._writeUint8Array=function(a,b){void 0===b&&(b=!0),b&&this.validateBuffer(this.position+a.length);for(var c=0;c<a.length;c++)this.data.setUint8(this.position++,a[c])},a.prototype.validate=function(a){return this.data.byteLength>0&&this._position+a<=this.data.byteLength?!0:void 0},a.prototype.validateBuffer=function(a,b){if(void 0===b&&(b=!1),this.write_position=a>this.write_position?a:this.write_position,a+=this._position,this.data.byteLength<a||b){var c=new Uint8Array(new ArrayBuffer(a+this.BUFFER_EXT_SIZE)),d=Math.min(this.data.buffer.byteLength,a+this.BUFFER_EXT_SIZE);c.set(new Uint8Array(this.data.buffer,0,d)),this.buffer=c.buffer}},a.prototype.encodeUTF8=function(a){for(var b=0,c=this.stringToCodePoints(a),d=[];c.length>b;){var e=c[b++];if(this.inRange(e,55296,57343))this.encoderError(e);else if(this.inRange(e,0,127))d.push(e);else{var f,g;for(this.inRange(e,128,2047)?(f=1,g=192):this.inRange(e,2048,65535)?(f=2,g=224):this.inRange(e,65536,1114111)&&(f=3,g=240),d.push(this.div(e,Math.pow(64,f))+g);f>0;){var h=this.div(e,Math.pow(64,f-1));d.push(128+h%64),f-=1}}}return new Uint8Array(d)},a.prototype.decodeUTF8=function(a){for(var b,c=!1,d=0,e="",f=0,g=0,h=0,i=0;a.length>d;){var j=a[d++];if(j===this.EOF_byte)b=0!==g?this.decoderError(c):this.EOF_code_point;else if(0===g)this.inRange(j,0,127)?b=j:(this.inRange(j,194,223)?(g=1,i=128,f=j-192):this.inRange(j,224,239)?(g=2,i=2048,f=j-224):this.inRange(j,240,244)?(g=3,i=65536,f=j-240):this.decoderError(c),f*=Math.pow(64,g),b=null);else if(this.inRange(j,128,191))if(h+=1,f+=(j-128)*Math.pow(64,g-h),h!==g)b=null;else{var k=f,l=i;f=0,g=0,h=0,i=0,b=this.inRange(k,l,1114111)&&!this.inRange(k,55296,57343)?k:this.decoderError(c,j)}else f=0,g=0,h=0,i=0,d--,b=this.decoderError(c,j);null!==b&&b!==this.EOF_code_point&&(65535>=b?b>0&&(e+=String.fromCharCode(b)):(b-=65536,e+=String.fromCharCode(55296+(b>>10&1023)),e+=String.fromCharCode(56320+(1023&b))))}return e},a.prototype.encoderError=function(a){},a.prototype.decoderError=function(a,b){return b||65533},a.prototype.inRange=function(a,b,c){return a>=b&&c>=a},a.prototype.div=function(a,b){return Math.floor(a/b)},a.prototype.stringToCodePoints=function(a){for(var b=[],c=0,d=a.length;c<a.length;){var e=a.charCodeAt(c);if(this.inRange(e,55296,57343))if(this.inRange(e,56320,57343))b.push(65533);else if(c===d-1)b.push(65533);else{var f=a.charCodeAt(c+1);if(this.inRange(f,56320,57343)){var g=1023&e,h=1023&f;c+=1,b.push(65536+(g<<10)+h)}else b.push(65533)}else b.push(e);c+=1}return b},a.SIZE_OF_BOOLEAN=1,a.SIZE_OF_INT8=1,a.SIZE_OF_INT16=2,a.SIZE_OF_INT32=4,a.SIZE_OF_UINT8=1,a.SIZE_OF_UINT16=2,a.SIZE_OF_UINT32=4,a.SIZE_OF_FLOAT32=4,a.SIZE_OF_FLOAT64=8,a}(),TestTriangle=function(){function a(a,b,c,d){void 0===a&&(a=null),void 0===b&&(b=null),void 0===c&&(c=null),void 0===d&&(d=.1),this.p1=a,this.p2=b,this.p3=c,this.precision=d}return a.prototype.setAllPoint=function(a,b,c){this.p1=a,this.p2=b,this.p3=c},a.prototype.checkPointIn=function(b){var c=this.getArea(),d=0;return d+=a.getAreaByPoints(b,this.p1,this.p2),d+=a.getAreaByPoints(b,this.p2,this.p3),d+=a.getAreaByPoints(b,this.p3,this.p1),d==c||Math.abs(d-c)<this.precision},a.prototype.getArea=function(){return a.getAreaByPoints(this.p1,this.p2,this.p3)},a.getAreaByPoints=function(a,b,c){var d=a.x-b.x,e=a.y-b.y,f=Math.sqrt(d*d+e*e);d=b.x-c.x,e=b.y-c.y;var g=Math.sqrt(d*d+e*e);d=c.x-a.x,e=c.y-a.y;var h=Math.sqrt(d*d+e*e),i=(f+g+h)/2,j=i*(i-f)*(i-g)*(i-h);return j>0?Math.sqrt(j):0},a.baseTri=new a,a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},CombineParticleData=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.destory=function(){for(var a=0;a<this.dataAry.length;a++)this.dataAry[a].destory()},b.prototype.getCombineParticle=function(){var a=new CombineParticle;a.maxTime=this.maxTime;for(var b=0;b<this.dataAry.length;b++){var c=this.dataAry[b].creatPartilce();a.addPrticleItem(c)}return a.sourceData=this,this.useNum++,a},b.prototype.setDataByte=function(a){a.position=0;var b=a.readInt(),c=a.readInt();this.maxTime=0,this.dataAry=new Array;for(var d=0;c>d;d++){var e=a.readInt(),f=this.getParticleDataType(e);f.version=b,f.setAllByteInfo(a),this.dataAry.push(f),f.timelineData.maxFrameNum>this.maxTime&&(this.maxTime=f.timelineData.maxFrameNum)}this.maxTime*=Scene_data.frameTime},b.prototype.getParticleDataType=function(a){var b;switch(a){case 1:b=new ParticleFacetData;break;case 18:b=new ParticleBallData;break;case 3:b=new ParticleLocusData;break;case 14:b=new ParticleLocusballData;break;case 9:b=new ParticleModelData;break;case 4:b=new ParticleModelData;break;case 7:b=new ParticleModelData;break;case 8:b=new ParticleFollowData;break;case 12:b=new ParticleFollowLocusData;break;case 13:b=new ParticleBoneData}return b},b}(ResCount),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},CombineParticle=function(a){function b(){a.call(this),this._maxTime=1e6,this._rotationX=0,this._rotationY=0,this._rotationZ=0,this.hasMulItem=!1,this.sceneVisible=!0,this.dynamic=!1,this._displayAry=new Array,this._time=0,this.bindMatrix=new Matrix3D,this.invertBindMatrix=new Matrix3D,this.bindVecter3d=new Vector3D,this.bindScale=new Vector3D(1,1,1),this.groupMatrix=new Matrix3D,this.groupRotationMatrix=new Matrix3D}return __extends(b,a),Object.defineProperty(b.prototype,"displayAry",{get:function(){return this._displayAry},set:function(a){this._displayAry=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"maxTime",{set:function(a){this._maxTime=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"bindTarget",{set:function(a){this._bindTarget=a,this.invertBindMatrix.isIdentity=!1},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"bindSocket",{set:function(a){this._bindSocket=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"x",{get:function(){return this.bindVecter3d.x},set:function(a){this.bindVecter3d.x=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this.bindVecter3d.y},set:function(a){this.bindVecter3d.y=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"z",{get:function(){return this.bindVecter3d.z},set:function(a){this.bindVecter3d.z=a},enumerable:!0,configurable:!0}),b.prototype.setPos=function(a,b,c){this.bindVecter3d.setTo(a,b,c);for(var d=0;d<this._displayAry.length;d++)this._displayAry[d].resetPos()},b.prototype.setMulPos=function(a){for(var b=0;b<this._displayAry.length;b++)this._displayAry[b].resetMulPos(a)},Object.defineProperty(b.prototype,"scaleX",{set:function(a){this.bindScale.x=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"scaleY",{set:function(a){this.bindScale.y=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"scaleZ",{set:function(a){this.bindScale.z=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"rotationX",{set:function(a){this._rotationX=a,this.applyRotation()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"rotationY",{set:function(a){this._rotationY=a,this.applyRotation()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"rotationZ",{set:function(a){this._rotationZ=a,this.applyRotation()},enumerable:!0,configurable:!0}),b.prototype.applyRotation=function(){this.bindMatrix.identity(),this.bindMatrix.appendRotation(this._rotationX,Vector3D.X_AXIS),this.bindMatrix.appendRotation(this._rotationY,Vector3D.Y_AXIS),this.bindMatrix.appendRotation(this._rotationZ,Vector3D.Z_AXIS),this.bindMatrix.copyTo(this.invertBindMatrix),this.invertBindMatrix.invert(),this.invertBindMatrix.isIdentity=!1},b.prototype.setGroup=function(a,b,c){this._isInGroup=!0,this._groupPos=a,this._groupRotation=b,this._groupScale=c,this.groupMatrix.isIdentity=!1,this.groupMatrix.identity(),this.groupMatrix.appendScale(c.x,c.y,c.z),this.groupMatrix.appendRotation(b.x,Vector3D.X_AXIS),this.groupMatrix.appendRotation(b.y,Vector3D.Y_AXIS),this.groupMatrix.appendRotation(b.z,Vector3D.Z_AXIS),this.groupMatrix.appendTranslation(a.x,a.y,a.z),this.groupRotationMatrix.isIdentity=!1,this.groupRotationMatrix.identity(),this.groupRotationMatrix.prependRotation(b.z,Vector3D.Z_AXIS),this.groupRotationMatrix.prependRotation(b.y,Vector3D.Y_AXIS),this.groupRotationMatrix.prependRotation(b.x,Vector3D.X_AXIS)},b.prototype.setDataByte=function(a){a.position=0;var b=a.readInt(),c=a.readInt();this._maxTime=0,this._displayAry=new Array;for(var d=0;c>d;d++){var e=a.readInt(),f=this.getDisplay3DById(e);f.setAllByteInfo(a,b),f.setBind(this.bindVecter3d,this.bindMatrix,this.bindScale,this.invertBindMatrix,this.groupMatrix),this._displayAry.push(f),f.timeline.maxFrameNum>this._maxTime&&(this._maxTime=f.timeline.maxFrameNum)}this._maxTime*=Scene_data.frameTime},b.prototype.addPrticleItem=function(a){a.visible=!1,a.setBind(this.bindVecter3d,this.bindMatrix,this.bindScale,this.invertBindMatrix,this.groupMatrix),this._displayAry.push(a)},b.prototype.getDisplay3DById=function(a){var b=new Object;return b.particleType=a,this.getDisplay3D(b)},b.prototype.setData=function(a){this._displayAry=new Array,this._maxTime=0;for(var b=0;b<a.length;b++){var c=a[b].display,d=this.getDisplay3D(c);d.setBind(this.bindVecter3d,this.bindMatrix,this.bindScale,this.invertBindMatrix,this.groupMatrix),this._displayAry.push(d),d.timeline.maxFrameNum>this._maxTime&&(this._maxTime=d.timeline.maxFrameNum)}this._maxTime*=Scene_data.frameTime},b.prototype.updateTime=function(a){this._time+=a;for(var b=0;b<this._displayAry.length;b++)this._displayAry[b].updateTime(this._time);this.updateBind(),this._time>=this._maxTime&&this.dispatchEvent(new BaseEvent(BaseEvent.COMPLETE))},b.prototype.updateBind=function(){this._bindTarget&&(this._bindTarget.getSocket(this._bindSocket,this.bindMatrix),this.bindVecter3d.setTo(this.bindMatrix.x,this.bindMatrix.y,this.bindMatrix.z),this.bindMatrix.identityPostion(),this.groupRotationMatrix.isIdentity?this.bindMatrix.invertToMatrix(this.invertBindMatrix):(this.bindMatrix.copyTo(this.invertBindMatrix),this.invertBindMatrix.prepend(this.groupRotationMatrix),this.invertBindMatrix.invert()))},b.prototype.reset=function(){this._time=0;for(var a=0;a<this._displayAry.length;a++)this._displayAry[a].reset()},b.prototype.update=function(){if(this.sceneVisible)for(var a=0;a<this._displayAry.length;a++)this._displayAry[a].update()},b.prototype.updateItem=function(a){this.sceneVisible&&this._displayAry[a].update()},Object.defineProperty(b.prototype,"size",{get:function(){return this._displayAry.length},enumerable:!0,configurable:!0}),b.prototype.getDisplay3D=function(a){var b,c=a.particleType;switch(c){case 1:b=new Display3DFacetParticle;break;case 18:b=new Display3DBallPartilce;break;case 3:b=new Display3DLocusPartilce;break;case 14:b=new Display3DLocusBallPartilce;break;case 9:b=new Display3DModelObjParticle;break;case 4:b=new Display3DModelPartilce;break;case 7:b=new Display3dModelAnimParticle;break;case 8:b=new Display3DFollowPartilce}return b.visible=!1,b},b.prototype.destory=function(){this.sourceData.useNum--;for(var a=0;a<this._displayAry.length;a++)this._displayAry[a].destory();this._displayAry.length=0,this._displayAry=null,this.bindMatrix=null,this.bindVecter3d=null,this.bindScale=null,this.invertBindMatrix=null,this._bindTarget=null,this._bindSocket=null,this._groupPos=null,this._groupRotation=null,this._groupScale=null,this.groupMatrix=null,this.groupRotationMatrix=null},b}(EventDispatcher),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ParticleManager=function(a){function b(){a.call(this),this._time=0,this.renderDic=new Object,this._particleList=new Array}return __extends(b,a),b.getInstance=function(){return this._instance||(this._instance=new b),this._instance},b.prototype.getParticleByte=function(a){a=a.replace("_byte.txt",".txt"),a=a.replace(".txt","_byte.txt");var b=new CombineParticle,c=a;if(this._dic[c]){var d=this._dic[c];b=d.getCombineParticle()}else LoadManager.getInstance().load(c,LoadManager.BYTE_TYPE,function(a){var c=new ByteArray(a);b.setDataByte(c)});return b.url=c,b},b.prototype.registerUrl=function(a){if(a=a.replace("_byte.txt",".txt"),a=a.replace(".txt","_byte.txt"),this._dic[a]){var b=this._dic[a];b.useNum++}},b.prototype.releaseUrl=function(a){if(a=a.replace("_byte.txt",".txt"),a=a.replace(".txt","_byte.txt"),this._dic[a]){var b=this._dic[a];b.clearUseNum()}},b.prototype.addResByte=function(a,b){if(!this._dic[a]){var c=new CombineParticleData;c.setDataByte(b),this._dic[a]=c}},b.prototype.update=function(){this.updateRenderDic(),this.clearPaticleVa()},b.prototype.clearPaticleVa=function(){Scene_data.context3D.clearVa(2),Scene_data.context3D.clearVa(3),Scene_data.context3D.clearVa(4),Scene_data.context3D.clearVa(5)},b.prototype.setHide=function(){for(var a=0;a<this._particleList.length;a++)!this._particleList[a].dynamic},Object.defineProperty(b.prototype,"particleList",{get:function(){return this._particleList},enumerable:!0,configurable:!0}),b.prototype.updateTime=function(){for(var a=TimeUtil.getTimer(),b=a-this._time,c=0;c<this._particleList.length;c++)this._particleList[c].sceneVisible&&this._particleList[c].updateTime(b);this._time=a},b.prototype.addRenderDic=function(a){var b=a.url;this.renderDic[b]||(this.renderDic[b]=new Array),this.renderDic[b].push(a)},b.prototype.removeRenderDic=function(a){var b=a.url,c=this.renderDic[b].indexOf(a);-1!=c&&(this.renderDic[b].splice(c,1),0==this.renderDic[b].length&&delete this.renderDic[b])},b.prototype.updateRenderDic=function(){for(var a in this.renderDic){var b=this.renderDic[a];if(1==b.length)b[0].update();else for(var c=b[0].size,d=0;c>d;d++)for(var e=0;e<b.length;e++)b[e].updateItem(d)}},b.prototype.addParticle=function(a){-1==this._particleList.lastIndexOf(a)&&(this._particleList.push(a),this.addRenderDic(a))},b.prototype.removeParticle=function(a){var b=this._particleList.indexOf(a);-1!=b&&(this._particleList.splice(b,1),this.removeRenderDic(a))},b.prototype.gc=function(){a.prototype.gc.call(this)},b}(ResGC),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3DParticle=function(a){function b(){a.call(this),this.isInGroup=!1,this.visible=!0,this._rotationMatrix=new Matrix3D,this.modelMatrix=new Matrix3D}return __extends(b,a),b.prototype.onCreated=function(){},b.prototype.setBind=function(a,b,c,d,e){this.bindVecter3d=a,this.bindMatrix=b,this.bindScale=c,this.invertBindMatrix=d,this.groupMatrix=e},b.prototype.getMulBindList=function(){return null},b.prototype.updateMatrix=function(){this.bindMatrix&&(this.modelMatrix.identity(),this.groupMatrix.isIdentity||this.posMatrix.append(this.groupMatrix),this.modelMatrix.append(this.posMatrix),this.modelMatrix.append(this.bindMatrix),this.modelMatrix.appendTranslation(this.bindVecter3d.x,this.bindVecter3d.y,this.bindVecter3d.z))},Object.defineProperty(b.prototype,"cantUseEffectsLev",{get:function(){var a=this.data._renderPriority<=Scene_data.effectsLev;return!a},enumerable:!0,configurable:!0}),b.prototype.updateTime=function(a){this.cantUseEffectsLev||(this._time=a-this._beginTime,this._time+=this.data._delayedTime,this.timeline.updateTime(a),this.visible=this.timeline.visible,this.posMatrix.identity(),this.posMatrix.prependScale(.1*this._scaleX*this.bindScale.x,.1*this._scaleY*this.bindScale.y,.1*this._scaleZ*this.bindScale.z),this.timeline.updateMatrix(this.posMatrix,this))},b.prototype.reset=function(){this.timeline.reset(),this.updateTime(0)},b.prototype.clearAllAnim=function(){},b.prototype.update=function(){this.cantUseEffectsLev||this.visible&&this.data.materialParam&&(Scene_data.context3D.setBlendParticleFactors(this.data._alphaMode),Scene_data.context3D.cullFaceBack(this.data.materialParam.material.backCull),this.data.materialParam&&Scene_data.context3D.setProgram(this.data.materialParam.program),this.updateMatrix(),this.setVc(),this.setVa(),this.resetVa())},b.prototype.setVc=function(){},b.prototype.pushVc=function(){Scene_data.context3D.setVcMatrix4fv(this.data.materialParam.shader,"vcmat",this.data.vcmatData)},b.prototype.setVa=function(){},b.prototype.resetVa=function(){},b.prototype.setMaterialVc=function(){if(this.data.materialParam){for(var a=this.data.materialParam.dynamicConstList,b=this._time%(Scene_data.frameTime*this.data._life),c=0;c<a.length;c++)a[c].update(b);this.data.materialParam.material.fcNum<=0||(b*=this.data.materialParam.material.timeSpeed,this.data.materialParam.material.update(b),Scene_data.context3D.setVc4fv(this.data.materialParam.shader,"fc",this.data.materialParam.material.fcData))}},b.prototype.setMaterialTexture=function(){if(this.data.materialParam){for(var a=this.data.materialParam.material.texList,b=0;b<a.length;b++)a[b].isDynamic||Scene_data.context3D.setRenderTexture(this.data.materialParam.shader,a[b].name,a[b].texture,a[b].id,!0);for(var c=this.data.materialParam.dynamicTexList,b=0;b<c.length;b++)Scene_data.context3D.setRenderTexture(this.data.materialParam.shader,c[b].target.name,c[b].texture,c[b].target.id,!0)}},b.prototype.inverBind=function(){this.invertBindMatrix.isIdentity||this._rotationMatrix.prepend(this.invertBindMatrix)},b.prototype.resetPos=function(){},b.prototype.resetMulPos=function(a){},b.prototype.getVector3DByObject=function(a){return a?new Vector3D(a.x,a.y,a.z,a.w):null},b.prototype.clone=function(){return null},b.prototype.setAllByteInfo=function(a,b){void 0===b&&(b=0),this.creatData(),this.data.version=b,this.data.setAllByteInfo(a),this.timeline=new TimeLine,this.timeline.setAllDataInfo(this.data.timelineData),this._beginTime=this.timeline.beginTime},b.prototype.creatData=function(){
this.data=new ParticleData},b.prototype.setTimeLine=function(a){this.timeline=a,this._beginTime=a.beginTime},b.prototype.destory=function(){this.timeline=null,this.bindMatrix=null,this.bindVecter3d=null,this.bindScale=null,this.invertBindMatrix=null,this.groupMatrix=null,this._rotationMatrix=null,this.modelMatrix=null,this.groupPos=null,this.groupScale=null,this.groupRotation=null},b}(Object3D),ParticleData=function(){function a(){this._delayedTime=0,this._width=100,this._height=100,this._originWidthScale=.5,this._originHeightScale=.5,this._eyeDistance=0,this._watchEye=!1,this._isZiZhuan=!1,this.overAllScale=1}return a.prototype.destory=function(){this.objData&&this.objData.destory(),this.materialParam.destory(),this.timelineData.destory(),this.timelineData=null},a.prototype.uploadGpu=function(){},a.prototype.regShader=function(){},a.prototype.initVcData=function(){},a.prototype.creatPartilce=function(){var a=this.getParticle();a.data=this;var b=new TimeLine;return b.setAllDataInfo(this.timelineData),a.setTimeLine(b),a.onCreated(),a},a.prototype.getParticle=function(){return null},a.prototype.setAllByteInfo=function(a){this.timelineData=new TimeLineData,this.timelineData.setByteData(a),this._beginTime=this.timelineData.beginTime,this.version>=15&&(this._delayedTime=a.readFloat()),this._width=a.readFloat(),this._height=a.readFloat(),this._widthFixed=a.readBoolean(),this._heightFixed=a.readBoolean(),this._originWidthScale=a.readFloat(),this._originHeightScale=a.readFloat(),this._eyeDistance=a.readFloat(),this._alphaMode=a.readFloat(),this._uSpeed=a.readFloat(),this._vSpeed=a.readFloat(),this._animLine=a.readFloat(),this._animRow=a.readFloat(),this._animInterval=a.readFloat(),this._renderPriority=a.readFloat(),this._distortion=a.readBoolean(),this._isUV=a.readBoolean(),this._isU=a.readBoolean(),this._isV=a.readBoolean(),this._life=a.readFloat(),this._life=this._life>1e4?Scene_data.MAX_NUMBER:this._life,this._watchEye=a.readBoolean(),this._ziZhuanAngly=new Vector3D,this._ziZhuanAngly.x=a.readFloat(),this._ziZhuanAngly.y=a.readFloat(),this._ziZhuanAngly.z=a.readFloat(),this._ziZhuanAngly.w=a.readFloat(),this.rotationV3d=new Vector3D,this.rotationV3d.x=a.readFloat(),this.rotationV3d.y=a.readFloat(),this.rotationV3d.z=a.readFloat(),this.center=new Vector3D,this.center.x=a.readFloat(),this.center.y=a.readFloat(),this.center.z=a.readFloat(),this.center.w=a.readFloat(),this.overAllScale=a.readFloat(),!this._ziZhuanAngly||0==this._ziZhuanAngly.x&&0==this._ziZhuanAngly.y&&0==this._ziZhuanAngly.z||(this._isZiZhuan=!0),this.readMaterialPara(a);var b=a.readUTF();b=b.replace("_byte.txt",".txt"),b=b.replace(".txt","_byte.txt"),this.materialByteUrl=b},Object.defineProperty(a.prototype,"materialByteUrl",{set:function(a){var b=this;this._materialUrl!=a&&(this._materialUrl=a,MaterialManager.getInstance().getMaterialByte(Scene_data.fileRoot+a,function(a){b.onMaterialLoad(a)}))},enumerable:!0,configurable:!0}),a.prototype.onMaterialLoad=function(a){this.materialParam=new MaterialParam,this.materialParam.setMaterial(a),this.materialParam.setLife(this._life),this.materialParamData&&(this.materialParam.setTextObj(this.materialParamData.texAry),this.materialParam.setConstObj(this.materialParamData.conAry)),MaterialManager.getInstance().loadDynamicTexUtil(this.materialParam),this.regShader()},a.prototype.readMaterialPara=function(a){this.materialParamData=new Object;var b=(a.readUTF(),a.readInt());this.materialParamData.texAry=new Array;for(var c=0;b>c;c++){var d=new Object;d.isParticleColor=a.readBoolean(),d.paramName=a.readUTF(),d.url=a.readUTF(),d.isParticleColor&&(d.curve=new Object,this.readTempCurve(a,d.curve)),this.materialParamData.texAry.push(d)}this.readMaterialParaConAry(a)},a.prototype.readTempCurve=function(a,b){b.values=new Array;var c=!1;if(this.version>=12){var d=a.readInt();if(d>0)var e=a.readFloat();for(var f=0;d>f;f++){for(var g=a.readInt(),h=new Array,i=0;g>i;i++)h.push(a.readByte()/127*e);b.values.push(h)}c=!0}b.type=a.readFloat(),b.maxFrame=a.readFloat(),b.sideType=a.readBoolean(),b.speedType=a.readBoolean(),b.useColorType=a.readBoolean(),b.items=this.readItems(a),c||this.makeCurveData(b)},a.prototype.readItems=function(a){for(var b=new Array,c=a.readInt(),d=0;c>d;d++){var e=new Object;e.frame=a.readInt(),e.vec3=a.readVector3D(!0),e.rotation=a.readVector3D(!0),e.rotationLeft=a.readVector3D(!0),b.push(e)}return b},a.prototype.makeCurveData=function(a){for(var b=a.items,c=new Array,d=new Array,e=new Array,f=new Array,g=0;g<b.length;g++)if(g==b.length-1)c.push(b[g].vec3.x),d.push(b[g].vec3.y),e.push(b[g].vec3.z),f.push(b[g].vec3.w);else{var h=b[g+1].frame-b[g].frame,i=b[g].vec3,j=b[g+1].vec3,k=a.items[g].rotation,l=a.items[g+1].rotationLeft;c=c.concat(this.getBzData(i.x,j.x,k.x,l.x,h)),d=d.concat(this.getBzData(i.y,j.y,k.y,l.y,h)),e=e.concat(this.getBzData(i.z,j.z,k.z,l.z,h)),f=f.concat(this.getBzData(i.w,j.w,k.w,l.w,h))}a.values=new Array,a.values[0]=c,a.values[1]=d,a.values[2]=e,a.values[3]=f},a.prototype.getBzData=function(a,b,c,d,e){var f=10,g=new Vector2D(0,a*f),h=new Vector2D(e,b*f),i=new Matrix3D,j=new Vector3D;i.identity(),i.appendRotation(-c,Vector3D.Z_AXIS),j=i.transformVector(new Vector3D(e/2,0,0));var k=new Vector2D(e/2,g.y+j.y);i.identity(),i.appendRotation(-d,Vector3D.Z_AXIS),j=i.transformVector(new Vector3D(-e/2,0,0));for(var l=new Vector2D(e/2,h.y+j.y),m=[g,k,l,h],n=new Array,o=1;3*e>o;o++)n.push(this.drawbezier(m,o/(3*e)));var p=new Array;for(o=0;e>o;o++)for(var q=0;q<n.length;q++)if(n[q].x>=o){p.push(n[q].y/f);break}return p},a.prototype.drawbezier=function(a,b){var c=new Array;if(0==a.length)return new Vector2D;for(var d in a)c.push(new Vector2D(a[d].x,a[d].y));for(;c.length>1;){for(var e=0;e<c.length-1;e++)this.mathmidpoint(c[e],c[e+1],b);c.pop()}return c[0]},a.prototype.mathmidpoint=function(a,b,c){var d,e;d=a.x+(b.x-a.x)*c,e=a.y+(b.y-a.y)*c,a.x=d,a.y=e},a.prototype.readMaterialParaConAry=function(a){for(var b=new Array,c=a.readInt(),d=0;c>d;d++){var e=new Object;e.type=a.readFloat(),e.indexID=a.readFloat(),e.paramName=a.readUTF(),e.curve=new Object,this.readTempCurve(a,e.curve),b.push(e)}this.materialParamData.conAry=b},a.prototype.setFloat32Vec=function(a,b){},a.prototype.setFloat32Mat=function(a,b){},a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ParticleGpuData=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(ObjData),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3DFacetParticle=function(a){function b(){a.call(this),this._lifeVisible=!0,this._resultUvVec=new Array(2)}return __extends(b,a),Object.defineProperty(b.prototype,"facetdata",{get:function(){return this.data},enumerable:!0,configurable:!0}),b.prototype.creatData=function(){this.data=new ParticleFacetData},b.prototype.update=function(){this._lifeVisible&&a.prototype.update.call(this)},b.prototype.reset=function(){a.prototype.reset.call(this),this._lifeVisible=!0},b.prototype.setVc=function(){this.updateRotaionMatrix(),this.updateUV(),this.data.vcmatData.set(Scene_data.viewMatrx3D.m,0),this.data.vcmatData.set(Scene_data.cam3D.cameraMatrix.m,16),this.data.vcmatData.set(this.modelMatrix.m,48),this.data.vcmatData.set(this._rotationMatrix.m,32),this.data.vcmatData.set(this._resultUvVec,64),this.setMaterialVc(),!this.facetdata._isCycle&&this._time/Scene_data.frameTime>this.data._life-2&&(this._lifeVisible=!1),Scene_data.context3D.setVcMatrix4fv(this.data.materialParam.shader,"vcmat",this.data.vcmatData)},b.prototype.setVa=function(){var a=Scene_data.context3D.pushVa(this.data.objData.vertexBuffer);a||(Scene_data.context3D.setVaOffset(0,3,this.data.objData.stride,0),Scene_data.context3D.setVaOffset(1,2,this.data.objData.stride,12)),this.setMaterialTexture(),Scene_data.context3D.drawCall(this.data.objData.indexBuffer,this.data.objData.treNum)},b.prototype.updateRotaionMatrix=function(){this._rotationMatrix.identity(),this.data._watchEye&&(this.timeline.inverAxisRotation(this._rotationMatrix),this.facetdata._locky||this.facetdata._lockx||this.inverBind(),this.facetdata._locky||this._rotationMatrix.prependRotation(-Scene_data.cam3D.rotationY,Vector3D.Y_AXIS),this.facetdata._lockx||this._rotationMatrix.prependRotation(-Scene_data.cam3D.rotationX,Vector3D.X_AXIS)),this.data._isZiZhuan&&this.timeline.applySelfRotation(this._rotationMatrix,this.data._ziZhuanAngly)},b.prototype.updateUV=function(){var a=float2int(this._time/Scene_data.frameTime);a=a>this.facetdata._maxAnimTime?this.facetdata._maxAnimTime:a,a=a/this.data._animInterval%(this.data._animLine*this.data._animRow),this._resultUvVec[0]=float2int(a%this.data._animLine)/this.data._animLine+this._time/Scene_data.frameTime*this.data._uSpeed,this._resultUvVec[1]=float2int(a/this.data._animLine)/this.data._animRow+this._time/Scene_data.frameTime*this.data._vSpeed},b}(Display3DParticle),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3DFacetShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Position"),a.bindAttribLocation(this.program,1,"v2TexCoord")},b.prototype.getMat4Str=function(a){return"vcmat["+b.shader_mat4[a]+"]"},b.prototype.getVec4Str=function(a){return"vcmat["+b.shader_vec4[a][0]+"]["+b.shader_vec4[a][1]+"]"},b.getVcSize=function(){return 5},b.prototype.getVertexShaderString=function(){var a="attribute vec4 v3Position;\nattribute vec2 v2TexCoord;\nuniform mat4 vcmat["+b.getVcSize()+"];\nvarying vec2 v0;\nvoid main(void){\n   v0 = v2TexCoord + vec2("+this.getVec4Str("uvMove")+".xy);\n   gl_Position = "+this.getMat4Str("viewMatrix3D")+"  * "+this.getMat4Str("camMatrix3D")+" * "+this.getMat4Str("posMatrix3D")+" * "+this.getMat4Str("rotationMatrix3D")+" * v3Position;\n}";return a},b.prototype.getFragmentShaderString=function(){var a=" precision mediump float;\nuniform sampler2D tex;\nvarying vec2 v0;\nvoid main(void)\n{\nvec4 infoUv = texture2D(tex, v0.xy);\ngl_FragColor = infoUv;\n}";return a},b.Display3D_Facet_Shader="Display3DFacetShader",b.shader_mat4={viewMatrix3D:0,camMatrix3D:1,rotationMatrix3D:2,posMatrix3D:3},b.shader_vec4={uvMove:[4,0]},b}(Shader3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ParticleFacetData=function(a){function b(){a.apply(this,arguments),this._isCycle=!1}return __extends(b,a),b.prototype.setAllByteInfo=function(b){this._maxAnimTime=b.readFloat(),this._isCycle=b.readBoolean(),this._lockx=b.readBoolean(),this._locky=b.readBoolean(),a.prototype.setAllByteInfo.call(this,b),this.initVcData(),this.uploadGpu()},b.prototype.getParticle=function(){return new Display3DFacetParticle},b.prototype.uploadGpu=function(){this.objData=new ObjData,this.makeRectangleData(this._width,this._height,this._originWidthScale,this._originHeightScale,this._isUV,this._isU,this._isV,this._animLine,this._animRow)},b.prototype.makeRectangleData=function(a,b,c,d,e,f,g,h,i){void 0===c&&(c=.5),void 0===d&&(d=.5),void 0===e&&(e=!1),void 0===f&&(f=!1),void 0===g&&(g=!1),void 0===h&&(h=1),void 0===i&&(i=1);var j=new Array,k=new Array,l=new Array;if(l.push(new Vector2D(0,0)),l.push(new Vector2D(0,1/i)),l.push(new Vector2D(1/h,1/i)),l.push(new Vector2D(1/h,0)),f)for(var m=0;m<l.length;m++)l[m].x=-l[m].x;if(g)for(var m=0;m<l.length;m++)l[m].y=-l[m].y;e&&l.push(l.shift());for(var m=0;m<l.length;m++)j.push(l[m].x,l[m].y);k.push(-c*a,b-d*b,0),k.push(l[0].x,l[0].y),k.push(a-c*a,b-d*b,0),k.push(l[1].x,l[1].y),k.push(a-c*a,-d*b,0),k.push(l[2].x,l[2].y),k.push(-c*a,-d*b,0),k.push(l[3].x,l[3].y);var n=new Array;n.push(0,1,2,0,2,3),this.objData.stride=20,this.objData.vertexBuffer=Scene_data.context3D.uploadBuff3D(k),this.objData.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(n),this.objData.treNum=n.length},b.prototype.initVcData=function(){this.vcmatData=new Float32Array(16*Display3DFacetShader.getVcSize())},b.prototype.setFloat32Vec=function(a,b){var c=Display3DFacetShader.shader_vec4[a],d=16*c[0]+4*c[1];this.vcmatData.set(b,d)},b.prototype.setFloat32Mat=function(a,b){var c=16*Display3DFacetShader.shader_mat4[a];this.vcmatData.set(b,c)},b.prototype.regShader=function(){this.materialParam.shader=ProgrmaManager.getInstance().getMaterialProgram(Display3DFacetShader.Display3D_Facet_Shader,Display3DFacetShader,this.materialParam.material),this.materialParam.program=this.materialParam.shader.program},b}(ParticleData),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3DBallPartilce=function(a){function b(){a.call(this)}return __extends(b,a),Object.defineProperty(b.prototype,"balldata",{get:function(){return this.data},enumerable:!0,configurable:!0}),b.prototype.creatData=function(){this.data=new ParticleBallData},b.prototype.setVa=function(){this.setVaCompress(),this.setMaterialTexture(),Scene_data.context3D.drawCall(this.data.objData.indexBuffer,this.data.objData.treNum)},b.prototype.setVaCompress=function(){var a=Scene_data.context3D.pushVa(this.data.objData.vertexBuffer);a||(Scene_data.context3D.setVaOffset(0,3,this.data.objData.stride,0),Scene_data.context3D.setVaOffset(1,3,this.data.objData.stride,12),Scene_data.context3D.setVaOffset(2,4,this.data.objData.stride,24),Scene_data.context3D.setVaOffset(3,3,this.data.objData.stride,40),this.balldata._needSelfRotation&&Scene_data.context3D.setVaOffset(4,2,this.data.objData.stride,52),this.balldata._needRandomColor&&Scene_data.context3D.setVaOffset(5,4,this.particleBallData.stride,this.particleBallData.randomOffset))},b.prototype.resetVa=function(){},b.prototype.setVc=function(){this.updateWatchCaramMatrix(),this.balldata.vcmatData.set(Scene_data.viewMatrx3D.m,0),this.balldata.vcmatData.set(Scene_data.cam3D.cameraMatrix.m,16),this.balldata.vcmatData.set(this.modelMatrix.m,32),this.balldata.vcmatData.set(this._rotationMatrix.m,48),this.balldata._timeVec[0]=this._time/Scene_data.frameTime*this.balldata._playSpeed,this.balldata.vcmatData.set(this.balldata._timeVec,80),this.balldata._is3Dlizi&&(this.updateAllRotationMatrix(),this.balldata._wordPosVec[0]=this.bindVecter3d.x,this.balldata._wordPosVec[1]=this.bindVecter3d.y,this.balldata._wordPosVec[2]=this.bindVecter3d.z,this.balldata._caramPosVec[0]=Scene_data.cam3D.x,this.balldata._caramPosVec[1]=Scene_data.cam3D.y,this.balldata._caramPosVec[2]=Scene_data.cam3D.z,this.balldata.vcmatData.set(this.balldata._allRotationMatrix.m,64),this.balldata.vcmatData.set(this.balldata._wordPosVec,96),this.balldata.vcmatData.set(this.balldata._caramPosVec,100)),Scene_data.context3D.setVcMatrix4fv(this.data.materialParam.shader,"vcmat",this.balldata.vcmatData),this.setMaterialVc()},b.prototype.updateWatchCaramMatrix=function(){this._rotationMatrix.identity(),this.balldata.facez?this._rotationMatrix.prependRotation(90,Vector3D.X_AXIS):this.balldata._is3Dlizi?(this.timeline.inverAxisRotation(this._rotationMatrix),this.inverBind()):this.balldata._watchEye&&(this.timeline.inverAxisRotation(this._rotationMatrix),this.inverBind(),this._rotationMatrix.prependRotation(-Scene_data.cam3D.rotationY,Vector3D.Y_AXIS),this._rotationMatrix.prependRotation(-Scene_data.cam3D.rotationX,Vector3D.X_AXIS))},b.prototype.updateAllRotationMatrix=function(){this.balldata._allRotationMatrix.identity(),this.balldata._allRotationMatrix.prependScale(this.data.overAllScale*this._scaleX*.1*this.bindScale.x,this.data.overAllScale*this._scaleY*.1*this.bindScale.y,this.data.overAllScale*this._scaleZ*.1*this.bindScale.z),this.timeline.inverAxisRotation(this._rotationMatrix),this.isInGroup&&(this.balldata._allRotationMatrix.appendRotation(this.groupRotation.x,Vector3D.X_AXIS),this.balldata._allRotationMatrix.appendRotation(this.groupRotation.y,Vector3D.Y_AXIS),this.balldata._allRotationMatrix.appendRotation(this.groupRotation.z,Vector3D.Z_AXIS)),this.bindMatrix&&this.balldata._allRotationMatrix.append(this.bindMatrix)},Object.defineProperty(b.prototype,"particleBallData",{get:function(){return this.data.objData},enumerable:!0,configurable:!0}),b}(Display3DParticle),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3DBallShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"vPosition"),a.bindAttribLocation(this.program,1,"texcoord"),a.bindAttribLocation(this.program,2,"basePos"),a.bindAttribLocation(this.program,3,"speed");var b=this.paramAry[3];b&&a.bindAttribLocation(this.program,4,"rotation");var c=this.paramAry[1];c&&a.bindAttribLocation(this.program,5,"color")},b.prototype.getMat4Str=function(a){return"vcmat["+b.shader_mat4[a]+"]"},b.prototype.getVec4Str=function(a){return"vcmat["+b.shader_vec4[a][0]+"]["+b.shader_vec4[a][1]+"]"},b.getVcSize=function(){return 7},b.prototype.getVertexShaderString=function(){var a,c,d,e,f,g,h,i,j,k,l,m,j,i,n,o,p,q,r,s,t,u,v;n="attribute vec4 vPosition;\nattribute vec3 texcoord;\nattribute vec4 basePos;\nattribute vec3 speed;\nuniform mat4 vcmat["+b.getVcSize()+"];\nvarying vec2 v0;\n",u="attribute vec4 color;\nvarying vec4 v2;\n",o="",p="attribute vec2 rotation;\n",q="",r="",s="",t="",v="varying vec2 v1;\n",a="float ctime = "+this.getVec4Str("time")+".x - basePos.w;\nif ("+this.getVec4Str("time")+".w > 0.0 && ctime >= 0.0) {\n    ctime = fract(ctime / "+this.getVec4Str("time")+".z) * "+this.getVec4Str("time")+".z;\n}\nvec4 pos = vPosition;\n",c="float stime = ctime - "+this.getVec4Str("scale")+".w;\nstime = max(stime,0.0);\nfloat sf = "+this.getVec4Str("scale")+".x * stime;\nif ("+this.getVec4Str("scale")+".y != 0.0 && "+this.getVec4Str("scale")+".z != 0.0) {\n    sf += sin("+this.getVec4Str("scale")+".y * stime) * "+this.getVec4Str("scale")+".z;\n}\nif (sf > "+this.getVec4Str("scaleCtrl")+".z) {\n    sf = "+this.getVec4Str("scaleCtrl")+".z;\n} else if (sf < "+this.getVec4Str("scaleCtrl")+".w) {\n    sf = "+this.getVec4Str("scaleCtrl")+".w;\n}\nvec2 sv2 = vec2("+this.getVec4Str("scaleCtrl")+".x * sf, "+this.getVec4Str("scaleCtrl")+".y * sf);\nsv2 = sv2 + 1.0;\npos.x *= sv2.x;\npos.y *= sv2.y;\n",d="float angle = rotation.x + rotation.y * ctime;\nvec4 np = vec4(sin(angle), cos(angle), 0, 0);\nnp.z = np.x * pos.y + np.y * pos.x;\nnp.w = np.y * pos.y - np.x * pos.x;\npos.xy = np.zw;\n",e="vec3 addPos = speed * ctime;\nvec3 uspeed = vec3(0,0,0);\nif (ctime < 0.0 || ctime >= "+this.getVec4Str("time")+".z) {\n    addPos.y = addPos.y + 100000.0;\n}\n",f="if("+this.getVec4Str("time")+".y != 0.0 && length(speed) != 0.0) {\n    uspeed = vec3(speed.x, speed.y, speed.z);\n    uspeed = normalize(uspeed);\n    uspeed = uspeed * "+this.getVec4Str("time")+".y;\n    uspeed.xyz = uspeed.xyz + "+this.getVec4Str("force")+".xyz;\n} else {\n    uspeed = vec3("+this.getVec4Str("force")+".x, "+this.getVec4Str("force")+".y, "+this.getVec4Str("force")+".z);\n}\naddPos.xyz = addPos.xyz + uspeed.xyz * ctime * ctime;\n",g="uspeed = speed + uspeed * ctime * 2.0;\nuspeed = normalize(uspeed);\nvec4 tempMul = "+this.getMat4Str("rotationMatrix")+" * vec4(uspeed,1.0);\nuspeed.xyz = tempMul.xyz;\nuspeed = normalize(uspeed);\nvec3 cPos = addPos;\ntempMul = "+this.getMat4Str("rotationMatrix")+" * vec4(cPos,1.0);\ncPos.xyz = tempMul.xyz; \ncPos.xyz = "+this.getVec4Str("worldPos")+".xyz + cPos.xyz;\ncPos.xyz = "+this.getVec4Str("camPos")+".xyz - cPos.xyz;\ncPos = normalize(cPos);\ncPos = cross(uspeed, cPos);\ncPos = normalize(cPos);\nuspeed = uspeed * pos.x;\ncPos = cPos * pos.y;\npos.xyz = uspeed.xyz + cPos.xyz;\n",h="pos = "+this.getMat4Str("watheye")+" * pos;\npos.xyz = pos.xyz + basePos.xyz + addPos.xyz;\ngl_Position = "+this.getMat4Str("viewMatrix3D")+" * "+this.getMat4Str("camMatrix3D")+" * "+this.getMat4Str("modelMatrix")+" * pos;\n",k="v0 = vec2(texcoord.x,texcoord.y);\n",l="vec2 uv = vec2(texcoord.x,texcoord.y);\nfloat animframe = floor(ctime / "+this.getVec4Str("animCtrl")+".z);\nanimframe = animframe / "+this.getVec4Str("animCtrl")+".x;\nuv.x += animframe;\nanimframe = floor(animframe);\nuv.y += animframe / "+this.getVec4Str("animCtrl")+".y;\nv0.xy = uv.xy;\n",m="vec2 uv = vec2("+this.getVec4Str("uvCtrl")+".x,"+this.getVec4Str("uvCtrl")+".y);\nuv.xy = uv.xy * ctime + texcoord.xy;\nv0.xy = uv.xy;\n",j="v2 = color;\n",i="v1 = vec2(ctime/"+this.getVec4Str("time")+".z,1.0);\n";var w=this.paramAry[0],x=this.paramAry[1],y=this.paramAry[2],z=this.paramAry[3],A=this.paramAry[4],B=this.paramAry[5],C=this.paramAry[6],D="",E="";D+=a,E+=n,A&&(D+=c,E+=o),z&&(D+=d,E+=p),D+=e,B&&(D+=f,E+=q),y&&(D+=g,E+=r),D+=h,1==C?(D+=l,E+=s):2==C?(D+=m,E+=t):D+=k,x&&(D+=j,E+=u),w&&(D+=i,E+=v);var F=E+"void main(){\n"+D+"}";return F},b.prototype.getFragmentShaderString=function(){var a=" precision mediump float;\nuniform sampler2D tex;\nvarying vec2 v0;\nvoid main(void)\n{\nvec4 infoUv = texture2D(tex, v0.xy);\ngl_FragColor = infoUv;\n}";return a},b.Display3D_Ball_Shader="Display3DBallShader",b.shader_mat4={viewMatrix3D:0,camMatrix3D:1,modelMatrix:2,watheye:3,rotationMatrix:4},b.shader_vec4={time:[5,0],scale:[5,1],scaleCtrl:[5,2],force:[5,3],worldPos:[6,0],camPos:[6,1],animCtrl:[6,2],uvCtrl:[6,3]},b}(Shader3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ParticleBallData=function(a){function b(){a.apply(this,arguments),this._totalNum=1,this._acceleration=.2,this._toscale=0,this._shootAngly=new Vector3D(1,0,0),this._shootSpeed=0,this._isRandom=!1,this._isSendRandom=!1,this._isSendAngleRandom=!1,this._paticleMaxScale=1,this._paticleMinScale=1,this._addforce=new Vector3D(0,0,0),this._lixinForce=new Vector3D(0,0,0),this._waveform=new Vector3D(0,0,0,0),this._round=new Vector3D,this._is3Dlizi=!1,this._speed=1,this._isLoop=!1,this._basePositon=new Vector3D(0,0,0),this._baseRandomAngle=0,this._shapeType=0,this._playSpeed=1,this._beginScale=0}return __extends(b,a),b.prototype.getParticle=function(){return new Display3DBallPartilce},b.prototype.setAllByteInfo=function(b){this._totalNum=b.readFloat(),this._acceleration=b.readFloat(),this._toscale=b.readFloat(),this._shootSpeed=b.readFloat(),this._isRandom=b.readBoolean(),this._isSendRandom=b.readBoolean(),this._round.x=b.readFloat(),this._round.y=b.readFloat(),this._round.z=b.readFloat(),this._round.w=b.readFloat(),this._is3Dlizi=b.readBoolean(),this._halfCircle=b.readBoolean(),this._shootAngly.x=b.readFloat(),this._shootAngly.y=b.readFloat(),this._shootAngly.z=b.readFloat(),this._shootAngly.w=b.readFloat(),this._speed=b.readFloat(),this._isLoop=b.readBoolean(),this._isSendAngleRandom=b.readBoolean(),this._waveform.x=b.readFloat(),this._waveform.y=b.readFloat(),this._waveform.z=b.readFloat(),this._waveform.w=b.readFloat(),this._closeSurface=b.readBoolean(),this._isEven=b.readBoolean(),this._paticleMaxScale=b.readFloat(),this._paticleMinScale=b.readFloat(),this._basePositon.x=b.readFloat(),this._basePositon.y=b.readFloat(),this._basePositon.z=b.readFloat(),this._basePositon.w=b.readFloat(),this._baseRandomAngle=b.readFloat(),this._shapeType=b.readFloat(),this._lockX=b.readBoolean(),this._lockY=b.readBoolean(),this._addforce.x=b.readFloat(),this._addforce.y=b.readFloat(),this._addforce.z=b.readFloat(),this._addforce.w=b.readFloat(),this._addforce.scaleByW(),this._lixinForce.x=b.readFloat(),this._lixinForce.y=b.readFloat(),this._lixinForce.z=b.readFloat(),this._lixinForce.w=b.readFloat(),this._islixinAngly=b.readBoolean(),this._particleRandomScale=new Vector3D,this._particleRandomScale.x=b.readFloat(),this._particleRandomScale.y=b.readFloat(),this._particleRandomScale.z=b.readFloat(),this._particleRandomScale.w=b.readFloat(),this._playSpeed=b.readFloat(),this.facez=b.readBoolean(),this._beginScale=b.readFloat(),this._widthFixed=b.readBoolean(),this._heightFixed=b.readBoolean(),this.readRandomColor(b),0!=this._acceleration||0!=this._addforce.x||0!=this._addforce.y||0!=this._addforce.z?(this._needAddSpeed=!0,this._addSpeedVec=[this._addforce.x,this._addforce.y,this._addforce.z]):this._needAddSpeed=!1,0!=this._toscale||0!=this._waveform.x||0!=this._waveform.y?(this._needScale=!0,this._scaleVec=[this._toscale,this._waveform.x,this._waveform.y,this._beginScale],this._scaleCtrlVec=[this._widthFixed?0:1,this._heightFixed?0:1,this._paticleMaxScale-1,this._paticleMinScale-1]):this._needScale=!1,a.prototype.setAllByteInfo.call(this,b),this._timeVec=[0,this._acceleration,this._life,this._isLoop?1:-1],this._is3Dlizi&&(this._wordPosVec=[0,0,0],this._caramPosVec=[0,0,0],this._allRotationMatrix=new Matrix3D),this.initVcData()},b.prototype.readRandomColor=function(a){var b=a.readInt(),c=new Object;c.alpha=new Array,c.color=new Array,c.pos=new Array;for(var d=0;b>d;d++)c.alpha.push(a.readFloat()),c.color.push(a.readFloat()),c.pos.push(a.readFloat());this._textureRandomColorInfo=c},Object.defineProperty(b.prototype,"objBallData",{get:function(){return this.objData},enumerable:!0,configurable:!0}),b.prototype.uploadGpu=function(){this.objData=new ParticleBallGpuData,this.initBaseData(),this.initBasePos(),this.initSpeed(),this._needSelfRotation&&this.initSelfRotaion(),this._needRandomColor&&this.initBaseColor(),this.pushToGpu()},b.prototype.initBaseData=function(){for(var a=new Array,b=new Array,c=new Array,d=0;d<this._totalNum;d++)this.makeRectangleData(a,b,this._width,this._height,this._originWidthScale,this._originHeightScale,this._isUV,this._isU,this._isV,this._animLine,this._animRow,d),c.push(0+4*d,1+4*d,2+4*d,0+4*d,2+4*d,3+4*d);this.objBallData.vertices=a,this.objBallData.uvs=b,this.objBallData.indexs=c},b.prototype.makeRectangleData=function(a,b,c,d,e,f,g,h,i,j,k,l){void 0===e&&(e=.5),void 0===f&&(f=.5),void 0===g&&(g=!1),void 0===h&&(h=!1),void 0===i&&(i=!1),void 0===j&&(j=1),void 0===k&&(k=1),void 0===l&&(l=0);var m=Math.random()*(this._particleRandomScale.x-this._particleRandomScale.y)+this._particleRandomScale.y;a.push(-e*c*m,(d-f*d)*m,0),a.push((c-e*c)*m,(d-f*d)*m,0),a.push((c-e*c)*m,-f*d*m,0),a.push(-e*c*m,-f*d*m,0);var n=new Array;if(n.push(new Vector2D(0,0)),n.push(new Vector2D(0,1/k)),n.push(new Vector2D(1/j,1/k)),n.push(new Vector2D(1/j,0)),h)for(var o=0;o<n.length;o++)n[o].x=-n[o].x;if(i)for(var o=0;o<n.length;o++)n[o].y=-n[o].y;g&&n.push(n.shift());for(var o=0;o<n.length;o++)b.push(n[o].x,n[o].y,l)},b.prototype.initBasePos=function(){for(var a=new Array,b=0;b<this._totalNum;b++){var c,d;if(this._isRandom){var e=new Vector3D(this._round.x*this._round.w,this._round.y*this._round.w,this._round.z*this._round.w);this._isEven?this._closeSurface?(c=new Vector3D(0,0,e.z),d=new Matrix3D,d.appendRotation(360*Math.random(),Vector3D.Y_AXIS),c=d.transformVector(c),c.y=e.y*Math.random()*2-e.y):(c=new Vector3D(0,0,e.z*Math.random()*2-e.z),d=new Matrix3D,d.appendRotation(360*Math.random(),Vector3D.Y_AXIS),c=d.transformVector(c),c.y=e.y*Math.random()*2-e.y):this._closeSurface?(c=new Vector3D(0,0,e.z),d=new Matrix3D,this._halfCircle?d.appendRotation(180*-Math.random(),Vector3D.X_AXIS):d.appendRotation(360*Math.random(),Vector3D.X_AXIS),d.appendRotation(360*Math.random(),Vector3D.Y_AXIS),c=d.transformVector(c)):c=this._halfCircle?new Vector3D(e.x*Math.random()*2-e.x,e.y*Math.random(),e.z*Math.random()*2-e.z):new Vector3D(e.x*Math.random()*2-e.x,e.y*Math.random()*2-e.y,e.z*Math.random()*2-e.z)}else c=new Vector3D;c=c.add(this._basePositon);for(var f=0;4>f;f++)a.push(c.x,c.y,c.z,b*this._shootSpeed)}this.objBallData.basePos=a},b.prototype.initSpeed=function(){for(var a=new Array,b=0;b<this._totalNum;b++){var c=new Vector3D,d=new Vector3D;if(0!=this._shootAngly.x||0!=this._shootAngly.y||0!=this._shootAngly.z){var e=Math.tan(this._shootAngly.w*Math.PI/180*Math.random()),f=360*Math.PI/180*Math.random();d=new Vector3D(Math.sin(f)*e,Math.cos(f)*e,1);var g=new Matrix3D;g.fromVtoV(new Vector3D(0,0,1),new Vector3D(this._shootAngly.x,this._shootAngly.y,this._shootAngly.z)),d=g.transformVector(d),d.normalize(),c=c.add(d)}(0!=this._lixinForce.x||0!=this._lixinForce.y||0!=this._lixinForce.z)&&(d=new Vector3D(Math.random()>.5?-this._lixinForce.x:this._lixinForce.x,Math.random()>.5?-this._lixinForce.y:this._lixinForce.y,Math.random()>.5?-this._lixinForce.z:this._lixinForce.z),d.normalize(),c=c.add(d)),this._islixinAngly&&(d=this._isEven?new Vector3D(this.objBallData.basePos[16*b],0,this.objBallData.basePos[16*b+2]):new Vector3D(this.objBallData.basePos[16*b],this.objBallData.basePos[16*b+1],this.objBallData.basePos[16*b+2]),d.normalize(),c=c.add(d)),c.normalize(),this._isSendRandom?c.scaleBy(this._speed*Math.random()):c.scaleBy(this._speed);for(var h=(this._baseRandomAngle*Math.random()*Math.PI/180,0);4>h;h++)a.push(c.x,c.y,c.z)}this.objBallData.beMove=a},b.prototype.initSelfRotaion=function(){var a=0,b=0;if(0==this._ziZhuanAngly.x&&0==this._ziZhuanAngly.y&&0==this._ziZhuanAngly.z&&0==this._ziZhuanAngly.w)return void(this._needSelfRotation=!1);this._needSelfRotation=!0;for(var c=new Array,d=0;d<this._totalNum;)a=this._ziZhuanAngly.x,1==this._ziZhuanAngly.y&&(a*=Math.random()),b=this._ziZhuanAngly.z,1==this._ziZhuanAngly.w?b*=Math.random():-1==this._ziZhuanAngly.w&&(b*=2*Math.random()-1),c.push(a,b),c.push(a,b),c.push(a,b),c.push(a,b),d++;this.objBallData.baseRotation=c},b.prototype.initBaseColor=function(){for(var a=ColorTransition.getInstance().getImageData(this._textureRandomColorInfo),b=a.data,c=new Array,d=0;d<this._totalNum;d++){var e=4*float2int(128*Math.random()),f=new Vector3D(b[e],b[e+1],b[e+2],b[e+3]);f.scaleBy(1/255),c.push(f.x,f.y,f.z,f.w),c.push(f.x,f.y,f.z,f.w),c.push(f.x,f.y,f.z,f.w),c.push(f.x,f.y,f.z,f.w)}this.objBallData.randomColor=c},b.prototype.pushToGpu=function(){this.compressVertex()},b.prototype.compressVertex=function(){var a=this.objBallData.vertices.length/3,b=13;this._needSelfRotation&&(b+=2),this._needRandomColor&&(this.objBallData.randomOffset=4*b,b+=4),this.objBallData.stride=4*b;for(var c=new Array,d=0;a>d;d++){for(var e=0;3>e;e++)c.push(this.objBallData.vertices[3*d+e]);for(var e=0;3>e;e++)c.push(this.objBallData.uvs[3*d+e]);for(var e=0;4>e;e++)c.push(this.objBallData.basePos[4*d+e]);for(var e=0;3>e;e++)c.push(this.objBallData.beMove[3*d+e]);if(this._needSelfRotation)for(var e=0;2>e;e++)c.push(this.objBallData.baseRotation[2*d+e]);if(this._needRandomColor)for(var e=0;4>e;e++)c.push(this.objBallData.randomColor[4*d+e])}this.objBallData.vertexBuffer=Scene_data.context3D.uploadBuff3D(c),this.objBallData.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(this.objBallData.indexs),this.objBallData.treNum=this.objBallData.indexs.length},b.prototype.setFloat32Vec=function(a,b){var c=Display3DBallShader.shader_vec4[a],d=16*c[0]+4*c[1];this.vcmatData.set(b,d)},b.prototype.setFloat32Mat=function(a,b){var c=16*Display3DBallShader.shader_mat4[a];this.vcmatData.set(b,c)},b.prototype.initVcData=function(){this.vcmatData=new Float32Array(16*Display3DBallShader.getVcSize()),this.setFloat32Vec("time",this._timeVec),this._needAddSpeed&&this.setFloat32Vec("force",this._addSpeedVec),this._needScale&&(this.setFloat32Vec("scale",this._scaleVec),this.setFloat32Vec("scaleCtrl",this._scaleCtrlVec)),1==this._uvType?this.setFloat32Vec("animCtrl",this._animCtrlVec):2==this._uvType&&this.setFloat32Vec("uvCtrl",this._uvCtrlVec)},b.prototype.regShader=function(){if(this.materialParam){var a=this.getShaderParam();this.materialParam.shader=ProgrmaManager.getInstance().getMaterialProgram(Display3DBallShader.Display3D_Ball_Shader,Display3DBallShader,this.materialParam.material,a),
this.materialParam.program=this.materialParam.shader.program}},b.prototype.getShaderParam=function(){1!=this._animRow||1!=this._animLine?(this._uvType=1,this._animCtrlVec=[this._animLine,this._animRow,this._animInterval]):0!=this._uSpeed||0!=this._vSpeed?(this._uvType=2,this._uvCtrlVec=[this._uSpeed,this._vSpeed]):this._uvType=0;var a=this.materialParam.material.hasParticleColor;this._needRandomColor=this.materialParam.material.hasVertexColor,this.uploadGpu();var b,c;c=a?1:0;var d=this._needRandomColor?1:0,e=this._is3Dlizi?1:0,f=this._needSelfRotation?1:0,g=this._needScale?1:0,h=this._needAddSpeed?1:0;return b=[c,d,e,f,g,h,this._uvType]},b}(ParticleData),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ParticleBallGpuData=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.destory=function(){a.prototype.destory.call(this),this.basePos&&(this.basePos.length=0,this.basePos=null,this.basePosBuffer&&(Scene_data.context3D.deleteBuffer(this.basePosBuffer),this.basePosBuffer=null)),this.beMove&&(this.beMove.length=0,this.beMove=null,this.beMoveBuffer&&(Scene_data.context3D.deleteBuffer(this.beMoveBuffer),this.beMoveBuffer=null)),this.randomColor&&(this.randomColor.length=0,this.randomColor=null,this.randomColorBuffer&&(Scene_data.context3D.deleteBuffer(this.randomColorBuffer),this.randomColorBuffer=null)),this.baseRotation&&(this.baseRotation.length=0,this.baseRotation=null,this.baseRotationBuffer&&(Scene_data.context3D.deleteBuffer(this.baseRotationBuffer),this.baseRotationBuffer=null))},b}(ParticleGpuData),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3DLocusPartilce=function(a){function b(){a.call(this)}return __extends(b,a),Object.defineProperty(b.prototype,"locusdata",{get:function(){return this.data},enumerable:!0,configurable:!0}),b.prototype.creatData=function(){this.data=new ParticleLocusData},b.prototype.setVa=function(){var a=Scene_data.context3D.pushVa(this.data.objData.vertexBuffer);a||(Scene_data.context3D.setVaOffset(0,3,this.data.objData.stride,0),Scene_data.context3D.setVaOffset(1,2,this.data.objData.stride,28),this.data._watchEye&&Scene_data.context3D.setVaOffset(2,4,this.data.objData.stride,12)),this.setMaterialTexture(),Scene_data.context3D.drawCall(this.data.objData.indexBuffer,this.data.objData.treNum)},b.prototype.setVc=function(){this.updateUV(),this.data.vcmatData.set(Scene_data.viewMatrx3D.m,0),this.data.vcmatData.set(Scene_data.cam3D.cameraMatrix.m,16),this.data.vcmatData.set(this.modelMatrix.m,32),this.data.vcmatData.set(this.locusdata._resultUvVec,48),this.data._watchEye&&(this.locusdata._caramPosVec[0]=Scene_data.cam3D.x,this.locusdata._caramPosVec[1]=Scene_data.cam3D.y,this.locusdata._caramPosVec[2]=Scene_data.cam3D.z,this.data.vcmatData.set(this.locusdata._caramPosVec,52)),this.locusdata._changUv&&this.data.setFloat32Vec("isUv",this.locusdata._uvVec),Scene_data.context3D.setVcMatrix4fv(this.data.materialParam.shader,"vcmat",this.data.vcmatData),this.setMaterialVc()},b.prototype.updateUV=function(){var a=this._time/Scene_data.frameTime,b=this.data._life/100,c=this.locusdata._speed*a/this.locusdata._density/10;this.locusdata._isEnd&&(c=Math.min(1,c)),this.locusdata._isLoop&&(c%=this.locusdata._life?b+1:1),this.locusdata._resultUvVec[0]=c},b}(Display3DParticle),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3DLocusShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Position"),a.bindAttribLocation(this.program,1,"v2TexCoord"),this.paramAry[0]&&a.bindAttribLocation(this.program,2,"v3Normal")},b.prototype.getMat4Str=function(a){return"vcmat["+b.shader_mat4[a]+"]"},b.prototype.getVec4Str=function(a){return"vcmat["+b.shader_vec4[a][0]+"]["+b.shader_vec4[a][1]+"]"},b.getVcSize=function(){return 4},b.prototype.getVertexShaderString=function(){var a="attribute vec4 v3Position;\nattribute vec2 v2TexCoord;\nuniform mat4 vcmat["+Display3DFacetShader.getVcSize()+"];\nvarying vec2 v0;\nvarying vec4 v2;\n",b="attribute vec4 v3Normal;\n",c="",d="varying vec2 v1;\n",e="   vec2 tempv0 = v2TexCoord;\n   tempv0.x -= "+this.getVec4Str("uvMove")+".x;\n",f="   v1 = v2TexCoord;\n",g="   v0 = tempv0;\n",h="   tempv0.xy *= "+this.getVec4Str("isUv")+".xy;\n   if("+this.getVec4Str("isUv")+".z >= 0.0){\n   vec2 tempv1 = tempv0;\n   tempv0.y = tempv1.x;\n   tempv0.x = tempv1.y;}\n   v0 = tempv0;\n",i="   float alpha = tempv0.x/"+this.getVec4Str("uvMove")+".y;\n   alpha = 1.0 - clamp(abs(alpha),0.0,1.0);\n   float kill = -tempv0.x;\n   kill *= tempv0.x - "+this.getVec4Str("uvMove")+".z;\n   v2 = vec4(kill,0.0,0.0,alpha);\n",j="   gl_Position = "+this.getMat4Str("viewMatrix3D")+"  * "+this.getMat4Str("camMatrix3D")+" * "+this.getMat4Str("posMatrix3D")+" * v3Position;\n",k="   vec4 tempPos = "+this.getMat4Str("posMatrix3D")+" * v3Position;\n   vec3 mulPos = vec3(tempPos.x,tempPos.y,tempPos.z);\n   vec3 normals = vec3(v3Normal.x,v3Normal.y,v3Normal.z);\n   mulPos = normalize(vec3("+this.getVec4Str("camPos")+".xyz) - mulPos);\n   mulPos = cross(mulPos, normals);\n   mulPos = normalize(mulPos);\n   mulPos *= v3Normal.w;\n   tempPos.xyz = mulPos.xyz + v3Position.xyz;\n   gl_Position = "+this.getMat4Str("viewMatrix3D")+"  * "+this.getMat4Str("camMatrix3D")+" * "+this.getMat4Str("posMatrix3D")+" * tempPos;\n",l=this.paramAry[0],m=this.paramAry[1],n=this.paramAry[2],o=a;l&&(o+=b),m&&(o+=c),n&&(o+=d);var p=e+i;n&&(p+=f),p+=m?h:g,p+=l?k:j;var q=o+"void main(void){\n"+p+"}";return q},b.prototype.getFragmentShaderString=function(){var a=" precision mediump float;\nuniform sampler2D tex;\nvarying vec2 v0;\nvoid main(void)\n{\nvec4 infoUv = texture2D(tex, v0.xy);\ngl_FragColor = infoUv;\n}";return a},b.Display3D_Locus_Shader="Display3DLocusShader",b.shader_mat4={viewMatrix3D:0,camMatrix3D:1,posMatrix3D:2},b.shader_vec4={uvMove:[3,0],camPos:[3,1],isUv:[3,2]},b}(Shader3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ParticleLocusData=function(a){function b(){a.apply(this,arguments),this._speed=1,this._isLoop=!1}return __extends(b,a),b.prototype.getParticle=function(){return new Display3DLocusPartilce},b.prototype.setAllByteInfo=function(b){this._isLoop=b.readBoolean(),this._speed=b.readFloat(),this._density=b.readFloat(),this._isEnd=b.readBoolean(),this.objData=new ObjData;var c=b.getInt(),d=9,e=c*d*4,f=new ArrayBuffer(e),g=new DataView(f);BaseRes.readBytes2ArrayBuffer(b,g,3,0,d,4),BaseRes.readBytes2ArrayBuffer(b,g,4,3,d,4),BaseRes.readBytes2ArrayBuffer(b,g,2,7,d,4);for(var h=b.readInt(),i=0;h>i;i++)this.objData.indexs.push(b.readInt());this.objData.stride=4*d,a.prototype.setAllByteInfo.call(this,b),this.initUV(),this._watchEye&&(this._caramPosVec=[0,0,0]),this._uvVec=[this._isU?-1:1,this._isV?-1:1,this._isUV?1:-1],this.initVcData(),this.objData.vertexBuffer=Scene_data.context3D.uploadBuff3DArrayBuffer(f),this.objData.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(this.objData.indexs),this.objData.treNum=this.objData.indexs.length},b.prototype.initUV=function(){this._resultUvVec=new Array(3);var a=0,b=this._life/100,c=this._speed*a/this._density/10;this._isEnd&&(c=Math.min(1,c));var d;this._isLoop?this._life?(c%=b+1,d=new Vector3D(c,b,-b)):(c%=1,d=new Vector3D(c+1,99,-2)):d=this._life?new Vector3D(c,b,-1):new Vector3D(c,99,-1),this._resultUvVec[0]=d.x,this._resultUvVec[1]=d.y,this._resultUvVec[2]=d.z},b.prototype.uploadGpu=function(){this.objData.vertexBuffer=Scene_data.context3D.uploadBuff3D(this.objData.vertices),this.objData.uvBuffer=Scene_data.context3D.uploadBuff3D(this.objData.uvs),this._watchEye&&(this.objData.normalsBuffer=Scene_data.context3D.uploadBuff3D(this.objData.normals)),this.objData.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(this.objData.indexs),this.objData.treNum=this.objData.indexs.length},b.prototype.regShader=function(){if(this.materialParam){var a=this._watchEye?1:0,b=0,c=this.materialParam.material.hasParticleColor;this._isU||this._isV||this._isUV?(b=1,this._changUv=!0):this._changUv=!1;var d;d=[a,b,c?1:0],this.materialParam.shader=ProgrmaManager.getInstance().getMaterialProgram(Display3DLocusShader.Display3D_Locus_Shader,Display3DLocusShader,this.materialParam.material,d),this.materialParam.program=this.materialParam.shader.program}},b.prototype.initVcData=function(){this.vcmatData=new Float32Array(16*Display3DLocusShader.getVcSize())},b.prototype.setFloat32Vec=function(a,b){var c=Display3DLocusShader.shader_vec4[a],d=16*c[0]+4*c[1];this.vcmatData.set(b,d)},b.prototype.setFloat32Mat=function(a,b){var c=16*Display3DLocusShader.shader_mat4[a];this.vcmatData.set(b,c)},b}(ParticleData),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3DLocusBallPartilce=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.creatData=function(){this.data=new ParticleLocusballData},b}(Display3DBallPartilce),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ParticleLocusballData=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.getParticle=function(){return new Display3DLocusBallPartilce},b.prototype.initBasePos=function(){for(var a=new Array,b=0;b<this._totalNum;b++){var c,d=3*b;if(this._isRandom){var e=new Vector3D(this._round.x*this._round.w,this._round.y*this._round.w,this._round.z*this._round.w);c=new Vector3D(this._posAry[d]+Math.random()*e.x,this._posAry[d+1]+Math.random()*e.y,this._posAry[d+2]+Math.random()*e.z)}else c=new Vector3D(this._posAry[d],this._posAry[d+1],this._posAry[d+2]);c=c.add(this._basePositon);for(var f=0;4>f;f++)a.push(c.x,c.y,c.z,b*this._shootSpeed)}this.objBallData.basePos=a},b.prototype.initSpeed=function(){for(var a=new Array,b=0;b<this._totalNum;b++){var c=new Vector3D;if(0==this._tangentSpeed)c.addByNum(this._angleAry[3*b],this._angleAry[3*b+1],this._angleAry[3*b+2]);else if(2==this._tangentSpeed)c.setTo(2*Math.random()-1,2*Math.random()-1,2*Math.random()-1);else{var d=new Vector3D(this._tangentAry[3*b],this._tangentAry[3*b+1],this._tangentAry[3*b+2]);d.scaleBy(this._tangentSpeed),c=c.add(d)}c.normalize(),this._isSendRandom?c.scaleBy(this._speed*Math.random()):c.scaleBy(this._speed);for(var e=0;4>e;e++)a.push(c.x,c.y,c.z)}this.objBallData.beMove=a},b.prototype.setAllByteInfo=function(b){this._tangentSpeed=b.readFloat(),this._posAry=JSON.parse(b.readUTF()),this._angleAry=JSON.parse(b.readUTF()),this._tangentAry=JSON.parse(b.readUTF()),a.prototype.setAllByteInfo.call(this,b),this.uploadGpu()},b}(ParticleBallData),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3DModelPartilce=function(a){function b(){a.call(this),this._resultUvVec=new Array(2)}return __extends(b,a),Object.defineProperty(b.prototype,"modeldata",{get:function(){return this.data},enumerable:!0,configurable:!0}),b.prototype.creatData=function(){this.data=new ParticleModelData},b.prototype.setVc=function(){this.updateWatchCaramMatrix(),this.updateUV(),this.data.vcmatData.set(Scene_data.viewMatrx3D.m,0),this.data.vcmatData.set(Scene_data.cam3D.cameraMatrix.m,16),this.data.vcmatData.set(this.modelMatrix.m,48),this.data.vcmatData.set(this._rotationMatrix.m,32),this.data.vcmatData.set(this._resultUvVec,64),Scene_data.context3D.setVcMatrix4fv(this.data.materialParam.shader,"vcmat",this.data.vcmatData),this.setMaterialVc()},b.prototype.setVa=function(){var a=Scene_data.context3D.pushVa(this.data.objData.vertexBuffer);a||(Scene_data.context3D.setVaOffset(0,3,this.data.objData.stride,0),Scene_data.context3D.setVaOffset(1,2,this.data.objData.stride,12)),this.setMaterialTexture(),Scene_data.context3D.drawCall(this.data.objData.indexBuffer,this.data.objData.treNum)},b.prototype.updateWatchCaramMatrix=function(){this._rotationMatrix.identity(),this.data._watchEye&&(this.timeline.inverAxisRotation(this._rotationMatrix),this._rotationMatrix.prependRotation(-Scene_data.cam3D.rotationY,Vector3D.Y_AXIS),this._rotationMatrix.prependRotation(-Scene_data.cam3D.rotationX,Vector3D.X_AXIS)),this.data._isZiZhuan&&this.timeline.applySelfRotation(this._rotationMatrix,this.data._ziZhuanAngly)},b.prototype.updateUV=function(){this._resultUvVec[0]=this._time/Scene_data.frameTime*this.data._uSpeed,this._resultUvVec[1]=this._time/Scene_data.frameTime*this.data._vSpeed},b}(Display3DParticle),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3DModelObjParticle=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.update=function(){this._depthMode&&Scene_data.context3D.setDepthTest(!0),a.prototype.update.call(this),this._depthMode&&Scene_data.context3D.setDepthTest(!1)},b}(Display3DModelPartilce),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3dModelAnimParticle=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.updateUV=function(){var a=this._time/Scene_data.frameTime;a=a>this.modeldata._maxAnimTime?this.modeldata._maxAnimTime:a,a=a/this.data._animInterval%(this.data._animLine*this.data._animRow),this._resultUvVec[0]=float2int(a%this.data._animLine)/this.data._animLine+this._time/Scene_data.frameTime*this.data._uSpeed,this._resultUvVec[1]=float2int(a/this.data._animLine)/this.data._animRow+this._time/Scene_data.frameTime*this.data._vSpeed},b}(Display3DModelPartilce),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ParticleModelData=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.getParticle=function(){return new Display3DModelPartilce},b.prototype.setAllByteInfo=function(b){this.objData=new ObjData,this._maxAnimTime=b.readFloat();var c=b.getInt(),d=5,e=c*d*4,f=new ArrayBuffer(e),g=new DataView(f);BaseRes.readBytes2ArrayBuffer(b,g,3,0,d,4),BaseRes.readBytes2ArrayBuffer(b,g,2,3,d,4);for(var h=b.readInt(),i=0;h>i;i++)this.objData.indexs.push(b.readInt());this.objData.stride=4*d,a.prototype.setAllByteInfo.call(this,b),this.initVcData(),this.objData.vertexBuffer=Scene_data.context3D.uploadBuff3DArrayBuffer(f),this.objData.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(this.objData.indexs),this.objData.treNum=this.objData.indexs.length},b.prototype.initVcData=function(){this.vcmatData=new Float32Array(16*Display3DFacetShader.getVcSize())},b.prototype.uploadGpu=function(){this.objData.vertexBuffer=Scene_data.context3D.uploadBuff3D(this.objData.vertices),this.objData.uvBuffer=Scene_data.context3D.uploadBuff3D(this.objData.uvs),this.objData.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(this.objData.indexs),this.objData.treNum=this.objData.indexs.length},b.prototype.regShader=function(){this.materialParam.shader=ProgrmaManager.getInstance().getMaterialProgram(Display3DFacetShader.Display3D_Facet_Shader,Display3DFacetShader,this.materialParam.material),this.materialParam.program=this.materialParam.shader.program},b.prototype.setFloat32Vec=function(a,b){var c=Display3DFacetShader.shader_vec4[a],d=16*c[0]+4*c[1];this.vcmatData.set(b,d)},b.prototype.setFloat32Mat=function(a,b){var c=16*Display3DFacetShader.shader_mat4[a];this.vcmatData.set(b,c)},b}(ParticleData),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3DFollowPartilce=function(a){function b(){a.call(this),this.flag=0}return __extends(b,a),Object.defineProperty(b.prototype,"followdata",{get:function(){return this.data},enumerable:!0,configurable:!0}),b.prototype.creatData=function(){this.data=new ParticleFollowData},b.prototype.onCreated=function(){this.initBingMatrixAry()},b.prototype.setVc=function(){a.prototype.setVc.call(this),this.updateBind(),Scene_data.context3D.setVc3fv(this.data.materialParam.shader,"bindpos",this._bindMatrixAry)},b.prototype.initBingMatrixAry=function(){this._bindMatrixAry=new Float32Array(120),this._bindFlagAry=new Array;for(var a=0;a<this.followdata._totalNum;a++)this._bindFlagAry.push(0)},b.prototype.updateBind=function(){for(var a=this._time/Scene_data.frameTime,b=this.flag;b<this.followdata._totalNum;b++){var c=(a-b*this.followdata._shootSpeed)/this.followdata._life;if(c>=this._bindFlagAry[b]){var d=3*b;this._bindMatrixAry[d]=this.bindVecter3d.x,this._bindMatrixAry[d+1]=this.bindVecter3d.y,this._bindMatrixAry[d+2]=this.bindVecter3d.z,this._bindFlagAry[b]++}}},b.prototype.updateMatrix=function(){this.bindMatrix&&(this.modelMatrix.identity(),this.groupMatrix.isIdentity||this.posMatrix.append(this.groupMatrix),this.modelMatrix.append(this.posMatrix))},b.prototype.updateAllRotationMatrix=function(){this.followdata._allRotationMatrix.identity(),this.followdata._allRotationMatrix.prependScale(this.followdata.overAllScale*this._scaleX*.1*this.bindScale.x,this.followdata.overAllScale*this._scaleY*.1*this.bindScale.y,this.followdata.overAllScale*this._scaleZ*.1*this.bindScale.z),this.isInGroup&&(this.followdata._allRotationMatrix.appendRotation(this.groupRotation.x,Vector3D.X_AXIS),this.followdata._allRotationMatrix.appendRotation(this.groupRotation.y,Vector3D.Y_AXIS),this.followdata._allRotationMatrix.appendRotation(this.groupRotation.z,Vector3D.Z_AXIS))},b.prototype.reset=function(){a.prototype.reset.call(this);for(var b=0;b<this.followdata._totalNum;b++)this._bindMatrixAry[3*b]=0,this._bindMatrixAry[3*b+1]=0,this._bindMatrixAry[3*b+2]=0,this._bindFlagAry[b]=0},b.prototype.updateWatchCaramMatrix=function(){this._rotationMatrix.identity(),this.followdata.facez?this._rotationMatrix.prependRotation(90,Vector3D.X_AXIS):this.followdata._watchEye&&(this._rotationMatrix.prependRotation(-Scene_data.cam3D.rotationY,Vector3D.Y_AXIS),this._rotationMatrix.prependRotation(-Scene_data.cam3D.rotationX,Vector3D.X_AXIS))},b}(Display3DBallPartilce),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3DFollowShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"vPosition"),a.bindAttribLocation(this.program,1,"texcoord"),a.bindAttribLocation(this.program,2,"basePos"),a.bindAttribLocation(this.program,3,"speed");var b=this.paramAry[3];b&&a.bindAttribLocation(this.program,4,"rotation");var c=this.paramAry[1];c&&a.bindAttribLocation(this.program,5,"color")},b.prototype.getMat4Str=function(a){return"vcmat["+Display3DBallShader.shader_mat4[a]+"]"},b.prototype.getVec4Str=function(a){return"vcmat["+Display3DBallShader.shader_vec4[a][0]+"]["+Display3DBallShader.shader_vec4[a][1]+"]"},b.getVcSize=function(){return 7},b.prototype.getVertexShaderString=function(){var a,b,c,d,e,f,g,h,i,j,k,l,i,h,m,n,o,p,q,r,s,t,u;m="attribute vec4 vPosition;\nattribute vec3 texcoord;\nattribute vec4 basePos;\nattribute vec3 speed;\nuniform mat4 vcmat["+Display3DBallShader.getVcSize()+"];\nuniform vec3 bindpos[30];\nvarying vec2 v0;\n",t="attribute vec4 color;\nvarying vec4 v2;\n",n="",o="attribute vec2 rotation;\n",p="",q="",r="",s="",u="varying vec2 v1;\n",a="float ctime = "+this.getVec4Str("time")+".x - basePos.w;\nif ("+this.getVec4Str("time")+".w > 0.0 && ctime >= 0.0) {\n    ctime = fract(ctime / "+this.getVec4Str("time")+".z) * "+this.getVec4Str("time")+".z;\n}\nvec4 pos = vPosition;\n",b="float stime = ctime - "+this.getVec4Str("scale")+".w;\nstime = max(stime,0.0);\nfloat sf = "+this.getVec4Str("scale")+".x * stime;\nif ("+this.getVec4Str("scale")+".y != 0.0 && "+this.getVec4Str("scale")+".z != 0.0) {\n    sf += sin("+this.getVec4Str("scale")+".y * stime) * "+this.getVec4Str("scale")+".z;\n}\nif (sf > "+this.getVec4Str("scaleCtrl")+".z) {\n    sf = "+this.getVec4Str("scaleCtrl")+".z;\n} else if (sf < "+this.getVec4Str("scaleCtrl")+".w) {\n    sf = "+this.getVec4Str("scaleCtrl")+".w;\n}\nvec2 sv2 = vec2("+this.getVec4Str("scaleCtrl")+".x * sf, "+this.getVec4Str("scaleCtrl")+".y * sf);\nsv2 = sv2 + 1.0;\npos.x *= sv2.x;\npos.y *= sv2.y;\n",c="float angle = rotation.x + rotation.y * ctime;\nvec4 np = vec4(sin(angle), cos(angle), 0, 0);\nnp.z = np.x * pos.y + np.y * pos.x;\nnp.w = np.y * pos.y - np.x * pos.x;\npos.xy = np.zw;\n",d="vec3 addPos = speed * ctime;\nvec3 uspeed = vec3(0,0,0);\nif (ctime < 0.0 || ctime >= "+this.getVec4Str("time")+".z) {\n    addPos.y = addPos.y + 100000.0;\n}\n",e="if("+this.getVec4Str("time")+".y != 0.0 && length(speed) != 0.0) {\n    uspeed = vec3(speed.x, speed.y, speed.z);\n    uspeed = normalize(uspeed);\n    uspeed = uspeed * "+this.getVec4Str("time")+".y;\n    uspeed.xyz = uspeed.xyz + "+this.getVec4Str("force")+".xyz;\n} else {\n    uspeed = vec3("+this.getVec4Str("force")+".x, "+this.getVec4Str("force")+".y, "+this.getVec4Str("force")+".z);\n}\naddPos.xyz = addPos.xyz + uspeed.xyz * ctime * ctime;\n",f="uspeed = speed + uspeed * ctime * 2.0;\nuspeed = normalize(uspeed);\nvec4 tempMul = "+this.getMat4Str("rotationMatrix")+" * vec4(uspeed,1.0);\nuspeed.xyz = tempMul.xyz;\nuspeed = normalize(uspeed);\nvec3 cPos = addPos;\ntempMul = "+this.getMat4Str("rotationMatrix")+" * vec4(cPos,1.0);\ncPos.xyz = tempMul.xyz; \ncPos.xyz = "+this.getVec4Str("worldPos")+".xyz + cPos.xyz;\ncPos.xyz = "+this.getVec4Str("camPos")+".xyz - cPos.xyz;\ncPos = normalize(cPos);\ncPos = cross(uspeed, cPos);\ncPos = normalize(cPos);\nuspeed = uspeed * pos.x;\ncPos = cPos * pos.y;\npos.xyz = uspeed.xyz + cPos.xyz;\n",g="pos = "+this.getMat4Str("watheye")+" * pos;\npos.xyz = pos.xyz + basePos.xyz + addPos.xyz;\npos = "+this.getMat4Str("modelMatrix")+" * pos;\npos.xyz = pos.xyz + bindpos[int(texcoord.z)].xyz;\ngl_Position = "+this.getMat4Str("viewMatrix3D")+" * "+this.getMat4Str("camMatrix3D")+" * pos;\n",j="v0 = vec2(texcoord.x,texcoord.y);\n",k="vec2 uv = vec2(texcoord.x,texcoord.y);\nfloat animframe = floor(ctime / "+this.getVec4Str("animCtrl")+".z);\nanimframe = animframe / "+this.getVec4Str("animCtrl")+".x;\nuv.x += animframe;\nanimframe = floor(animframe);\nuv.y += animframe / "+this.getVec4Str("animCtrl")+".y;\nv0.xy = uv.xy;\n",l="vec2 uv = vec2("+this.getVec4Str("uvCtrl")+".x,"+this.getVec4Str("uvCtrl")+".y);\nuv.xy = uv.xy * ctime + texcoord.xy;\nv0.xy = uv.xy;\n",i="v2 = color;\n",h="v1 = vec2(ctime/"+this.getVec4Str("time")+".z,1.0);\n";var v=this.paramAry[0],w=this.paramAry[1],x=this.paramAry[2],y=this.paramAry[3],z=this.paramAry[4],A=this.paramAry[5],B=this.paramAry[6],C="",D="";C+=a,D+=m,z&&(C+=b,D+=n),y&&(C+=c,D+=o),C+=d,A&&(C+=e,D+=p),x&&(C+=f,D+=q),C+=g,1==B?(C+=k,D+=r):2==B?(C+=l,D+=s):C+=j,w&&(C+=i,D+=t),v&&(C+=h,D+=u);var E=D+"void main(){\n"+C+"}";return E},b.prototype.getFragmentShaderString=function(){var a=" precision mediump float;\nuniform sampler2D tex;\nvarying vec2 v0;\nvoid main(void)\n{\nvec4 infoUv = texture2D(tex, v0.xy);\ngl_FragColor = infoUv;\n}";return a},b.Display3D_Follow_Shader="Display3DFollowShader",b.shader_mat4={viewMatrix3D:0,camMatrix3D:1,modelMatrix:2,watheye:3,rotationMatrix:4},b.shader_vec4={time:[5,0],scale:[5,1],scaleCtrl:[5,2],force:[5,3],worldPos:[6,0],camPos:[6,1],animCtrl:[6,2],uvCtrl:[6,3]},b}(Shader3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ParticleFollowData=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.getParticle=function(){return new Display3DFollowPartilce},b.prototype.setAllByteInfo=function(b){a.prototype.setAllByteInfo.call(this,b),this.uploadGpu()},b.prototype.regShader=function(){if(this.materialParam){var a=this.getShaderParam();this.materialParam.shader=ProgrmaManager.getInstance().getMaterialProgram(Display3DFollowShader.Display3D_Follow_Shader,Display3DFollowShader,this.materialParam.material,a),this.materialParam.program=this.materialParam.shader.program}},b}(ParticleBallData),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3DFollowLocusPartilce=function(a){function b(){a.call(this),this.flag=0,this._caramPosVec=[0,0,0]}return __extends(b,a),Object.defineProperty(b.prototype,"followlocusdata",{get:function(){return this.data},enumerable:!0,configurable:!0}),b.prototype.creatData=function(){this.data=new ParticleFollowLocusData},b.prototype.onCreated=function(){this.initBindMatrixAry()},b.prototype.initBindMatrixAry=function(){this._bindPosAry=new Array,this._gpuVc=new Float32Array(6*this.followlocusdata._fenduanshu);for(var a=0;a<=this.followlocusdata._fenduanshu;a++)this._bindPosAry.push([0,0,5*a]),this._bindPosAry.push([0,0,1])},b.prototype.setVa=function(){var a=Scene_data.context3D.pushVa(this.data.objData.vertexBuffer);a||(Scene_data.context3D.setVaOffset(0,3,this.data.objData.stride,0),Scene_data.context3D.setVaOffset(1,2,this.data.objData.stride,12)),this.setMaterialTexture(),Scene_data.context3D.drawCall(this.data.objData.indexBuffer,this.data.objData.treNum)},b.prototype.setVc=function(){this.updateMatrix(),this.updateBind(),this.data.vcmatData.set(Scene_data.viewMatrx3D.m,0),this.data.vcmatData.set(Scene_data.cam3D.cameraMatrix.m,16),this._caramPosVec[0]=Scene_data.cam3D.x,this._caramPosVec[1]=Scene_data.cam3D.y,this._caramPosVec[2]=Scene_data.cam3D.z,this.data.vcmatData.set(this._caramPosVec,32),Scene_data.context3D.setVcMatrix4fv(this.data.materialParam.shader,"vcmat",this.data.vcmatData),this.setBindPosVc(),this.setMaterialVc()},b.prototype.setBindPosVc=function(){for(var a=0;a<this._bindPosAry.length;a++)Scene_data.context3D.setVc3fv(this.data.materialParam.shader,"bindpos["+a+"]",this._bindPosAry[a])},b.prototype.updateMatrix=function(){this.modelMatrix.identity(),this.modelMatrix.prepend(this.posMatrix)},b.prototype.resetPos=function(){for(var a=0;a<this._bindPosAry.length;a+=2)this._bindPosAry[a][0]=this.bindVecter3d.x,this._bindPosAry[a][1]=this.bindVecter3d.y,this._bindPosAry[a][2]=this.bindVecter3d.z;this.flag=TimeUtil.getTimer()},b.prototype.updateBind=function(){var a=TimeUtil.getTimer();if(a-this.flag>=35){var b=this._bindPosAry.pop(),c=this._bindPosAry.pop();c[0]=this.bindVecter3d.x,c[1]=this.bindVecter3d.y,c[2]=this.bindVecter3d.z;var d=this._bindPosAry[0],e=this._bindPosAry[1],f=new Vector3D(c[0]-d[0],c[1]-d[1],c[2]-d[2]);f.normalize(),e[0]=f.x,b[0]=f.x,e[1]=f.y,b[1]=f.y,e[2]=f.z,b[2]=f.z,this._bindPosAry.unshift(b),this._bindPosAry.unshift(c),this.flag=a}},b}(Display3DParticle),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3DFollowLocusShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Position"),a.bindAttribLocation(this.program,1,"v2TexCoord")},b.prototype.getMat4Str=function(a){return"vcmat["+b.shader_mat4[a]+"]"},b.prototype.getVec4Str=function(a){return"vcmat["+b.shader_vec4[a][0]+"]["+b.shader_vec4[a][1]+"]"},b.getVcSize=function(){return 3},b.prototype.getVertexShaderString=function(){var a="attribute vec3 v3Position;\nattribute vec2 v2TexCoord;\nuniform mat4 vcmat["+Display3DFacetShader.getVcSize()+"];\nuniform vec3 bindpos[30];\nvarying vec2 v0;\n",b="   vec3 cpos = bindpos[int(v3Position.x)];\n   vec3 mulPos = normalize(vec3("+this.getVec4Str("camPos")+".xyz) - cpos);\n   vec3 normals = bindpos[int(v3Position.y)];\n   mulPos = cross(mulPos, normals);\n   mulPos = normalize(mulPos);\n   mulPos *= v3Position.z;\n   cpos += mulPos;\n   gl_Position = "+this.getMat4Str("viewMatrix3D")+"  * "+this.getMat4Str("camMatrix3D")+" * vec4(cpos,1.0);\n",c="v0 = v2TexCoord;\n",d=a+"void main(){\n"+b+c+"}";return d},b.prototype.getFragmentShaderString=function(){var a=" precision mediump float;\nuniform sampler2D tex;\nvarying vec2 v0;\nvoid main(void)\n{\nvec4 infoUv = texture2D(tex, v0.xy);\ngl_FragColor = infoUv;\n}";return a},b.Display3D_FollowLocus_Shader="Display3DFollowLocusShader",b.shader_mat4={viewMatrix3D:0,camMatrix3D:1},b.shader_vec4={camPos:[2,0]},b}(Shader3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ParticleFollowLocusData=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.getParticle=function(){return new Display3DFollowLocusPartilce},b.prototype.setAllByteInfo=function(b){this._fenduanshu=b.readFloat(),a.prototype.setAllByteInfo.call(this,b),this.uploadGpu(),this.initVcData()},b.prototype.uploadGpu=function(){this.objData=new ObjData,this.objData.vertices=new Array,this.objData.uvs=new Array,this.objData.indexs=new Array;for(var a=0;a<=this._fenduanshu;a++){var b=new Vector2D(a/this._fenduanshu,0),c=new Vector2D(a/this._fenduanshu,1);b.scaleBy(.9),c.scaleBy(.9),this._isU&&(b.x=-b.x,c.x=-c.x),this._isV&&(b.y=-b.y,c.y=-c.y);var d=2*a;this.objData.vertices.push(d,d+1,-this._originWidthScale*this._width/100),this._isUV?this.objData.vertices.push(b.y,b.x):this.objData.vertices.push(b.x,b.y),this.objData.vertices.push(d,d+1,(1-this._originWidthScale)*this._width/100),this._isUV?this.objData.vertices.push(c.y,c.x):this.objData.vertices.push(c.x,c.y)}for(a=0;a<this._fenduanshu;a++)this.objData.indexs.push(0+2*a,1+2*a,2+2*a,1+2*a,3+2*a,2+2*a);this.pushToGpu()},b.prototype.pushToGpu=function(){this.objData.vertexBuffer=Scene_data.context3D.uploadBuff3D(this.objData.vertices),this.objData.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(this.objData.indexs),this.objData.stride=20,this.objData.treNum=this.objData.indexs.length},b.prototype.initVcData=function(){this.vcmatData=new Float32Array(16*Display3DFollowLocusShader.getVcSize())},b.prototype.regShader=function(){if(this.materialParam){new Display3DFollowLocusShader;this.materialParam.shader=ProgrmaManager.getInstance().getMaterialProgram(Display3DFollowLocusShader.Display3D_FollowLocus_Shader,Display3DFollowLocusShader,this.materialParam.material),this.materialParam.program=this.materialParam.shader.program}},b}(ParticleData),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Display3DBoneShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"pos"),a.bindAttribLocation(this.program,1,"v2uv"),a.bindAttribLocation(this.program,2,"boneWeight"),a.bindAttribLocation(this.program,3,"boneID")},b.prototype.getMat4Str=function(a){
return"vcmat["+b.shader_mat4[a]+"]"},b.getVcSize=function(){return 3},b.prototype.getVertexShaderString=function(){var a="attribute vec3 pos;attribute vec2 v2uv;attribute vec4 boneWeight;attribute vec4 boneID;uniform vec4 boneQ[54];\nuniform vec3 boneD[54];\nuniform mat4 vcmat["+b.getVcSize()+"];\nvarying vec2 v0;\n"+MaterialAnimShader.getMd5M44Str()+"void main(void){v0 = v2uv;\nvec4 vt0 = getQDdata(vec3(pos.x,pos.y,pos.z));\n gl_Position = "+this.getMat4Str("viewMatrix3D")+" * "+this.getMat4Str("camMatrix3D")+" *"+this.getMat4Str("posMatrix3D")+"* vt0;}";return a},b.prototype.getFragmentShaderString=function(){var a="precision mediump float;\nvarying vec2 v0;\nvoid main(void)\n{\ngl_FragColor = vec4(1.0,0.0,1.0,1.0);\n}";return a},b.Display3DBoneShader="Display3DBoneShader",b.shader_mat4={viewMatrix3D:0,camMatrix3D:1,posMatrix3D:2},b}(Shader3D),Display3DBonePartilce=function(a){function b(){a.call(this),this.skipNum=0}return __extends(b,a),Object.defineProperty(b.prototype,"modeldata",{get:function(){return this.data},enumerable:!0,configurable:!0}),b.prototype.creatData=function(){this.data=new ParticleBoneData},b.prototype.update=function(){Scene_data.context3D.setWriteDepth(!0),a.prototype.update.call(this),Scene_data.context3D.setWriteDepth(!1)},b.prototype.setVc=function(){var a=float2int(this._time/Scene_data.frameTime/2);this.data.vcmatData.set(Scene_data.viewMatrx3D.m,0),this.data.vcmatData.set(Scene_data.cam3D.cameraMatrix.m,16),this.data.vcmatData.set(this.modelMatrix.m,32),Scene_data.context3D.setVcMatrix4fv(this.data.materialParam.shader,"vcmat",this.data.vcmatData);var b=this.modeldata.animData.boneQPAry[0],c=b.length,d=a%c,e=b[d];Scene_data.context3D.setVc4fv(this.data.materialParam.shader,"boneQ",e.quat),Scene_data.context3D.setVc3fv(this.data.materialParam.shader,"boneD",e.pos),this.setMaterialVc()},b.prototype.setVa=function(){var a=Scene_data.context3D.pushVa(this.modeldata.meshData.vertexBuffer);a||(Scene_data.context3D.setVaOffset(0,3,this.modeldata.meshData.stride,0),Scene_data.context3D.setVaOffset(1,2,this.modeldata.meshData.stride,12),Scene_data.context3D.setVaOffset(3,4,this.modeldata.meshData.stride,20),Scene_data.context3D.setVaOffset(2,4,this.modeldata.meshData.stride,36)),this.setMaterialTexture(),Scene_data.context3D.drawCall(this.modeldata.meshData.indexBuffer,this.modeldata.meshData.treNum)},b.prototype.resetVa=function(){a.prototype.resetVa.call(this)},b}(Display3DParticle),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ParticleBoneData=function(a){function b(){a.apply(this,arguments),this.objScale=1}return __extends(b,a),b.prototype.getParticle=function(){return new Display3DBonePartilce},b.prototype.destory=function(){a.prototype.destory.call(this),this.meshData.destory(),this.animData=null},b.prototype.setAllByteInfo=function(b){this.meshData=new MeshData,this.animData=new AnimData,this.objScale=b.readFloat();var c=13,d=b.getInt();d*=4*c;var e=new ArrayBuffer(d),f=new DataView(e);BaseRes.readBytes2ArrayBuffer(b,f,3,0,c),BaseRes.readBytes2ArrayBuffer(b,f,2,3,c),BaseRes.readIntForTwoByte(b,this.meshData.indexs),BaseRes.readBytes2ArrayBuffer(b,f,4,5,c,2),BaseRes.readBytes2ArrayBuffer(b,f,4,9,c,3),this.meshData.stride=4*c,this.readFrameQua(b),a.prototype.setAllByteInfo.call(this,b),this.initVcData(),this.meshData.vertexBuffer=Scene_data.context3D.uploadBuff3DArrayBuffer(e),this.meshData.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(this.meshData.indexs),this.meshData.treNum=this.meshData.indexs.length},b.prototype.initVcData=function(){this.vcmatData=new Float32Array(16*Display3DBoneShader.getVcSize())},b.prototype.setFloat32Mat=function(a,b){var c=16*Display3DBoneShader.shader_mat4[a];this.vcmatData.set(b,c)},b.prototype.readFrameQua=function(a){for(var b=a.readFloat(),c=32767,d=a.readInt(),e=new Array,f=0;d>f;f++){var g=a.readInt(),h=new DualQuatFloat32Array;h.quat=new Float32Array(4*g),h.pos=new Float32Array(3*g);for(var i=0;g>i;i++)h.quat[4*i+0]=a.readShort()/c,h.quat[4*i+1]=a.readShort()/c,h.quat[4*i+2]=a.readShort()/c,h.quat[4*i+3]=a.readShort()/c,h.pos[3*i+0]=a.readShort()/c*b,h.pos[3*i+1]=a.readShort()/c*b,h.pos[3*i+2]=a.readShort()/c*b;e.push(h)}this.animData.boneQPAry=new Array,this.animData.boneQPAry.push(e)},b.prototype.uploadGpu=function(){this.uploadMesh(this.meshData)},b.prototype.uploadMesh=function(a){a.vertexBuffer=Scene_data.context3D.uploadBuff3D(a.vertices),a.uvBuffer=Scene_data.context3D.uploadBuff3D(a.uvs),a.boneIdBuffer=Scene_data.context3D.uploadBuff3D(a.boneIDAry),a.boneWeightBuffer=Scene_data.context3D.uploadBuff3D(a.boneWeightAry),a.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(a.indexs),a.treNum=a.indexs.length},b.prototype.regShader=function(){this.materialParam.shader=ProgrmaManager.getInstance().getMaterialProgram(Display3DBoneShader.Display3DBoneShader,Display3DBoneShader,this.materialParam.material),this.materialParam.program=this.materialParam.shader.program},b}(ParticleData),KeyFrame=function(){function a(){}return a}(),TimeLineData=function(){function a(){this.dataAry=new Array}return a.prototype.destory=function(){this.dataAry=null},a.prototype.setByteData=function(a){for(var b=a.readFloat(),c=0;b>c;c++){var d=a.readFloat(),e=this.addKeyFrame(d);e.frameNum=d,e.baseValue=new Array;for(var f=0;10>f;f++)e.baseValue.push(a.readFloat());var g=a.readFloat();if(e.animData=new Array,g>0)for(var h=0;g>h;h++)e.animData.push(this.getByteDataTemp(a))}this.maxFrameNum=this.dataAry[this.dataAry.length-1].frameNum,this.beginTime=this.dataAry[0].frameNum*Scene_data.frameTime},a.prototype.addKeyFrame=function(a){var b=new Object;return b.frameNum=a,this.dataAry.push(b),b},a.prototype.getByteDataTemp=function(a){var b=new Object,c=a.readInt(),d=a.readInt();b.data=new Array,b.dataByte=new Array;for(var e=0;d>e;e++){var f=new Object;if(f.type=a.readInt(),1==f.type){var g=a.readFloat();b.dataByte.push(g)}if(2==f.type){var h=new Vector3D;h.x=a.readFloat(),h.y=a.readFloat(),h.z=a.readFloat(),b.dataByte.push(h)}}return b.type=c,b},a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},TimeLine=function(a){function b(){a.call(this),this._time=0,this.targetFlag=-1,this.beginTime=0,this.isByteData=!1,this.targetFlag=-1,this.visible=!1,this.maxFrameNum=0,this._time=0,this._keyFrameAry=new Array}return __extends(b,a),b.prototype.updateMatrix=function(a,b){this._axisMove&&a.prependTranslation(this._axisMove.axis.x*this._axisMove.num,this._axisMove.axis.y*this._axisMove.num,this._axisMove.axis.z*this._axisMove.num),this._axisRotaion&&a.prependRotation(this._axisRotaion.num,this._axisRotaion.axis),a.prependTranslation(b.data.center.x,b.data.center.y,b.data.center.z),this._scaleChange?a.prependScale(b.data._widthFixed?1:this._scaleChange.num,b.data._heightFixed?1:this._scaleChange.num,b.data._widthFixed?1:this._scaleChange.num):this._scaleNosie?a.prependScale(b.data._widthFixed?1:1+this._scaleNosie.num,b.data._heightFixed?1:1+this._scaleNosie.num,b.data._widthFixed?1:1+this._scaleNosie.num):this._scaleAnim&&a.prependScale(b.data._widthFixed?1:this._scaleAnim.num,b.data._heightFixed?1:this._scaleAnim.num,b.data._widthFixed?1:this._scaleAnim.num),a.prependRotation(b.data.rotationV3d.z,Vector3D.Z_AXIS),a.prependRotation(b.data.rotationV3d.y,Vector3D.Y_AXIS),a.prependRotation(b.data.rotationV3d.x,Vector3D.X_AXIS)},b.prototype.inverAxisRotation=function(a){this._axisRotaion&&a.prependRotation(-this._axisRotaion.num,this._axisRotaion.axis)},b.prototype.applySelfRotation=function(a,b){this._selfRotaion&&a.prependRotation(this._selfRotaion.num,b)},b.prototype.addKeyFrame=function(a){var b=new KeyFrame;return b.frameNum=a,this._keyFrameAry.push(b),b},b.prototype.updateTime=function(a){this._currentKeyFrame&&(this._time=a,this.getTarget(),this._axisRotaion&&this._axisRotaion.update(this._time),this._selfRotaion&&this._selfRotaion.update(this._time),this._axisMove&&this._axisMove.update(this._time),this._scaleChange?this._scaleChange.update(this._time):this._scaleNosie?this._scaleNosie.update(this._time):this._scaleAnim&&this._scaleAnim.update(this._time))},b.prototype.getTarget=function(){for(var a=-1,b=0;b<this._keyFrameAry.length&&this._keyFrameAry[b].frameNum*Scene_data.frameTime<this._time;b++)a=b;a!=this.targetFlag&&(this._currentKeyFrame=this._keyFrameAry[a],this.targetFlag=a,a==this._keyFrameAry.length-1?(this.visible=!1,this._currentKeyFrame=null):(this.visible=!0,this.enterKeyFrame(this._currentKeyFrame.animData,this._currentKeyFrame.frameNum*Scene_data.frameTime,this._currentKeyFrame.baseValue)))},b.prototype.enterKeyFrame=function(a,b,c){if(void 0===b&&(b=0),void 0===c&&(c=null),null!=c){for(var d=0;10>d;d++)if(c[d])switch(d){case 1:this._selfRotaion||(this._selfRotaion=new SelfRotation),this._selfRotaion.num=this._selfRotaion.baseNum=c[d];break;case 2:this._axisRotaion||(this._axisRotaion=new AxisRotaion),this._axisRotaion.num=this._axisRotaion.baseNum=c[d];break;case 6:this._scaleChange||(this._scaleChange=new ScaleChange),this._scaleChange.num=this._scaleChange.baseNum=c[d];break;case 7:this._scaleAnim||(this._scaleAnim=new ScaleAnim),this._scaleAnim.num=this._scaleAnim.baseNum=c[d];break;case 8:this._scaleNosie||(this._scaleNosie=new ScaleNoise),this._scaleNosie.num=this._scaleNosie.baseNum=c[d];break;case 9:this._axisMove||(this._axisMove=new AxisMove),this._axisMove.num=this._axisMove.baseNum=c[d]}this._selfRotaion&&(this._selfRotaion.isDeath=!0),this._axisRotaion&&(this._axisRotaion.isDeath=!0),this._scaleChange&&(this._scaleChange.isDeath=!0),this._scaleAnim&&(this._scaleAnim.isDeath=!0),this._scaleNosie&&(this._scaleNosie.isDeath=!0),this._axisMove&&(this._axisMove.isDeath=!0),a&&this.setBaseTimeByte(a,b,c)}},b.prototype.reset=function(){this._time=0,this._currentKeyFrame=this._keyFrameAry[0],this.visible=!1,this.targetFlag=-1},b.prototype.setAllByteInfo=function(a,b){this.isByteData=!0;for(var c=a.readFloat(),d=0;c>d;d++){var e=a.readFloat(),f=this.addKeyFrame(e);f.frameNum=e,f.baseValue=new Array;for(var g=0;10>g;g++)f.baseValue.push(a.readFloat());var h=a.readFloat();if(f.animData=new Array,h>0)for(var i=0;h>i;i++)f.animData.push(this.getByteDataTemp(a))}this.maxFrameNum=this._keyFrameAry[this._keyFrameAry.length-1].frameNum,this.beginTime=this._keyFrameAry[0].frameNum*Scene_data.frameTime,this._currentKeyFrame=this._keyFrameAry[0]},b.prototype.setAllDataInfo=function(a){this.isByteData=!0;for(var b=a.dataAry.length,c=0;b>c;c++){var d=this.addKeyFrame(a.dataAry[c].frameNum);d.baseValue=a.dataAry[c].baseValue,d.animData=a.dataAry[c].animData}this.maxFrameNum=a.maxFrameNum,this.beginTime=a.beginTime,this._currentKeyFrame=this._keyFrameAry[0]},b.prototype.setBaseTimeByte=function(a,b,c){void 0===b&&(b=0),void 0===c&&(c=null);for(var d=0;d<a.length;d++)1==a[d].type?(this._selfRotaion?this._selfRotaion.reset():this._selfRotaion=new SelfRotation,this._selfRotaion.dataByte(a[d].data,a[d].dataByte),this._selfRotaion.baseTime=b):2==a[d].type?(this._axisRotaion?this._axisRotaion.reset():this._axisRotaion=new AxisRotaion,this._axisRotaion.dataByte(a[d].data,a[d].dataByte),this._axisRotaion.baseTime=b):6==a[d].type?(this._scaleChange?this._scaleChange.reset():this._scaleChange=new ScaleChange,this._scaleChange.dataByte(a[d].data,a[d].dataByte),this._scaleChange.baseTime=b):7==a[d].type?(this._scaleAnim?this._scaleAnim.reset():this._scaleAnim=new ScaleAnim,this._scaleAnim.dataByte(a[d].data,a[d].dataByte),this._scaleAnim.baseTime=b):8==a[d].type?(this._scaleNosie?this._scaleNosie.reset():this._scaleNosie=new ScaleNoise,this._scaleNosie.dataByte(a[d].data,a[d].dataByte),this._scaleNosie.baseTime=b):9==a[d].type&&(this._axisMove?this._axisMove.reset():this._axisMove=new AxisMove,this._axisMove.dataByte(a[d].data,a[d].dataByte),this._axisMove.baseTime=b)},b.prototype.getByteDataTemp=function(a){var b=new Object,c=a.readInt(),d=a.readInt();b.data=new Array,b.dataByte=new Array;for(var e=0;d>e;e++){var f=new Object;if(f.type=a.readInt(),1==f.type){var g=a.readFloat();b.dataByte.push(g)}if(2==f.type){var h=new Vector3D;h.x=a.readFloat(),h.y=a.readFloat(),h.z=a.readFloat(),b.dataByte.push(h)}}return b.type=c,b},b.prototype.getMaxFrame=function(){return this._keyFrameAry[this._keyFrameAry.length-1].frameNum},b.prototype.dispose=function(){},b}(EventDispatcher),BaseAnim=function(){function a(){this.baseNum=0,this.num=0,this.time=0,this.speed=0,this.aSpeed=0,this.beginTime=0,this.lastTime=0,this.baseTime=0}return a.prototype.BaseAnim=function(){},a.prototype.update=function(a){this._isDeath||(this.time=a-this.baseTime,this._isActiva?(this.time=this.time-this.beginTime,this.time>this.lastTime&&(this.time=this.lastTime-this.beginTime,this._isDeath=!0),this.coreCalculate()):this.time>=this.beginTime&&(this.time>=this.lastTime?(this.time=this.lastTime-this.beginTime,this.coreCalculate(),this._isDeath=!0):(this.time=this.time-this.beginTime,this.coreCalculate()),this._isActiva=!0))},a.prototype.coreCalculate=function(){this.num=this.speed*this.time+this.aSpeed*this.time*this.time+this.baseNum},a.prototype.reset=function(){this._isActiva=!1,this._isDeath=!1,this.time=0,this.num=0},a.prototype.depthReset=function(){this._isActiva=!1,this._isDeath=!1,this.time=0,this.baseNum=0,this.num=0},Object.defineProperty(a.prototype,"data",{set:function(a){},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isDeath",{get:function(){return this._isDeath},set:function(a){this._isDeath=a},enumerable:!0,configurable:!0}),a.prototype.getAllNum=function(a){a=Math.min(a,this.lastTime),a-=this.beginTime;var b=this.speed*a+this.aSpeed*a*a;this.baseNum+=b},a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},AxisMove=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),Object.defineProperty(b.prototype,"data",{set:function(a){this.beginTime=Number(a[0].value),-1==Number(a[1].value)?this.lastTime=Scene_data.MAX_NUMBER:this.lastTime=Number(a[1].value);var b=a[2].value.split("|");this.axis=new Vector3D(Number(b[0]),Number(b[1]),Number(b[2])),this.axis.normalize(),this.speed=.1*Number(a[3].value),this.aSpeed=.001*Number(a[4].value)},enumerable:!0,configurable:!0}),b.prototype.dataByte=function(a,b){this.beginTime=b[0],-1==b[1]?this.lastTime=Scene_data.MAX_NUMBER:this.lastTime=b[1],this.axis=b[2],this.axis.normalize(),this.speed=.1*b[3],this.aSpeed=.001*b[4]},b}(BaseAnim),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},AxisRotaion=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),Object.defineProperty(b.prototype,"data",{set:function(a){this.beginTime=Number(a[0].value),-1==Number(a[1].value)?this.lastTime=Scene_data.MAX_NUMBER:this.lastTime=Number(a[1].value);var b=String(a[2].value).split("|");this.axis=new Vector3D(Number(b[0]),Number(b[1]),Number(b[2])),b=String(a[3].value).split("|"),this.axisPos=new Vector3D(100*Number(b[0]),100*Number(b[1]),100*Number(b[2])),this.speed=.1*Number(a[4].value),this.aSpeed=.1*Number(a[5].value)},enumerable:!0,configurable:!0}),b.prototype.dataByte=function(a,b){this.beginTime=Number(b[0]),-1==Number(b[1])?this.lastTime=Scene_data.MAX_NUMBER:this.lastTime=Number(b[1]),this.axis=b[2],this.axisPos=b[3],this.speed=.1*b[4],this.aSpeed=.1*b[5]},b}(BaseAnim),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ScaleAnim=function(a){function b(){a.call(this),this.num=1}return __extends(b,a),b.prototype.update=function(a){this._isDeath||(this.time=a-this.baseTime,this._isActiva?(this.coreCalculate(),this.time>this.lastTime&&(this._isDeath=!0)):this.time>=this.beginTime&&(this._isActiva=!0))},b.prototype.coreCalculate=function(){var a=float2int(this.time/Scene_data.frameTime);a>=this.numAry.length?this.num=this.numAry[this.numAry.length-1]:this.num=this.numAry[a]},b.prototype.reset=function(){a.prototype.reset.call(this),this.num=1},b.prototype.depthReset=function(){a.prototype.depthReset.call(this),this.num=1},Object.defineProperty(b.prototype,"data",{set:function(a){this.numAry=new Array,this.beginTime=Number(a[0].value),-1==Number(a[1].value)?this.lastTime=Scene_data.MAX_NUMBER:this.lastTime=Number(a[1].value),this.beginScale=Number(a[2].value),this.scaleNum=Number(a[3].value),this.scaleAry=new Array;for(var b=0,c=4;c<4+2*this.scaleNum;c+=2){var d=new Object;d.value=Number(a[c].value),d.time=Number(a[c+1].value),b+=d.time,d.beginTime=this.beginTime+b,this.scaleAry.push(d)}var e,f=0,g=1;this.scaleAry.length?(e=(this.scaleAry[this.scaleAry.length-1].beginTime+this.scaleAry[this.scaleAry.length-1].time)/Scene_data.frameTime,g=this.scaleAry[0].beginTime,this._currentTarget=this.scaleAry[0]):e=0;var h=0;for(c=0;e>c;c++){var i=Scene_data.frameTime*c;i>=this._currentTarget.beginTime&&(this.beginScale=this._currentTarget.value,f=this._currentTarget.beginTime,h==this.scaleAry.length-1?this._currentTarget=this.scaleAry[this.scaleAry.length-1]:(h++,this._currentTarget=this.scaleAry[h]),g=this._currentTarget.time);var j=(i-f)/g*(this._currentTarget.value-this.beginScale)+this.beginScale;this.numAry.push(j)}this._currentTarget=this.scaleAry[0]},enumerable:!0,configurable:!0}),b.prototype.dataByte=function(a,b){this.numAry=new Array,this.beginTime=b[0],-1==b[1]?this.lastTime=Scene_data.MAX_NUMBER:this.lastTime=b[1],this.beginScale=b[2],this.scaleNum=b[3],this.scaleAry=new Array;for(var c=0,d=4;d<4+2*this.scaleNum;d+=2){var e=new Object;e.value=b[d],e.time=b[d+1],c+=e.time,e.beginTime=this.beginTime+c,this.scaleAry.push(e)}var f,g=0,h=1;this.scaleAry.length?(f=(this.scaleAry[this.scaleAry.length-1].beginTime+this.scaleAry[this.scaleAry.length-1].time)/Scene_data.frameTime,h=this.scaleAry[0].beginTime,this._currentTarget=this.scaleAry[0]):f=0;var i=0;for(d=0;f>d;d++){var j=Scene_data.frameTime*d;j>=this._currentTarget.beginTime&&(this.beginScale=this._currentTarget.value,g=this._currentTarget.beginTime,i==this.scaleAry.length-1?this._currentTarget=this.scaleAry[this.scaleAry.length-1]:(i++,this._currentTarget=this.scaleAry[i]),h=this._currentTarget.time);var k=(j-g)/h*(this._currentTarget.value-this.beginScale)+this.beginScale;this.numAry.push(k)}this._currentTarget=this.scaleAry[0]},b.prototype.getAllNum=function(a){a=Math.min(a,this.lastTime+this.beginTime);var b=this.scaleAry[this.scaleAry.length-1];if(a>=b.beginTime+b.time)return void(this.baseNum=b.value);for(var c,d=0;d<this.scaleAry.length;d++)a>this.scaleAry[d]["this"].beginTime&&(this._currentTarget=this.scaleAry[d],this.beginTime=this._currentTarget["this"].beginTime,this.beginScale=this._currentTarget.value,c=d);c++,this._currentTarget=this.scaleAry[c],this.baseNum=(this._currentTarget.value-this.beginScale)/this._currentTarget["this"].time*(a-this.beginTime)+this.beginScale},b}(BaseAnim),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ScaleChange=function(a){function b(){a.call(this),this.num=1}return __extends(b,a),b.prototype.coreCalculate=function(){this.num=1+this.speed*this.time+this.baseNum,this.num<this.minNum?this.num=this.minNum:this.num>this.maxNum&&(this.num=this.maxNum)},Object.defineProperty(b.prototype,"data",{set:function(a){this.beginTime=Number(a[0].value),-1==Number(a[1].value)?this.lastTime=Scene_data.MAX_NUMBER:this.lastTime=Number(a[1].value),this.speed=.001*Number(a[2].value),this.minNum=.01*Number(a[3].value),this.maxNum=.01*Number(a[4].value)},enumerable:!0,configurable:!0}),b.prototype.dataByte=function(a,b){this.beginTime=b[0],-1==b[1]?this.lastTime=Scene_data.MAX_NUMBER:this.lastTime=b[1],this.speed=.001*b[2],this.minNum=.01*b[3],this.maxNum=.01*b[4]},b.prototype.getAllNum=function(a){a=Math.min(a,this.lastTime),a-=this.beginTime;var b=this.speed*a;this.baseNum+=b,this.baseNum<this.minNum?this.baseNum=this.minNum:b>this.maxNum&&(this.baseNum=this.maxNum)},b.prototype.reset=function(){this._isActiva=!1,this._isDeath=!1,this.time=0,this.num=1},b.prototype.depthReset=function(){this._isActiva=!1,this._isDeath=!1,this.time=0,this.baseNum=0,this.num=1},b}(BaseAnim),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ScaleNoise=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.coreCalculate=function(){this.num=this.amplitude+this.amplitude*Math.sin(this.speed*this.time)},Object.defineProperty(b.prototype,"data",{set:function(a){this.beginTime=Number(a[0].value),-1==Number(a[1].value)?this.lastTime=Scene_data.MAX_NUMBER:this.lastTime=Number(a[1].value),this.amplitude=Number(a[2].value),this.speed=.01*Number(a[3].value)},enumerable:!0,configurable:!0}),b.prototype.dataByte=function(a,b){this.beginTime=b[0],-1==b[1]?this.lastTime=Scene_data.MAX_NUMBER:this.lastTime=b[1],this.amplitude=b[2],this.speed=.01*b[3]},b.prototype.getAllNum=function(a){this.baseNum=this.amplitude+this.amplitude*Math.sin(this.speed*a)},b}(BaseAnim),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},SelfRotation=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),Object.defineProperty(b.prototype,"data",{set:function(a){this.beginTime=Number(a[0].value),-1==Number(a[1].value)?this.lastTime=Scene_data.MAX_NUMBER:this.lastTime=Number(a[1].value),this.speed=.1*Number(a[2].value),this.aSpeed=.1*Number(a[3].value)},enumerable:!0,configurable:!0}),b.prototype.dataByte=function(a,b){this.beginTime=b[0],-1==b[1]?this.lastTime=Scene_data.MAX_NUMBER:this.lastTime=b[1],this.speed=.1*b[2],this.aSpeed=.1*b[3]},b}(BaseAnim),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},InteractiveEvent=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.Down="down",b.Up="Up",b.Move="Move",b.PinchStart="PinchStart",b.Pinch="Pinch",b}(BaseEvent),TextAlign=function(){function a(){}return a.LEFT="left",a.CENTER="center",a.RIGHT="right",a.TOP="top",a.MIDDLE="middle",a.BOTTOM="bottom",a}(),UIAtlas=function(){function a(){this._hasDispose=!1}return Object.defineProperty(a.prototype,"texture",{get:function(){return this.textureRes?this.textureRes.texture:null},enumerable:!0,configurable:!0}),a.prototype.setInfo=function(a,b,c,d){var e=this;void 0===d&&(d=null),this._useImgUrl=d,LoadManager.getInstance().load(Scene_data.fileRoot+a,LoadManager.XML_TYPE,function(a){var d=JSON.parse(a);e.configData=d.uiArr,e.layoutData=d.panelArr,e.loadImgUrl(b,c)})},a.prototype.loadConfig=function(a,b){var c=this;LoadManager.getInstance().load(Scene_data.fileRoot+a,LoadManager.XML_TYPE,function(a){var d=JSON.parse(a);c.configData=d.uiArr,b()})},a.prototype.loadImgUrl=function(a,b){var c=this;TextureManager.getInstance().getTexture(Scene_data.fileRoot+a,function(a){c.textureRes=a,c._useImgUrl?c.loadUseImg(b):b()},1,null,0)},a.prototype.loadUseImg=function(a){this.useImg=new Image,this.useImg.onload=function(){a()},this.useImg.src=Scene_data.fileRoot+this._useImgUrl},a.prototype.getRec=function(a){for(var b=new UIRectangle,c=0;c<this.configData.length;c++)if(this.configData[c].name==a){b.x=this.configData[c].x,b.y=this.configData[c].y,b.width=this.configData[c].width,b.height=this.configData[c].height,b.pixelWitdh=this.configData[c].ow,b.pixelHeight=this.configData[c].oh,b.pixelX=this.configData[c].ox,b.pixelY=this.configData[c].oy,b.type=this.configData[c].type,b.cellX=this.configData[c].cellX,b.cellY=this.configData[c].cellY;break}return b},a.prototype.getLayoutData=function(a){if(!this.layoutData)return null;for(var b in this.layoutData)for(var c=this.layoutData[b].item,d=0;d<c.length;d++)if(c[d].name==a)return c[d]},a.prototype.getGridRec=function(a){for(var b=new UIGridRentangle,c=0;c<this.configData.length;c++)if(this.configData[c].name==a){b.x=this.configData[c].x,b.y=this.configData[c].y,b.width=this.configData[c].width,b.height=this.configData[c].height,b.pixelWitdh=this.configData[c].ow,b.pixelHeight=this.configData[c].oh,b.pixelX=this.configData[c].ox,b.pixelY=this.configData[c].oy,b.ogw=this.configData[c].uow,b.ogh=this.configData[c].uoh;break}return b},Object.defineProperty(a.prototype,"hasData",{get:function(){return this.configData},enumerable:!0,configurable:!0}),a.prototype.getObject=function(a,b,c,d,e,f,g,h,i){void 0===h&&(h=0),void 0===i&&(i=0);var j=new Object;return j.x=b/f,j.y=c/g,j.width=d/f,j.height=e/g,j.ow=d,j.oh=e,j.ox=b,j.oy=c,j.name=a,j.cellX=h,j.cellY=i,j},a.prototype.updateCtx=function(a,b,c){TextureManager.getInstance().updateTexture(this.texture,b,c,a)},a.prototype.upDataPicToTexture=function(a,b){var c=this;LoadManager.getInstance().load(Scene_data.fileRoot+a,LoadManager.IMG_TYPE,function(a){var d=c.getRec(b);c.ctx=UIManager.getInstance().getContext2D(d.pixelWitdh,d.pixelHeight,!1),c.ctx.drawImage(a,0,0,d.pixelWitdh,d.pixelHeight),TextureManager.getInstance().updateTexture(c.texture,d.pixelX,d.pixelY,c.ctx)})},a.prototype.clearCtxTextureBySkilname=function(a){var b=this.getRec(a);this.ctx=UIManager.getInstance().getContext2D(b.pixelWitdh,b.pixelHeight,!1),this.ctx.clearRect(0,0,b.pixelWitdh,b.pixelHeight),TextureManager.getInstance().updateTexture(this.texture,b.pixelX,b.pixelY,this.ctx)},a.prototype.copyPicToTexture=function(a,b){var c=this.getRec(a),d=this.getRec(b);this.ctx=UIManager.getInstance().getContext2D(d.pixelWitdh,d.pixelHeight,!1),this.ctx.drawImage(this.useImg,c.pixelX,c.pixelY,c.pixelWitdh,c.pixelWitdh,0,0,d.pixelWitdh,d.pixelWitdh),TextureManager.getInstance().updateTexture(this.texture,d.pixelX,d.pixelY,this.ctx)},a.prototype.updateLable=function(a,b,c,d,e,f,g,h){void 0===e&&(e=TextAlign.MIDDLE),void 0===f&&(f=TextAlign.CENTER),void 0===g&&(g=!1),void 0===h&&(h=0);var i=this.getRec(a);this.ctx=this.getTextCtx(i,c,d,g,e,f);var j=this.getTextxpos(f,this.ctx),k=this.getTextypos(e,this.ctx);h>0?this.wrapText(this.ctx,b,j,k,h,c+3):this.ctx.fillText(b,j,k),TextureManager.getInstance().updateTexture(this.texture,i.pixelX,i.pixelY,this.ctx)},a.prototype.updateArtNum=function(a,b,c){var d=String(c),e=this.getRec(a),f=this.getRec(b);this.ctx=UIManager.getInstance().getContext2D(e.pixelWitdh,e.pixelHeight,!1);for(var g=f.pixelWitdh/10,h=0;h<d.length;h++){var i=Number(d.charAt(h));this.ctx.drawImage(this.useImg,f.pixelX+i*g,f.pixelY,g,f.pixelHeight,h*g,0,g,f.pixelHeight)}TextureManager.getInstance().updateTexture(this.texture,e.pixelX,e.pixelY,this.ctx)},a.prototype.writeSingleLabel=function(a,b,c,d,e){void 0===c&&(c=12),void 0===d&&(d=TextAlign.CENTER),void 0===e&&(e="#ffffff"),LabelTextFont.writeSingleLabel(this,a,b,c,d,e)},a.prototype.writeSingleLabelToCxt=function(a,b,c,d,e){void 0===c&&(c=12),void 0===d&&(d=0),void 0===e&&(e=0),a.textBaseline=TextAlign.TOP,a.textAlign=TextAlign.LEFT,a.font="bolder  "+c+"px "+UIData.font,TextRegExp.wrapText(a,b,"#ffffff",d,e,9999,20)},a.prototype.updateLableCtx=function(a,b,c,d,e,f,g,h,i,j){void 0===f&&(f=TextAlign.CENTER),void 0===g&&(g=TextAlign.MIDDLE),void 0===h&&(h="#000000"),void 0===i&&(i="bolder"),void 0===j&&(j=0),a.textAlign=f,a.textBaseline=g,a.fillStyle=h,a.font=i+" "+e+"px "+UIData.font;var k=this.getTextxpos(f,a);j>0?this.wrapText(a,b,c,d,j,e+3):a.fillText(b,c+k,d)},a.prototype.getTextCtx=function(a,b,c,d,e,f){var g=UIManager.getInstance().getContext2D(a.pixelWitdh,a.pixelHeight,!1);return g.textBaseline=e,g.textAlign=f,g.fillStyle=c,g.font=(d?"bolder ":"")+" "+b+"px "+UIData.font,g},a.prototype.getTextxpos=function(a,b){var c=0;return a==TextAlign.LEFT?c=0:a==TextAlign.RIGHT?c=b.canvas.width:a==TextAlign.CENTER&&(c=b.canvas.width/2),c},a.prototype.getTextypos=function(a,b){var c=0;return a==TextAlign.BOTTOM?c=b.canvas.height:a==TextAlign.TOP?c=0:a==TextAlign.MIDDLE&&(c=b.canvas.height/2),c},a.prototype.wrapText=function(a,b,c,d,e,f){for(var g=b,h="",i=0;i<g.length;i++)if("\n"==g[i])a.fillText(h,c,d),h="",d+=f;else{var j=h+g[i]+" ",k=a.measureText(j),l=k.width;l>e?(a.fillText(h,c,d),h=g[i]+"",d+=f):h=j}a.fillText(h,c,d)},a.prototype.dispose=function(){this._hasDispose||(this.textureRes.clearUseNum(),this.configData=null,this.layoutData=null,this.useImg=null,this._hasDispose=!0)},a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},UIRectangle=function(a){function b(){a.apply(this,arguments),this.pixelWitdh=1,this.pixelHeight=1,this.pixelX=0,this.pixelY=0,this.cellX=0,this.cellY=0,this.type=0}return __extends(b,a),b}(Rectangle),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},UIGridRentangle=function(a){function b(){a.apply(this,arguments),this.ogw=0,this.ogh=0}return __extends(b,a),b}(UIRectangle),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},UICompenent=function(a){function b(){a.call(this),this._x=0,this._y=0,this._width=0,this._height=0,this.z=0,this.absoluteX=0,this.absoluteY=0,this.absoluteWidth=0,this.absoluteHeight=0,this.enable=!0,this._left=0,this._right=0,this._center=0,this._xType=-1,this._top=0,this._bottom=0,this._middle=0,this._yType=-1,this.renderX=0,this.renderY=0,this.renderWidth=0,this.renderHeight=0,this.scale=1,this.isVirtual=!1,this.vcId=0,this._uvScale=1,this._rendering=!1,this.isU=!1,this.isV=!1,this.tr=new Rectangle,this.mouseEnable=!0}return __extends(b,a),Object.defineProperty(b.prototype,"rendering",{get:function(){return this._rendering},set:function(a){this._rendering=a},enumerable:!0,configurable:!0}),b.prototype.addStage=function(){this.renderData=[0,0,0,0],this.renderData2=[1,1,0,0],this.applyAbsolutePoint(),this.uiRender.addRenderUI(this)},b.prototype.removeStage=function(){this.uiRender.removeRenderUI(this)},b.prototype.pushVaData=function(a,b,c){return a.vertices.push(0,0,0,1,0,0,1,-1,0,0,-1,0),a.uvs.push(this.isU?1:0,this.isV?1:0,b,this.isU?0:1,this.isV?1:0,b,this.isU?0:1,this.isV?0:1,b,this.isU?1:0,this.isV?0:1,b),a.indexs.push(c,1+c,2+c,c,2+c,3+c),c+4},b.prototype.setVc=function(a,b){Scene_data.context3D.setVc4fv(a,"ui["+b+"]",this.renderData),Scene_data.context3D.setVc4fv(a,"ui2["+b+"]",this.renderData2)},b.prototype.update=function(){},b.prototype.applyRenderSize=function(){this.parent&&(this.renderX=this.absoluteX/Scene_data.stageWidth,this.renderY=this.absoluteY/Scene_data.stageHeight,this.renderWidth=this.absoluteWidth/Scene_data.stageWidth,this.renderHeight=this.absoluteHeight/Scene_data.stageHeight,this.renderData[0]=this.renderX,this.renderData[1]=this.renderY,this.renderData[2]=this.renderWidth*this.scale*this._uvScale,this.renderData[3]=this.renderHeight*this.scale,this.renderData2[0]=this.tr.width*this._uvScale,this.renderData2[1]=this.tr.height,this.renderData2[2]=this.tr.x,this.renderData2[3]=this.tr.y,this.uiRender.makeRenderDataVc(this.vcId))},Object.defineProperty(b.prototype,"uvScale",{get:function(){return this._uvScale},set:function(a){this._uvScale=a,this.applyAbsolutePoint();
},enumerable:!0,configurable:!0}),b.prototype.applyAbsolutePoint=function(){this.parent&&(-1==this._xType?this.absoluteX=this._x*UIData.Scale*this.scale+this.parent.x:0==this._xType?this.absoluteX=this._left*UIData.Scale:1==this._xType?this.absoluteX=Scene_data.stageWidth-this._right*UIData.Scale-this.width*UIData.Scale:2==this._xType&&(this.absoluteX=this._center*UIData.Scale+Scene_data.stageWidth/2-this.width*UIData.Scale/2),-1==this._yType?this.absoluteY=this._y*UIData.Scale*this.scale+this.parent.y:0==this._yType?this.absoluteY=this._top*UIData.Scale:1==this._yType?this.absoluteY=Scene_data.stageHeight-this._bottom*UIData.Scale-this.height*UIData.Scale:2==this._yType&&(this.absoluteY=this._middle*UIData.Scale+Scene_data.stageHeight/2-this.height*UIData.Scale/2),this.absoluteWidth=this.width*UIData.Scale,this.absoluteHeight=this.height*UIData.Scale,this.applyRenderSize())},Object.defineProperty(b.prototype,"x",{get:function(){return this._x},set:function(a){a!=this._x&&(this._x=a,this.applyAbsolutePoint())},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this._y},set:function(a){a!=this._y&&(this._y=a,this.applyAbsolutePoint())},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"width",{get:function(){return this._width},set:function(a){a!=this._width&&(this._width=a,this.applyAbsolutePoint())},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this._height},set:function(a){a!=this._height&&(this._height=a,this.applyAbsolutePoint())},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"left",{set:function(a){this._left=a,this._xType=0,this.applyAbsolutePoint()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"right",{set:function(a){this._right=a,this._xType=1,this.applyAbsolutePoint()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"center",{set:function(a){this._center=a,this._xType=2,this.applyAbsolutePoint()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"top",{set:function(a){this._top=a,this._yType=0,this.applyAbsolutePoint()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"bottom",{set:function(a){this._bottom=a,this._yType=1,this.applyAbsolutePoint()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"middle",{set:function(a){this._middle=a,this._yType=2,this.applyAbsolutePoint()},enumerable:!0,configurable:!0}),b.prototype.testPoint=function(a,b){return a>this.absoluteX&&a<this.absoluteX+this.absoluteWidth&&b>this.absoluteY&&b<this.absoluteY+this.absoluteHeight?!0:!1},b.prototype.setPos=function(a,b){this.x=a,this.y=b},b.prototype.interactiveEvent=function(a){if(!this.enable)return!1;var b=(a.type,this._eventsMap);if(!b)return!1;var c=b[a.type];if(!c)return!1;if(!this.testPoint(a.x,a.y))return!1;var d=c.length;if(0==d)return!1;a.target=this;for(var e=d-1;e>=0;e--){var f=c[e];f.listener.call(f.thisObject,a)}return!0},b.prototype.preShow=function(){this.preParent&&this.preParent.addChild(this)},b.prototype.preHide=function(){this.preParent&&this.preParent.removeChild(this)},b}(EventDispatcher),UIConatiner=function(){function a(){this.interfaceUI=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._left=0,this._right=0,this._center=0,this._xType=0,this._top=0,this._bottom=0,this._middle=0,this._yType=0,this._list=new Array,this.renderList=new Array,this._hasStage=!1,this._hasLoad=!1,this._isLoading=!1,this._needShowLoading=!0}return a.prototype.load=function(a,b){void 0===b&&(b=!0),this._isLoading||(this._completeFun=a,this._needShowLoading=b,this._hasLoad?a():(this._isLoading=!0,this._needShowLoading&&UILoading.getInstance().show(),this.makeBaseWinUi()))},Object.defineProperty(a.prototype,"hasLoad",{get:function(){return this._hasLoad},enumerable:!0,configurable:!0}),a.prototype.makeBaseWinUi=function(){this.applyLoad()},a.prototype.applyLoad=function(){},a.prototype.applyLoadComplete=function(){this._isLoading=!1,this._completeFun(),this._needShowLoading&&UILoading.getInstance().hide(),this._hasLoad=!0},Object.defineProperty(a.prototype,"hasStage",{get:function(){return this._hasStage},set:function(a){this._hasStage=a,a?this.onAdd():this.onRemove()},enumerable:!0,configurable:!0}),a.prototype.setUiListVisibleByItem=function(a,b){try{for(var c=0;c<a.length;c++)b?a[c].parent||this.addChild(a[c]):a[c].parent&&this.removeChild(a[c])}catch(d){console.log("在此处理错误3")}},a.prototype.onAdd=function(){},a.prototype.onRemove=function(){},a.prototype.addChild=function(a){if(!a)throw console.log("ui cuo "),new Error("ui cuo");if(!a.parent)return this._list.push(a),a.parent=this,a.addStage(),a},a.prototype.addVirtualContainer=function(a){this.virtualContainerList||(this.virtualContainerList=new Array),a.parent=this,this.virtualContainerList.push(a)},a.prototype.removeVirtualContainer=function(a){},a.prototype.addUIList=function(a,b){for(var c=new Array,d=0;d<a.length;d++){var e=b.getComponent(a[d]);this.addChild(e),c.push(e)}return c},a.prototype.getUIList=function(a,b){for(var c=new Array,d=0;d<a.length;d++){var e=b.getComponent(a[d]);c.push(e)}return c},a.prototype.addEvntBut=function(a,b){var c=this.addChild(b.getComponent(a));return c.addEventListener(InteractiveEvent.Down,this.butClik,this),c},a.prototype.addEvntButUp=function(a,b){var c=this.addChild(b.getComponent(a));return c.addEventListener(InteractiveEvent.Up,this.butClik,this),c},a.prototype.removeEvntBut=function(a){a.removeEventListener(InteractiveEvent.Down,this.butClik,this),this.removeChild(a)},a.prototype.butClik=function(a){},a.prototype.renderSetVisibel=function(a,b){for(var c=0;c<a.length;c++)b?a[c].rendering||this.addRender(a[c]):a[c].rendering&&this.removeRender(a[c])},a.prototype.removeChild=function(a){var b=this._list.indexOf(a);-1!=b&&(this._list.splice(b,1),a.parent=null,a.removeStage())},a.prototype.removeAll=function(){for(;this._list.length;)this.removeChild(this._list[0]);for(;this._maskList.length;)this.removeMaks(this._maskList[0])},a.prototype.addMask=function(a){this._maskList||(this._maskList=new Array),a.parent=this,a.applyAbsolutePoint(),this._maskList.push(a)},a.prototype.removeMaks=function(a){if(this._maskList){var b=this._maskList.indexOf(a);-1!=b&&this._maskList.splice(b,1)}},a.prototype.addRender=function(a){var b=this.renderList.indexOf(a);-1==b&&(a.container=this,this.renderList.push(a),this.hasStage&&UIManager.getInstance().addUI(a))},a.prototype.addRenderAt=function(a,b){var c=this.renderList.indexOf(a);-1==c&&(a.container=this,this.renderList.splice(b,0,a),this.hasStage&&UIManager.getInstance().addUI(a))},a.prototype.removeRender=function(a){var b=this.renderList.indexOf(a);-1!=b&&(this.renderList.splice(b,1),this.hasStage&&UIManager.getInstance().removeUI(a))},a.prototype.resize=function(){0==this._xType?this._x=this._left*UIData.Scale:1==this._xType?this._x=Scene_data.stageWidth-this._right*UIData.Scale-this.width*UIData.Scale:2==this._xType&&(this._x=this._center*UIData.Scale+Scene_data.stageWidth/2-this.width*UIData.Scale/2),0==this._yType?this._y=this._top*UIData.Scale:1==this._yType?this._y=Scene_data.stageHeight-this._bottom*UIData.Scale-this.height*UIData.Scale:2==this._yType&&(this._y=this._middle*UIData.Scale+Scene_data.stageHeight/2-this.height*UIData.Scale/2),this.applyChild(),this.resizeVirtualList()},a.prototype.resizeVirtualList=function(){if(this.virtualContainerList)for(var a=0;a<this.virtualContainerList.length;a++)this.virtualContainerList[a].resize()},Object.defineProperty(a.prototype,"left",{get:function(){return this._left},set:function(a){this._left=a,this._xType=0,this._x=this._left*UIData.Scale,this.applyChild()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"right",{get:function(){return this._right},set:function(a){this._right=a,this._xType=1,this._x=Scene_data.stageWidth-this._right*UIData.Scale-this.width*UIData.Scale,this.applyChild()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"center",{set:function(a){this._center=a,this._xType=2,this._x=this._center*UIData.Scale+Scene_data.stageWidth/2-this.width*UIData.Scale/2,this.applyChild()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"top",{get:function(){return this._top},set:function(a){this._top=a,this._yType=0,this._y=this._top*UIData.Scale,this.applyChild()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bottom",{get:function(){return this._bottom},set:function(a){this._bottom=a,this._yType=1,this._y=Scene_data.stageHeight-this._bottom*UIData.Scale-this.height*UIData.Scale,this.applyChild()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"middle",{set:function(a){this._middle=a,this._yType=2,this._y=this._middle*UIData.Scale+Scene_data.stageHeight/2-this.height*UIData.Scale/2,this.applyChild()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){if(0!=this._width)return this._width;for(var a=0,b=0;b<this._list.length;b++)a=Math.max(this._list[b].width);return a},set:function(a){this._width=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){if(0!=this._height)return this._height;for(var a=0,b=0;b<this._list.length;b++)a=Math.max(this._list[b].height);return a},set:function(a){this._height=a},enumerable:!0,configurable:!0}),a.prototype.applyChild=function(){for(var a=0;a<this._list.length;a++)this._list[a].applyAbsolutePoint();if(this._maskList)for(var a=0;a<this._maskList.length;a++)this._maskList[a].applyAbsolutePoint()},Object.defineProperty(a.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a},enumerable:!0,configurable:!0}),a.prototype.dispose=function(){console.log("忘了重写disposepanel")},a.prototype.setSizeForPanelUiCopy=function(a,b,c){var d=c.getComponent(b);a.x=d.x,a.y=d.y,a.width=d.width,a.height=d.height},a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},UIVirtualContainer=function(a){function b(){a.apply(this,arguments),this.visible=!0}return __extends(b,a),b}(UIConatiner),UIData=function(){function a(){}return a.setDesignWH=function(a,b){this.designWidth=a,this.designHeight=b,this.resize()},a.resize=function(){this.Scale=Math.min(Scene_data.stageWidth/this.designWidth,Scene_data.stageHeight/this.designHeight)},a.init=function(a,b,c){return void 0===c&&(c=null),this._itemLoad=a,this._bFun=b,this.loadFun=c,this.loadBaseConfigCom(),a.length},Object.defineProperty(a,"mainUIAtlas",{get:function(){return null},enumerable:!0,configurable:!0}),a.loadBaseConfigCom=function(){for(var a=0;a<this._itemLoad.length;a++)this.loadUIdata(this._itemLoad[a].xmlurl,this._itemLoad[a].picurl,this._itemLoad[a].name)},a.loadOkNum=function(a){this.loadFun&&this.loadFun(a)},a.loadUIdata=function(b,c,d){var e=this;void 0===d&&(d="default"),LoadManager.getInstance().load(Scene_data.fileRoot+b,LoadManager.XML_TYPE,function(a){var b=Array(JSON.parse(a))[0];e._dic[d]=b,f.src=Scene_data.fileRoot+c});var f=new Image;this._imgDic[d]=f,f.onload=function(b){e._skipnum++,e.loadOkNum(e._skipnum),e._skipnum>=e._itemLoad.length&&(a.textImg=e._imgDic[a.textlist],e._bFun())}},a.getImgByKey=function(a){return this._imgDic.containsKey(a)?this._imgDic[a]:(console.log("uiData getImgByKey=>"+a),null)},a.getUiByName=function(a,b){if(this._dic.containsKey(a))for(var c=this._dic[a].uiArr,d=0;d<c.length;d++)if(c[d].name==b)return c[d];return console.log("uiData getUiByName =>"+b),null},a.getUiArrByKey=function(a){return this._dic.containsKey(a)?this._dic[a].uiArr:null},a.designWidth=960,a.designHeight=540,a.font="Helvetica",a._skipnum=0,a.textlist="textlist",a.panelList="panelList",a.publicUi="publicUi",a.faceItem=["/大笑","/脸2","/脸3","/脸4","/脸5","/脸6","/脸7","/脸8","/脸9","/脸a","/脸b","/脸c","/脸d","/脸e","/脸f","/脸g","/脸h","/脸i"],a._dic=new Dictionary([]),a._imgDic=new Dictionary([]),a}(),UiDraw=function(){function a(){}return a.clearUI=function(a){var b=a.uiRender.uiAtlas.getRec(a.skinName),c=UIManager.getInstance().getContext2D(b.pixelWitdh,b.pixelHeight,!1);a.uiRender.uiAtlas.updateCtx(c,b.pixelX,b.pixelY)},a.drawTxtLab=function(b,c,d,e,f,g){void 0===f&&(f=0),void 0===g&&(g=3);var h=b.uiRender.uiAtlas.getRec(b.skinName),i=UIManager.getInstance().getContext2D(h.pixelWitdh,h.pixelHeight,!1);a.cxtDrawImg(i,PuiData.TXTBG,new Rectangle(0,0,h.pixelWitdh,h.pixelHeight),UIData.publicUi),LabelTextFont.writeSingleLabelToCtx(i,c,d,f,g,e),b.uiRender.uiAtlas.updateCtx(i,h.pixelX,h.pixelY)},a.drawAttVal=function(b,c,d){var e="";return"undefined"==typeof c?void a.clearUI(b):(e=ColorType.Orange7a2f21+getKeyProById(c)+":  "+ColorType.Orange9a683f+Snum(d),void LabelTextFont.writeSingleLabel(b.uiRender.uiAtlas,b.skinName,e,14,TextAlign.LEFT))},a.drawAttValAdd=function(b,c,d){var e="";return"undefined"==typeof c?void a.clearUI(b):(e=ColorType.Orange7a2f21+getKeyProById(c)+":    "+ColorType.Green2ca937+"+"+Snum(d),void LabelTextFont.writeSingleLabel(b.uiRender.uiAtlas,b.skinName,e,14,TextAlign.LEFT))},a.drawAddValTop=function(b,c){var d="";c>0?d="+"+Snum(c):a.clearUI(b);var e=b.uiRender.uiAtlas.getRec(b.skinName),f=UIManager.getInstance().getContext2D(e.pixelWitdh,e.pixelHeight,!1);""!=d&&a.cxtDrawImg(f,PuiData.ARROW_TOP,new Rectangle(0,3,12,16),UIData.publicUi),LabelTextFont.writeSingleLabelToCtx(f,d,14,15,0,TextAlign.LEFT,ColorType.Green2ca937),b.uiRender.uiAtlas.updateCtx(f,e.pixelX,e.pixelY)},a.drawAddValRight=function(b,c){if(c>0){var d=b.uiRender.uiAtlas.getRec(b.skinName),e=UIManager.getInstance().getContext2D(d.pixelWitdh,d.pixelHeight,!1);a.cxtDrawImg(e,PuiData.ARROW_RIGHT,new Rectangle(0,3,16,12),UIData.publicUi),LabelTextFont.writeSingleLabelToCtx(e,Snum(c),14,0,0,TextAlign.RIGHT,ColorType.Green2ca937),b.uiRender.uiAtlas.updateCtx(e,d.pixelX,d.pixelY)}else a.clearUI(b)},a.drawCost=function(b,c,d,e){var f="";switch(e){case 0:f=PuiData.A_YUANBAO;break;case 1:f=PuiData.A_BANGYUAN;break;case 2:f=PuiData.A_YINBI;break;case 6:f=PuiData.A_BANGGONG;break;case 7:f=PuiData.A_HONOR;break;case 8:f=PuiData.A_DOUHUN}a.cxtDrawImg(b,f,new Rectangle(c,d,25,25),UIData.publicUi)},a.cxtDrawImg=function(a,b,c,d){var e=UIData.getUiByName(d,b);e&&((0==c.width||0==c.height)&&(c.width=e.ow,c.height=e.oh),0==e.type?a.drawImage(UIData.getImgByKey(d),e.ox,e.oy,e.ow,e.oh,c.x,c.y,c.width,c.height):1==e.type?(a.drawImage(UIData.getImgByKey(d),e.ox,e.oy,e.uow,e.uoh,c.x,c.y,e.uow,e.uoh),a.drawImage(UIData.getImgByKey(d),e.ox+e.uow,e.oy,e.ow-2*e.uow,e.uoh,c.x+e.uow,c.y,c.width-2*e.uow,e.uoh),a.drawImage(UIData.getImgByKey(d),e.ox+e.ow-e.uow,e.oy,e.uow,e.uoh,c.x+c.width-e.uow,c.y,e.uow,e.uoh),a.drawImage(UIData.getImgByKey(d),e.ox,e.oy+e.uoh,e.uow,e.oh-2*e.uoh,c.x,c.y+e.uoh,e.uow,c.height-2*e.uoh),a.drawImage(UIData.getImgByKey(d),e.ox+e.uow,e.oy+e.uoh,e.ow-2*e.uow,e.oh-2*e.uoh,c.x+e.uow,c.y+e.uoh,c.width-2*e.uow,c.height-2*e.uoh),a.drawImage(UIData.getImgByKey(d),e.ox+e.ow-e.uow,e.oy+e.uoh,e.uow,e.uoh,c.x+c.width-e.uow,c.y+e.uoh,e.uow,c.height-2*e.uoh),a.drawImage(UIData.getImgByKey(d),e.ox,e.oy+e.oh-e.uoh,e.uow,e.uoh,c.x,c.y+c.height-e.uoh,e.uow,e.uoh),a.drawImage(UIData.getImgByKey(d),e.ox+e.uow,e.oy+e.oh-e.uoh,e.ow-2*e.uow,e.uoh,c.x+e.uow,c.y+c.height-e.uoh,c.width-2*e.uow,e.uoh),a.drawImage(UIData.getImgByKey(d),e.ox+e.ow-e.uow,e.oy+e.oh-e.uoh,e.uow,e.uoh,c.x+c.width-e.uow,c.y+c.height-e.uoh,e.uow,e.uoh)):alert("UiDraw没有绘制成功  "+e.type))},a.uiAtlasDrawImg=function(a,b,c,d){var e=a.getRec(b);a.ctx=UIManager.getInstance().getContext2D(e.pixelWitdh,e.pixelHeight,!1);var f=UIData.getUiByName(c,d);f?(0==f.type?a.ctx.drawImage(UIData.getImgByKey(c),f.ox,f.oy,f.ow,f.oh,0,0,e.pixelWitdh,e.pixelHeight):1==f.type?(a.ctx.drawImage(UIData.getImgByKey(c),f.ox,f.oy,f.uow,f.uoh,0,0,f.uow,f.uoh),a.ctx.drawImage(UIData.getImgByKey(c),f.ox+f.uow,f.oy,f.ow-2*f.uow,f.uoh,f.uow,0,e.pixelWitdh-2*f.uow,f.uoh),a.ctx.drawImage(UIData.getImgByKey(c),f.ox+f.ow-f.uow,f.oy,f.uow,f.uoh,e.pixelWitdh-f.uow,0,f.uow,f.uoh),a.ctx.drawImage(UIData.getImgByKey(c),f.ox,f.oy+f.uoh,f.uow,f.oh-2*f.uoh,0,f.uoh,f.uow,e.pixelHeight-2*f.uoh),a.ctx.drawImage(UIData.getImgByKey(c),f.ox+f.uow,f.oy+f.uoh,f.ow-2*f.uow,f.oh-2*f.uoh,f.uow,f.uoh,e.pixelWitdh-2*f.uow,e.pixelHeight-2*f.uoh),a.ctx.drawImage(UIData.getImgByKey(c),f.ox+f.ow-f.uow,f.oy+f.uoh,f.uow,f.uoh,e.pixelWitdh-f.uow,f.uoh,f.uow,e.pixelHeight-2*f.uoh),a.ctx.drawImage(UIData.getImgByKey(c),f.ox,f.oy+f.oh-f.uoh,f.uow,f.uoh,0,e.pixelHeight-f.uoh,f.uow,f.uoh),a.ctx.drawImage(UIData.getImgByKey(c),f.ox+f.uow,f.oy+f.oh-f.uoh,f.ow-2*f.uow,f.uoh,f.uow,e.pixelHeight-f.uoh,e.pixelWitdh-2*f.uow,f.uoh),a.ctx.drawImage(UIData.getImgByKey(c),f.ox+f.ow-f.uow,f.oy+f.oh-f.uoh,f.uow,f.uoh,e.pixelWitdh-f.uow,e.pixelHeight-f.uoh,f.uow,f.uoh)):console.log("11"),TextureManager.getInstance().updateTexture(a.texture,e.pixelX,e.pixelY,a.ctx)):alert("uiAtlasDrawImg错误")},a.SharedDrawImg=function(a,b,c,d,e,f){void 0===e&&(e=0),void 0===f&&(f=0);var g=a.getRec(c);a.ctx=UIManager.getInstance().getContext2D(g.pixelWitdh,g.pixelHeight,!1);var h=b.getRec(d);a.ctx.drawImage(b.useImg,h.pixelX,h.pixelY,h.pixelWitdh,h.pixelHeight,e,f,g.pixelWitdh,g.pixelHeight),TextureManager.getInstance().updateTexture(a.texture,g.pixelX,g.pixelY,a.ctx)},a.drawToUiAtlasToCtx=function(a,b,c,d){var e=b.getRec(c);d||(d=new Rectangle(0,0,0,0)),d.width>1&&d.height>1?a.drawImage(b.useImg,e.pixelX,e.pixelY,e.pixelWitdh,e.pixelHeight,d.x,d.y,d.width,d.height):a.drawImage(b.useImg,e.pixelX,e.pixelY,e.pixelWitdh,e.pixelHeight,d.x,d.y,e.pixelWitdh,e.pixelHeight)},a.RepeatLoadImg=function(a,b,c){void 0===c&&(c=null);var d=new Image;d.onload=function(){LoadManager.getInstance().load(b,LoadManager.IMG_TYPE,function(a){c&&c(d,a)})},d.src=a},a}(),UIuitl=function(){function a(){}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.drawCostUI=function(a,b,c,d,e,f){void 0===d&&(d="#000000"),void 0===e&&(e=0),void 0===f&&(f=0),-1!=d.indexOf("[")&&(d="#"+d.substr(1,6));var g=a.getRec(b),h=UIManager.getInstance().getContext2D(g.pixelWitdh,g.pixelHeight,!1);0==e&&(e=g.pixelWitdh,f=g.pixelHeight),UiDraw.cxtDrawImg(h,PuiData.CostBg,new Rectangle(g.pixelWitdh-e,g.pixelHeight-f,e,f),UIData.publicUi);var i,j;Number(c[0])>-1?(UiDraw.cxtDrawImg(h,this.costtype(Number(c[0])),new Rectangle(0,0,25,25),UIData.publicUi),i=(e-25)/2+25,j=f>=25?2:25-f):(i=e/2+(g.pixelWitdh-e),j=g.pixelHeight-f),LabelTextFont.writeSingleLabelToCtx(h,c[1],16,i,j,TextAlign.CENTER,d),a.updateCtx(h,g.pixelX,g.pixelY)},a.prototype.costtype=function(a){switch(a){case 1:return PuiData.A_YUANBAO;case 3:return PuiData.A_YINBI;case 101:return PuiData.A_ZHENQI;case 102:return PuiData.A_SHOULING;case 103:return PuiData.A_JINGHUA;case 6:return PuiData.A_BANGGONG;case 7:return PuiData.A_HONOR;case 8:return PuiData.A_DOUHUN;case 104:return PuiData.A_EXP}},a}(),UIRenderComponent=function(){function a(){this._rendering=!1,this.scale=1,this.sortnum=0,this.blenderMode=0,this.renderData=new Float32Array(0),this.renderData2=new Float32Array(0),this.num=0,this.visible=!0,this.initData()}return Object.defineProperty(a.prototype,"rendering",{get:function(){return this._rendering},set:function(a){if(this._rendering=a,this._uiList)for(var b=0;b<this._uiList.length;b++)this._uiList[b].rendering=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"texture",{get:function(){return this.textureRes?this.textureRes.texture:null},enumerable:!0,configurable:!0}),a.prototype.initData=function(){this._uiList=new Array,this.objData=new ObjData,this.shader=ProgrmaManager.getInstance().getProgram(UIShader.UI_SHADER),this.program=this.shader.program,this.uiProLocation=Scene_data.context3D.getLocation(this.program,"ui"),this.ui2ProLocation=Scene_data.context3D.getLocation(this.program,"ui2")},a.prototype.resize=function(){},a.prototype.setImgUrl=function(a){var b=this;TextureManager.getInstance().getTexture(Scene_data.fileRoot+a,function(a){b.textureRes=a})},a.prototype.setInfo=function(a,b,c){this.uiAtlas=new UIAtlas,this.uiAtlas.setInfo(a,b,function(){c()})},a.prototype.setAtlas=function(a){this.uiAtlas=a},a.prototype.creatComponent=function(a,b,c,d){var e=new UICompenent;return e.tr.sets(a,b,c,d),e.uiRender=this,e},a.prototype.getComponent=function(a){var b=this.uiAtlas.getLayoutData(a);if(b){var c=b.type;if(0==c){var d=this.creatBaseComponent(b.dataItem[0]);return d.width=b.rect.width,d.height=b.rect.height,d.x=b.rect.x,d.y=b.rect.y,d.baseRec=b.rect,d.name=a,d}if(1==c){var e=this.creatGrid9Component(b.dataItem[0],b.rect.width,b.rect.height);return e.x=b.rect.x,e.y=b.rect.y,e.baseRec=b.rect,e.name=a,e}if(2==c){if(b.selected){var f=this.createSelectButton(b.dataItem[0],b.dataItem[1]);return f.width=b.rect.width,f.height=b.rect.height,f.x=b.rect.x,f.y=b.rect.y,f.baseRec=b.rect,f.name=a,f}var g=this.creatButton(b.dataItem[0],b.dataItem[1]);return g.width=b.rect.width,g.height=b.rect.height,g.x=b.rect.x,g.y=b.rect.y,g.baseRec=b.rect,g.name=a,g}if(4==c){var h=this.createFrame(b.dataItem[0]);return h.width=b.rect.width,h.height=b.rect.height,h.x=b.rect.x,h.y=b.rect.y,h.baseRec=b.rect,h.name=a,h}}return null},a.prototype.createFrame=function(a){var b=new FrameCompenent;b.skinName=a;var c=this.uiAtlas.getRec(a);return b.setFrameData(c),b.uiRender=this,b},a.prototype.creatBaseComponent=function(a){var b=new UICompenent;b.skinName=a;var c=this.uiAtlas.getRec(a);return b.tr.setRec(c),b.width=c.pixelWitdh,b.height=c.pixelHeight,b.uiRender=this,b},a.prototype.creatGrid9Component=function(a,b,c){var d=new Grid9Compenent;d.skinName=a;var e=this.uiAtlas.getGridRec(a);return d.tr.setRec(e),d.ogw=e.ogw,d.ogh=e.ogh,d.gw=d.ogw/e.pixelWitdh,d.gh=d.ogh/e.pixelHeight,d.width=b,d.height=c,d.uiRender=this,d},a.prototype.creatButton=function(a,b){if(!this.uiAtlas.hasData)return null;var c=new Button,d=this.uiAtlas.getRec(a);return c.tr.setRec(d),c.trDown.setRec(this.uiAtlas.getRec(b)),c.width=d.pixelWitdh,c.height=d.pixelHeight,c.uiRender=this,c},a.prototype.createSelectButton=function(a,b){if(!this.uiAtlas.hasData)return null;var c=new SelectButton,d=this.uiAtlas.getRec(a);return c.tr.setRec(d),c.trDown.setRec(this.uiAtlas.getRec(b)),c.width=d.pixelWitdh,c.height=d.pixelHeight,c.uiRender=this,c},a.prototype.addRenderUI=function(a){return this._uiList.length>=50?(console.log("UIRenderComponent超限制51"),void alert("UIRenderComponent超限制51")):(this._uiList.push(a),a.rendering=this.rendering,void this.applyObjData())},a.prototype.removeRenderUI=function(a){var b=this._uiList.indexOf(a);-1!=b&&this._uiList.splice(b,1),a.rendering=!1,this.applyObjData()},a.prototype.applyObjData=function(){this.objData.vertices.length=0,this.objData.uvs.length=0,this.objData.indexs.length=0;for(var a=0,b=0;b<this._uiList.length;b++){var c=this._uiList[b];c.isVirtual||(a=c.pushVaData(this.objData,b,a))}this.objData.treNum=this.objData.indexs.length,this.objData.vertexBuffer?(Scene_data.context3D.uploadBuff3DByBuffer(this.objData.vertexBuffer,this.objData.vertices),Scene_data.context3D.uploadBuff3DByBuffer(this.objData.uvBuffer,this.objData.uvs),Scene_data.context3D.uploadIndexBuff3DByBuffer(this.objData.indexBuffer,this.objData.indexs)):(this.objData.vertexBuffer=Scene_data.context3D.uploadBuff3D(this.objData.vertices),this.objData.uvBuffer=Scene_data.context3D.uploadBuff3D(this.objData.uvs),this.objData.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(this.objData.indexs)),this.mask&&(this.mask.scale=this.scale,this.mask.applyAbsolutePoint()),this.makeRenderDataVc(-1)},a.prototype.makeRenderDataVc=function(a){if((!this.renderData||this.renderData&&this.renderData.length!=4*this._uiList.length)&&(this.renderData=new Float32Array(4*this._uiList.length),this.renderData2=new Float32Array(4*this._uiList.length)),-1==a)for(var b=0;this._uiList&&b<this._uiList.length;b++)this._uiList[b].vcId=b,this.renderData[4*b+0]=this._uiList[b].renderData[0],this.renderData[4*b+1]=this._uiList[b].renderData[1],this.renderData[4*b+2]=this._uiList[b].renderData[2],this.renderData[4*b+3]=this._uiList[b].renderData[3],this.renderData2[4*b+0]=this._uiList[b].renderData2[0],this.renderData2[4*b+1]=this._uiList[b].renderData2[1],this.renderData2[4*b+2]=this._uiList[b].renderData2[2],this.renderData2[4*b+3]=this._uiList[b].renderData2[3];else a<this._uiList.length&&(this.renderData[4*a+0]=this._uiList[a].renderData[0],this.renderData[4*a+1]=this._uiList[a].renderData[1],this.renderData[4*a+2]=this._uiList[a].renderData[2],this.renderData[4*a+3]=this._uiList[a].renderData[3],this.renderData2[4*a+0]=this._uiList[a].renderData2[0],this.renderData2[4*a+1]=this._uiList[a].renderData2[1],this.renderData2[4*a+2]=this._uiList[a].renderData2[2],this.renderData2[4*a+3]=this._uiList[a].renderData2[3])},a.prototype.update=function(){if(this.visible&&0!=this._uiList.length||this.modelRenderList&&this.modelRenderList.length){if(this.mask){var a=Scene_data.context3D.renderContext;a.enable(a.STENCIL_TEST),a.stencilMask(255),a.stencilFunc(a.NEVER,this.mask.level,255),a.stencilOp(a.REPLACE,a.REPLACE,a.REPLACE),this.mask.update(),a.stencilFunc(a.LESS,this.mask.level-1,255),a.stencilOp(a.KEEP,a.KEEP,a.KEEP)}if(Scene_data.context3D.setBlendParticleFactors(this.blenderMode),Scene_data.context3D.setProgram(this.program),this.setVc(),Scene_data.context3D.setVa(0,3,this.objData.vertexBuffer),Scene_data.context3D.setVa(1,3,this.objData.uvBuffer),this.setTextureToGpu(),Scene_data.context3D.drawCall(this.objData.indexBuffer,this.objData.treNum),this.mask&&Scene_data.context3D.renderContext.disable(Scene_data.context3D.renderContext.STENCIL_TEST),this.modelRenderList)for(var b=0;b<this.modelRenderList.length;b++)this.modelRenderList[b].update()}},a.prototype.setTextureToGpu=function(){this.uiAtlas?Scene_data.context3D.setRenderTexture(this.shader,"s_texture",this.uiAtlas.texture,0):Scene_data.context3D.setRenderTexture(this.shader,"s_texture",this.texture,0)},a.prototype.setVc=function(){for(var a=0;a<this._uiList.length;a++)this._uiList[a].update(),this._uiList[a].vcId!=a;Scene_data.context3D.setVc4fvLocation(this.uiProLocation,this.renderData),Scene_data.context3D.setVc4fvLocation(this.ui2ProLocation,this.renderData2)},a.prototype.addModel=function(a){this.modelRenderList||(this.modelRenderList=new Array),this.modelRenderList.push(a)},a.prototype.interactiveEvent=function(a){if(this.mask&&!this.mask.testPoint(a.x,a.y))return!1;for(var b=!1,c=0;c<this._uiList.length;c++)if(this._uiList[c].interactiveEvent(a)&&UIManager.cando)return b=!0,UIManager.cando=!1,!0;return b},a.prototype.dispose=function(){this.objData.destory(),this.objData=null,this.uiAtlas&&(this.uiAtlas.dispose(),this.uiAtlas=null),this.mask&&(this.mask.dispose(),this.mask=null),this.renderData=null,this.renderData2=null},a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},UIListRenderComponent=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.createList=function(){var a=new List;return a.uiRender=this,a},b.prototype.createGridList=function(){var a=new GridList;return a.uiRender=this,a},b}(UIRenderComponent),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},UIBackImg=function(a){function b(){a.call(this),this._scaleData=[1,1],this._isFBO=!1,this.alpha=1}return __extends(b,a),b.prototype.initData=function(){this.objData=new ObjData,this.shader=ProgrmaManager.getInstance().getProgram(UIImageShader.UI_IMG_SHADER),this.program=this.shader.program,this.objData.vertices.push(-1,1,0,1,1,0,1,-1,0,-1,-1,0),this.objData.uvs.push(0,0,1,0,1,1,0,1),this.objData.indexs.push(0,1,2,0,2,3),this.objData.treNum=6,this.objData.vertexBuffer=Scene_data.context3D.uploadBuff3D(this.objData.vertices),this.objData.uvBuffer=Scene_data.context3D.uploadBuff3D(this.objData.uvs),this.objData.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(this.objData.indexs)},b.prototype.resize=function(){this.appleyPos()},b.prototype.setImgInfo=function(a,b,c){this.setImgUrl(a),this._width=b,this._height=c},b.prototype.appleyPos=function(){var a=this._width/Scene_data.stageWidth,b=this._height/Scene_data.stageHeight;b>a?(this._scaleData[0]=1,this._scaleData[1]=this._height/Scene_data.stageHeight/a):(this._scaleData[0]=this._width/Scene_data.stageWidth/b,this._scaleData[1]=1)},b.prototype.setFbo=function(){this._isFBO=!0},b.prototype.update=function(){var a=!1;this._isFBO?Scene_data.fbo&&(a=!0):this.texture&&(a=!0),this.objData&&a&&(Scene_data.context3D.setBlendParticleFactors(0),Scene_data.context3D.setProgram(this.program),Scene_data.context3D.setVa(0,3,this.objData.vertexBuffer),Scene_data.context3D.setVa(1,2,this.objData.uvBuffer),Scene_data.context3D.setVc2fv(this.shader,"scale",this._scaleData),this._isFBO?(Scene_data.context3D.setVc2fv(this.shader,"scale",[1,-1]),Scene_data.context3D.setRenderTexture(this.shader,"s_texture",Scene_data.fbo.texture,0)):Scene_data.context3D.setRenderTexture(this.shader,"s_texture",this.texture,0),Scene_data.context3D.setVcFloat(this.shader,"alpha",[this.alpha]),Scene_data.context3D.drawCall(this.objData.indexBuffer,this.objData.treNum))},b.prototype.interactiveEvent=function(a){return!0},b}(UIRenderComponent),UIRenderOnlyPicComponent=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.makeRenderDataVc=function(b){a.prototype.makeRenderDataVc.call(this,b);for(var c=0;c<this.renderData2.length/4;c++)this.renderData2[4*c+0]=1,this.renderData2[4*c+1]=1,this.renderData2[4*c+2]=0,this.renderData2[4*c+3]=0},b.prototype.update=function(){this.texture&&a.prototype.update.call(this)},b.prototype.setTextureToGpu=function(){Scene_data.context3D.setRenderTexture(this.shader,"s_texture",this.texture,0)},b}(UIRenderComponent),UIMask=function(){function a(){this._x=0,this._y=0,this._width=0,this._height=0,this.absoluteX=0,this.absoluteY=0,this.absoluteWidth=0,this.absoluteHeight=0,this.scale=1,this.level=2,this.initData(),this.renderData=[0,0,0,0]}return a.prototype.initData=function(){this.objData=new ObjData,this.shader=ProgrmaManager.getInstance().getProgram(UIMaskShader.UI_MASK_SHADER),this.program=this.shader.program,this.applyObjData()},a.prototype.applyAbsolutePoint=function(){this.parent&&(this.absoluteX=this._x*this.scale*UIData.Scale+this.parent.x,this.absoluteY=this._y*this.scale*UIData.Scale+this.parent.y,this.absoluteWidth=this._width*UIData.Scale*this.scale,this.absoluteHeight=this._height*UIData.Scale*this.scale,this.applyRenderSize())},a.prototype.testPoint=function(a,b){return a>this.absoluteX&&a<this.absoluteX+this.absoluteWidth&&b>this.absoluteY&&b<this.absoluteY+this.absoluteHeight?!0:!1},a.prototype.applyRenderSize=function(){this.parent&&(this.renderData[0]=this.absoluteX/Scene_data.stageWidth,this.renderData[1]=this.absoluteY/Scene_data.stageHeight,this.renderData[2]=this.absoluteWidth/Scene_data.stageWidth,this.renderData[3]=this.absoluteHeight/Scene_data.stageHeight)},a.prototype.applyObjData=function(){this.objData.vertices.length=0,this.objData.uvs.length=0,this.objData.indexs.length=0,this.objData.vertices.push(0,0,0,1,0,0,1,-1,0,0,-1,0),this.objData.indexs.push(0,1,2,0,2,3),this.objData.treNum=this.objData.indexs.length,this.objData.vertexBuffer=Scene_data.context3D.uploadBuff3D(this.objData.vertices),this.objData.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(this.objData.indexs)},a.prototype.update=function(){Scene_data.context3D.setBlendParticleFactors(0),Scene_data.context3D.setProgram(this.program),Scene_data.context3D.setVc4fv(this.shader,"ui",this.renderData),Scene_data.context3D.setVa(0,3,this.objData.vertexBuffer),Scene_data.context3D.drawCall(this.objData.indexBuffer,this.objData.treNum);
},Object.defineProperty(a.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this.applyAbsolutePoint()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this.applyAbsolutePoint()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return this._width},set:function(a){this._width=a,this.applyAbsolutePoint()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this._height},set:function(a){this._height=a,this.applyAbsolutePoint()},enumerable:!0,configurable:!0}),a.prototype.dispose=function(){this.objData.destory(),this.objData=null,this.program=null,this.shader=null,this.renderData=null,this.parent=null},a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},BaseButton=function(a){function b(){a.call(this),this.trDown=new Rectangle,this._state=0,this._currentState=0}return __extends(b,a),b.prototype.update=function(){this._currentState!=this._state&&(this.applyRenderSize(),this._currentState=this._state)},b.prototype.applyRenderSize=function(){a.prototype.applyRenderSize.call(this),0==this._state?(this.renderData2[0]=this.tr.width,this.renderData2[1]=this.tr.height,this.renderData2[2]=this.tr.x,this.renderData2[3]=this.tr.y):1==this._state&&(this.renderData2[0]=this.trDown.width,this.renderData2[1]=this.trDown.height,this.renderData2[2]=this.trDown.x,this.renderData2[3]=this.trDown.y),this.uiRender.makeRenderDataVc(this.vcId)},b}(UICompenent),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Button=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.interactiveEvent=function(b){return a.prototype.interactiveEvent.call(this,b)},b}(BaseButton),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},SelectButton=function(a){function b(){a.call(this),this._selected=!1}return __extends(b,a),Object.defineProperty(b.prototype,"selected",{get:function(){return this._selected},set:function(a){this._selected=a,this._selected?this._state=1:this._state=0},enumerable:!0,configurable:!0}),b.prototype.interactiveEvent=function(b){return this.enable?(b.type==InteractiveEvent.Down&&this.testPoint(b.x,b.y)&&(this._selected=!this._selected,this._selected?this._state=1:this._state=0),a.prototype.interactiveEvent.call(this,b)):!1},b}(BaseButton),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Grid9Compenent=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.pushVaData=function(a,b,c){for(var d=[0,0,0,this.ogw,0,0,this.width-this.ogw,0,0,this.width,0,0,0,-this.ogh,0,this.ogw,-this.ogh,0,this.width-this.ogw,-this.ogh,0,this.width,-this.ogh,0,0,this.ogh-this.height,0,this.ogw,this.ogh-this.height,0,this.width-this.ogw,this.ogh-this.height,0,this.width,this.ogh-this.height,0,0,-this.height,0,this.ogw,-this.height,0,this.width-this.ogw,-this.height,0,this.width,-this.height,0],e=0;e<d.length;e+=3)a.vertices.push(d[e]/this.width,d[e+1]/this.height,d[e+2]);a.uvs.push(0,0,b,this.gw,0,b,1-this.gw,0,b,1,0,b,0,this.gh,b,this.gw,this.gh,b,1-this.gw,this.gh,b,1,this.gh,b,0,1-this.gh,b,this.gw,1-this.gh,b,1-this.gw,1-this.gh,b,1,1-this.gh,b,0,1,b,this.gw,1,b,1-this.gw,1,b,1,1,b);for(var f=[0,1,5,0,5,4,1,2,6,1,6,5,2,3,7,2,7,6,4,5,9,4,9,8,5,6,10,5,10,9,6,7,11,6,11,10,8,9,13,8,13,12,9,10,14,9,14,13,10,11,15,10,15,14],e=0;e<f.length;e++)a.indexs.push(c+f[e]);return c+16},b}(UICompenent),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},FrameCompenent=function(a){function b(){a.call(this),this.isTrue=!1,this.current=0,this.totalcurrent=0,this.speed=6,this.stopStatic=0,this.speedNum=0}return __extends(b,a),b.prototype.setFrameData=function(a){this._frameData=a,this.totalcurrent=this._frameData.cellX*this._frameData.cellY},b.prototype.applyRenderSize=function(){if(this.parent){this.renderX=this.absoluteX/Scene_data.stageWidth,this.renderY=this.absoluteY/Scene_data.stageHeight,this.renderWidth=this.absoluteWidth/Scene_data.stageWidth,this.renderHeight=this.absoluteHeight/Scene_data.stageHeight,this.renderData[0]=this.renderX,this.renderData[1]=this.renderY,this.renderData[2]=this.renderWidth*this._uvScale,this.renderData[3]=this.renderHeight;var a=this._frameData.cellX,b=this._frameData.cellY,c=this._frameData.width/a,d=this._frameData.height/b,e=new Rectangle(0,0,c,d),f=this.current%(a*b);e.x=f%a*c,e.y=float2int(f/a)*d,this.renderData2[0]=e.width*this._uvScale,this.renderData2[1]=e.height,this.renderData2[2]=e.x+this._frameData.x,this.renderData2[3]=e.y+this._frameData.y,this.uiRender.makeRenderDataVc(this.vcId)}},b.prototype.getSkinCtxRect=function(){var a=this._frameData,b=new Rectangle;return b.width=a.pixelWitdh/a.cellX,b.height=a.pixelHeight/a.cellY,b.x=this.current%a.cellX*b.width,b.y=Math.floor(this.current/a.cellX)*b.height,b},b.prototype.drawToCtx=function(a,b){var c=this._frameData,d=this.getSkinCtxRect();a.updateCtx(b,c.pixelX+d.x,c.pixelY+d.y)},b.prototype.update=function(){if(this._frameData&&2!=this.stopStatic){this.applyRenderSize(),this.speedNum++,this.speedNum>this.speed&&(this.current++,this.speedNum=0);var a=this._frameData.cellX,b=this._frameData.cellY;this.current>a*b-1&&(1==this.stopStatic?this.stopStatic=2:this.current=0)}},b.prototype.goToAndPlay=function(a){this.stopStatic=1,this.current=a},b.prototype.goToAndStop=function(a){this.stopEnd(),this.current=a,this.applyRenderSize()},b.prototype.Invisible=function(){0!=this.renderData[2]&&0!=this.renderData[3]&&(this.stopEnd(),this.renderData[0]=0,this.renderData[1]=0,this.renderData[2]=0,this.renderData[3]=0,this.uiRender.makeRenderDataVc(this.vcId))},b.prototype.play=function(){this.stopStatic=0},b.prototype.stopEnd=function(){this.stopStatic=2;var a=this._frameData.cellX,b=this._frameData.cellY;this.current=a*b-1,this.applyRenderSize()},b}(UICompenent),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},List=function(a){function b(){a.call(this),this._contentX=0,this._contentY=0,this._needScoller=!1,this.lastcontentY=0,this.addEventListener(InteractiveEvent.Down,this.onDown,this),this.addEventListener(InteractiveEvent.Up,this.onListUp,this)}return __extends(b,a),b.prototype.applyAbsolutePoint=function(){this.parent&&(this.absoluteX=(this._x*this.scale+this._contentX)*UIData.Scale+this.parent.x,this.absoluteY=(this._y*this.scale+this._contentY)*UIData.Scale+this.parent.y,this.absoluteWidth=this.width*UIData.Scale,this.absoluteHeight=this.height*UIData.Scale,this.applyRenderSize())},Object.defineProperty(b.prototype,"contentX",{get:function(){return this._contentX},set:function(a){this._contentX=a,this.applyAbsolutePoint()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"contentY",{get:function(){return this._contentY},set:function(a){this._contentY=a,this.applyAbsolutePoint()},enumerable:!0,configurable:!0}),b.prototype.testPoint=function(a,b){return a>this.absoluteX&&a<this.absoluteX+this._showWidth*UIData.Scale&&b>this.absoluteY&&b<this.absoluteY+this._showHeight*UIData.Scale?!0:!1},b.prototype.setData=function(a,b,c,d,e,f,g,h){void 0===g&&(g=256),void 0===h&&(h=300),this.uiRender.uiAtlas&&this.uiRender.uiAtlas.dispose(),this.width=e,this.height=f,this._showWidth=g,this._showHeight=h,this._itemWidth=c,this._itemHeight=d,this.data=a;var i=new ListAtlas;this.uiRender.setAtlas(i),i.setData(e,f,c,d,a.length),this._itemRenderAry=new Array;for(var j=0;j<a.length;j++){var k=new b;k.setData(a[j],i,i.configData[j]),this._itemRenderAry.push(k)}this._oHeight=d*a.length,this._oHeight>this._showHeight?this._needScoller=!0:this._needScoller=!1,this.uiRender.applyObjData()},b.prototype.refresh=function(){for(var a=0;this._itemRenderAry&&a<this._itemRenderAry.length;a++)this._itemRenderAry[a].draw()},b.prototype.pushVaData=function(a,b,c){if(!this._itemRenderAry)return 0;for(var d=0;d<this._itemRenderAry.length;d++){var e=this._itemRenderAry[d].uvData;a.vertices.push(0,-e.y,0,1,-e.y,0),a.uvs.push(0,e.y,b,1,e.y,b)}a.vertices.push(0,-1,0,1,-1,0),a.uvs.push(0,1,b,1,1,b);for(var d=0;d<this._itemRenderAry.length;d++)a.indexs.push(c+2*d,1+c+2*d,3+c+2*d,c+2*d,3+c+2*d,2+c+2*d);return c+2*(this._itemRenderAry.length+1)},b.prototype.onDown=function(a){this._ypos=a.y,this.lastcontentY=this.contentY,this._needScoller&&(Scene_data.uiStage.addEventListener(InteractiveEvent.Move,this.onMove,this),Scene_data.uiStage.addEventListener(InteractiveEvent.Up,this.onUp,this))},b.prototype.onListUp=function(a){if(Math.abs(this.contentY-this.lastcontentY)<3){var b=(a.y-this.absoluteY+this.contentY)/UIData.Scale;b>=0&&b<this._showHeight&&this.testItemClick(a.x,a.y)}},b.prototype.testItemClick=function(a,b){var c=a-this.absoluteX,d=b-this.absoluteY,e=this._itemHeight*UIData.Scale,f=Math.floor(d/e);f>=this._itemRenderAry.length||0>f||this._itemRenderAry[f].click(c,d-e*f)},b.prototype.onMove=function(a){this.contentY-=this._ypos-a.y,this.contentY>0?this.contentY=0:this.contentY<this._showHeight*this.scale-this._oHeight*this.scale&&(this.contentY=this._showHeight*this.scale-this._oHeight*this.scale),this._ypos=a.y},b.prototype.onUp=function(a){Scene_data.uiStage.removeEventListener(InteractiveEvent.Move,this.onMove,this),Scene_data.uiStage.removeEventListener(InteractiveEvent.Up,this.onUp,this)},b}(UICompenent),ListAtlas=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.setData=function(a,b,c,d,e){this.ctx=UIManager.getInstance().getContext2D(a,b,!1),this.textureRes=TextureManager.getInstance().getCanvasTexture(this.ctx),this.configData=new Array;for(var f=0;e>f;f++){var g=new Object;g.ox=0,g.oy=f*d,g.ow=c,g.oh=d,g.x=0,g.y=f*d/b,g.width=c/a,g.height=d/b,g.name=f.toString(),this.configData.push(g)}},b}(UIAtlas),ListItemData=function(){function a(){}return a}(),ListItemRender=function(){function a(){}return a.prototype.setData=function(a,b,c){this._listItemData=a,this._listItemData.itemRender=this,this.uvData=c,this.atlas=b,this.draw()},Object.defineProperty(a.prototype,"listItemData",{get:function(){return this._listItemData},enumerable:!0,configurable:!0}),a.prototype.setNewData=function(a){},Object.defineProperty(a.prototype,"selected",{get:function(){return this._selected},set:function(a){this._selected=a},enumerable:!0,configurable:!0}),a.prototype.draw=function(){},a.prototype.click=function(a,b){if(this._listItemData.clickFun){if(this._listItemData.clickRect&&!this._listItemData.clickRect.isHitByPoint(a/UIData.Scale,b/UIData.Scale))return;this._listItemData.clickFun(this._listItemData)}},a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},SList=function(a){function b(){a.apply(this,arguments),this.p_scrollY=0,this._showItemNum=0,this._allItemNum=0,this._topSize=0,this._bottomSize=0,this._outSize=0,this._showDataIndex=0,this.scrollLock=!1,this._minScrollY=0,this._maskLevel=2,this._mouseY=0,this._dragFlag=!1,this._dragY=0,this._dragMaxY=100}return __extends(b,a),b.prototype.setData=function(a,b,c,d,e,f,g,h,i,j,k,l){void 0===l&&(l=0),this.width=c,this._height=d,this.p_itemHeight=f,this._showIndexList=new Array,this._dataAry=a,this._showItemNum=g,this._allItemNum=j*k,this._contentX=j,this._contentY=k,this._outSize=(k-this._showItemNum)*f,this._topSize=0,this._bottomSize=this._outSize,this._showDataIndex=0,this._sAtlas=new SListAtlas,this._sAtlas.setData(h,i,j,k),this.bgMask=new UIMask,this.bgMask.x=0,this.bgMask.y=0,this.bgMask.width=c,this.bgMask.height=d,this.bgMask.level=this._maskLevel,this.addMask(this.bgMask),this._bgRender=new SListBgRender,this._bgRender.uiAtlas=this._sAtlas,this._bgRender.slist=this,this.addRender(this._bgRender),this._baseRender=new SlistFrontRender,this._baseRender.uiAtlas=this._sAtlas,this.addRender(this._baseRender),this._bgRender.mask=this.bgMask,this._baseRender.mask=this.bgMask;var m;if(0!=l){m=new Array;for(var n=0;l>n;n++){var o=new SlistFrontRender;o.uiAtlas=this._sAtlas,this.addRender(o),o.mask=this.bgMask,m.push(o)}}this._itemList=new Array;for(var n=0;n<this._allItemNum;n++){var p=new b;p.baseY=float2int(n/j)*f,p.baseX=n%j*e,p.uiAtlas=this._sAtlas,p.index=n,p.parentTarget=this,p.create(this,this._bgRender,this._baseRender,m),p.render(a[n]),this._itemList.push(p),this._showIndexList.push(n)}this._minScrollY=this._height-float2int(this._dataAry.length/this._contentX)*this.p_itemHeight,this.scrollY(0),Math.ceil(a.length/this._contentX)<=this._showItemNum?this.scrollLock=!0:this.scrollLock=!1},b.prototype.setShowLevel=function(a){this._maskLevel=a,this.bgMask&&(this.bgMask.level=this._maskLevel)},b.prototype.setSelect=function(a){for(var b=0;b<this._itemList.length;b++)this._itemList[b]==a?this._itemList[b].selected||(this._itemList[b].selected=!0,this._itemList[b].itdata&&this._itemList[b].itdata.data&&(this._lastSelectIndex=this._itemList[b].itdata.data.id)):this._itemList[b].selected&&(this._itemList[b].selected=!1)},b.prototype.setSelectIndex=function(a){for(var b=0;b<this._itemList.length;b++)b==a?this._itemList[b].selected=!0:this._itemList[b].selected&&(this._itemList[b].selected=!1)},b.prototype.setSelectIndexCopy=function(a){console.log("--$index-",a);for(var b=0;b<this._itemList.length;b++)this._itemList[b].itdata&&this._itemList[b].itdata.data.id==a?(this._itemList[b].selected=!0,this._lastSelectIndex=a):this._itemList[b].selected&&(this._itemList[b].selected=!1)},b.prototype.getCurrentSelectIndex=function(){return this._lastSelectIndex||(this._lastSelectIndex=0),this._lastSelectIndex},b.prototype.changeMinScrollY=function(){this._minScrollY=this._height-Math.ceil(this._dataAry.length/this._contentX)*this.p_itemHeight},b.prototype.refreshData=function(a){this._dataAry=a,this._showIndexList=new Array;for(var b=0;b<this._itemList.length;b++)this._itemList[b].render(a[b]),this._itemList[b].baseY=float2int(b/this._contentX)*this.p_itemHeight,this._showIndexList.push(b);this._outSize=(this._contentY-this._showItemNum)*this.p_itemHeight,this._topSize=0,this._bottomSize=this._outSize,this._showDataIndex=0,this._minScrollY=this._height-Math.ceil(this._dataAry.length/this._contentX)*this.p_itemHeight,this.scrollY(0),Math.ceil(a.length/this._contentX)<=this._showItemNum?this.scrollLock=!0:this.scrollLock=!1},b.prototype.getDataSize=function(){return this._dataAry.length},b.prototype.refreshDraw=function(){for(var a=0;a<this._itemList.length;a++)this._itemList[a].refreshDraw()},b.prototype.scroll=function(){},b.prototype.interactiveEvent=function(a){return a.type==InteractiveEvent.Down&&this.bgMask.testPoint(a.x,a.y)?(this._mouseY=a.y,(!this.scrollLock||this._dragFlag)&&(Scene_data.uiStage.addEventListener(InteractiveEvent.Move,this.onMove,this),Scene_data.uiStage.addEventListener(InteractiveEvent.Up,this.onUp,this)),!0):!1},b.prototype.onMove=function(a){var b=a.y-this._mouseY;this._mouseY=a.y,0>b&&this.scrollLock||this.scrollY(b)},b.prototype.onUp=function(a){var b=this;Scene_data.uiStage.removeEventListener(InteractiveEvent.Move,this.onMove,this),Scene_data.uiStage.removeEventListener(InteractiveEvent.Up,this.onUp,this),this._dragFlag&&(this._dragY<0?this._dragDownFun&&this._dragDownFun():this._dragY>0&&this._dragUpFun&&this._dragUpFun(),0!=this._dragY&&TweenMoveTo(this,.5,{dragY:0,onUpdate:function(){b.refreshResultPos()}}))},b.prototype.setDragFun=function(a,b){this._dragUpFun=a,this._dragDownFun=b,a||b?this._dragFlag=!0:(this._dragFlag=!1,this._dragY=0)},Object.defineProperty(b.prototype,"dragY",{get:function(){return this._dragY},set:function(a){this._dragY=a},enumerable:!0,configurable:!0}),b.prototype.scrollY=function(a){if(this._topSize-=a,this._bottomSize+=a,this._topSize<=0)if(this._bottomflag=!0,0==this._showDataIndex)this._topSize=0,this._bottomSize=this._outSize,this.p_scrollY=0,this._topflag=!1,this._dragFlag&&Math.abs(this._dragY)<this._dragMaxY&&(this._dragY+=a);else{for(var b=this._showIndexList[0],c=this._itemList[b].baseY-this.p_itemHeight,d=0;d<this._contentX;d++){var e=this._showIndexList.pop();this._showIndexList.unshift(e),this._itemList[e].baseY=c,this._itemList[e].render(this._dataAry[this._showDataIndex-1]),this._showDataIndex--}this._bottomSize-=this.p_itemHeight,this._topSize+=this.p_itemHeight,this.p_scrollY+=a,this._topflag=!0}else if(this._bottomSize<=0)if(this._topflag=!0,this._showDataIndex+this._allItemNum>=this._dataAry.length)this._bottomSize=0,this._topSize=this._outSize,this.p_scrollY=-(Math.ceil(this._dataAry.length/this._contentX)-this._showItemNum)*this.p_itemHeight,this._bottomflag=!1;else{this._bottomflag=!0;for(var f=this._showIndexList[this._showIndexList.length-1],g=this._itemList[f].baseY+this.p_itemHeight,d=0;d<this._contentX;d++){var e=this._showIndexList.shift();this._showIndexList.push(e),this._itemList[e].baseY=g,this._itemList[e].render(this._dataAry[this._showDataIndex+this._allItemNum]),this._showDataIndex++}this._bottomSize+=this.p_itemHeight,this._topSize-=this.p_itemHeight,this.p_scrollY+=a}else this._showItemNum>=this._dataAry.length?(this._topflag=!1,this._bottomflag=!1,this.p_scrollY=0):(this._topflag=!0,this._bottomflag=!0,this.p_scrollY+=a);this.p_scrollY<=this._minScrollY&&this._minScrollY<0&&(this.p_scrollY=this._minScrollY,this._topSize+=a,this._bottomSize-=a,this._topflag=!0,this._bottomflag=!1,this._dragFlag&&Math.abs(this._dragY)<this._dragMaxY&&(this._dragY+=a)),this.refreshResultPos(),this.backFun&&this.backFun(this._topflag,this._bottomflag,a)},b.prototype.refreshResultPos=function(){for(var a=0;a<this._itemList.length;a++)this._itemList[a].setY(this.p_scrollY+this._dragY)},b.prototype.dispose=function(){},b}(UIVirtualContainer),SListItem=function(){function a(){this._height=10,this._list=new Array,this.index=0,this.baseY=0,this.baseX=0,this._selected=!1}return a.prototype.addUI=function(a){this._list.push(a)},a.prototype.create=function(a,b,c,d){void 0===d&&(d=null),this._bgRender=b,this._baseRender=c,this._customRenderAry=d},a.prototype.render=function(a){},a.prototype.refreshDraw=function(){},a.prototype.setSelect=function(){this.parentTarget.setSelect(this)},a.prototype.unSetSelect=function(){this.selected=!1},Object.defineProperty(a.prototype,"selected",{get:function(){return this._selected},set:function(a){this._selected=a},enumerable:!0,configurable:!0}),a.prototype.creatSUI=function(a,b,c,d,e,f,g){var h=b.getLayoutData(c),i=c+this.index;this.uiAtlas.addConfig(i,this.index,h.rect);var j=a.creatBaseComponent(i),h=new Object;return j.name=c,j.x=h.x=d,j.y=h.y=e,j.width=h.width=f,j.height=h.height=g,j.baseRec=h,this._list.push(j),j},a.prototype.creatGrid9Component=function(a,b,c){var d=new Grid9Compenent,e=this.uiAtlas.getGridRec(b);return e.ogw=c,e.ogh=c,d.tr.setRec(e),d.ogw=e.ogw,d.ogh=e.ogh,d.gw=d.ogw/e.pixelWitdh,d.gh=d.ogh/e.pixelHeight,d.tr.setRec(e),d.skinName=b,d.uiRender=a,d},a.prototype.creatGrid9SUI=function(a,b,c,d,e,f,g,h){void 0===h&&(h=5);var i=b.getLayoutData(c),j=c+this.index;this.uiAtlas.addConfig(j,this.index,i.rect);var k=this.creatGrid9Component(a,j,h),i=new Object;return k.name=c,k.x=i.x=d,k.y=i.y=e,k.width=i.width=f,k.height=i.height=g,k.baseRec=i,this._list.push(k),k},a.prototype.getHeight=function(){return this._height},a.prototype.setItemUiX=function(a,b){a.baseRec.x=b,this.setY(this._sy)},a.prototype.setY=function(a){this._sy=a;for(var b=a+this.baseY,c=0;c<this._list.length;c++)this._list[c].y=this._list[c].baseRec.y+b,this._list[c].x=this._list[c].baseRec.x+this.baseX},a.prototype.setX=function(a){this._sx=a;for(var b=a+this.baseX,c=0;c<this._list.length;c++)this._list[c].y=this._list[c].baseRec.y+this.baseY,this._list[c].x=this._list[c].baseRec.x+b},a}(),SListItemData=function(){function a(){this.selected=!1}return a}(),SListBgRender=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.interactiveEvent=function(b){a.prototype.interactiveEvent.call(this,b);var c=this.slist.interactiveEvent(b);return c},b}(UIRenderComponent),SlistFrontRender=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.interactiveEvent=function(b){return a.prototype.interactiveEvent.call(this,b),!1},b}(UIRenderComponent),SListAtlas=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.setData=function(a,b,c,d){this.ctx=UIManager.getInstance().getContext2D(a,b,!1),this.width=a,this.height=b,this.textureRes=TextureManager.getInstance().getCanvasTexture(this.ctx),this.xNum=c,this.yNum=d,this.itemWidth=a/this.xNum,this.itemHeight=b/this.yNum,this.configData=new Array},b.prototype.addConfig=function(a,b,c){var d=new Object,e=b%this.xNum*this.itemWidth,f=float2int(b/this.xNum)*this.itemHeight;d.ox=e+c.x,d.oy=f+c.y,d.ow=c.width,d.oh=c.height,d.x=d.ox/this.width,d.y=d.oy/this.height,d.width=d.ow/this.width,d.height=d.oh/this.height,d.name=a,this.configData.push(d)},b}(UIAtlas),TransverseSList=function(a){function b(){a.apply(this,arguments),this.p_scrollX=0,this._minScrollX=0,this._mouseX=0}return __extends(b,a),b.prototype.setData=function(a,b,c,d,e,f,g,h,i,j,k,l){void 0===l&&(l=0),this.width=c,this._height=d,this.p_itemWidth=e,this._showIndexList=new Array,this._dataAry=a,this._showItemNum=g,this._allItemNum=j*k,this._contentX=j,this._contentY=k,this._outSize=(j-this._showItemNum)*e,this._topSize=0,this._bottomSize=this._outSize,this._showDataIndex=0,this._sAtlas=new SListAtlas,this._sAtlas.setData(h,i,j,k),this.bgMask=new UIMask,this.bgMask.x=0,this.bgMask.y=0,this.bgMask.width=c,this.bgMask.height=d,this.bgMask.level=this._maskLevel,this.addMask(this.bgMask),this._bgRender=new SListBgRender,this._bgRender.uiAtlas=this._sAtlas,this._bgRender.slist=this,this.addRender(this._bgRender),this._baseRender=new SlistFrontRender,this._baseRender.uiAtlas=this._sAtlas,this.addRender(this._baseRender),this._bgRender.mask=this.bgMask,this._baseRender.mask=this.bgMask;var m;if(0!=l){m=new Array;for(var n=0;l>n;n++){var o=new SlistFrontRender;o.uiAtlas=this._sAtlas,this.addRender(o),o.mask=this.bgMask,m.push(o)}}this._itemList=new Array;for(var n=0;n<this._allItemNum;n++){var p=new b;p.baseX=float2int(n/k)*e,p.baseY=n%k*f,p.uiAtlas=this._sAtlas,p.index=n,p.parentTarget=this,p.create(this,this._bgRender,this._baseRender,m),p.render(this._dataAry[n]),this._itemList.push(p),this._showIndexList.push(n)}this._minScrollX=this.width-float2int(this._dataAry.length/this._contentY)*this.p_itemWidth,this.scrollX(0)},b.prototype.changeMinScrollX=function(){this._minScrollX=this.width-float2int(this._dataAry.length/this._contentY)*this.p_itemWidth},b.prototype.refreshData=function(a){this._dataAry=a,this._showIndexList=new Array;for(var b=0;b<this._itemList.length;b++)this._itemList[b].render(this._dataAry[b]),this._itemList[b].baseX=float2int(b/this._contentY)*this.p_itemWidth,this._showIndexList.push(b);this._outSize=(this._contentX-this._showItemNum)*this.p_itemWidth,this._topSize=0,this._bottomSize=this._outSize,this._showDataIndex=0,this._minScrollX=this.width-float2int(this._dataAry.length/this._contentY)*this.p_itemWidth,this.scrollX(0),Math.ceil(a.length/this._contentY)<=this._showItemNum?this.scrollLock=!0:this.scrollLock=!1},b.prototype.interactiveEvent=function(a){return a.type==InteractiveEvent.Down&&this.bgMask.testPoint(a.x,a.y)?(this._mouseX=a.x,this.scrollLock||(Scene_data.uiStage.addEventListener(InteractiveEvent.Move,this.onMove,this),Scene_data.uiStage.addEventListener(InteractiveEvent.Up,this.onUp,this)),!0):!1},b.prototype.onMove=function(a){var b=a.x-this._mouseX;this._mouseX=a.x,0>b&&this.scrollLock||this.scrollX(b)},b.prototype.onUp=function(a){Scene_data.uiStage.removeEventListener(InteractiveEvent.Move,this.onMove,this),Scene_data.uiStage.removeEventListener(InteractiveEvent.Up,this.onUp,this)},b.prototype.scrollX=function(a){if(this._topSize-=a,this._bottomSize+=a,this._topSize<=0)if(this._bottomflag=!0,0==this._showDataIndex)this._topSize=0,this._bottomSize=this._outSize,this.p_scrollX=0,this._topflag=!1;else{for(var b=this._showIndexList[0],c=this._itemList[b].baseX-this.p_itemWidth,d=0;d<this._contentY;d++){var e=this._showIndexList.pop();this._showIndexList.unshift(e),this._itemList[e].baseX=c,this._itemList[e].render(this._dataAry[this._showDataIndex-1]),this._showDataIndex--}this._bottomSize-=this.p_itemWidth,this._topSize+=this.p_itemWidth,this.p_scrollX+=a,this._topflag=!0}else if(this._bottomSize<=0)if(this._topflag=!0,this._showDataIndex+this._allItemNum>=this._dataAry.length)this._bottomSize=0,this._topSize=this._outSize,this.p_scrollX=-(Math.ceil(this._dataAry.length/this._contentY)-this._showItemNum)*this.p_itemWidth,this._bottomflag=!1;else{this._bottomflag=!0;for(var f=this._showIndexList[this._showIndexList.length-1],g=this._itemList[f].baseX+this.p_itemWidth,d=0;d<this._contentY;d++){var e=this._showIndexList.shift();this._showIndexList.push(e),this._itemList[e].baseX=g,this._itemList[e].render(this._dataAry[this._showDataIndex+this._allItemNum]),this._showDataIndex++}this._bottomSize+=this.p_itemWidth,this._topSize-=this.p_itemWidth,this.p_scrollX+=a}else this._showItemNum>=this._dataAry.length?(this._topflag=!1,this._bottomflag=!1,this.p_scrollX=0):(this._topflag=!0,this._bottomflag=!0,this.p_scrollX+=a);this.p_scrollX<=this._minScrollX&&this._minScrollX<0&&(this.p_scrollX=this._minScrollX,this._topSize+=a,this._bottomSize-=a,this._topflag=!0,this._bottomflag=!1),this.refreshResultPos(),this.backFun&&this.backFun(this._topflag,this._bottomflag,a)},b.prototype.refreshResultPos=function(){for(var a=0;a<this._itemList.length;a++)this._itemList[a].setX(this.p_scrollX)},b}(SList),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},GridList=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.testPoint=function(a,b){return a>this.absoluteX&&a<this.absoluteX+this._showWidth*UIData.Scale&&b>this.absoluteY&&b<this.absoluteY+this._oHeight*UIData.Scale?!0:!1},b.prototype.setGridData=function(a,b,c,d,e,f,g,h,i){void 0===h&&(h=256),void 0===i&&(i=300),this.uiRender.uiAtlas&&this.uiRender.uiAtlas.dispose(),this.width=f,this.height=g,this._showWidth=h,this._showHeight=i,this.data=a,this.wNum=c,this._itemWidth=d,this._itemHeight=e;var j=new GridListAtlas;this.uiRender.setAtlas(j),j.setGridData(f,g,d,e,c,a.length),this._itemRenderAry=new Array;for(var k=0;k<a.length;k++){var l=new b;l.setData(a[k],j,j.configData[k]),this._itemRenderAry.push(l)}this._oHeight=e*Math.ceil(this._itemRenderAry.length/this.wNum),this._oHeight>this._showHeight?this._needScoller=!0:this._needScoller=!1,this.uiRender.applyObjData()},b.prototype.setGridItemData=function(a,b){var c=this._itemRenderAry[b].listItemData.data?!0:!1;return this._itemRenderAry[b].setNewData(a),c},b.prototype.setGridItemFun=function(a,b){this._itemRenderAry[b].listItemData.clickFun=a},b.prototype.clearItemByIndex=function(a){for(var b=0;b<this._itemRenderAry.length;b++)this._itemRenderAry[b].listItemData.data&&this._itemRenderAry[b].listItemData.data.dataIndex==a&&(this._itemRenderAry[b].setNewData(null),this._itemRenderAry[b].listItemData.clickFun=null)},b.prototype.clearItemByPos=function(a){this._itemRenderAry[a].setNewData(null),this._itemRenderAry[a].listItemData.clickFun=null},b.prototype.testItemClick=function(a,b){var c=a-this.absoluteX,d=b-this.absoluteY,e=this._itemHeight*UIData.Scale,f=this._itemWidth*UIData.Scale,g=float2int(c/f),h=float2int(d/e),i=h*this.wNum+g;i>=this._itemRenderAry.length||this._itemRenderAry[i].click(c-f*(g-1),d-e*(h-1))},b.prototype.pushVaData=function(a,b,c){if(!this._itemRenderAry)return 0;for(var d=Math.ceil(this._itemRenderAry.length/this.wNum),e=this._itemWidth/this.width,f=this._itemHeight/this.height,b=0;d+1>b;b++)for(var g=0;g<this.wNum+1;g++)a.vertices.push(g*e,-b*f,0),a.uvs.push(g*e,b*f,0);for(var h=d*this.wNum,g=0;h>g;g++){var i=g%this.wNum+float2int(g/this.wNum)*(this.wNum+1),j=i+c,k=i+1+c,l=i+this.wNum+1+c,m=i+1+this.wNum+1+c;a.indexs.push(j,k,m,j,m,l)}return c+2*(this._itemRenderAry.length+1)},b}(List),GridListAtlas=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.getAlphaImg=function(a,b){for(var c=this.ctx.createImageData(a,b),d=0;d<c.data.length;d++)c.data[d]=0;return c},b.prototype.setGridData=function(a,b,c,d,e,f){this.ctx=UIManager.getInstance().getContext2D(a,b,!1),this.ctx.fillStyle="#ffffff",this.ctx.fillRect(0,0,a,b);var g=this.getAlphaImg(a,b);this.textureRes=new TextureRes,this.textureRes.texture=Scene_data.context3D.getTexture(g,0,0),this.configData=new Array;for(var h=Math.ceil(f/e),i=0,j=0;h>j;j++)for(var k=0;e>k;k++){i=j*e+k;var l=new Object;l.ox=k*c,l.oy=j*d,l.ow=c,l.oh=d,l.x=k*c/a,l.y=j*d/b,l.width=c/a,l.height=d/b,l.name=i.toString(),this.configData.push(l)}},b}(ListAtlas),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},CdRenderComponent=function(a){function b(){a.call(this),this.initProgram()}return __extends(b,a),b.prototype.setVc=function(){for(var b=0;b<this._uiList.length;b++)this._uiList[b].setVc(this.shader,b);a.prototype.setVc.call(this)},b.prototype.initProgram=function(){ProgrmaManager.getInstance().registe(CdUIShader.CdUIShader,new CdUIShader),this.shader=ProgrmaManager.getInstance().getProgram(CdUIShader.CdUIShader),this.program=this.shader.program,this.uiProLocation=Scene_data.context3D.getLocation(this.program,"ui"),this.ui2ProLocation=Scene_data.context3D.getLocation(this.program,"ui2"),this.dataTProLocation=Scene_data.context3D.getLocation(this.program,"dataT")},b.prototype.getComponent=function(a){var b=this.uiAtlas.getLayoutData(a),c=this.creatBaseComponent(b.dataItem[0]);return c.width=b.rect.width,c.height=b.rect.height,c.x=b.rect.x,c.y=b.rect.y,c.baseRec=b.rect,c.name=a,c},b.prototype.creatBaseComponent=function(a){var b=new CdUICompenent;b.skinName=a;var c=this.uiAtlas.getRec(a);return b.tr.setRec(c),b.width=c.pixelWitdh,b.height=c.pixelHeight,b.uiRender=this,b},b}(UIRenderComponent),CdUICompenent=function(a){function b(){a.call(this),this.cdTotalnum=0,this.lastTime=0,this._skipNum=0,this.colorVer=[1,.5,0,.5],this.isRound=!1,this.visible=!0,this._skipNum=float2int(360*Math.random())}return __extends(b,a),b.prototype.setCdNum=function(a){this._skipNum=360*a},Object.defineProperty(b.prototype,"isFinish",{get:function(){return this._skipNum>=360?!0:!1},enumerable:!0,configurable:!0}),b.prototype.update=function(){if(0!=this.cdTotalnum){var b=(TimeUtil.getTimer()-this.lastTime)/this.cdTotalnum;1>b?this.setCdNum(b):this.setCdNum(1)}a.prototype.update.call(this)},b.prototype.setVc=function(a,b){var c=this._skipNum%360/180*Math.PI;Scene_data.context3D.setVc4fv(a,"dataTime["+b+"]",[c,0,0,1])},b}(UICompenent),CdUIShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Pos"),a.bindAttribLocation(this.program,1,"v2uv")},b.prototype.getVertexShaderString=function(){var a="attribute vec3 v3Pos;attribute vec3 v2uv;uniform vec4 ui[20];uniform vec4 ui2[20];uniform vec4 dataTime[20];varying vec2 v_pos;\nvarying vec2 u_pos;varying vec4 v_dataTime;void main(void){   vec4 data = ui2[int(v2uv.z)];   v_dataTime = dataTime[int(v2uv.z)];   v_pos = vec2(v3Pos.x ,v3Pos.y);   u_pos = vec2(v2uv.x * data.x + data.z, v2uv.y * data.y + data.w);   data = ui[int(v2uv.z)];   vec3 pos = vec3(0.0,0.0,0.0);   pos.xy = v3Pos.xy * data.zw * 2.0;   pos.x += data.x * 2.0 - 1.0;   pos.y += -data.y * 2.0 + 1.0;   vec4 vt0= vec4(pos, 1.0);   gl_Position = vt0;}";
return a},b.prototype.getFragmentShaderString=function(){var a="precision mediump float;\nuniform sampler2D s_texture;\nvarying vec2 u_pos;\nvarying vec2 v_pos;varying vec4 v_dataTime;\nvoid main(void)\n{\nfloat alpha =1.0;\nfloat tx =v_pos.x*2.0 - 1.0;\nfloat ty =v_pos.y*2.0 + 1.0;\nfloat atanNum =atan(tx,ty);\nvec4 infoUv = texture2D(s_texture, u_pos.xy);\ninfoUv.xyz *= infoUv.w;\nif (tx>0.0) {\nif (v_dataTime.x<atanNum) {\nalpha=0.0;\n}; \n} else {\natanNum =atanNum+6.283;\nif (v_dataTime.x<atanNum) {\nalpha=0.0;\n}; \n}; \ngl_FragColor = infoUv*alpha;\n}";return a},b.CdUIShader="CdUIShader",b}(Shader3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Disp2DBaseText=function(){function a(){this.dtime=-1,this.time=0,this.oldPos=new Vector2D}return a.prototype.needUpData=function(a){return this.oldPos.x!=a.x||this.oldPos.y!=a.y||Scene_data.cam3D.needChange?(this.oldPos.x=a.x,this.oldPos.y=a.y,!0):!1},Object.defineProperty(a.prototype,"data",{get:function(){return this._data},set:function(a){this._data=a,this.makeData(),this.time=0,this.update()},enumerable:!0,configurable:!0}),a.prototype.makeData=function(){},a.prototype.update=function(){},a.prototype.Vector3DToVector2D=function(a){var b=Scene_data.cam3D.cameraMatrix.clone();b.append(Scene_data.viewMatrx3D.clone());var c=b.transformVector(a),d=new Vector2D;return d.x=(c.x/c.w+1)*(Scene_data.stageWidth/2)/UIData.Scale-this.ui.width/2,d.y=(-c.y/c.w+1)*(Scene_data.stageHeight/2)/UIData.Scale-this.ui.height/2,d},a.prototype.isEqualLastKey=function(a){return!1},a}(),Dis2DUIContianerBase=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.update=function(a){},b}(UIConatiner),Dis2DUIContianerPanel=function(a){function b(b,c,d){a.call(this),this.width=UIData.designWidth,this.height=UIData.designHeight,this.creatBaseRender(),this.addRender(this._baseRender),this.initData(b,c,d)}return __extends(b,a),b.prototype.creatBaseRender=function(){this._baseRender=new UIRenderComponent},b.prototype.initData=function(a,b,c){this._voNum=Math.floor(c),this._voRect=b,this._textureRect=new Rectangle(0,0,Math.pow(2,Math.ceil(Math.log(b.width)/Math.log(2))),Math.pow(2,Math.ceil(Math.log(b.height*this._voNum)/Math.log(2)))),this._baseRender.uiAtlas=new UIAtlas;var d=this._baseRender.uiAtlas;d.configData=new Array,d.ctx=UIManager.getInstance().getContext2D(this._textureRect.width,this._textureRect.height,!1),d.textureRes=TextureManager.getInstance().getCanvasTexture(d.ctx),this.makeBaseUi(a)},b.prototype.makeBaseUi=function(a){var b=this._baseRender.uiAtlas;this._uiItem=new Array,this._lostItem=new Array;for(var c=0;c<this._voNum;c++){var d=new a;this._uiItem.push(d),d.parent=this._baseRender,d.voRect=this._voRect,d.textureStr="id"+c,b.configData.push(b.getObject(d.textureStr,0,c*this._voRect.height,this._voRect.width,this._voRect.height,this._textureRect.width,this._textureRect.height)),d.ui=this._baseRender.creatBaseComponent(d.textureStr),d.ui.width*=1,d.ui.height*=1}},b.prototype.showTemp=function(a){for(var b,c=0;c<this._uiItem.length;c++)if(null==this._uiItem[c].data&&this._uiItem[c].isEqualLastKey(a)){b=this._uiItem[c];break}if(!b)for(var d=0;d<this._uiItem.length;d++)if(null==this._uiItem[d].data){b=this._uiItem[d];break}return b?(b.data=a,this.addChild(b.ui)):this._lostItem.push(a),b},b.prototype.playLost=function(){this._lostItem.length&&this.showTemp(this._lostItem.pop())},b.prototype.clearTemp=function(a){for(var b=0;b<this._uiItem.length;b++)if(this._uiItem[b].data==a){this._uiItem[b].data=null,this.removeChild(this._uiItem[b].ui);break}},b.prototype.clearAll=function(){for(var a=0;a<this._uiItem.length;a++)this._uiItem[a].data&&this.clearTemp(this._uiItem[a].data)},b.prototype.update=function(a){for(var b=0;b<this._uiItem.length;b++)this._uiItem[b].data&&this._uiItem[b].update()},b.prototype.getUiItemLen=function(){for(var a=0,b=0;b<this._uiItem.length;b++)this._uiItem[b].data&&a++;return a},b}(Dis2DUIContianerBase),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},AlphaUIShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Pos"),a.bindAttribLocation(this.program,1,"v2uv")},b.prototype.getVertexShaderString=function(){var a="attribute vec3 v3Pos;attribute vec3 v2uv;uniform vec4 ui[40];uniform vec4 ui2[40];uniform float alpha[40];varying vec2 v_texCoord;varying float v_alpha;void main(void){   vec4 data = ui2[int(v2uv.z)];   v_texCoord = vec2(v2uv.x * data.x + data.z, v2uv.y * data.y + data.w);   v_alpha = alpha[int(v2uv.z)];   data = ui[int(v2uv.z)];   vec3 pos = vec3(0.0,0.0,0.0);   pos.xy = v3Pos.xy * data.zw * 2.0;   pos.x += data.x * 2.0 - 1.0;   pos.y += -data.y * 2.0 + 1.0;   vec4 vt0= vec4(pos, 1.0);   gl_Position = vt0;}";return a},b.prototype.getFragmentShaderString=function(){var a=" precision mediump float;\nuniform sampler2D s_texture;\nvarying vec2 v_texCoord;\nvarying float v_alpha;void main(void)\n{\nvec4 infoUv = texture2D(s_texture, v_texCoord.xy);\ninfoUv.xyz *= infoUv.w;\ninfoUv *=v_alpha;\ngl_FragColor = infoUv;\n}";return a},b.AlphaUiShader="AlphaUiShader",b}(Shader3D),AlphaUIRenderComponent=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.update=function(){if(this.visible&&0!=this._uiList.length){Scene_data.context3D.setBlendParticleFactors(0),Scene_data.context3D.setProgram(this.program);for(var a=0;a<this._uiList.length;a++)this._uiList[a].update(),this._uiList[a].setVc(this.shader,a);Scene_data.context3D.setVa(0,3,this.objData.vertexBuffer),Scene_data.context3D.setVa(1,3,this.objData.uvBuffer),this.uiAtlas?Scene_data.context3D.setRenderTexture(this.shader,"s_texture",this.uiAtlas.texture,0):Scene_data.context3D.setRenderTexture(this.shader,"s_texture",this.texture,0),Scene_data.context3D.drawCall(this.objData.indexBuffer,this.objData.treNum)}},b.prototype.initData=function(){this._uiList=new Array,this.objData=new ObjData,ProgrmaManager.getInstance().registe(AlphaUIShader.AlphaUiShader,new AlphaUIShader),this.shader=ProgrmaManager.getInstance().getProgram(AlphaUIShader.AlphaUiShader),this.program=this.shader.program,this.uiProLocation=Scene_data.context3D.getLocation(this.program,"ui"),this.ui2ProLocation=Scene_data.context3D.getLocation(this.program,"ui2"),this.alphaLocation=Scene_data.context3D.getLocation(this.program,"alpha")},b.prototype.creatBaseComponent=function(a){var b=new AlphaUICompenent;b.skinName=a;var c=this.uiAtlas.getRec(a);return b.tr.setRec(c),b.width=c.pixelWitdh,b.height=c.pixelHeight,b.uiRender=this,b},b.prototype.creatGrid9Component=function(a,b,c){var d=new AlphaGrid9UICompenent;d.skinName=a;var e=this.uiAtlas.getGridRec(a);return d.tr.setRec(e),d.ogw=e.ogw,d.ogh=e.ogh,d.gw=d.ogw/e.pixelWitdh,d.gh=d.ogh/e.pixelHeight,d.width=b,d.height=c,d.uiRender=this,d},b}(UIRenderComponent),AlphaGrid9UICompenent=function(a){function b(){a.call(this),this.alpha=1}return __extends(b,a),b.prototype.setVc=function(a,b){Scene_data.context3D.setVc4fv(a,"ui["+b+"]",this.renderData),Scene_data.context3D.setVc4fv(a,"ui2["+b+"]",this.renderData2),Scene_data.context3D.setVc1fv(a,"alpha["+b+"]",[this.alpha])},b}(Grid9Compenent),AlphaUICompenent=function(a){function b(){a.call(this),this.alpha=1}return __extends(b,a),b.prototype.setVc=function(a,b){Scene_data.context3D.setVc4fv(a,"ui["+b+"]",this.renderData),Scene_data.context3D.setVc4fv(a,"ui2["+b+"]",this.renderData2),Scene_data.context3D.setVc1fv(a,"alpha["+b+"]",[this.alpha])},b}(UICompenent),AlphaUiContianer=function(a){function b(b,c,d){a.call(this,b,c,d)}return __extends(b,a),b.prototype.creatBaseRender=function(){this._baseRender=new AlphaUIRenderComponent},b}(Dis2DUIContianerPanel),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},RoationUIShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Pos"),a.bindAttribLocation(this.program,1,"v2uv")},b.prototype.getVertexShaderString=function(){var a="attribute vec3 v3Pos;attribute vec3 v2uv;uniform vec4 ui[40];uniform vec4 ui2[40];uniform float rotation[40];varying vec2 v_texCoord;void main(void){   vec4 data = ui2[int(v2uv.z)];   v_texCoord = vec2(v2uv.x * data.x + data.z, v2uv.y * data.y + data.w);   float angle = rotation[int(v2uv.z)];   data = ui[int(v2uv.z)];vec3 pos = vec3(0.0,0.0,0.0);vec4 np = vec4(sin(angle), cos(angle), 0, 0);\npos.x = np.x * v3Pos.y + np.y * v3Pos.x;\npos.y = np.y * v3Pos.y - np.x * v3Pos.x;\n pos.xy = pos.xy * data.zw * 2.0;   pos.x += data.x * 2.0 - 1.0;   pos.y += -data.y * 2.0 + 1.0;   vec4 vt0= vec4(pos, 1.0);   gl_Position = vt0;}";return a},b.prototype.getFragmentShaderString=function(){var a="precision mediump float;\nuniform sampler2D s_texture;\nvarying vec2 v_texCoord;\nvoid main(void)\n{\nvec4 infoUv = texture2D(s_texture, v_texCoord.xy);\ninfoUv.xyz *= infoUv.w;\ngl_FragColor = infoUv;\n}";return a},b.RoationUiShader="RoationUiShader",b}(Shader3D),RoationUIRenderComponent=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.update=function(){if(this.visible&&0!=this._uiList.length){Scene_data.context3D.setBlendParticleFactors(0),Scene_data.context3D.setProgram(this.program);for(var a=0;a<this._uiList.length;a++)this._uiList[a].update(),this._uiList[a].setVc(this.shader,a);Scene_data.context3D.setVa(0,3,this.objData.vertexBuffer),Scene_data.context3D.setVa(1,3,this.objData.uvBuffer),this.uiAtlas?Scene_data.context3D.setRenderTexture(this.shader,"s_texture",this.uiAtlas.texture,0):Scene_data.context3D.setRenderTexture(this.shader,"s_texture",this.texture,0),Scene_data.context3D.drawCall(this.objData.indexBuffer,this.objData.treNum)}},b.prototype.initData=function(){this._uiList=new Array,this.objData=new ObjData,ProgrmaManager.getInstance().registe(RoationUIShader.RoationUiShader,new RoationUIShader),this.shader=ProgrmaManager.getInstance().getProgram(RoationUIShader.RoationUiShader),this.program=this.shader.program,this.uiProLocation=Scene_data.context3D.getLocation(this.program,"ui"),this.ui2ProLocation=Scene_data.context3D.getLocation(this.program,"ui2"),this.alphaLocation=Scene_data.context3D.getLocation(this.program,"rotation")},b.prototype.creatBaseComponent=function(a){var b=new RoationUICompenent;b.skinName=a;var c=this.uiAtlas.getRec(a);return b.tr.setRec(c),b.width=c.pixelWitdh,b.height=c.pixelHeight,b.uiRender=this,b},b}(UIRenderComponent),RoationUICompenent=function(a){function b(){a.call(this),this.alpha=.5}return __extends(b,a),b.prototype.setVc=function(a,b){Scene_data.context3D.setVc4fv(a,"ui["+b+"]",this.renderData),Scene_data.context3D.setVc4fv(a,"ui2["+b+"]",this.renderData2),Scene_data.context3D.setVc1fv(a,"rotation["+b+"]",[this.alpha]),this.alpha+=.01},b}(UICompenent),IconManager=function(){function a(){this._dic=new Object,this._loadDic=new Object}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a}(),UiTweenVo=function(){function a(){this._scale=1}return Object.defineProperty(a.prototype,"ui",{get:function(){return this._ui},set:function(a){this._ui=a,this._baseRect=new Rectangle(this._ui.x,this._ui.y,this._ui.width,this._ui.height)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scale",{get:function(){return this._scale},set:function(a){this._scale=a,this._ui.width=this._baseRect.width*this._scale,this._ui.height=this._baseRect.height*this._scale,this._ui.x=this._baseRect.x+(this._baseRect.width-this._ui.width)/2,this._ui.y=this._baseRect.y+(this._baseRect.height-this._ui.height)/2},enumerable:!0,configurable:!0}),a.prototype.destory=function(){this._ui=null,this._scale=null,this._baseRect=null},a.getPosByPanel=function(a,b,c){if(void 0===b&&(b=null),void 0===c&&(c=null),this.baseUIConatiner||(this.baseUIConatiner=new UIConatiner),this.baseUIConatiner.width=UIData.designWidth,this.baseUIConatiner.height=UIData.designHeight,this.baseUIConatiner.middle=0,this.baseUIConatiner.center=0,b)for(var d in b)this.baseUIConatiner[d]=b[d];this.baseUIConatiner.resize();var e=new Vector2D;return e.x=a.x+this.baseUIConatiner.x/UIData.Scale,e.y=a.y+this.baseUIConatiner.y/UIData.Scale,c&&(e.x=e.x-c.x/UIData.Scale,e.y=e.y-c.y/UIData.Scale),e},a}(),UiTweenScale=function(){function a(){}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.changeButSize=function(a){var b=this;this._uiTweenVo||(this._uiTweenVo=new UiTweenVo,this._uiTweenVo.ui=a,this._uiTweenVo.scale=1,TweenMoveTo(this._uiTweenVo,.07,{scale:1.2,onComplete:function(){b.changeButScale()}}))},a.prototype.changeButScale=function(){var a=this;this._uiTweenVo.scale=1.2,TweenMoveTo(this._uiTweenVo,.05,{scale:1,onComplete:function(){a.changeButEnd()}})},a.prototype.changeButEnd=function(){this._uiTweenVo.destory(),this._uiTweenVo=null},a}(),UIManager=function(){function a(){this._eventItem=new Array,this.lastTime=0,Scene_data.uiStage=new UIStage,Scene_data.uiBlankStage=new UIStage,this._canvas=document.createElement("canvas"),this._canvas.style.zIndex="3",this._canvas.width=200,this._canvas.height=200,this._canvas.style.left=200,this._canvas.style.top=300,this._ctx=this._canvas.getContext("2d"),this._ctx.textBaseline=TextAlign.TOP}return a.getInstance=function(){var b=this;return this._instance||(this._instance=new a,a.popClikNameFun=function(a,c){void 0===c&&(c=0),b.uiClikName(a,c)}),this._instance},a.uiClikName=function(a,b){},a.prototype.getContext2D=function(a,b,c){return void 0===c&&(c=!0),this._canvas.width=a,this._canvas.height=b,this._ctx.clearRect(0,0,a,b),c=!0,c&&(this._ctx.textBaseline=TextAlign.TOP,this._ctx.textAlign=TextAlign.LEFT),this._ctx},a.prototype.getGrayImageDatabyImg=function(b){var c=a.getInstance().getContext2D(b.width,b.height,!1);c.drawImage(b,0,0);for(var d,e=c.getImageData(0,0,b.width,b.height),f=0;f<e.data.length;f+=4)d=Math.floor(.3*e.data[f+0])+Math.floor(.59*e.data[f+1])+Math.floor(.11*e.data[f+2]),e.data[f+0]=d,e.data[f+1]=d,e.data[f+2]=d;return e},a.prototype.makeCtxToGray=function(a,b){for(var c,d=a.getImageData(b.x,b.y,b.width,b.height),e=0;e<d.data.length;e+=4)c=Math.floor(.3*d.data[e+0])+Math.floor(.59*d.data[e+1])+Math.floor(.11*d.data[e+2]),c=.5*c+.5,d.data[e+0]=c,d.data[e+1]=c,d.data[e+2]=c;a.putImageData(d,b.x,b.y)},a.prototype.showCanvas=function(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this._canvas.style.left=a,this._canvas.style.top=b,document.getElementById("root").appendChild(this._canvas)},a.prototype.init=function(){ProgrmaManager.getInstance().registe(UIShader.UI_SHADER,new UIShader),ProgrmaManager.getInstance().registe(UIImageShader.UI_IMG_SHADER,new UIImageShader),ProgrmaManager.getInstance().registe(UIMaskShader.UI_MASK_SHADER,new UIMaskShader),ProgrmaManager.getInstance().registe(Movie2DShader.MOVIE2D_SHADER,new Movie2DShader),ProgrmaManager.getInstance().registe(Sprite2DShader.SPRITE2D_SHADER,new Sprite2DShader),this._uiList=new Array,this._containerList=new Array,UIData.setDesignWH(960,540)},a.prototype.addUI=function(a){for(var b=0,c=this._uiList.length-1;c>=0;c--)if(this._uiList[c].sortnum<=a.sortnum){b=c+1;break}this._uiList.splice(b,0,a),a.rendering=!0},a.prototype.removeUI=function(a){var b=this._uiList.indexOf(a);a.rendering=!1,-1!=b&&this._uiList.splice(b,1)},a.prototype.addUIContainer=function(a){if(!a.hasStage){this._containerList.push(a),a.resize();for(var b=0;b<a.renderList.length;b++)this.addUI(a.renderList[b]);a.hasStage=!0}},a.prototype.removeAll=function(){for(;this._containerList.length;)this.removeUIContainer(this._containerList[this._containerList.length-1])},a.prototype.removeUIContainer=function(a){if(a.hasStage){var b=this._containerList.indexOf(a);a.hasStage=!1,-1!=b&&this._containerList.splice(b,1);for(var c=0;c<a.renderList.length;c++)this.removeUI(a.renderList[c])}},a.prototype.resize=function(){if(this._uiList){UIData.resize();for(var a=0;a<this._uiList.length;a++)this._uiList[a].resize();for(var a=0;a<this._containerList.length;a++)this._containerList[a].resize()}},a.prototype.update=function(){for(var a=0;a<this._uiList.length;a++)1==this._uiList[a].container.interfaceUI&&this._uiList[a].update();for(var a=0;a<this._uiList.length;a++)0==this._uiList[a].container.interfaceUI&&this._uiList[a].update()},a.prototype.regEvent=function(a){},a.prototype.onTouch=function(a){this.interactiveEvent(a)},a.prototype.onMouse=function(a){this.interactiveEvent(a)},a.prototype.interactiveEvent=function(a){var b,c=new Vector2D;if(a instanceof MouseEvent)a.type==MouseType.MouseDown?b=new InteractiveEvent(InteractiveEvent.Down):a.type==MouseType.MouseUp?b=new InteractiveEvent(InteractiveEvent.Up):a.type==MouseType.MouseMove?b=new InteractiveEvent(InteractiveEvent.Move):a.type==MouseType.MouseClick,c.x=a.pageX,c.y=a.pageY;else if(a.type==MouseType.TouchStart?(b=new InteractiveEvent(InteractiveEvent.Down),a.touches.length>1?(c.x=a.touches[a.touches.length-1].pageX,c.y=a.touches[a.touches.length-1].pageY):(c.x=a.pageX,c.y=a.pageY)):a.type==MouseType.TouchEnd?(b=new InteractiveEvent(InteractiveEvent.Up),c.x=a.changedTouches[0].pageX,c.y=a.changedTouches[0].pageY):a.type==MouseType.TouchMove&&(a.touches.length>1?(b=new InteractiveEvent(InteractiveEvent.Pinch),b.data=MathClass.math_distance(a.touches[0].clientX,a.touches[0].clientY,a.touches[1].clientX,a.touches[1].clientY)/this.lastSwipeDis,b.roation=180*(Math.atan2(a.touches[1].clientY-a.touches[0].clientY,a.touches[1].clientX-a.touches[0].clientX)-this.lastSwipeRot)/Math.PI):b=new InteractiveEvent(InteractiveEvent.Move),c.x=a.pageX,c.y=a.pageY),a.touches.length)for(var d=0;d<a.touches.length;d++)c.x=a.touches[d].clientX,c.y=a.touches[d].clientY;this.mouseEvetData(b,c)},a.prototype.disMoveNnum=function(a,b){return Vector2D.distance(a,this.lastMousePos)<b},a.prototype.mouseEvetData=function(b,c){a.cando=!0,Scene_data.verticalScene?(b.x=c.y,b.y=Scene_data.stageHeight-c.x):(b.x=c.x,b.y=c.y);var d=!1;if(!d)for(var e=this._uiList.length-1;e>=0;e--)if(this._uiList[e]&&0==this._uiList[e].container.interfaceUI&&this._uiList[e]&&this._uiList[e].interactiveEvent(b)){d=!0;break}if(!d)for(var e=this._uiList.length-1;e>=0;e--)if(this._uiList[e]&&1==this._uiList[e].container.interfaceUI&&this._uiList[e]&&this._uiList[e].interactiveEvent(b)){d=!0;break}if(b.type==InteractiveEvent.Down){this.lastMousePos=new Vector2D(b.x,b.y);var f=TimeUtil.getTimer()-this.lastTime;if(200>f)return!0;this.lastTime=TimeUtil.getTimer()}return Scene_data.uiStage.interactiveEvent(b),d?!0:(Scene_data.uiBlankStage.interactiveEvent(b),!1)},a.prototype.setUseMouseEventCon=function(a){this._eventItem.length=0,a&&this._eventItem.push(a)},a.prototype.getcurrentList=function(){for(var a=new Array,b=this._uiList.length-1;b>0;b--)if(this._eventItem.length)for(var c=0;c<this._eventItem.length;c++)this._eventItem[c]!=this._uiList[b].container||(a.push(this._uiList[b]),c=this._eventItem.length);else a.push(this._uiList[b]);return a},a.cando=!0,a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},UILoading=function(a){function b(){a.call(this),this.width=960,this.height=540,this.center=0,this.middle=0,this.initData()}return __extends(b,a),b.getInstance=function(){return this._instance||(this._instance=new b),this._instance},b.prototype.initData=function(){var a=this;this.atls=new UIAtlas,this.atls.configData=new Array,this.atls.configData.push(this.atls.getObject("load",0,0,256,256,256,256,4,4)),this.atls.loadImgUrl("ui/load/ui_loding.png",function(){a.loadCom()})},b.prototype.loadCom=function(){this._render=new UIRenderComponent,this._render.uiAtlas=this.atls;var a=this._render.createFrame("load");this.addChild(a),a.speed=1,a.width=100,a.height=100,a.x=(960-a.width)/2,a.y=(540-a.height)/2,this.addRender(this._render)},b.prototype.show=function(){UIManager.getInstance().addUIContainer(this)},b.prototype.hide=function(){UIManager.getInstance().removeUIContainer(this)},b}(UIConatiner),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},UIStage=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.interactiveEvent=function(a){var b=a.type,c=this._eventsMap;if(c){var d=c[b];if(d){var e=d.length;if(0!=e)for(var f=e-1;f>=0;f--){var g=d[f];g.listener.call(g.thisObject,a)}}}},b}(EventDispatcher),PuiData=function(){function a(){}return a.A_HIGHT_F="A_hight_f",a.TAB_HIGHT="Tab_hight",a.A_HIGHT_C="A_hight_c",a.A_DELETEBTN="A_deletebtn",a.A_ZHENQI="A_zhenqi",a.A_SHOULING="A_SHOULING",a.A_JINGHUA="A_JINGHUA",a.A_JIANTOU="A_jiantou",a.A_WUPINKUANG="A_wupinkuang",a.A_BLACK_C="A_black_c",a.A_BLACK_F="A_black_f",a.A_BLACK_START="A_black_start",a.A_HIGHT_START="A_hight_start",a.A_BLACK_BASE="A_black_base ",a.A_RED_POINT="A_red_point",a.A_YINBI="A_yinbi",a.A_YUANBAO="A_yuanbao",a.A_BANGGONG="A_banggong",a.A_DOUHUN="A_DOUHUN",a.A_EXP="A_EXP",a.A_HONOR="A_HONOR",a.A_BANGYUAN="A_bangyuan",a.A_RIGHT_XING="A_RIGHT_XING",a.A_SSTART="A_SSTART",a.A_LEFT_XING="A_LEFT_XING",a.A_GOODS_PURPLE="A_GOODS_PURPLE",a.A_GOODS_BLUE="A_GOODS_BLUE",a.A_GOODS_RED="A_GOODS_RED",a.A_GOODS_GREEN="A_GOODS_GREEN",a.A_GOODS_WHITE="A_GOODS_WHITE",a.A_GOODS_ORANGE="A_GOODS_ORANGE",a.A_START_BG="A_START_BG",a.A_START="A_START",a.A_CHAIN="A_CHAIN",a.A_OK="A_OK",a.A_QIANWANG="A_QIANWANG",a.T_LEFT="T_LEFT",a.T_MID="T_MID",a.T_RIGHT="T_RIGHT",a.E_LEFT="E_LEFT",a.E_MID="E_MID",a.E_RIGHT="E_RIGHT",a.F_LEFT="F_LEFT",a.F_MID="F_MID",a.F_RIGHT="F_RIGHT",a.A_F_22="A_F_22",a.A_BLACK_BASE_66="A_BLACK_BASE_66 ",a.A_HIGHR_C_66="A_HIGHR_C_66",a.A_V="A_V",a.A_GIVING_BG="A_GIVING_BG",a.B_SUB="B_SUB",a.A_FACTION_ICON="A_FACTION_ICON",a.SELECT_1="SELECT_1",a.SELECT_0="SELECT_0",a.A_JIE="A_JIE",a.A_XING="A_XING",a.T_tips_txt_bg="T_tips_txt_bg",a.ITEMBG="ITEMBG",a.A_quest_top="A_quest_top",a.A_quest_mid="A_quest_mid",a.A_quest_bottom="A_quest_bottom",a.A_quest_ion0="A_quest_ion0",a.A_quest_ion1="A_quest_ion1",a.A_quest_ion2="A_quest_ion2",a.A_quest_ion3="A_quest_ion3",a.A_quest_finish="A_quest_finish",a.A_zhanli_label="A_zhanli_label",a.A_gou="A_gou",a.A_cha="A_cha",a.TYPE3="TYPE3",a.TYPE5="TYPE5",a.TYPE9="TYPE9",a.TYPE7="TYPE7",a.B_ZHUFUZHI="B_ZHUFUZHI",a.B_DABAOJI="B_DABAOJI",a.B_XIAOBAOJI="B_XIAOBAOJI",a.B_JINGYAN="B_JINGYAN",a.NewPicBg="NewPicBg",a.Select="Select",a.CostBg="CostBg",a.BG2="BG2",a.PropBg40="PropBg40",a.PropBg60="PropBg60",a.REWARD_BG1="REWARD_BG1",a.SKILL_BG68="SKILL_BG68",a.SKILL_BG58="SKILL_BG58",a.TBg11="TBg11",a.TBg12="TBg12",a.BG6="BG6",a.RANKBG="RANKBG",a.Slist_nselect="Slist_nselect",a.Slist_select="Slist_select",a.TXTBG="TXTBG",a.ARROW_TOP="ARROW_TOP",a.ARROW_RIGHT="ARROW_RIGHT",a.MASK="MASK",a.BTNADD="BTNADD",a.BOSSBG76="BOSSBG76",a.BOSSBG64="BOSSBG64",a.CIRCL74="CIRCL74",a.LISTITEMBG="LISTITEMBG",a.ADDITEM="ADDITEM",a.HASSEL="HASSEL",a.SKILL_LEV_BG="SKILL_LEV_BG",a.TITLEBG="TITLEBG",a.TITLEHIGHT="TITLEHIGHT",a.NEWLISTITEMBG="NEWLISTITEMBG",a.CHATBG="CHATBG",a.ITEMBIGBG="ITEMBIGBG",a.I1bg_2="I1bg_2",a.I1bg_1="I1bg_1",a.ARROWUP="ARROWUP",a.ARROWDOWN="ARROWDOWN",a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},TextureRes=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.destory=function(){Scene_data.context3D.deleteTexture(this.texture)},b}(ResCount),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},TextureManager=function(a){function b(){a.call(this),this._loadDic=new Object,this._resDic=new Object,this.initDefaultLightMapTexture()}return __extends(b,a),b.getInstance=function(){return this._instance||(this._instance=new b),this._instance},b.prototype.hasTexture=function(a){return this._dic[a]?!0:!1},b.prototype.getTexture=function(a,b,c,d,e,f){var g=this;if(void 0===c&&(c=0),void 0===d&&(d=null),void 0===e&&(e=0),void 0===f&&(f=0),this._dic[a])return d?b(this._dic[a],d):b(this._dic[a]),void this._dic[a].useNum++;var h=new TextureLoad(b,d,a,c,e,f);if(this._loadDic[a]){var i=this._loadDic[a];return void i.push(h)}this._loadDic[a]=new Array,this._loadDic[a].push(h),this._resDic[a]?(this.loadTextureCom(this._resDic[a],h),delete this._resDic[a]):LoadManager.getInstance().load(a,LoadManager.IMG_TYPE,function(a,b){g.loadTextureCom(a,b)},h)},b.prototype.getImageData=function(a,b){LoadManager.getInstance().load(a,LoadManager.IMG_TYPE,function(a){var c=UIManager.getInstance().getContext2D(a.width,a.height,!1);c.drawImage(a,0,0,a.width,a.height);var d=c.getImageData(0,0,a.width,a.height);b(d)})},b.prototype.addRes=function(a,b){this._dic[a]||this._resDic[a]||(this._resDic[a]=b)},b.prototype.getCanvasTexture=function(a){var b=new TextureRes,c=Scene_data.context3D.getTexture(a.canvas,0,0);return b.texture=c,b},b.prototype.getImageDataTexture=function(a){var b=Scene_data.context3D.getTexture(a,0,0);return b},b.prototype.getTextureRes=function(a){var b=new TextureRes,c=Scene_data.context3D.getTexture(a,0,0);return b.texture=c,b},b.prototype.updateTexture=function(a,b,c,d){Scene_data.context3D.updateTexture(a,b,c,d.canvas)},b.prototype.loadCubeTexture=function(a,b){var c=new CubemapLoad;c.loadCube(a,function(a){b(a)})},b.prototype.loadTextureCom=function(a,b){var c=Scene_data.context3D.getTexture(a,b.wrap,b.filter,b.mipmap),d=new TextureRes;d.texture=c,d.width=a.width,d.height=a.height;for(var e=this._loadDic[b.url],f=0;f<e.length;f++)e[f].info?e[f].fun(d,e[f].info):e[f].fun(d),d.useNum++;delete this._loadDic[b.url],this._dic[b.url]=d},b.prototype.initDefaultLightMapTexture=function(){var a=document.createElement("canvas"),b=a.getContext("2d");a.width=32,a.height=32,b.fillStyle="rgb(51,51,51)",b.fillRect(0,0,32,32),this.defaultLightMap=Scene_data.context3D.getTexture(a)},b.prototype.gc=function(){a.prototype.gc.call(this)},b}(ResGC),TextureLoad=function(){function a(a,b,c,d,e,f){this.fun=a,this.info=b,this.url=c,this.wrap=d,this.filter=e,this.mipmap=f}return a}(),CubemapLoad=function(){function a(){this.ary=new Array(6),this.flagNum=0}return a.prototype.loadCube=function(a,b){var c=this;this.fun=b;for(var d=0;6>d;d++){var e=a+"0"+(d+1)+".jpg";LoadManager.getInstance().load(e,LoadManager.IMG_TYPE,function(a,b){c.loadCom(a,b)},{id:d})}},a.prototype.loadCom=function(a,b){var c=a.width/4,d=document.createElement("canvas"),e=d.getContext("2d");d.width=c,d.height=c;var f=Scene_data.context3D.renderContext,g=f.createTexture();f.bindTexture(f.TEXTURE_CUBE_MAP,g),e.drawImage(a,2*c,c,c,c,0,0,c,c),f.texImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,d),f.texParameteri(f.TEXTURE_CUBE_MAP,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_CUBE_MAP,f.TEXTURE_MIN_FILTER,f.LINEAR),e.drawImage(a,0,c,c,c,0,0,c,c),f.texImage2D(f.TEXTURE_CUBE_MAP_NEGATIVE_X,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,d),f.texParameteri(f.TEXTURE_CUBE_MAP,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_CUBE_MAP,f.TEXTURE_MIN_FILTER,f.LINEAR),e.drawImage(a,c,0,c,c,0,0,c,c),f.texImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_Y,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,d),f.texParameteri(f.TEXTURE_CUBE_MAP,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_CUBE_MAP,f.TEXTURE_MIN_FILTER,f.LINEAR),e.drawImage(a,c,2*c,c,c,0,0,c,c),f.texImage2D(f.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,d),f.texParameteri(f.TEXTURE_CUBE_MAP,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_CUBE_MAP,f.TEXTURE_MIN_FILTER,f.LINEAR),e.drawImage(a,c,c,c,c,0,0,c,c),f.texImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_Z,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,d),f.texParameteri(f.TEXTURE_CUBE_MAP,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_CUBE_MAP,f.TEXTURE_MIN_FILTER,f.LINEAR),e.drawImage(a,3*c,c,c,c,0,0,c,c),f.texImage2D(f.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,d),f.texParameteri(f.TEXTURE_CUBE_MAP,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_CUBE_MAP,f.TEXTURE_MIN_FILTER,f.LINEAR),this.ary[b.id]=g,this.flagNum++,6==this.flagNum&&this.fun(this.ary)},a}(),ConstItem=function(){function a(){this.value=new Vector3D,this.offset=0}return Object.defineProperty(a.prototype,"id",{get:function(){return this._id},set:function(a){this._id=a,this.name="fc"+a,this.offset=4*a},enumerable:!0,configurable:!0}),a.prototype.creat=function(a){this.vecNum=a,this.vecNum[0+this.offset]=this.value.x,this.vecNum[1+this.offset]=this.value.y,this.vecNum[2+this.offset]=this.value.z,this.vecNum[3+this.offset]=this.value.w},a.prototype.setData=function(a){this.id=a.id,this.value=new Vector3D(a.value.x,a.value.y,a.value.z,a.value.w),this.paramName0=a.paramName0,this.param0Type=a.param0Type,this.param0Index=a.param0Index,this.paramName1=a.paramName1,this.param1Type=a.param1Type,this.param1Index=a.param1Index,this.paramName2=a.paramName2,this.param2Type=a.param2Type,this.param2Index=a.param2Index,this.paramName3=a.paramName3,this.param3Type=a.param3Type,this.param3Index=a.param3Index},a.prototype.setDynamicOffset=function(a){this.paramName0==a.paramName?a.targetOffset=this.param0Index+this.offset:this.paramName1==a.paramName?a.targetOffset=this.param1Index+this.offset:this.paramName2==a.paramName?a.targetOffset=this.param2Index+this.offset:this.paramName3==a.paramName&&(a.targetOffset=this.param3Index+this.offset)},a.prototype.setDynamicDirect=function(a,b){this.vecNum.set(a,b)},a.prototype.setDynamic=function(a){try{this.vecNum.set(a.currentValue,a.targetOffset)}catch(b){console.log("在此处理错误2")}},a}(),TexItem=function(){function a(){}return a.prototype.destory=function(){this.textureRes&&this.textureRes.clearUseNum()},Object.defineProperty(a.prototype,"id",{get:function(){return this._id},set:function(a){this._id=a,this.name="fs"+a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"texture",{get:function(){return this.textureRes?this.textureRes.texture:null},enumerable:!0,configurable:!0}),a.LIGHTMAP=1,a.LTUMAP=2,a.CUBEMAP=3,a.HEIGHTMAP=4,a.REFRACTIONMAP=5,a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Material=function(a){function b(){a.apply(this,arguments),this.texList=new Array,this.constList=new Array,this.killNum=0,this.writeZbuffer=!0,this.fogMode=0,this.fcNum=0}return __extends(b,a),b.prototype.update=function(a){this.updateTime(a),this.updateScene()},b.prototype.updateTime=function(a){this.hasTime&&(this.fcData[1]=a)},b.prototype.updateCam=function(a,b,c){if(this.usePbr||1==this.fogMode){var d=4*this.fcIDAry[0];this.fcData[0+d]=a,this.fcData[1+d]=b,this.fcData[2+d]=c}},b.prototype.updateScene=function(){if(this.sceneNumId!=Scene_data.sceneNumId){if(this.sceneNumId=Scene_data.sceneNumId,0!=this.fogMode){var a=4*this.fcIDAry[1];this.fcData[0+a]=Scene_data.fogColor[0],this.fcData[1+a]=Scene_data.fogColor[1],this.fcData[2+a]=Scene_data.fogColor[2]}if(this.scaleLightMap){var a=4*this.fcIDAry[2];this.fcData[0+a]=Scene_data.scaleLight[0]}}},b.prototype.initFcData=function(){if(this.fcData=new Float32Array(4*this.fcNum),!(this.fcNum<=0)){if(this.sceneNumId=Scene_data.sceneNumId,(this.hasTime||this.useKill||0!=this.fogMode)&&(this.useKill&&(this.fcData[0]=this.killNum),0!=this.fogMode&&(this.fcData[2]=Scene_data.fogData[0],this.fcData[3]=Scene_data.fogData[1])),
this.usePbr||1==this.fogMode){var a=4*this.fcIDAry[0];this.fcData[0+a]=Scene_data.cam3D.x/100,this.fcData[1+a]=Scene_data.cam3D.y/100,this.fcData[2+a]=Scene_data.cam3D.z/100}if(0!=this.fogMode){var a=4*this.fcIDAry[1];this.fcData[0+a]=Scene_data.fogColor[0],this.fcData[1+a]=Scene_data.fogColor[1],this.fcData[2+a]=Scene_data.fogColor[2]}if(this.scaleLightMap){var a=4*this.fcIDAry[2];this.fcData[0+a]=Scene_data.scaleLight[0]}}},b.prototype.setCompileData=function(a){if(a){if(this.shaderStr=a.shaderStr,this.hasTime=a.hasTime,this.timeSpeed=a.timeSpeed,this.blendMode=a.blendMode,this.backCull=a.backCull,this.killNum=a.killNum,this.hasVertexColor=a.hasVertexColor,this.usePbr=a.usePbr,this.useNormal=a.useNormal,this.roughness=a.roughness,this.writeZbuffer=a.writeZbuffer,this.hasFresnel=a.hasFresnel,this.useDynamicIBL=a.useDynamicIBL,this.normalScale=a.normalScale,this.lightProbe=a.lightProbe,this.useKill=a.useKill,this.directLight=a.directLight,this.noLight=a.noLight,this.scaleLightMap=a.scaleLightMap,this.fogMode=a.fogMode,this.hasParticleColor=!1,this.initFcData(),a.texList){var b=a.texList;this.texList=new Array;for(var c=0;c<b.length;c++){var d=new TexItem;d.id=b[c].id,d.url=b[c].url,d.isDynamic=b[c].isDynamic,d.paramName=b[c].paramName,d.isMain=b[c].isMain,d.isParticleColor=b[c].isParticleColor,d.type=b[c].type,d.wrap=b[c].wrap,d.filter=b[c].filter,d.mipmap=b[c].mipmap,this.texList.push(d),d.isParticleColor&&(this.hasParticleColor=!0)}}if(a.constList)for(b=a.constList,this.constList=new Array,c=0;c<b.length;c++){var e=new ConstItem;e.setData(b[c]),e.creat(this.fcData),this.constList.push(e)}}},b.prototype.setByteData=function(a){var b=a,c=b.readInt();if(this.shaderStr=b.readUTF(),this.hasTime=b.readBoolean(),this.timeSpeed=b.readFloat(),this.blendMode=b.readFloat(),this.backCull=b.readBoolean(),this.killNum=b.readFloat(),this.hasVertexColor=b.readBoolean(),this.usePbr=b.readBoolean(),this.useNormal=b.readBoolean(),this.roughness=b.readFloat(),this.writeZbuffer=b.readBoolean(),this.hasFresnel=b.readBoolean(),this.useDynamicIBL=b.readBoolean(),this.normalScale=b.readFloat(),this.lightProbe=b.readBoolean(),this.useKill=b.readBoolean(),this.directLight=b.readBoolean(),this.noLight=b.readBoolean(),this.scaleLightMap=b.readBoolean(),c>2&&(this.fogMode=b.readInt()),c>=22){this.fcNum=b.readByte();var d=b.readByte();this.fcIDAry=new Array;for(var e=0;d>e;e++)this.fcIDAry.push(b.readByte())}this.hasParticleColor=!1,this.initFcData(),this.readTexList(b),this.readConstLis(b)},b.prototype.readConstLis=function(a){var b=a.readInt();this.constList=new Array;for(var c=0;b>c;c++){var d=new ConstItem;d.id=a.readFloat(),d.value=new Vector3D(a.readFloat(),a.readFloat(),a.readFloat(),a.readFloat()),d.paramName0=a.readUTF(),d.param0Type=a.readFloat(),d.param0Index=a.readFloat(),d.paramName1=a.readUTF(),d.param1Type=a.readFloat(),d.param1Index=a.readFloat(),d.paramName2=a.readUTF(),d.param2Type=a.readFloat(),d.param2Index=a.readFloat(),d.paramName3=a.readUTF(),d.param3Type=a.readFloat(),d.param3Index=a.readFloat(),d.creat(this.fcData),this.constList.push(d)}},b.prototype.readTexList=function(a){var b=a.readInt();this.texList=new Array;for(var c=0;b>c;c++){var d=new TexItem;d.id=a.readFloat(),d.url=a.readUTF(),d.isDynamic=a.readBoolean(),d.paramName=a.readUTF(),d.isMain=a.readBoolean(),d.isParticleColor=a.readBoolean(),d.type=a.readFloat(),d.wrap=a.readFloat(),d.filter=a.readFloat(),d.mipmap=a.readFloat(),d.isParticleColor&&(this.hasParticleColor=!0),this.texList.push(d)}},b.prototype.destory=function(){for(var a=0;a<this.texList.length;a++)this.texList[a].destory();this.texList=null,this.constList=null,this.shader&&this.shader.clearUseNum()},b}(ResCount),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},MaterialManager=function(a){function b(){a.call(this),this._loadDic=new Object,this._resDic=new Object,this._regDic=new Object}return __extends(b,a),b.getInstance=function(){return this._instance||(this._instance=new b),this._instance},b.prototype.getMaterialByte=function(a,b,c,d,e,f){var g=this;if(void 0===c&&(c=null),void 0===d&&(d=!1),void 0===e&&(e=null),void 0===f&&(f=null),this._dic[a])return c?b(this._dic[a],c):b(this._dic[a]),void this._dic[a].useNum++;var h=new MaterialLoad(b,c,a,d,e,f);if(this._loadDic[a]){var i=this._loadDic[a];return void i.push(h)}this._loadDic[a]=new Array,this._loadDic[a].push(h),this._resDic[a]?(this.meshByteMaterialByt(this._resDic[a],h),this._regDic[a]&&(this._dic[a].useNum+=this._regDic[a],delete this._regDic[a]),delete this._resDic[a]):LoadManager.getInstance().load(a,LoadManager.BYTE_TYPE,function(a,b){g.loadMaterialByteCom(a,b)},h)},b.prototype.meshByteMaterialByt=function(a,b){var c=new Material;c.setByteData(a),c.url=b.url,this.loadMaterial(c),b.autoReg&&(c.shader=ProgrmaManager.getInstance().getMaterialProgram(b.regName,b.shader3D,c,null,!0),c.program=c.shader.program);for(var d=this._loadDic[b.url],e=0;e<d.length;e++)d[e].info?d[e].fun(c,d[e].info):d[e].fun(c),c.useNum++;delete this._loadDic[b.url],this._dic[b.url]=c},b.prototype.loadMaterialByteCom=function(a,b){var c=new ByteArray(a);this.meshByteMaterialByt(c,b)},b.prototype.addResByte=function(a,b){this._dic[a]||this._resDic[a]||(this._resDic[a]=b)},b.prototype.registerUrl=function(a){a=a.replace("_byte.txt",".txt"),a=a.replace(".txt","_byte.txt"),this._dic[a]?this._dic[a].useNum++:this._regDic[a]?this._regDic[a]++:1==this._regDic[a]},b.prototype.releaseUrl=function(a){a=a.replace("_byte.txt",".txt"),a=a.replace(".txt","_byte.txt"),this._dic[a]&&this._dic[a].clearUseNum()},b.prototype.loadMaterial=function(a){for(var b=a.texList,c=0;c<b.length;c++)b[c].isParticleColor||b[c].isDynamic||0!=b[c].type||TextureManager.getInstance().getTexture(Scene_data.fileRoot+b[c].url,function(a,b){b.textureRes=a},b[c].wrap,b[c],b[c].filter,b[c].mipmap)},b.prototype.loadDynamicTexUtil=function(a){for(var b=a.dynamicTexList,c=0;c<b.length;c++)b[c].isParticleColor?b[c].creatTextureByCurve():TextureManager.getInstance().getTexture(Scene_data.fileRoot+b[c].url,function(a,b){b.textureRes=a},0,b[c],0,1)},b.prototype.gc=function(){a.prototype.gc.call(this)},b}(ResGC),MaterialLoad=function(){function a(a,b,c,d,e,f){this.fun=a,this.info=b,this.url=c,this.autoReg=d,this.regName=e,this.shader3D=f}return a}(),DynamicBaseConstItem=function(){function a(){}return a.prototype.update=function(a){void 0===a&&(a=0),this.target&&this.target.setDynamic(this)},Object.defineProperty(a.prototype,"type",{get:function(){return this._type},set:function(a){this._type=a},enumerable:!0,configurable:!0}),a.prototype.setTargetInfo=function(a,b,c){this.target=a,this.paramName=b,this.type=c,this.target.setDynamicOffset(this),this.currentValue=new Array(c)},a.prototype.setCurrentVal=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];for(var c=0;c<a.length;c++)this.currentValue[c]=a[c]},a}(),DynamicBaseTexItem=function(){function a(){}return a.prototype.destory=function(){this.textureRes&&this.textureRes.useNum--,this.target=null},Object.defineProperty(a.prototype,"texture",{get:function(){return this.textureRes?this.textureRes.texture:null},enumerable:!0,configurable:!0}),a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},MaterialBaseParam=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.destory=function(){for(var a=0;a<this.dynamicTexList.length;a++)this.dynamicTexList[a].destory();this.dynamicTexList=null,this.dynamicConstList=null},b.prototype.update=function(){if(this.material&&this.dynamicConstList)for(var a=0;a<this.dynamicConstList.length;a++)this.dynamicConstList[a].update()},b.prototype.setData=function(a,b){this.material=a,this.dynamicConstList=new Array,this.dynamicTexList=new Array;for(var c=a.constList,d=a.texList,e=0;e<b.length;e++){var f=b[e];if(0==f.type){var g=new DynamicBaseTexItem;g.paramName=f.name;for(var h=0;h<d.length;h++)if(g.paramName==d[h].paramName){g.target=d[h];break}var i=0;g.target&&(i=g.target.mipmap),i=0,TextureManager.getInstance().getTexture(Scene_data.fileRoot+f.url,function(a){g.textureRes=a},0,null,0,i),this.dynamicTexList.push(g)}else{for(var j=f.name,k=null,h=0;h<c.length;h++)if(j==c[h].paramName0||j==c[h].paramName1||j==c[h].paramName2||j==c[h].paramName3){k=c[h];break}var l=new DynamicBaseConstItem;l.setTargetInfo(k,j,f.type),1==f.type?l.setCurrentVal(f.x):2==f.type?l.setCurrentVal(f.x,f.y):l.setCurrentVal(f.x,f.y,f.z),this.dynamicConstList.push(l)}}},b}(GC),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},MaterialParam=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.destory=function(){this.material.useNum--,this.shader.useNum--,a.prototype.destory.call(this)},b.prototype.setMaterial=function(a){this.material=a,this.materialUrl=a.url,this.dynamicTexList=new Array,this.dynamicConstList=new Array,this.setTexList(),this.setConstList()},b.prototype.setLife=function(a){for(var b=0;b<this.dynamicTexList.length;b++)this.dynamicTexList[b].isParticleColor&&(this.dynamicTexList[b].life=a)},b.prototype.setTexList=function(){for(var a=this.material.texList,b=0;b<a.length;b++){var c;a[b].isParticleColor?(c=new DynamicTexItem,c.target=a[b],c.paramName=a[b].paramName,c.initCurve(4),this.dynamicTexList.push(c),c.isParticleColor=!0):a[b].isDynamic&&(c=new DynamicTexItem,c.target=a[b],c.paramName=a[b].paramName,this.dynamicTexList.push(c))}},b.prototype.setConstList=function(){for(var a=this.material.constList,b=0;b<a.length;b++){var c,d=a[b];0!=d.param0Type&&(c=new DynamicConstItem,c.setTargetInfo(d,d.paramName0,d.param0Type),this.dynamicConstList.push(c)),0!=d.param1Type&&(c=new DynamicConstItem,c.setTargetInfo(d,d.paramName1,d.param1Type),this.dynamicConstList.push(c)),0!=d.param2Type&&(c=new DynamicConstItem,c.setTargetInfo(d,d.paramName2,d.param2Type),this.dynamicConstList.push(c)),0!=d.param3Type&&(c=new DynamicConstItem,c.setTargetInfo(d,d.paramName3,d.param3Type),this.dynamicConstList.push(c))}},b.prototype.setTextObj=function(a){for(var b=0;b<a.length;b++)for(var c=a[b],d=0;d<this.dynamicTexList.length;d++)if(this.dynamicTexList[d].paramName==c.paramName){this.dynamicTexList[d].isParticleColor?this.dynamicTexList[d].curve.setData(c.curve):this.dynamicTexList[d].url=c.url;break}},b.prototype.setConstObj=function(a){for(var b=0;b<a.length;b++)for(var c=a[b],d=0;d<this.dynamicConstList.length;d++)if(this.dynamicConstList[d].paramName==c.paramName){this.dynamicConstList[d].curve.setData(c.curve);break}},b}(MaterialBaseParam),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},DynamicConstItem=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.update=function(a){void 0===a&&(a=0),this.currentValue=this.curve.getValue(a),this.target.setDynamic(this)},Object.defineProperty(b.prototype,"type",{set:function(a){this._type=a,this.curve=new Curve,this.curve.type=a},enumerable:!0,configurable:!0}),b}(DynamicBaseConstItem),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},DynamicTexItem=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.destory=function(){a.prototype.destory.call(this),this._textureDynamic&&Scene_data.context3D.deleteTexture(this._textureDynamic),this.target=null},b.prototype.initCurve=function(a){this.curve=new Curve,this.curve.type=a},Object.defineProperty(b.prototype,"texture",{get:function(){return this._textureDynamic?this._textureDynamic:this.textureRes?this.textureRes.texture:null},enumerable:!0,configurable:!0}),b.prototype.creatTextureByCurve=function(){for(var a=0,b=this.curve.valueVec.length-1,c=new Array,a=0;a<this.life;a++)if(a<this.curve.begintFrame)c.push(255*this.curve.valueVec[0][0],255*this.curve.valueVec[0][1],255*this.curve.valueVec[0][2],255*this.curve.valueVec[0][3]);else if(a>this.curve.maxFrame)0==this.curve.maxFrame&&this.curve.begintFrame<0?c.push(255,255,255,255):c.push(255*this.curve.valueVec[b][0],255*this.curve.valueVec[b][1],255*this.curve.valueVec[b][2],255*this.curve.valueVec[b][3]);else if(this.curve.begintFrame<0)c.push(255,255,255,255);else{var d=a-this.curve.begintFrame;c.push(255*this.curve.valueVec[d][0],255*this.curve.valueVec[d][1],255*this.curve.valueVec[d][2],255*this.curve.valueVec[d][3])}var e=ColorTransition.getInstance().getImageDataByVec(c,this.life);this._textureDynamic=Scene_data.context3D.getTexture(e)},Object.defineProperty(b.prototype,"life",{get:function(){return this._life},set:function(a){this._life=a},enumerable:!0,configurable:!0}),b}(DynamicBaseTexItem),QuadTreeNode=function(){function a(a,b,c,d,e,f){this.x=a,this.y=b,this.z=c,this.width=d,this.height=e,this.depth=f}return a.prototype.testViewFrustum=function(a,b){if(this.sun&&1==this.sun.length)return void this.sun[0].testViewFrustum(a,b);if(this.testViewFrustumResult(a)&&(this.target&&(this.target.isPerspective?this.testRay(b)||(this.target.sceneVisible=!0):this.target.sceneVisible=!0),this.sun))for(var c=0;c<this.sun.length;c++)this.sun[c].testViewFrustum(a,b)},a.prototype.testViewFrustumResult=function(a){for(var b=new Vector3D(this.x,this.y,this.z),c=new Vector3D(this.width,this.height,this.depth),d=!0,e=0;e<a.length;e++){var f=b,g=b.add(c),h=new Vector3D;a[e].x>0?h.x=g.x:h.x=f.x,a[e].y>0?h.y=g.y:h.y=f.y,a[e].z>0?h.z=g.z:h.z=f.z;var i=a[e].dot(h)+a[e].w;if(0>i){d=!1;break}}return d},a.prototype.testRay=function(a){var b,c,d,e,f,g,h=a.o.x,i=a.o.y,j=a.o.z,k=a.d.x,l=a.d.y,m=a.d.z,n=this.x,o=this.y,p=this.z,q=this.x+this.width,r=this.y+this.height,s=this.z+this.depth,t=1/k;t>=0?(b=(n-h)*t,e=(q-h)*t):(b=(q-h)*t,e=(n-h)*t);var u=1/l;u>=0?(c=(o-i)*u,f=(r-i)*u):(c=(r-i)*u,f=(o-i)*u);var v=1/m;v>=0?(d=(p-j)*v,g=(s-j)*v):(d=(s-j)*v,g=(p-j)*v);var w,x;w=b>c?b:c,d>w&&(w=d),x=f>e?e:f,x>g&&(x=g);var y=1e-4,z=0;return x>w&&x>y?(z=w>y?w:x,z<a.baseT?!0:void 0):!1},a}(),Ray=function(){function a(){this.o=new Vector3D,this.d=new Vector3D,this.baseT=500}return a.prototype.setPos=function(a,b,c){this.o.x=a,this.o.y=b,this.o.z=c},a.prototype.setTarget=function(a,b,c){this.d.x=a-this.o.x,this.d.y=b-this.o.y,this.d.z=c-this.o.z,this.d.normalize()},a}(),SceneQuadTree=function(){function a(){this.needUpdata=!1,this.panleAry=new Array}return a.prototype.init=function(a,b){this._circle=new Circle(1e4,1e4),this._sceneDic=b,this._rootNode=this.getNode(a),this._ray=new Ray},a.prototype.getNode=function(a){var b=new QuadTreeNode(a.x,a.y,a.z,a.width,a.height,a.depth);if(a.data){b.sun||(b.sun=new Array);for(var c=0;c<a.data.length;c++){var d,e=new QuadTreeNode(a.data[c].x,a.data[c].y,a.data[c].z,a.data[c].width,a.data[c].height,a.data[c].depth);1==a.data[c].type?d="build"+a.data[c].id:11==a.data[c].type?d="particle"+a.data[c].id:14==a.data[c].type&&(d="ground"+a.data[c].id),e.target=this._sceneDic[d],e.target.aabb=e,b.sun.push(e)}}if(a.sun){b.sun||(b.sun=new Array);for(var c=0;c<a.sun.length;c++)b.sun.push(this.getNode(a.sun[c]))}return b},a.prototype.setCircle=function(a,b,c){var d=a-this._circle.x,e=b-this._circle.y;Math.sqrt(d*d+e*e)<10?this.needUpdata=!1:(this._circle.setData(a,b,c),this.needUpdata=!0)},a.prototype.update=function(){MathClass.GetViewHitBoxDataCopy(Scene_data.cam3D.distance);var a=new Vector3D(Scene_data.cam3D.x,Scene_data.cam3D.y,Scene_data.cam3D.z),b=MathClass.viewBoxVecItem;this.panleAry.length=0,this.panleAry.push(this.getPanelByVec(a,b[0],b[1])),this.panleAry.push(this.getPanelByVec(a,b[1],b[2])),this.panleAry.push(this.getPanelByVec(a,b[2],b[3])),this.panleAry.push(this.getPanelByVec(a,b[3],b[0])),this._ray.setPos(Scene_data.cam3D.x,Scene_data.cam3D.y,Scene_data.cam3D.z),this._ray.setTarget(Scene_data.focus3D.x,Scene_data.focus3D.y,Scene_data.focus3D.z),this._ray.baseT=Scene_data.cam3D.distance,this._rootNode.testViewFrustum(this.panleAry,this._ray)},a.prototype.getPanelByVec=function(a,b,c){var d=b.subtract(a),e=c.subtract(a);return d=d.cross(e),d.normalize(),d.w=-d.dot(a),d},a.prototype.updateDraw=function(){this.capsuleLineSprite?(this.capsuleLineSprite.x=Scene_data.focus3D.x,this.capsuleLineSprite.y=Scene_data.focus3D.y+50,this.capsuleLineSprite.z=Scene_data.focus3D.z,this.capsuleLineSprite.update()):(this.capsuleLineSprite=new LineDisplaySprite,this.capsuleLineSprite.clear(),this.capsuleLineSprite.baseColor=new Vector3D(1,0,0,1),this.drawCylinder(this._circle.radius,10),this.capsuleLineSprite.upToGpu())},a.prototype.drawCylinder=function(a,b){var c,d,e,f=a,g=b,h=12;for(e=0;h>e;e++){var i=new Vector3D(f,0,0),j=new Vector3D(f,+g,0),k=new Matrix3D;k.appendRotation(e*(360/h),Vector3D.Y_AXIS);var l=k.transformVector(i),m=k.transformVector(j);this.capsuleLineSprite.makeLineMode(l,m),this.capsuleLineSprite.makeLineMode(m,new Vector3D(0,+g,0)),e==h-1&&(this.capsuleLineSprite.makeLineMode(l,i),this.capsuleLineSprite.makeLineMode(m,j)),(c||d)&&(this.capsuleLineSprite.makeLineMode(l,c),this.capsuleLineSprite.makeLineMode(m,d)),c=l.clone(),d=m.clone()}},a}(),ViewFrustum=function(){function a(){}return a.prototype.init=function(){this.capsuleLineSprite=new LineDisplaySprite,SceneManager.getInstance().addDisplay(this.capsuleLineSprite)},a.prototype.setCam=function(){var a=Scene_data.cam3D.cameraMatrix.clone();a.append(Scene_data.viewMatrx3D);var b=a.m,c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15];this.panleAry=new Array;this.getPanle(-k+o,-l+p,-m+q,-n+r),this.getPanle(g+o,h+p,i+q,j+r),this.getPanle(-g+o,-h+p,-i+q,-j+r),this.getPanle(c+o,d+p,e+q,f+r),this.getPanle(-c+o,-d+p,-e+q,-f+r)},a.prototype.getPanle=function(a,b,c,d){var e=new Vector3D(a,b,c,d);return e.normalize(),e},a.prototype.getPanelByVec=function(a,b,c){var d=b.subtract(a),e=c.subtract(a);return d=d.cross(e),d.normalize(),d.w=-d.dot(a),d},a.prototype.setData=function(a){this.dataAry=a},a.prototype.setViewFrustum=function(){this.capsuleLineSprite||this.init(),this.setCam(),this.capsuleLineSprite.clear(),this.capsuleLineSprite.baseColor=new Vector3D(0,0,1,1),MathClass.GetViewHitBoxDataCopy(Scene_data.cam3D.distance);var a=new Vector3D(Scene_data.cam3D.x,Scene_data.cam3D.y,Scene_data.cam3D.z),b=MathClass.viewBoxVecItem;this.panleAry.push(this.getPanelByVec(a,b[0],b[1])),this.panleAry.push(this.getPanelByVec(a,b[1],b[2])),this.panleAry.push(this.getPanelByVec(a,b[2],b[3])),this.panleAry.push(this.getPanelByVec(a,b[3],b[0]));for(var c=0;c<this.dataAry.length;c++){for(var d=this.dataAry[c],e=new Vector3D(d.x,d.y,d.z),f=new Vector3D(d.width,d.height,d.depth),g=!1,h=0;h<this.panleAry.length;h++){var i=e,j=e.add(f),k=new Vector3D;this.panleAry[h].x>0?k.x=j.x:k.x=i.x,this.panleAry[h].y>0?k.y=j.y:k.y=i.y,this.panleAry[h].z>0?k.z=j.z:k.z=i.z;var l=this.panleAry[h].dot(k)+this.panleAry[h].w;if(0>l){g=!0;break}}g?this.capsuleLineSprite.baseColor=new Vector3D(1,0,0,1):this.capsuleLineSprite.baseColor=new Vector3D(0,0,1,1),this.capsuleLineSprite.makeLineMode(e,new Vector3D(e.x+f.x,e.y,e.z)),this.capsuleLineSprite.makeLineMode(e,new Vector3D(e.x,e.y,e.z+f.z)),this.capsuleLineSprite.makeLineMode(new Vector3D(e.x+f.x,e.y,e.z),new Vector3D(e.x+f.x,e.y,e.z+f.z)),this.capsuleLineSprite.makeLineMode(new Vector3D(e.x,e.y,e.z+f.z),new Vector3D(e.x+f.x,e.y,e.z+f.z)),this.capsuleLineSprite.makeLineMode(new Vector3D(e.x,e.y+f.y,e.z),new Vector3D(e.x+f.x,e.y+f.y,e.z)),this.capsuleLineSprite.makeLineMode(new Vector3D(e.x,e.y+f.y,e.z),new Vector3D(e.x,e.y+f.y,e.z+f.z)),this.capsuleLineSprite.makeLineMode(new Vector3D(e.x+f.x,e.y+f.y,e.z),new Vector3D(e.x+f.x,e.y+f.y,e.z+f.z)),this.capsuleLineSprite.makeLineMode(new Vector3D(e.x,e.y+f.y,e.z+f.z),new Vector3D(e.x+f.x,e.y+f.y,e.z+f.z)),this.capsuleLineSprite.makeLineMode(new Vector3D(e.x,e.y,e.z),new Vector3D(e.x,e.y+f.y,e.z)),this.capsuleLineSprite.makeLineMode(new Vector3D(e.x+f.x,e.y,e.z),new Vector3D(e.x+f.x,e.y+f.y,e.z)),this.capsuleLineSprite.makeLineMode(new Vector3D(e.x,e.y,e.z+f.z),new Vector3D(e.x,e.y+f.y,e.z+f.z)),this.capsuleLineSprite.makeLineMode(new Vector3D(e.x+f.x,e.y,e.z+f.z),new Vector3D(e.x+f.x,e.y+f.y,e.z+f.z))}this.capsuleLineSprite.upToGpu()},a}(),SceneManager=function(){function a(){this._ready=!1,this.render=!0,this._displayList=new Array,this._displaySpriteList=new Array,this._displayRoleList=new Array,this._display2DList=new Array,this._sceneParticleList=new Array,this._time=TimeUtil.getTimer(),this._sceneDic=new Object,this.initScene(),this.viewFrustum=new ViewFrustum}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},Object.defineProperty(a.prototype,"displayRoleList",{get:function(){return this._displayRoleList},enumerable:!0,configurable:!0}),a.prototype.clearScene=function(){this._displayRoleList.length=0},a.prototype.clearStaticScene=function(){console.log("场景场景所有对象");for(var a in this._sceneDic){var b=this._sceneDic[a];b instanceof CombineParticle?(ParticleManager.getInstance().removeParticle(b),b.destory()):b instanceof Display3DSprite&&(b.removeStage(),b.destory())}this._ready=!1,this._sceneDic=null,this._sceneQuadTree=null,this._displayList.length=0,this._sceneParticleList.length=0,AstarUtil.porcessBak(!1)},a.prototype.loadScene=function(a,b,c,d){var e=this;return this._currentUrl==a?(AstarUtil.porcessBak(!0),this._ready=!0,b(),void d()):(this.clearStaticScene(),this._ready=!1,ResManager.getInstance().loadSceneRes(a,b,c,function(a){e.loadSceneConfigCom(a),d()}),void(this._currentUrl=a))},a.prototype.addSceneImgBg=function(a){var b=new Display3dBg;b.setImgInfo(a.url,a.width,a.height),this.addDisplay(b)},a.prototype.getDisplayByID=function(a,b){return 0==a?this._sceneDic["build"+b]:1==a?this._sceneDic["particle"+b]:void 0},a.prototype.fixAstart=function(a){for(var b=0;b<this._displayRoleList.length;b++)this._displayRoleList[b].fixAstartData(a)},a.prototype.loadSceneConfigCom=function(a){this._sceneDic=new Object;var b=a.groundItem,c=a.buildItem;Scene_data.fogColor=[a.fogColor.x/255,a.fogColor.y/255,a.fogColor.z/255];var d=1*a.fogDistance,e=a.fogAttenuation;Scene_data.gameAngle=isNaN(a.gameAngle)?0:a.gameAngle,Scene_data.focus3D.rotationY=Scene_data.gameAngle,Scene_data.fogData=[d*e,1/((1-e)*d)],Scene_data.sceneNumId++;for(var f=0;b&&f<b.length;f++){var g=this.getGroundSprite(b[f],a.terrain);this.addDisplay(g)}for(var h=0;h<c.length;h++){var i=c[h];if(i.type==BaseRes.PREFAB_TYPE){var j=this.getBuildSprite(i);this.addDisplay(j)}else if(i.type==BaseRes.SCENE_PARTICLE_TYPE){var k=this.getParticleSprite(i);ParticleManager.getInstance().addParticle(k),this._sceneParticleList.push(k)}}Scene_data.light.setData(a.SunNrm,a.SunLigth,a.AmbientLight),LightProbeManager.getInstance().setLightProbeData(a.lightProbeItem),AstarUtil.setData(a.astar),this._ready=!0,a.quadTreeData?(this._sceneQuadTree=new SceneQuadTree,this._sceneQuadTree.init(a.quadTreeData,this._sceneDic)):this._sceneQuadTree=null,Scene_data.cam3D.astarRect=AstarUtil.areaRect},a.prototype.getGroundSprite=function(a,b){var c=new TerrainDisplay3DSprite;return c.setObjUrl(a.objsurl),c.setMaterialUrl(a.materialurl,a.materialInfoArr),c.materialInfoArr=a.materialInfoArr,c.setLightMapUrl(a.lighturl),c.scaleX=a.scaleX,c.scaleY=a.scaleY,c.scaleZ=a.scaleZ,c.x=a.x,c.y=a.y,c.z=a.z,c.rotationX=a.rotationX,c.rotationY=a.rotationY,c.rotationZ=a.rotationZ,c.objData.lightuvsOffsets=c.objData.uvsOffsets,b&&c.setGrounDataMesh(b[a.id]),this._sceneDic["ground"+a.id]=c,c},a.prototype.makeCollisioin=function(a){},Object.defineProperty(a.prototype,"ready",{get:function(){return this._ready},set:function(a){console.log("--setready--",a),this._ready=a},enumerable:!0,configurable:!0}),a.prototype.getBuildSprite=function(a){var b=new Display3DSprite;return b.setObjUrl(a.objsurl),b.setMaterialUrl(a.materialurl,a.materialInfoArr),b.materialInfoArr=a.materialInfoArr,b.setLightMapUrl(a.lighturl),b.scaleX=a.scaleX,b.scaleY=a.scaleY,b.scaleZ=a.scaleZ,b.x=a.x,b.y=a.y,b.z=a.z,b.rotationX=a.rotationX,b.rotationY=a.rotationY,b.rotationZ=a.rotationZ,b.isPerspective=a.isPerspective,b.type=0,b.id=a.id,this._sceneDic["build"+a.id]=b,b},a.prototype.getParticleSprite=function(a){var b;return b=ParticleManager.getInstance().getParticleByte(Scene_data.fileRoot+a.url),b.scaleX=a.scaleX,b.scaleY=a.scaleY,b.scaleZ=a.scaleZ,b.x=a.x,b.y=a.y,b.z=a.z,b.rotationX=a.rotationX,b.rotationY=a.rotationY,b.rotationZ=a.rotationZ,b.type=0,this._sceneDic["particle"+a.id]=b,b},a.prototype.initScene=function(){},a.prototype.addDisplay=function(a){-1==this._displayList.indexOf(a)&&(this._displayList.push(a),a.addStage())},a.prototype.removeDisplay=function(a){var b=this._displayList.indexOf(a);-1!=b&&this._displayList.splice(b,1),a.removeStage()},a.prototype.addSpriteDisplay=function(a){if(-1==this._displaySpriteList.indexOf(a)){a.addStage();for(var b=0;b<this._displaySpriteList.length;b++)if(this._displaySpriteList[b].materialUrl==a.materialUrl)return void this._displaySpriteList.splice(b,0,a);this._displaySpriteList.push(a)}},a.prototype.removeSpriteDisplay=function(a){var b=this._displaySpriteList.indexOf(a);-1!=b&&this._displaySpriteList.splice(b,1),a.removeStage()},a.prototype.addMovieDisplay=function(a){this._displayRoleList.push(a),a.addStage()},a.prototype.addMovieDisplayTop=function(a){this._displayRoleList.unshift(a),a.addStage()},a.prototype.removeMovieDisplay=function(a){var b=this._displayRoleList.indexOf(a);-1!=b&&this._displayRoleList.splice(b,1),a.removeStage()},a.prototype.setParticleVisible=function(){for(var a=ParticleManager.getInstance().particleList,b=0;a&&b<a.length;b++)if(!a[b].dynamic){var c=Vector3D.distance(new Vector3D(Scene_data.focus3D.x,Scene_data.focus3D.y,Scene_data.focus3D.z),new Vector3D(a[b].x,a[b].y,a[b].z));a[b].sceneVisible=1e3>c}},a.prototype.update=function(){if(this._sceneQuadTree&&(this._sceneQuadTree.setCircle(Scene_data.focus3D.x,Scene_data.focus3D.z,a.mapQudaTreeDistance),this._sceneQuadTree.needUpdata)){for(var b=0;b<this._displayList.length;b++)this._displayList[b].sceneVisible=!1,this._displayList[b].sceneVisible=!0;this.setParticleVisible(),this._sceneQuadTree.update(),this.mathCamFar()}Scene_data.context3D.update(),Scene_data.context3D.setDepthTest(!0),this.updateMovieFrame(),MathClass.getCamView(Scene_data.cam3D,Scene_data.focus3D),this._ready&&(ParticleManager.getInstance().updateTime(),SkillManager.getInstance().update(),this.render&&(this.updateStaticDiplay(),this.updateSpriteDisplay(),Scene_data.context3D.setWriteDepth(!0),this.updateMovieDisplay(),ShadowManager.getInstance().update(),Scene_data.context3D.setWriteDepth(!1),ParticleManager.getInstance().update(),BloodManager.getInstance().update())),Scene_data.context3D.setDepthTest(!1),UIManager.getInstance().update();for(var b=0;b<this._display2DList.length;b++)this._display2DList[b].update()},a.prototype.updateFBO=function(){Scene_data.fbo||(Scene_data.fbo=Scene_data.context3D.getFBO()),Scene_data.context3D.updateFBO(Scene_data.fbo),Scene_data.viewMatrx3D.identity(),Scene_data.context3D.renderContext.viewport(0,0,FBO.fw,FBO.fh),Scene_data.viewMatrx3D.perspectiveFieldOfViewLH(2,1,50,Scene_data.camFar),Scene_data.viewMatrx3D.appendScale(2,2*(Scene_data.stageWidth/Scene_data.stageHeight),1),MathClass.updateVp(),this.updateStaticDiplay(),Engine.resetSize()},a.prototype.addDisplay2DList=function(a){this._display2DList.push(a)},a.prototype.mathCamFar=function(){for(var a=new Vector3D,b=0,c=0;c<this._displayList.length;c++){var d=this._displayList[c];if(d.sceneVisible&&d.aabb){var e=d.posMatrix.clone();e.append(Scene_data.cam3D.cameraMatrix);for(var f=d.aabbVect,g=0;g<f.length;g++)a=Scene_data.cam3D.cameraMatrix.transformVector(f[g]),a.z>b&&(b=a.z)}}Scene_data.camFar=Math.max(500,b+100),Engine.resetViewMatrx3D()},a.prototype.updateStaticDiplay=function(){for(var a=0;a<this._displayList.length;a++)this._displayList[a].update()},a.prototype.updateSpriteDisplay=function(){for(var a=0;a<this._displaySpriteList.length;a++)this._displaySpriteList[a].update()},a.prototype.updateMovieDisplay=function(){for(var a=0;a<this._displayRoleList.length;a++)this._displayRoleList[a].update()},a.prototype.updateMovieFrame=function(){var a=TimeUtil.getTimer(),b=a-this._time;this._time=a;for(var c=0;c<this._displayRoleList.length;c++)this._displayRoleList[c].updateFrame(b)},a.mapQudaTreeDistance=200,a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},SkillManager=function(a){function b(){a.call(this),this._time=0,this._skillDic=new Object,this._loadDic=new Object,this._skillAry=new Array,this._preLoadDic=new Object}return __extends(b,a),b.getInstance=function(){return this._instance||(this._instance=new b),this._instance},b.prototype.update=function(){for(var a=TimeUtil.getTimer(),b=a-this._time,c=0;c<this._skillAry.length;c++)this._skillAry[c].update(b);this._time=a},b.prototype.preLoadSkill=function(a){var b=this;this._dic[a]||this._preLoadDic[a]||(ResManager.getInstance().loadSkillRes(Scene_data.fileRoot+a,function(c){var d=new SkillData;d.data=c.data,d.useNum++,b._dic[a]=d}),this._preLoadDic[a]=!0)},b.prototype.getSkill=function(a,b){var c,d=this,e=a+b,f=this._skillDic[e];if(f)for(var g=0;g<f.length;g++)if(c=f[g],c.isDeath&&0==c.useNum)return c.reset(),c.isDeath=!1,c;if(c=new Skill,c.name=b,c.isDeath=!1,this._skillDic[e]||(this._skillDic[e]=new Array),this._skillDic[e].push(c),this._dic[a])return c.setData(this._dic[a].data[c.name],this._dic[a]),this._dic[a].useNum++,c;if(this._loadDic[a]){var h=new Object;return h.name=b,h.skill=c,this._loadDic[a].push(h),c}this._loadDic[a]=new Array;var h=new Object;return h.name=b,h.skill=c,this._loadDic[a].push(h),ResManager.getInstance().loadSkillRes(Scene_data.fileRoot+a,function(b){d.loadSkillCom(a,b)}),c},b.prototype.loadSkillCom=function(a,b){var c=new SkillData;c.data=b.data;for(var d=0;d<this._loadDic[a].length;d++){var e=this._loadDic[a][d];e.skill.setData(c.data[e.name],c),c.useNum++}this._loadDic[a].length=0,this._loadDic[a]=null,this._dic[a]=c},b.prototype.playSkill=function(a){this._skillAry.push(a),a.play()},b.prototype.removeSkill=function(a){var b=this._skillAry.indexOf(a);-1!=b&&this._skillAry.splice(b,1)},b.prototype.gc=function(){a.prototype.gc.call(this);for(var b in this._skillDic)for(var c=this._skillDic[b],d=c.length-1;d>=0;d--)c[d].isDeath&&c[d].useNum<=0&&(c[d].idleTime++,c[d].idleTime>=ResCount.GCTime&&(c[d].destory(),c.splice(d,1)))},b}(ResGC),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Skill=function(a){function b(){a.call(this),this.isDeath=!0,this.time=0,this.targetFlag=0}return __extends(b,a),b.prototype.setData=function(a,b){this.skillVo=new SkillVo,this.skillVo.setData(a),this.setKeyAry(),this.trajectoryAry=new Array,this._skillData=b},b.prototype.getBloodTime=function(){return this.skillVo?this.skillVo.bloodTime:SkillVo.defaultBloodTime},b.prototype.play=function(){if(!this.skillVo)return void this.skillComplete();if(this.active&&this.active instanceof Display3dMovie){var a=this.active;a.play(this.skillVo.action,2,!1)}},b.prototype.setKeyAry=function(){var a=this;if(this.keyAry=new Array,this.skillVo.types==SkillType.FixEffect)for(var b=0;b<this.skillVo.keyAry.length;b++){var c=new SkillFixEffect;c.setInfo(this.skillVo.keyAry[b]),c.removeCallFun=function(b){a.removeKey(b)},c.active=this.active,this.keyAry.push(c)}else if(this.skillVo.types==SkillType.TrajectoryDynamicTarget||this.skillVo.types==SkillType.TrajectoryDynamicPoint)for(var b=0;b<this.skillVo.keyAry.length;b++){
var d,e=this.skillVo.keyAry[b];d=1==e.multype?new SkillMulTrajectory:new SkillTrajectory,d.setInfo(this.skillVo.keyAry[b]),this.keyAry.push(d)}},b.prototype.removeKey=function(a){this.completeNum++,this.completeNum==this.keyAry.length&&this.skillComplete()},b.prototype.removeSkillForce=function(){for(var a=0;a<this.keyAry.length;a++)this.keyAry[a].reset();this.skillComplete(),this.reset()},b.prototype.skillComplete=function(){SkillManager.getInstance().removeSkill(this),this.isDeath=!0,this.completeFun&&this.completeFun(),this.idleTime=0},b.prototype.reset=function(){this.time=0,this.completeNum=0,this.active=null,this.completeFun=null,this.targetFlag=0},b.prototype.update=function(a){this.time+=a,this.time>b.MaxTime&&(console.log("超时结束"),this.skillComplete()),this.getKeyTarget(),this.updateTrajector(a)},b.prototype.updateTrajector=function(a){for(var b=0;b<this.trajectoryAry.length;b++)this.trajectoryAry[b].update(a)},b.prototype.getKeyTarget=function(){if(this.keyAry)for(var a=this.targetFlag;a<this.keyAry.length&&this.keyAry[a].time<this.time;a++){if(this.keyAry[a].addToRender(),this.skillVo.types==SkillType.TrajectoryDynamicTarget||this.skillVo.types==SkillType.TrajectoryDynamicPoint){var b=this.keyAry[a];this.trajectoryAry.push(b)}a++,this.targetFlag=a}},b.prototype.configFixEffect=function(a,b,c){if(void 0===b&&(b=null),void 0===c&&(c=null),this.active=a,this.completeFun=b,this.keyAry)for(var d=0;d<this.keyAry.length;d++)if(this.skillVo.types==SkillType.FixEffect){var e=this.keyAry[d];e.active=a,c&&c[d]&&(e.outPos=c[d])}},b.prototype.configTrajectory=function(a,b,c,d,e){var f=this;if(void 0===c&&(c=null),void 0===d&&(d=0),void 0===e&&(e=null),this.active=a,this.completeFun=c,this.completeNum=0,this.keyAry)for(var g=0;g<this.keyAry.length;g++)if(this.skillVo.types==SkillType.TrajectoryDynamicTarget||this.skillVo.types==SkillType.TrajectoryDynamicPoint){var h=this.keyAry[g];h.setPlayData(a,b,function(a){f.removeTrajectory(a)},d,0==g?e:null)}},b.prototype.configMulTrajectory=function(a,b,c,d){var e=this;if(void 0===d&&(d=null),this.active=b,this.completeFun=d,this.completeNum=0,this.keyAry)for(var f=0;f<this.keyAry.length;f++)if(this.skillVo.types==SkillType.TrajectoryDynamicTarget){var g=this.keyAry[f];g.setMulPlayData(a,c,function(a){e.removeTrajectory(a)},2)}},b.prototype.removeTrajectory=function(a){var b=this.trajectoryAry.indexOf(a);-1!=b&&this.trajectoryAry.splice(b,1),this.completeNum++,this.completeNum==this.keyAry.length&&this.skillComplete()},b.prototype.destory=function(){if(this.skillVo=null,this.name=null,this.keyAry){for(var a=0;a<this.keyAry.length;a++)this.keyAry[a].destory();this.keyAry.length=0,this.keyAry=null}if(this.active=null,this.completeFun=null,this.trajectoryAry){for(var a=0;a<this.trajectoryAry.length;a++)this.trajectoryAry[a].destory();this.trajectoryAry.length=0,this.trajectoryAry=null}this._skillData.useNum--,this._skillData=null},b.MaxTime=3e3,b}(ResCount),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},SkillData=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(ResCount),SkillVo=function(){function a(){}return a.prototype.setData=function(a){this.keyAry=new Array,a||console.log("技能有错"),this.action=a.action,this.skillname=a.skillname,this.bloodTime=a.blood,this.types=a.type,this.types==SkillType.FixEffect?this.keyAry=this.getFixEffect(a.data):(this.types==SkillType.TrajectoryDynamicTarget||this.types==SkillType.TrajectoryDynamicPoint)&&(this.keyAry=this.getTrajectoryDynamicTarget(a.data))},a.prototype.getFixEffect=function(a){for(var b=new Array,c=0;c<a.length;c++){var d=new SkillFixEffectKeyVo;d.setData(a[c]),b.push(d)}return b},a.prototype.getTrajectoryDynamicTarget=function(a){for(var b=new Array,c=0;c<a.length;c++){var d=new SkillTrajectoryTargetKeyVo;d.setData(a[c]),b.push(d)}return b},a.defaultBloodTime=250,a}(),SkillType=function(){function a(){}return a.TrajectoryDynamicTarget=1,a.FixEffect=4,a.TrajectoryDynamicPoint=3,a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},SkillKeyVo=function(){function a(){this.frame=0}return a.prototype.setData=function(a){this.frame=a.frame,this.url=a.url},a}(),SkillFixEffectKeyVo=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.setData=function(b){a.prototype.setData.call(this,b),this.hasSocket=b.hasSocket,this.hasSocket?this.socket=b.socket:(this.pos=new Vector3D(b.pos.x,b.pos.y,b.pos.z),this.rotation=new Vector3D(b.rotation.x,b.rotation.y,b.rotation.z))},b}(SkillKeyVo),SkillTrajectoryTargetKeyVo=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.setData=function(b){a.prototype.setData.call(this,b),this.beginType=b.beginType,0==this.beginType?this.beginPos=new Vector3D(b.beginPos.x,b.beginPos.y,b.beginPos.z):1==this.beginType&&(this.beginSocket=b.beginSocket),this.speed=b.speed,b.hitSocket&&(this.hitSocket=b.hitSocket),b.endParticle&&(this.endParticleUrl=b.endParticle),this.multype=b.multype},b}(SkillKeyVo),SkillKey=function(){function a(){this.time=0}return a.prototype.addToRender=function(){this.particle&&(this.particle.reset(),this.particle.sceneVisible=!0,ParticleManager.getInstance().addParticle(this.particle))},a.prototype.setInfo=function(a){this.time=a.frame*Scene_data.frameTime,this.particle=ParticleManager.getInstance().getParticleByte(Scene_data.fileRoot+a.url)},a.prototype.reset=function(){this.time=0,this.particle.reset(),ParticleManager.getInstance().removeParticle(this.particle)},a.prototype.destory=function(){this.particle.destory(),this.particle=null,this.removeCallFun=null},a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},SkillEffect=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.addToRender=function(){a.prototype.addToRender.call(this),this.particle.addEventListener(BaseEvent.COMPLETE,this.onPlayCom,this)},b.prototype.onPlayCom=function(a){void 0===a&&(a=null),this.particle.removeEventListener(BaseEvent.COMPLETE,this.onPlayCom,this),ParticleManager.getInstance().removeParticle(this.particle),this.removeCallFun(this)},b}(SkillKey),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},SkillFixEffect=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.setInfo=function(b){a.prototype.setInfo.call(this,b);var c=b;this.pos=c.pos,this.rotation=c.rotation,this.hasSocket=c.hasSocket,this.socket=c.socket},b.prototype.addToRender=function(){if(a.prototype.addToRender.call(this),this.outPos)this.particle.x=this.outPos.x,this.particle.y=this.outPos.y,this.particle.z=this.outPos.z,this.particle.rotationX=this.rotation.x,this.particle.rotationY=this.rotation.y+this.active.rotationY,this.particle.rotationZ=this.rotation.z,this.particle.bindTarget=null;else if(this.hasSocket){var b=this.active;this.particle.bindTarget=b,this.particle.bindSocket=this.socket}else{var c=new Matrix3D;c.appendRotation(this.active.rotationY,Vector3D.Y_AXIS);var d=c.transformVector(this.pos);d.x+=this.active.x,d.y+=this.active.y,d.z+=this.active.z,this.particle.x=d.x,this.particle.y=d.y,this.particle.z=d.z,this.particle.rotationX=this.rotation.x,this.particle.rotationY=this.rotation.y+this.active.rotationY,this.particle.rotationZ=this.rotation.z,this.particle.bindTarget=null}},b}(SkillEffect),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},SkillTrajectory=function(a){function b(){a.call(this),this._currentPos=new Vector3D,this.rotationMatrix=new Matrix3D,this._socketMaxrix=new Matrix3D,this._currentTargetPos=new Vector3D}return __extends(b,a),b.prototype.update=function(a){this.path.update(a)},b.prototype.reset=function(){a.prototype.reset.call(this),this.endParticle&&(ParticleManager.getInstance().addParticle(this.endParticle),this.endParticle.reset(),this.endParticle.setPos(this._currentTargetPos.x,this._currentTargetPos.y,this._currentTargetPos.z)),this.removeCallFun(this)},b.prototype.endPlayFun=function(a){void 0===a&&(a=null),ParticleManager.getInstance().removeParticle(this.endParticle),this.endParticle.removeEventListener(BaseEvent.COMPLETE,this.endPlayFun,this)},b.prototype.setCurrentPos=function(){if(this.data.hitSocket){var a=this.target;return a?(a.getSocket(this.data.hitSocket,this._socketMaxrix),this._currentTargetPos.setTo(this._socketMaxrix.position.x,this._socketMaxrix.position.y,this._socketMaxrix.position.z)):console.log("需要处理,特殊没有指定对象"),!0}return this._currentTargetPos.x==this.target.x&&this._currentTargetPos.y==this.target.y&&this._currentTargetPos.z==this.target.z?!1:(this._currentTargetPos.setTo(this.target.x,this.target.y,this.target.z),!0)},b.prototype.addToRender=function(){a.prototype.addToRender.call(this);var b;if(0==this.data.beginType){var c=new Matrix3D;c.appendRotation(this.active.rotationY,Vector3D.Y_AXIS),b=c.transformVector(this.data.beginPos),this._currentPos.setTo(this.active.x+b.x,this.active.y+b.y,this.active.z+b.z)}else if(1==this.data.beginType){var d=new Matrix3D,e=this.active;e.getSocket(this.data.beginSocket,d),b=d.position,this._currentPos.setTo(b.x,b.y,b.z)}this.particle.setPos(this._currentPos.x,this._currentPos.y,this._currentPos.z),this.path.add()},b.prototype.getSocket=function(a,b){b.identity(),b.append(this.rotationMatrix),b.appendTranslation(this._currentPos.x,this._currentPos.y,this._currentPos.z)},b.prototype.getSunType=function(){return 0},b.prototype.setInfo=function(b){a.prototype.setInfo.call(this,b),this.particle.bindTarget=this,this.data=b,this.data.endParticleUrl&&(this.endParticle=ParticleManager.getInstance().getParticleByte(Scene_data.fileRoot+this.data.endParticleUrl),this.endParticle.addEventListener(BaseEvent.COMPLETE,this.endPlayFun,this))},b.prototype.setPlayData=function(a,b,c,d,e){var f=this;void 0===d&&(d=0),void 0===e&&(e=null),this.active=a,this.target=b,this.removeCallFun=c,this._currentPos.setTo(0,0,0),this.rotationMatrix.identity(),this._socketMaxrix.identity(),this._currentTargetPos.setTo(0,0,0),this.path||(this.path=PathManager.getNewPath(d),this.path.setData(this,function(){f.reset()},this._currentPos,this.rotationMatrix,this._currentTargetPos,e),this.path.speed=this.data.speed),this.path.reset()},b.prototype.destory=function(){this.active=null,this.target=null,this.data=null,this._currentPos=null,this.rotationMatrix=null,this._socketMaxrix=null,this._currentTargetPos=null,this.path=null},b}(SkillKey),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},SkillMulTrajectory=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.update=function(a){this.pathMul.update(a)},b.prototype.getSunType=function(){return 1},b.prototype.addToRender=function(){if(this.particle){if(this.particle.reset(),ParticleManager.getInstance().addParticle(this.particle),this.currentPosList)for(var a=0;a<this.activeList.length;a++)this.currentPosList[a].setTo(this.activeList[a].x,this.activeList[a].y+10,this.activeList[a].z+5),this.currentPosList[a].w=0;else{this.currentPosList=new Array;for(var a=0;a<this.activeList.length;a++)this.currentPosList.push(new Vector3D(this.activeList[a].x,this.activeList[a].y+10,this.activeList[a].z+5));this.pathMul.setInitCurrentPos(this.currentPosList)}this.pathMul.add(),this.particle.setMulPos(this.pathMul.resultAry)}},b.prototype.setMulPlayData=function(a,b,c,d){var e=this;void 0===d&&(d=0),this.activeList=a,this.active=this.activeList[0],this.target=b,this.removeCallFun=c,this._currentPos.setTo(0,0,0),this.rotationMatrix.identity(),this._socketMaxrix.identity(),this._currentTargetPos.setTo(0,0,0),this.pathMul||(this.pathMul=PathManager.getNewPath(d),this.pathMul.setData(this,function(){e.reset()},this._currentPos,this.rotationMatrix,this._currentTargetPos),this.pathMul.speed=this.data.speed),this.pathMul.reset()},b.prototype.getMulSocket=function(a){a&&this.pathMul.applyData(a)},b}(SkillTrajectory),SkillPath=function(){function a(){this._currentDirect=new Vector3D}return a.prototype.update=function(a){if(this.time=a,this.hasReached)return this.endTime+=a,void(this.endTime>200&&this.applyArrive());if(this.skillTrajectory.setCurrentPos()&&(this._currentDirect.x=this.currentTargetPos.x-this.currentPos.x,this._currentDirect.y=this.currentTargetPos.y-this.currentPos.y,this._currentDirect.z=this.currentTargetPos.z-this.currentPos.z,this._currentDirect.normalize(),this._currentDirect.scaleBy(this.speed),this.setRotationMatrix(this.currentTargetPos.subtract(this.currentPos)),0==this._currentDirect.length))return void this.arrive();var b=this._currentDirect.length*this.time;if(!this.hasReached){var c=Vector3D.distance(this.currentPos,this.currentTargetPos);this.currentPos.x+=this._currentDirect.x*this.time,this.currentPos.y+=this._currentDirect.y*this.time,this.currentPos.z+=this._currentDirect.z*this.time}b>c&&this.arrive()},a.prototype.setRotationMatrix=function(a){a.normalize();var b=new Vector3D(0,0,-1),c=b.cross(a);c.normalize();var d=Math.acos(a.dot(b)),e=new Quaternion;e.fromAxisAngle(c,d),e.toMatrix3D(this.rotationMatrix)},a.prototype.arrive=function(){this.hasReached=!0},a.prototype.applyArrive=function(){this.endFun(),this.bloodFun&&this.bloodFun()},a.prototype.reset=function(){this.hasReached=!1,this._currentDirect.setTo(0,0,0),this.endTime=0},a.prototype.add=function(){},a.prototype.setData=function(a,b,c,d,e,f){this.skillTrajectory=a,this.currentPos=c,this.rotationMatrix=d,this.currentTargetPos=e,this.endFun=b,this.bloodFun=f},a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},SkillSinPath=function(a){function b(){a.apply(this,arguments),this.basePos=new Vector3D}return __extends(b,a),b.prototype.add=function(){this.skillTrajectory.setCurrentPos();var a=new Vector3D;a.x=this.currentTargetPos.x-this.currentPos.x,a.y=this.currentTargetPos.y-this.currentPos.y,a.z=this.currentTargetPos.z-this.currentPos.z,this.basePos.setTo(this.currentPos.x,this.currentPos.y,this.currentPos.z),this.alltime=a.length/this.speed},b.prototype.update=function(a){if(this.time=a,this.lastTime+=a,this.hasReached)return this.endTime+=a,void(this.endTime>200&&this.applyArrive());this.skillTrajectory.setCurrentPos();var b=this.lastTime/this.alltime;if(b-=b*b,b*=250,this._currentDirect.x=this.currentTargetPos.x-this.basePos.x,this._currentDirect.y=this.currentTargetPos.y-this.basePos.y,this._currentDirect.z=this.currentTargetPos.z-this.basePos.z,this._currentDirect.normalize(),this._currentDirect.scaleBy(this.speed),this.setRotationMatrix(this.currentTargetPos.subtract(this.basePos)),0==this._currentDirect.length)return void this.arrive();var c=this._currentDirect.length*this.time;if(!this.hasReached){var d=Vector3D.distance(this.basePos,this.currentTargetPos);this.basePos.x+=this._currentDirect.x*this.time,this.basePos.y+=this._currentDirect.y*this.time,this.basePos.z+=this._currentDirect.z*this.time,this.currentPos.x=this.basePos.x,this.currentPos.y=this.basePos.y+b,this.currentPos.z=this.basePos.z}c>d&&this.arrive()},b.prototype.reset=function(){a.prototype.reset.call(this),this.lastTime=0},b}(SkillPath),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},SkillMulPath=function(a){function b(){a.apply(this,arguments),this.lastTime=0}return __extends(b,a),b.prototype.setInitCurrentPos=function(a){this.currentPosAry=a,this.allTimeList=new Array;for(var b=0;b<a.length;b++)this.allTimeList.push(0)},b.prototype.add=function(){this.skillTrajectory.setCurrentPos(),this.directAry=new Array;for(var a=0,b=0;b<this.currentPosAry.length;b++){var c=new Vector3D;c.x=this.currentTargetPos.x-this.currentPosAry[b].x,c.y=this.currentTargetPos.y-this.currentPosAry[b].y,c.z=this.currentTargetPos.z-this.currentPosAry[b].z;var d=c.length;d>a&&(a=d,this.maxV3d=this.currentPosAry[b]),this.allTimeList[b]=d/this.speed,c.normalize(),c.scaleBy(this.speed),this.directAry.push(c)}this.alltime=a/this.speed,this.setAllData()},b.prototype.setAllData=function(){var a=float2int(this.alltime/33)+8;this.resultAry=new Array;for(var b=0;b<this.currentPosAry.length;b++){var c=new Array;this.resultAry.push(c);for(var d=this.directAry[b],e=0;6>e;e++)c.push([this.currentPosAry[b].x,this.currentPosAry[b].y,this.currentPosAry[b].z]);for(var f=0;a>f;f++){this.lastTime=33*f;var g,h=this.lastTime/this.allTimeList[b],i=h;h>=1?(i=0,g=[this.currentTargetPos.x,this.currentTargetPos.y,this.currentTargetPos.z]):(i-=i*i,i*=250,g=[d.x*this.lastTime+this.currentPosAry[b].x,d.y*this.lastTime+i+this.currentPosAry[b].y,d.z*this.lastTime+this.currentPosAry[b].z]);var j;if(0==f)j=[0,1,0];else{var k=c[2*f-2];j=[g[0]-k[0],g[1]-k[1],g[2]-k[2]];var l=Math.sqrt(j[0]*j[0]+j[1]*j[1]+j[2]*j[2]);j[0]/=l,j[1]/=l,j[2]/=l}c.push(g,j)}}},b.prototype.update=function(a){if(this.time=a,this.lastTime+=a,this.hasReached)return this.endTime+=a,void(this.endTime>200&&this.applyArrive());this.skillTrajectory.setCurrentPos();for(var b=0;b<this.currentPosAry.length;b++){var c=this.lastTime/this.allTimeList[b];c-=c*c,c*=250;var d=this.currentPosAry[b];if(this._currentDirect.x=this.currentTargetPos.x-d.x,this._currentDirect.y=this.currentTargetPos.y-d.y,this._currentDirect.z=this.currentTargetPos.z-d.z,this._currentDirect.normalize(),this._currentDirect.scaleBy(this.speed),this.maxV3d==d&&(this.setRotationMatrix(this.currentTargetPos.subtract(d)),0==this._currentDirect.length))return void this.arrive();var e=this._currentDirect.length*this.time;if(!this.hasReached){var f=Vector3D.distance(d,this.currentTargetPos);d.x+=this._currentDirect.x*this.time,d.y+=this._currentDirect.y*this.time,d.z+=this._currentDirect.z*this.time,d.w=c}this.maxV3d==d&&e>f&&this.arrive()}this.currentPos.setTo(this.currentPosAry[0].x,this.currentPosAry[0].y+this.currentPosAry[0].w,this.currentPosAry[0].z)},b.prototype.setData=function(b,c,d,e,f){a.prototype.setData.call(this,b,c,d,e,f,null),this.skillMul=b},b.prototype.applyData=function(a){for(var b=0;b<a.length;b++)a[b].setTo(this.currentPosAry[b].x,this.currentPosAry[b].y+this.currentPosAry[b].w,this.currentPosAry[b].z)},b.prototype.reset=function(){a.prototype.reset.call(this),this.lastTime=0},b}(SkillPath),PathManager=function(){function a(){}return a.reg=function(a,b){this.dic[a]=b},a.getNewPath=function(a){var b=this.dic[a];return new b},a.init=function(){this.dic[0]=SkillPath,this.dic[1]=SkillSinPath,this.dic[2]=SkillMulPath},a.dic=new Object,a}(),LoadManager=function(){function a(){this._loadThreadList=new Array,this._waitLoadList=new Array;for(var a=0;10>a;a++)this._loadThreadList.push(new LoaderThread)}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.load=function(a,b,c,d,e){void 0===d&&(d=null),void 0===e&&(e=null),(!a||a.length<1||-1!=a.search("undefined"))&&console.log("加载地址不能为空"),-1!=a.search("undefined.txt")&&console.log("没有这个文件");for(var f=new LoadInfo(a,b,c,d,e),g=0;g<this._loadThreadList.length;g++)if(this._loadThreadList[g].idle)return void this._loadThreadList[g].load(f);this._waitLoadList.push(f)},a.prototype.loadWaitList=function(){if(!(this._waitLoadList.length<=0))for(var a=0;a<this._loadThreadList.length;a++)if(this._loadThreadList[a].idle)return void this._loadThreadList[a].load(this._waitLoadList.shift())},a.BYTE_TYPE="BYTE_TYPE",a.IMG_TYPE="IMG_TYPE",a.XML_TYPE="XML_TYPE",a}(),LoaderThread=function(){function a(){var a=this;this._xhr=new XMLHttpRequest,this._xhr.onreadystatechange=function(){200==a._xhr.status&&4==a._xhr.readyState&&a.loadByteXML()},this._xhr.onprogress=function(b){a._loadInfo.progressFun&&a._loadInfo.progressFun(b.loaded/b.total)},this._xhr.onerror=function(){a.loadError()},this._img=new Image,this._img.onload=function(){a.loadImg()},this._img.onerror=function(){a.loadError()},this.idle=!0}return a.prototype.load=function(a){this._loadInfo=a,this.idle=!1,this._url=a.url,this._loadInfo.type==LoadManager.BYTE_TYPE?(this._xhr.open("GET",a.url,!0),this._xhr.responseType="arraybuffer",this._xhr.send()):this._loadInfo.type==LoadManager.XML_TYPE?(this._xhr.open("GET",a.url,!0),this._xhr.responseType="text",this._xhr.send()):this._loadInfo.type==LoadManager.IMG_TYPE&&(this._img.url==a.url?this.loadImg():(this._img.url=a.url,this._img.src=a.url))},a.prototype.loadError=function(){this.idle=!0,this._loadInfo=null,LoadManager.getInstance().loadWaitList()},a.prototype.loadByteXML=function(){this._loadInfo.info?this._loadInfo.fun(this._xhr.response,this._loadInfo.info):this._loadInfo.fun(this._xhr.response),this.idle=!0,this._loadInfo=null,LoadManager.getInstance().loadWaitList()},a.prototype.loadByteImg=function(){var a=new Blob([this._xhr.response],{type:"application/octet-binary"});this._img.src=URL.createObjectURL(a)},a.prototype.loadImg=function(){this._loadInfo.info?this._loadInfo.fun(this._img,this._loadInfo.info):this._loadInfo.fun(this._img),this.idle=!0,this._loadInfo=null,LoadManager.getInstance().loadWaitList()},a}(),LoadInfo=function(){function a(a,b,c,d,e){void 0===d&&(d=null),void 0===e&&(e=null),this.url=a,this.type=b,this.fun=c,this.info=d,this.progressFun=e}return a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ObjDataManager=function(a){function b(){a.call(this),this._loadList=new Object}return __extends(b,a),b.getInstance=function(){return this._instance||(this._instance=new b),this._instance},b.prototype.getObjData=function(a,b){var c=this;if(this._dic[a])return b(this._dic[a]),void this._dic[a].useNum++;var d;this._loadList[a]||(this._loadList[a]=new Array,LoadManager.getInstance().load(a,LoadManager.BYTE_TYPE,function(b){c.loadObjCom(b,a)})),d=this._loadList[a],d.push(b)},b.prototype.registerUrl=function(a){this._dic[a]&&this._dic[a].useNum++},b.prototype.releaseUrl=function(a){this._dic[a]&&this._dic[a].clearUseNum()},b.prototype.gc=function(){a.prototype.gc.call(this)},b.prototype.readFloatNrm=function(a,b){var c=a.readInt();if(c>0)for(var d=0;c>d;d++)b.push(a.readFloat())},b.prototype.loadObjCom=function(a,b){if(!this._dic[b]){var c=new ObjData,d=new ByteArray(a),e=d.readInt();d.readUTF();e>=20?this.readObj2OneBuffer(d,c):(BaseRes.readFloatTwoByte(d,c.vertices),BaseRes.readFloatTwoByte(d,c.uvs),BaseRes.readFloatOneByte(d,c.lightuvs),BaseRes.readFloatTwoByte(d,c.normals),BaseRes.readIntForTwoByte(d,c.indexs),BaseRes.readFloatTwoByte(d,c.tangents),BaseRes.readFloatTwoByte(d,c.bitangents),c.vertexBuffer=Scene_data.context3D.uploadBuff3D(c.vertices),c.uvBuffer=Scene_data.context3D.uploadBuff3D(c.uvs),c.lightUvBuffer=Scene_data.context3D.uploadBuff3D(c.lightuvs),c.normalsBuffer=Scene_data.context3D.uploadBuff3D(c.normals)),c.treNum=c.indexs.length,c.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(c.indexs),this._dic[b]=c;var f=this._loadList[b];if(f){for(var g=0;g<f.length;g++)f[g](c);delete this._loadList[b]}return c}},b.prototype.readObj2OneBuffer=function(a,b){for(var c,d=new Array,d=new Array,e=0,f=0;6>f;f++){var g=a.readBoolean();if(d.push(g),g)switch(f){case 1:e+=2;break;case 2:e+=2;break;default:e+=3}}c=a.readFloat();c*=4*e;var h=new ArrayBuffer(c),i=new DataView(h),j=3,k=j+2,l=d[2]?k+2:j+2,m=l+3,n=m+3;BaseRes.readBytes2ArrayBuffer(a,i,3,0,e),BaseRes.readBytes2ArrayBuffer(a,i,2,j,e),BaseRes.readBytes2ArrayBuffer(a,i,2,k,e,1),BaseRes.readBytes2ArrayBuffer(a,i,3,l,e),BaseRes.readBytes2ArrayBuffer(a,i,3,m,e),BaseRes.readBytes2ArrayBuffer(a,i,3,n,e),BaseRes.readIntForTwoByte(a,b.indexs),b.vertexBuffer=Scene_data.context3D.uploadBuff3DArrayBuffer(h),b.compressBuffer=!0,b.uvsOffsets=4*j,b.lightuvsOffsets=4*k,b.normalsOffsets=4*l,b.tangentsOffsets=4*m,b.bitangentsOffsets=4*n,b.stride=4*e},b.prototype.creatTBNBuffer=function(a){a.tangentBuffer=Scene_data.context3D.uploadBuff3D(a.tangents),a.bitangentBuffer=Scene_data.context3D.uploadBuff3D(a.bitangents)},b}(ResGC),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},MeshDataManager=function(a){function b(){a.call(this),this._loadDic=new Object}return __extends(b,a),b.getInstance=function(){return this._instance||(this._instance=new b),this._instance},b.prototype.getMeshData=function(a,b,c){var d=this;return void 0===c&&(c=1),this._dic[a]&&this._dic[a].ready?(b(this._dic[a]),void this._dic[a].useNum++):this._loadDic[a]?void this._loadDic[a].push(b):(this._loadDic[a]=new Array,this._loadDic[a].push(b),void ResManager.getInstance().loadRoleRes(Scene_data.fileRoot+a,function(a){d.roleResCom(a,b)},c))},b.prototype.roleResCom=function(a,b){var c=a.roleUrl,d=this._dic[c];d.loadMaterial(),d.setAction(a.actionAry,c),a.ambientLightColor&&(d.lightData=[[a.ambientLightColor.x,a.ambientLightColor.y,a.ambientLightColor.z],[a.nrmDircet.x,a.nrmDircet.y,a.nrmDircet.z],[a.sunLigthColor.x,a.sunLigthColor.y,a.sunLigthColor.z]]);for(var e=0;e<this._loadDic[c].length;e++)this._loadDic[c][e](d),d.useNum++;delete this._loadDic[c],d.ready=!0},b.prototype.gc=function(){a.prototype.gc.call(this)},b.prototype.readData=function(a,b,c,d){var e=new SkinMesh;e.fileScale=a.readFloat(),d>=19?e.tittleHeight=a.readFloat():e.tittleHeight=50,e.hitBox=new Vector2D(20,20),d>=23&&(e.hitBox.x=a.readFloat(),e.hitBox.y=a.readFloat()),e.makeHitBoxItem();for(var f=a.readInt(),g=new Object,h=0;f>h;h++){var i=new MeshData;d>=21?this.readMesh2OneBuffer(a,i):(BaseRes.readFloatTwoByte(a,i.vertices),BaseRes.readFloatTwoByte(a,i.tangents),BaseRes.readFloatTwoByte(a,i.bitangents),BaseRes.readFloatTwoByte(a,i.normals),BaseRes.readFloatTwoByte(a,i.uvs),BaseRes.readIntForOneByte(a,i.boneIDAry),BaseRes.readFloatOneByte(a,i.boneWeightAry),BaseRes.readIntForTwoByte(a,i.indexs),BaseRes.readIntForTwoByte(a,i.boneNewIDAry),this.uploadMesh(i)),i.treNum=i.indexs.length,i.materialUrl=a.readUTF(),i.materialParamData=BaseRes.readMaterialParamData(a);for(var j=a.readInt(),k=0;j>k;k++){var l=new BindParticle(a.readUTF(),a.readUTF());i.particleAry.push(l),g[l.url]=!0}e.addMesh(i)}for(var m in g)ParticleManager.getInstance().registerUrl(m);e.allParticleDic=g;for(var n=a.readInt(),o=new Array,k=0;n>k;k++){var p=new Array(a.readFloat(),a.readFloat(),a.readFloat(),a.readFloat(),a.readFloat(),a.readFloat());o.push(p)}this.getBindPosMatrix(o,e);var q=a.readInt();e.boneSocketDic=new Object;for(var k=0;q>k;k++){var r=new BoneSocketData;r.name=a.readUTF(),r.boneName=a.readUTF(),r.index=a.readInt(),r.x=a.readFloat(),r.y=a.readFloat(),r.z=a.readFloat(),r.rotationX=a.readFloat(),r.rotationY=a.readFloat(),r.rotationZ=a.readFloat(),e.boneSocketDic[r.name]=r}return this._dic[c]=e,e},b.prototype.readMesh2OneBuffer=function(a,b){for(var c=a.readInt(),d=new Array,e=0,f=0;5>f;f++){var g=a.readBoolean();d.push(g),g&&(e+=1==f?2:3)}e+=8,c*=4*e;var h,i=3,j=i+2,k=j+3,l=k+3;h=d[2]?d[4]?l+3:j+3:i+2;var m=h+4,n=new ArrayBuffer(c),o=new DataView(n);BaseRes.readBytes2ArrayBuffer(a,o,3,0,e),BaseRes.readBytes2ArrayBuffer(a,o,2,i,e),BaseRes.readBytes2ArrayBuffer(a,o,3,j,e),BaseRes.readBytes2ArrayBuffer(a,o,3,k,e),BaseRes.readBytes2ArrayBuffer(a,o,3,l,e),BaseRes.readBytes2ArrayBuffer(a,o,4,h,e,2),BaseRes.readBytes2ArrayBuffer(a,o,4,m,e,1),BaseRes.readIntForTwoByte(a,b.indexs),BaseRes.readIntForTwoByte(a,b.boneNewIDAry),b.compressBuffer=!0,b.uvsOffsets=4*i,b.normalsOffsets=4*j,b.tangentsOffsets=4*k,b.bitangentsOffsets=4*l,b.boneIDOffsets=4*h,b.boneWeightOffsets=4*m,b.stride=4*e,b.vertexBuffer=Scene_data.context3D.uploadBuff3DArrayBuffer(n),b.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(b.indexs)},b.prototype.cloneMeshData=function(a,b){var c=a.vertices,d=a.normals,e=a.uvs,f=a.boneIDAry,g=a.boneWeightAry,h=a.indexs;a.vertices=new Array,a.normals=new Array,a.uvs=new Array,a.boneIDAry=new Array,a.boneWeightAry=new Array,a.indexs=new Array;for(var i=c.length/3,j=0;b>j;j++){a.vertices=a.vertices.concat(c),a.normals=a.normals.concat(d),a.boneIDAry=a.boneIDAry.concat(f),a.boneWeightAry=a.boneWeightAry.concat(g);for(var k=0;k<e.length;k+=2)a.uvs.push(e[k],e[k+1],j);for(var k=0;k<h.length;k++)a.indexs.push(h[k]+j*i)}a.treNum=a.indexs.length},b.prototype.getBindPosMatrix=function(a,b){for(var c=new Array,d=new Array,e=0;e<a.length;e++){var f=a[e],g=new Quaternion(f[0],f[1],f[2]);g.setMd5W();var h=g.toMatrix3D();h.appendTranslation(f[3],f[4],f[5]),d.push(h.clone()),h.invert(),c.push(h)}b.bindPosMatrixAry=c,b.bindPosInvertMatrixAry=d},b.prototype.uploadMesh=function(a){a.vertexBuffer=Scene_data.context3D.uploadBuff3D(a.vertices),a.uvBuffer=Scene_data.context3D.uploadBuff3D(a.uvs),a.boneIdBuffer=Scene_data.context3D.uploadBuff3D(a.boneIDAry),a.boneWeightBuffer=Scene_data.context3D.uploadBuff3D(a.boneWeightAry),a.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(a.indexs)},b.prototype.uploadPbrMesh=function(a,b){a.normalsBuffer=Scene_data.context3D.uploadBuff3D(a.normals),b&&(a.tangentBuffer=Scene_data.context3D.uploadBuff3D(a.tangents),a.bitangentBuffer=Scene_data.context3D.uploadBuff3D(a.bitangents))},b.prototype.preLoad=function(a){this.getMeshData(a,function(a){a.loadMaterial()})},b}(ResGC),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},AnimManager=function(){function a(){this._dic=new Object}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.getAnimData=function(a,b){var c=this;return this._dic[a]?void b(this._dic[a]):void LoadManager.getInstance().load(a,LoadManager.BYTE_TYPE,function(b,d){var e=c.readData(new ByteArray(b),a);d(e)},b)},a.prototype.getAnimDataImmediate=function(a){return this._dic[a]},a.prototype.clearAnim=function(a){delete this._dic[a]},a.prototype.readData=function(a,b){var c=new Array,d=new Array,e=new AnimData;e.inLoop=a.readInt();for(var f=a.readInt(),g=0;f>g;g++)e.inter.push(a.readInt());f=a.readInt();for(var g=0;f>g;g++)e.bounds.push(a.readVector3D());e.nameHeight=a.readInt(),f=a.readInt();for(var g=0;f>g;g++){var h=new ObjectBone;h.father=a.readInt(),h.changtype=a.readInt(),h.startIndex=a.readInt(),h.tx=a.readFloat(),h.ty=a.readFloat(),h.tz=a.readFloat(),h.qx=a.readFloat(),h.qy=a.readFloat(),h.qz=a.readFloat(),c.push(h)}this.readFrameData(a,d),f=a.readInt();for(var g=0;f>g;g++)e.posAry.push(a.readVector3D());return e.matrixAry=this.processFrame(d,c),this._dic[b]=e,e},a.prototype.readFrameData=function(a,b){for(var c=this.readFrameTypeData(a),d=a.readBoolean(),e=a.readFloat(),f=a.readInt(),g=0;f>g;g++){var h=a.readInt(),i=new Array;b.push(i);for(var j=0;h>j;j++)c[j]?i.push(a.readFloatTwoByte(e)):d?i.push(a.readFloat()):i.push(a.readShort()/32767)}},a.prototype.readFrameTypeData=function(a){for(var b=new Array,c=a.readInt(),d=0;c>d;d++)b.push(a.readBoolean());return b},a.prototype.processFrame=function(a,b){for(var c=new Array,d=0;d<a.length;d++)c.push(this.frameToBone(a[d],b));return this.setFrameToMatrix(c)},a.prototype.frameToBone=function(a,b){for(var c=new Array,d=0;d<b.length;d++){var e=new ObjectBaseBone;
e.father=b[d].father;var f=0;1&b[d].changtype?(e.tx=a[b[d].startIndex+f],++f):e.tx=b[d].tx,2&b[d].changtype?(e.ty=a[b[d].startIndex+f],++f):e.ty=b[d].ty,4&b[d].changtype?(e.tz=a[b[d].startIndex+f],++f):e.tz=b[d].tz,8&b[d].changtype?(e.qx=a[b[d].startIndex+f],++f):e.qx=b[d].qx,16&b[d].changtype?(e.qy=a[b[d].startIndex+f],++f):e.qy=b[d].qy,32&b[d].changtype?(e.qz=a[b[d].startIndex+f],++f):e.qz=b[d].qz,c.push(e)}return c},a.prototype.setFrameToMatrix=function(a){for(var b=new Array,c=0;c<a.length;c++){var d=a[c],e=new Quaternion,f=new Matrix3D,g=new Array;b.push(g);for(var h=0;h<d.length;h++){var i=d[h];if(e=new Quaternion(i.qx,i.qy,i.qz),e.w=this.getW(e.x,e.y,e.z),-1==i.father)f=e.toMatrix3D(),f.appendTranslation(i.tx,i.ty,i.tz),f.appendRotation(-90,Vector3D.X_AXIS),g.push(f);else{d[i.father];f=e.toMatrix3D(),f.appendTranslation(i.tx,i.ty,i.tz),f.append(g[i.father]),g.push(f)}}for(h=0;h<g.length;h++)g[h].appendScale(-1,1,1)}return b},a.prototype.getW=function(a,b,c){var d=1-(a*a+b*b+c*c);return d=0>d?0:-Math.sqrt(d)},a}(),ObjectBaseBone=function(){function a(){}return a}(),ObjectBone=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.clone=function(){var a=new b;return a.tx=this.tx,a.ty=this.ty,a.tz=this.tz,a.tw=this.tw,a.qx=this.qx,a.qy=this.qy,a.qz=this.qz,a.qw=this.qw,a.changtype=this.changtype,a.name=this.name,a.father=this.father,a.startIndex=this.startIndex,a.matrix=this.matrix,a},b}(ObjectBaseBone),LightProbeManager=function(){function a(){this._defaultVec=new Array;for(var a=[.4444730390920146,-.3834955622240026,-.33124467509627725,.09365654209093091,-.05673310882817577,.2120523322966496,.02945768486978205,-.04965996229802928,-.1136529129285836],b=0;9>b;b++)this._defaultVec.push(new Vector3D(a[b],a[b],a[b]))}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.setLightProbeData=function(a){this._dataAry=a},a.prototype.clear=function(){this._dataAry=null},a.prototype.getData=function(a){if(!this._dataAry)return this._defaultVec;for(var b=0;b<this._dataAry.length;b++){var c=this._dataAry[b];if(this.testPoint(c,a)){var d=c.postion,e=a.subtract(d);return this.getResultData(c.posItem,float2int(e.x/c.betweenNum),float2int(e.z/c.betweenNum),float2int(e.y/c.betweenNum),c.betweenNum,e)}}return this._defaultVec},a.prototype.testPoint=function(a,b){var c=(a.cubeVec.x-1)*a.betweenNum,d=(a.cubeVec.y-1)*a.betweenNum,e=(a.cubeVec.z-1)*a.betweenNum,f=b.x-a.postion.x,g=b.y-a.postion.y,h=b.z-a.postion.z;return f>=0&&c>f&&g>=0&&d>g&&h>=0&&e>h?!0:!1},a.prototype.getResultData=function(a,b,c,d,e,f){var g=new Array;g.push(new PosItem(a[b][c][d],f)),g.push(new PosItem(a[b+1][c][d],f)),g.push(new PosItem(a[b][c+1][d],f)),g.push(new PosItem(a[b+1][c+1][d],f)),g.push(new PosItem(a[b][c][d+1],f)),g.push(new PosItem(a[b+1][c][d+1],f)),g.push(new PosItem(a[b][c+1][d+1],f)),g.push(new PosItem(a[b+1][c+1][d+1],f));for(var h=0,i=0;i<g.length;i++)h+=g[i].dis;for(i=0;i<g.length;i++)g[i].setBais(h);var j=0;for(i=0;i<g.length;i++)j+=g[i].bais;for(i=0;i<g.length;i++)g[i].bais=g[i].bais/j;var k=new Array;for(i=0;9>i;i++){for(var l=new Vector3D,m=0;m<g.length;m++){var n=new Vector3D(g[m].vecNum[i].x,g[m].vecNum[i].y,g[m].vecNum[i].z);n.scaleBy(g[m].bais),l=l.add(n)}k.push(l)}return k},a}(),PosItem=function(){function a(a,b){this.pos=new Vector3D(a.x,a.y,a.z),this.vecNum=a.resultSHVec,this.dis=Vector3D.distance(this.pos,b)}return a.prototype.setBais=function(a){this.bais=this.dis/a*(this.dis/a),this.bais=1/this.bais},a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},GroupDataManager=function(a){function b(){a.apply(this,arguments),this._loadDic=new Object}return __extends(b,a),b.getInstance=function(){return this._instance||(this._instance=new b),this._instance},b.prototype.getGroupData=function(a,b){var c=this;if(this._dic[a]){var d=this._dic[a];return d.useNum++,void b(d)}if(this._loadDic[a])return void this._loadDic[a].push(b);this._loadDic[a]=new Array,this._loadDic[a].push(b);var e=new GroupRes;e.load(a,function(){for(var b=c._loadDic[a],d=0;d<b.length;d++){var f=b[d];f(e)}c._dic[a]=e,delete c._loadDic[a],e.initReg()})},b}(ResGC),AstarUtil=function(){function a(){}return a.setData=function(a){this.navmeshData=a,this.heightItem=this.navmeshData.heightItem,this.jumpItem=this.navmeshData.jumpItem,this.midu=this.navmeshData.midu,this.aPos=new Vector3D(this.navmeshData.aPos.x,this.navmeshData.aPos.y,this.navmeshData.aPos.z),this.makeStarGraph(this.navmeshData.astarItem),this.astarWidth=this.heightItem[0].length,this.astarHeight=this.heightItem.length,SceneManager.getInstance().fixAstart(new Vector2D(this.aPos.x,this.midu*this.astarHeight+this.aPos.z)),this.mathAreaRect(),this.mathMinMapRect()},Object.defineProperty(a,"sceneVectList",{set:function(a){this._sceneVectList=a,this._frist=!0},enumerable:!0,configurable:!0}),a.getJumpDataByV2d=function(a,b){return this.jumpItem&&this.jumpItem.length&&this.jumpItem[b]&&1==this.jumpItem[b][a]?!0:!1},a.mathMinMapRect=function(){var b=(a.navmeshData.midu,a.navmeshData.astarItem[0].length),c=a.navmeshData.astarItem.length,d=a.navmeshData.aPos.x+b*a.navmeshData.midu,e=a.navmeshData.aPos.z+c*a.navmeshData.midu;d=Math.max(Math.abs(a.navmeshData.aPos.x),Math.abs(d)),e=Math.max(Math.abs(a.navmeshData.aPos.z),Math.abs(e));var f=Math.max(d,e);f+=100,f=Math.round(f);var g=new Rectangle;g.x=-f,g.y=-f,g.width=2*f,g.height=2*f,g.x-=1,g.y-=1,g.width+=2,g.height+=2,g.width/=2,g.height/=2,this.minMapRect=g},a.mathAreaRect=function(){this.areaRect=new Rectangle,this.areaRect.x=this.aPos.x,this.areaRect.y=this.aPos.z,this.areaRect.width=this.astarWidth*this.midu,this.areaRect.height=this.astarHeight*this.midu},a.clear=function(){this._bakData=this.navmeshData,this.aPos.setTo(0,0,0),this.navmeshData=null},a.porcessBak=function(a){a&&this.setData(this._bakData),this._bakData=null},a.getHeightByPos=function(a){if(this.heightItem){var b=a.subtract(this.aPos).add(new Vector3D(this.midu/2,0,this.midu/2)),c=(this.astarWidth-1)*this.midu,d=(this.astarHeight-1)*this.midu;if(b.x>0&&b.x<=c&&b.z>0&&b.z<=d)return this.getBaseHeightByBitmapdata(b.x/this.midu,b.z/this.midu)}return-500},a.getBaseHeightByBitmapdata=function(a,b){var c=a-float2int(a),d=b-float2int(b),e=this.getBitmapDataHight(float2int(a),float2int(b)),f=this.getBitmapDataHight(float2int(a),Math.ceil(b)),g=this.getBitmapDataHight(Math.ceil(a),float2int(b)),h=this.getBitmapDataHight(Math.ceil(a),Math.ceil(b)),i=(1-c)*(1-d),j=(1-c)*d,k=c*(1-d),l=c*d,m=i*e+j*f+k*g+l*h;return m},a.getBitmapDataHight=function(a,b){return this.heightItem[this.heightItem.length-1-b][a]},a.findPath=function(b,c){a.getPosIsCanMove(c)||(c=this.findNearLinePoint(b,c));var d=this.getGrapIndexByPos(b),e=this.getGrapIndexByPos(c);if(d&&e){for(var f=this.graphData.grid[d.x][d.y],g=this.graphData.grid[e.x][e.y],h=astar.search(this.graphData,f,g),i=new Array,j=0;j<h.length;j++){var k=new Vector2D(h[j].x,h[j].y),l=new Vector3D(k.x*this.midu+this.midu/2,3,k.y*this.midu+this.midu/2);l=l.add(this.aPos),i.push(l)}return i}return null},a.Path2dTo3d=function(a){for(var b=new Array,c=0;c<a.length;c++)b.push(this.getWorldPosByStart2D(a[c]));return b},a.getWorldPosByStart2D=function(a){if(this.navmeshData){var b=new Vector3D(a.x*this.midu,3,a.y*this.midu);return b.x=b.x+this.aPos.x+this.midu/2,b.z=this.aPos.z+this.midu*this.astarHeight-b.z-this.midu/2,b}return new Vector3D(10*a.x+this.midu/2,0,10*a.y-this.midu/2)},a.findPath3D=function(b,c){if(this.navmeshData){a.getPosIsCanMove(c)||(c=this.findNearLinePoint(b,c));var d=this.getGrapIndexByPos(b),e=this.getGrapIndexByPos(c);return this.getJumpDataByV2d(e.x,e.y)?(console.log("是跳跃区域不可寻路",e.x,e.y),null):this.isGridCanWalk(e)?d?this.findStraightLine(d,e)?[d,e]:this.findPath2D(d,e):(console.log("逻辑格位置有错"),null):null}return[this.getGrapIndexByPos(b),this.getGrapIndexByPos(c)]},a.findStraightLine=function(a,b){var c=new Vector2D(b.x-a.x,b.y-a.y);c.normalize();for(var d=Math.round(Vector2D.distance(a,b)),e=new Vector2D,f=0;d>f;f++){if(e.x=Math.floor(a.x+f*c.x),e.y=Math.floor(a.y+f*c.y),!this.isGridCanWalk(e))return!1;if(e.x=Math.ceil(a.x+f*c.x),e.y=Math.ceil(a.y+f*c.y),!this.isGridCanWalk(e))return!1;if(e.x=Math.round(a.x+f*c.x),e.y=Math.round(a.y+f*c.y),!this.isGridCanWalk(e))return!1}return!0},a.isGridCanWalk=function(a){return a?this.graphData.grid[a.y]&&this.graphData.grid[a.y][a.x]?0==this.graphData.grid[a.y][a.x].weight?!1:!0:!1:(console.log("没有这个点",a),!1)},a.findPath2D=function(a,b){console.log("findPath2DfindPath2DfindPath2D");try{if(this.graphData&&this.graphData.grid&&a&&b){var c=this.graphData.grid[a.y][a.x],d=this.graphData.grid[b.y][b.x],e=astar.search(this.graphData,c,d),f=new Array;f.push(a);for(var g=0;g<e.length;g++){var h=new Vector2D(e[g].y,e[g].x);f.push(h)}return this.simplifyAstar(f)}}catch(i){throw console.log("在此处理错误2"),new Error("findPath2D 在此处理错误")}return null},a.simplifyAstar=function(a){var b=0;if(a.length>1,a.length>2){var c=new Array;c.push(a[0]);for(var d=2;d<a.length;d++){var e=c[c.length-1],f=a[d-1],g=a[d];Math.atan2(f.y-e.y,f.x-e.x)!=Math.atan2(g.y-e.y,g.x-e.x)||b>126?c.push(f):b++}return c.push(a[a.length-1]),c}return a},a.findNearLinePoint=function(b,c){for(;Vector3D.distance(b,c)>5;)if(c=this.moveA2B(c,b,1),a.getPosIsCanMove(c))return c;return c},a.moveA2B=function(a,b,c){var d=b.subtract(a);return d.normalize(),d.scaleBy(c),d=d.add(a)},a.getPosIsCanMove=function(a){if(!this.graphData||!this.graphData.grid)return console.log("寻路这时是不可的a"),!1;var b=this.getGrapIndexByPos(a);return this.isGridCanWalk(b)},a.makeStarGraph=function(a){var b=new Array;this.canwalkItem.length=0;for(var c=0;c<a.length;c++){for(var d=new Array,e=0;e<a[c].length;e++)1==a[c][e]?d.push(1):d.push(0);b.push(d)}this.graphData=new Graph(b),this.graphData.diagonal=!0},a.getGrapIndexByPos=function(a){if(!this.navmeshData)return new Vector2D(float2int(a.x/this.midu),float2int(a.z/this.midu));var b=a.subtract(this.aPos).add(new Vector3D(0,0,this.midu/2)),c=this.astarWidth*this.midu,d=this.astarHeight*this.midu;return b.x>0&&b.x<c&&b.z>0&&b.z<d?new Vector2D(float2int(b.x/this.midu),float2int(this.astarHeight-b.z/this.midu)):null},a.getScenePos=function(a,b){var c=Groundposition.getGroundPos(a,b);return this.getLookAtPos(c)},a.getLookAtPos=function(b){var c=new Vector3D(Scene_data.cam3D.x,Scene_data.cam3D.y,Scene_data.cam3D.z),d=b.subtract(c);d.normalize();for(var e,f=0;;){f+=2;var g=d.clone();g.scaleBy(f);var h=c.add(g),i=a.getHeightByPos(h);if(i>h.y){e=h;break}if(f>1e3){e=null;break}}return e},a.aPos=new Vector3D,a.midu=10,a.astarWidth=0,a.astarHeight=0,a._frist=!1,a.canwalkItem=[],a}(),KeyboardType=function(){function a(){}return a.A=65,a.B=66,a.C=67,a.D=68,a.E=69,a.F=70,a.G=71,a.H=72,a.I=73,a.J=74,a.K=75,a.L=76,a.M=77,a.N=78,a.O=79,a.P=80,a.Q=81,a.R=82,a.S=83,a.T=84,a.U=85,a.V=86,a.W=87,a.X=88,a.Y=89,a.Z=90,a.Left=37,a.Up=38,a.Right=39,a.Down=40,a.Delete=46,a.F1=112,a.F2=113,a}(),MouseType=function(){function a(){}return a.MouseDown="mousedown",a.MouseUp="mouseup",a.MouseMove="mousemove",a.MouseClick="mouseclick",a.KeyDown="keydown",a.KeyUp="keyup",a.MouseWheel="mousewheel",a.TouchStart="touchstart",a.TouchMove="touchmove",a.TouchEnd="touchend",a.TouchClick="touchstart",a}(),KeyControl=function(){function a(){var a=this;this._isUpData=!0,this.speedNum=10,this._keyDic=new Object,this._lostMousePos=new Object3D,this._lastFousce=new Object3D,this._isMouseDown=!1,setInterval(function(){a.upData()},1e3/60)}return Object.defineProperty(a,"instance",{get:function(){return this._instance||(this._instance=new a),this._instance},enumerable:!0,configurable:!0}),a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.init=function(){document.addEventListener(MouseType.MouseDown,this.onMouseDown),document.addEventListener(MouseType.MouseUp,this.onMouseUp),document.addEventListener(MouseType.MouseMove,this.onMouseMove),document.addEventListener(MouseType.KeyDown,this.onKeyDown),document.addEventListener(MouseType.KeyUp,this.onKeyUp)},a.prototype.clearAllEvet=function(){document.removeEventListener(MouseType.MouseDown,this.onMouseDown),document.removeEventListener(MouseType.MouseUp,this.onMouseUp),document.removeEventListener(MouseType.MouseMove,this.onMouseMove),document.removeEventListener(MouseType.KeyDown,this.onKeyDown),document.removeEventListener(MouseType.KeyUp,this.onKeyUp)},a.prototype.clearMouseEvent=function(){document.removeEventListener(MouseType.MouseDown,this.onMouseDown),document.removeEventListener(MouseType.MouseUp,this.onMouseUp),document.removeEventListener(MouseType.MouseMove,this.onMouseMove),this._isUpData=!1},a.prototype.onMouseMove=function(b){var c=a.instance,d=new Object3D;d.x=b.pageX,d.y=b.pageY,c._isMouseDown&&(Scene_data.cam3D.rotationY=c._lastFousce.rotationY-(d.x-c._lostMousePos.x)/10,Scene_data.cam3D.rotationX=c._lastFousce.rotationX-(d.y-c._lostMousePos.y)/10)},a.prototype.onMouseDown=function(b){var c=a.instance;c._isMouseDown=!0,c._lostMousePos.x=b.pageX,c._lostMousePos.y=b.pageY,c._lastFousce.rotationX=Scene_data.cam3D.rotationX,c._lastFousce.rotationY=Scene_data.cam3D.rotationY},a.prototype.onMouseUp=function(b){var c=a.instance;c._isMouseDown=!1},a.prototype.upData=function(){if(this._isUpData){var a=this._keyDic;a[65]&&this.tureLeft(),a[83]&&this.tureDown(),a[68]&&this.tureRight(),a[87]&&this.tureUp(),a[81]&&(Scene_data.cam3D.y-=this.speedNum),a[69]&&(Scene_data.cam3D.y+=this.speedNum),MathClass.MathCam(Scene_data.cam3D)}},a.prototype.tureLeft=function(){var a=new Vector3D(-this.speedNum,0,0,1);new Matrix3D;this.mathFocus3D(a)},a.prototype.tureRight=function(){var a=new Vector3D(this.speedNum,0,0,1);this.mathFocus3D(a)},a.prototype.tureUp=function(){var a=new Vector3D(0,0,this.speedNum,1);this.mathFocus3D(a)},a.prototype.tureDown=function(){var a=new Vector3D(0,0,-this.speedNum,1);this.mathFocus3D(a)},a.prototype.mathFocus3D=function(a){var b=new Matrix3D;b.prependRotation(-Scene_data.cam3D.rotationY,Vector3D.Y_AXIS),b.prependRotation(-Scene_data.cam3D.rotationX,Vector3D.X_AXIS),a=b.transformVector(a),Scene_data.cam3D.x+=a.x,Scene_data.cam3D.y+=a.y,Scene_data.cam3D.z+=a.z},a.prototype.onKeyDown=function(b){var c=a.instance._keyDic;c[b.keyCode]=!0,0==b.keyCode},a.prototype.onKeyUp=function(b){var c=a.instance._keyDic;c[b.keyCode]=!1},a}(),TimeUtil=function(){function a(){}return a.getTimer=function(){return Date.now()-a.START_TIME},a.getTimerSecond=function(){return a.getTimer()/1e3},a.saveNowTime=function(){this.lastTime=this.getTimer()},a.getUseTime=function(){return this.getTimer()-this.lastTime},a.getZeroTime=function(a){var b=new Date(1e3*a);return b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.getTime()/1e3},a.getLocalTime=function(a){var b=new Date(1e3*a);return b.toLocaleDateString().replace(/\//g,"-")+" "+b.toTimeString().substr(0,5)},a.getLocalTime0=function(a){var b=new Date(1e3*a);return b.toLocaleDateString().replace(/\//g,"-")},a.getLocalTime1=function(a){var b=new Date(1e3*a);return b.toLocaleDateString().replace(/\//g,"-")+" "+b.toTimeString().substr(0,8)},a.getLocalTime2=function(a){var b=new Date(1e3*a);return b.toTimeString().substr(0,8)},a.getLocalTime3=function(a){var b=new Date(1e3*a);return b.toTimeString().substr(3,5)},a.getLocalTime4=function(a){return float2int(a/60)+"分"+a%60+"秒"},a.getLocalTime5=function(a){var b=new Date(1e3*a),c=b.toTimeString().substr(0,8),d=c.split(":");return d[0]+"时"+d[1]+"分"+d[2]+"秒"},a.getDiffTime1=function(a){var b=float2int(a/this.dayTime);a-=b*this.dayTime;var c=float2int(a/this.HourTime);a-=c*this.HourTime;var d=float2int(a/this.MinuteTime);return a-=d*this.MinuteTime,b+"天"+c+"时"+d+"分"+a+"秒"},a.getDiffTime2=function(a){var b=float2int(a/this.HourTime);a-=b*this.HourTime;var c=float2int(a/this.MinuteTime);return a-=c*this.MinuteTime,this.zeroStr(b)+":"+this.zeroStr(c)+":"+this.zeroStr(a)},a.zeroStr=function(a){return a>9?String(a):"0"+a},a.getDelayTimeStr=function(a){var b=Math.floor(a/3600),c="";return c=b>24?Math.floor(b/24)+"天前":b>=1?b+"小时前":"刚刚"},a.init=function(){a.START_TIME=Date.now()},a.addTimeTick=function(b,c,d){void 0===d&&(d=0);var e=new TimeFunTick;e.alltime=b,e.fun=c,e.time=b-d,a.timefunAry.push(e)},a.removeTimeTick=function(b){for(var c=0;c<a.timefunAry.length;c++)if(a.timefunAry[c]&&a.timefunAry[c].fun==b){a.timefunAry[c]=null;break}},a.addTimeOut=function(b,c){if(!this.hasTimeOut(c)){var d=new TimeFunOut;d.alltime=b,d.fun=c,d.time=0,a.outTimeFunAry.push(d)}},a.removeTimeOut=function(b){for(var c=0;c<a.outTimeFunAry.length;c++)if(a.outTimeFunAry[c]&&a.outTimeFunAry[c].fun==b){a.outTimeFunAry[c]=null;break}},a.hasTimeOut=function(b){for(var c=0;c<a.outTimeFunAry.length;c++)if(a.outTimeFunAry[c]&&a.outTimeFunAry[c].fun==b)return!0;return!1},a.addFrameTick=function(b){-1==a.funAry.indexOf(b)&&a.funAry.push(b)},a.hasFrameTick=function(b){var c=a.funAry.indexOf(b);return-1!=c?!0:!1},a.removeFrameTick=function(b){var c=a.funAry.indexOf(b);-1!=c&&(a.funAry[c]=null)},a.update=function(){for(var b=a.getTimer()-a.time,c=0;c<a.funAry.length;c++)a.funAry[c]&&a.funAry[c](b);for(var c=0;c<a.timefunAry.length;c++)a.timefunAry[c]&&a.timefunAry[c].update(b);for(var c=a.outTimeFunAry.length-1;c>=0;c--)a.outTimeFunAry[c]&&a.outTimeFunAry[c].update(b)&&(a.outTimeFunAry[c]=null);for(var c=a.funAry.length-1;c>=0;c--)a.funAry[c]||a.funAry.splice(c,1);for(var c=a.timefunAry.length-1;c>=0;c--)a.timefunAry[c]||a.timefunAry.splice(c,1);for(var c=a.outTimeFunAry.length-1;c>=0;c--)a.outTimeFunAry[c]||a.outTimeFunAry.splice(c,1);a.time=a.getTimer()},a.funAry=new Array,a.timefunAry=new Array,a.outTimeFunAry=new Array,a.time=0,a.lastTime=0,a.dayTime=86400,a.HourTime=3600,a.MinuteTime=60,a}(),TimeFunTick=function(){function a(){this.alltime=0,this.time=0}return a.prototype.update=function(a){this.time+=a,this.time>=this.alltime&&(this.fun(),this.time=0)},a}(),TimeFunOut=function(){function a(){this.alltime=0,this.time=0}return a.prototype.update=function(a){return this.time+=a,this.time>=this.alltime?(this.fun(),!0):!1},a}(),keyChi=["零","一","二","三","四","五","六","七","八","九","十","十一","十二","十三","十四","十五"],ColorTransition=function(){function a(){this._canvas=document.createElement("canvas"),this._cxt=this._canvas.getContext("2d"),this._gnt=this._cxt.createLinearGradient(0,0,128,0),this._canvas.style.zIndex="1"}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.getImageData=function(a){for(var b=a.pos.length,c=new Vector3D,d=0;b>d;d++)hexToArgb(a.color[d],!1,c),this._gnt.addColorStop(a.pos[d]/255,"rgba("+c.x+","+c.y+","+c.z+","+a.alpha[d]+")");return this._cxt.fillStyle=this._gnt,this._cxt.fillRect(0,0,128,2),this._cxt.getImageData(0,0,128,2)},a.prototype.getImageDataByVec=function(a,b){for(var c,d,e=this._cxt.createImageData(64,1),f=0;64>f;f++)c=4*f,d=4*float2int(f/64*b),e.data[c]=a[d],e.data[c+1]=a[d+1],e.data[c+2]=a[d+2],e.data[c+3]=a[d+3];return e},a.prototype.setData=function(){},a}(),ArtFont=function(){function a(){this.fontData=new Dictionary([]),this.fontData_Unit=new Dictionary([]),this.makeFontRect()}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.makeFontRect=function(){this.fontData.Red=this.makeBase12pxNum(new Vector2D(0,0)),this.fontData.Green=this.makeBase12pxNum(new Vector2D(0,15)),this.fontData.Blue=this.makeBase12pxNum(new Vector2D(0,30)),this.fontData.White=this.makeBase12pxNum(new Vector2D(0,45)),this.fontData.Yellow=this.makeBase12pxNum(new Vector2D(0,75)),this.getXmlData()},a.prototype.getXmlData=function(){for(var a=UIData.getUiArrByKey(UIData.textlist),b=0;b<a.length;b++){var c=String(a[b].name);if(-1!=c.search("A_")){var d=Number(c.substring(5,c.length)),e=new UIRectangle;e.pixelX=Number(a[b].ox),e.pixelY=Number(a[b].oy),e.pixelWitdh=Number(a[b].ow),e.pixelHeight=Number(a[b].oh),e.cellX=Number(a[b].cellX),e.cellY=Number(a[b].cellY);for(var f=new Rectangle(0,0,e.pixelWitdh/e.cellX,e.pixelHeight),g=new Array,h=0;h<e.cellX;h++)g.push(new Rectangle(e.pixelX+h*f.width,e.pixelY,f.width,f.height));this.fontData["NUM"+d]=g}if(-1!=c.search("B_")){var d=Number(c.substring(5,c.length)),e=new UIRectangle;e.pixelX=Number(a[b].ox),e.pixelY=Number(a[b].oy),e.pixelWitdh=Number(a[b].ow),e.pixelHeight=Number(a[b].oh),e.cellX=Number(a[b].cellX),e.cellY=Number(a[b].cellY);for(var f=new Rectangle(0,0,e.pixelWitdh/e.cellX,e.pixelHeight),g=new Array,h=0;h<e.cellX;h++)g.push(new Rectangle(e.pixelX+h*f.width,e.pixelY,f.width,f.height));this.fontData_Unit["BNUM"+d]=g}}},a.prototype.makeBase12pxNum=function(a){var b=new Array;b.push(new Rectangle(3,0,9,14)),b.push(new Rectangle(14,0,9,14)),b.push(new Rectangle(25,0,9,14)),b.push(new Rectangle(36,0,9,14)),b.push(new Rectangle(47,0,9,14)),b.push(new Rectangle(59,0,9,14)),b.push(new Rectangle(70,0,9,14)),b.push(new Rectangle(81,0,9,14)),b.push(new Rectangle(92.5,0,9,14)),b.push(new Rectangle(104,0,9,14)),b.push(new Rectangle(116,0,9,14)),b.push(new Rectangle(126,0,9,14)),b.push(new Rectangle(136,0,9,14)),b.push(new Rectangle(144,0,9,13)),b.push(new Rectangle(154,0,9,13));for(var c=0;c<b.length;c++)b[c].x=b[c].x+a.x,b[c].y=b[c].y+a.y;return b},a.prototype.writeFontToCtxLeft=function(b,c,d,e,f,g){void 0===d&&(d=a.num1),void 0===e&&(e=0),void 0===f&&(f=0),void 0===g&&(g=0);for(var h,i=this.fontData[d],j=0,k=0;k<c.length;k++){h=this.getCharId(c[k]);var l=this.getRect(h,d,i);if(!l)return void console.log("writeFontToCtxLeft有错");b.drawImage(UIData.textImg,l.x,l.y,l.width,l.height,j+e,f,l.width,l.height),j+=l.width-g}return j},a.prototype.writeFontToCtxRight=function(b,c,d,e,f,g){void 0===d&&(d=a.White),void 0===e&&(e=0),void 0===f&&(f=0),void 0===g&&(g=0);for(var h,i=this.fontData[d],j=0,k=this.getAirFontWidth(b,c,d,g),l=0;l<c.length;l++){h=this.getCharId(c[l]);var m=this.getRect(h,d,i);b.drawImage(UIData.textImg,m.x,m.y,m.width,m.height,j+e-k,f,m.width,m.height),j+=m.width-g}return k},a.prototype.writeFontToCtxCenten=function(b,c,d,e,f,g){void 0===d&&(d=a.White),void 0===e&&(e=0),void 0===f&&(f=0),void 0===g&&(g=0);var h,i=this.fontData[d],j=0,k=this.getAirFontWidth(b,c,d,g)/2;void 0==c&&console.log("有错的");for(var l=0;l<c.length;l++){h=this.getCharId(c[l]);var m=this.getRect(h,d,i);b.drawImage(UIData.textImg,m.x,m.y,m.width,m.height,j+e-k,f,m.width,m.height),j+=m.width-g}return k},a.prototype.writeFontToSkinName=function(b,c,d,e,f,g){void 0===e&&(e=a.ORANGE_TXT),void 0===f&&(f=TextAlign.LEFT),void 0===g&&(g=0);var h=b.getRec(c);b.ctx=UIManager.getInstance().getContext2D(h.pixelWitdh,h.pixelHeight,!1);var i;return f==TextAlign.LEFT?i=this.writeFontToCtxLeft(b.ctx,d,e,0,0,g):f==TextAlign.RIGHT?i=this.writeFontToCtxRight(b.ctx,d,e,h.pixelWitdh,0,g):f==TextAlign.CENTER&&(i=this.writeFontToCtxCenten(b.ctx,d,e,h.pixelWitdh/2,0,g)),TextureManager.getInstance().updateTexture(b.texture,h.pixelX,h.pixelY,b.ctx),i},a.prototype.writeFontToSkinNameCenter=function(b,c,d,e,f){void 0===e&&(e=a.ORANGE_TXT),void 0===f&&(f=0);var g=b.getRec(c);b.ctx=UIManager.getInstance().getContext2D(g.pixelWitdh,g.pixelHeight,!1);for(var h,i=g.pixelWitdh/2,j=g.pixelHeight/2,k=this.fontData[e],l=0,m=this.getAirFontWidth(b.ctx,d,e,f)/2,n=0;n<d.length;n++){h=this.getCharId(d[n]);var o=this.getRect(h,e,k);b.ctx.drawImage(UIData.textImg,o.x,o.y,o.width,o.height,l+i-m,j-o.height/2,o.width,o.height),l+=o.width-f}TextureManager.getInstance().updateTexture(b.texture,g.pixelX,g.pixelY,b.ctx)},a.prototype.getAirFontWidth=function(b,c,d,e){if(void 0===d&&(d=a.White),void 0===e&&(e=0),void 0==c)return 0;for(var f,g=this.fontData[d],h=0,i=0;i<c.length;i++){f=this.getCharId(c[i]);var j=this.getRect(f,d,g);h+=j.width-e}return h},a.prototype.getRect=function(a,b,c){var d;return d=a>15?this.fontData_Unit["B"+b][a-16]:c[a]},a.prototype.upArtFont=function(b,c,d,e,f,g){void 0===e&&(e=12),void 0===f&&(f=a.White),void 0===g&&(g=TextAlign.LEFT);var h=e/12,i=this.fontData[f],j=b.getRec(c);b.ctx=UIManager.getInstance().getContext2D(j.pixelWitdh,j.pixelHeight,!1);var k=this.getTotalWandDraw(j,d,i,h,b.ctx,!1),l=this.getXpos(g,k,new Rectangle(0,0,j.pixelWitdh,j.pixelHeight));this.getTotalWandDraw(j,d,i,h,b.ctx,!0,l),TextureManager.getInstance().updateTexture(b.texture,j.pixelX,j.pixelY,b.ctx)},a.prototype.upArtBase=function(b,c,d,e,f){void 0===e&&(e=a.White),void 0===f&&(f=TextAlign.LEFT);var g=1,h=this.fontData[e],i=b.getRec(c);b.ctx=UIManager.getInstance().getContext2D(i.pixelWitdh,i.pixelHeight,!1);var j=this.getTotalWandDraw(i,d,h,g,b.ctx,!1),k=this.getXpos(f,j,new Rectangle(0,0,i.pixelWitdh,i.pixelHeight));this.getTotalWandDraw(i,d,h,g,b.ctx,!0,k),TextureManager.getInstance().updateTexture(b.texture,i.pixelX,i.pixelY,b.ctx)},a.prototype.getXpos=function(a,b,c){var d=0;return a==TextAlign.LEFT?d=0:a==TextAlign.RIGHT?d=b-c.width:a==TextAlign.CENTER&&(d=(c.width-b)/2),d},a.prototype.getTotalWandDraw=function(a,b,c,d,e,f,g,h){void 0===g&&(g=0),void 0===h&&(h=0);for(var i,j=0,k=0;k<b.length;k++){i=this.getCharId(b[k]);var l=c[i];l||console.log("没有这个字"),f&&e.drawImage(UIData.textImg,l.x,l.y,l.width,l.height,a.x+j+g,a.y,l.width*d,l.height*d),j+=(l.width-h)*d}return j},a.prototype.getCharId=function(a){return"+"==a||"x"==a||"X"==a?10:"-"==a?11:"/"==a?12:":"==a?13:"."==a?14:"%"==a?15:"万"==a?16:"亿"==a?17:(NaN==Number(a)&&alert("MeshVo,GetCharId error:"+a),Number(a))},a.Red="Red",a.Green="Green",a.Blue="Blue",a.White="White",a.Yellow="Yellow",a.BOSSBIGTXT="NUM99",a.CN1="NUM100",a.num101="NUM101",a.num102="NUM102",a.BigYellow="NUM12",a.num99="NUM99",a.GARY_TXT="NUM1",a.ORANGE_TXT="NUM19",a.num1="NUM1",a.num2="NUM2",a.num3="NUM3",a.num4="NUM4",a.num5="NUM5",a.num6="NUM6",a.num7="NUM7",a.num10="NUM10",a.num8="NUM8",a.num9="NUM9",a.num11="NUM11",a.num12="NUM12",a.num13="NUM13",a.num14="NUM14",a.num15="NUM15",a.num16="NUM16",a.num17="NUM17",a.num18="NUM18",a.num19="NUM19",a.num20="NUM20",a.num21="NUM21",a.num22="NUM22",a.num23="NUM23",a.num24="NUM24",a.num25="NUM24",a.num26="NUM26",a.num27="NUM27",a.num28="NUM28",a.num30="NUM30",a.num51="NUM51",a.num52="NUM52",a.num53="NUM53",a.num54="NUM54",a.num55="NUM55",a.num56="NUM56",a.num57="NUM57",a.num58="NUM58",a.num59="NUM59",a.num60="NUM60",a.num61="NUM61",a}(),TextRegVo=function(){function a(){}return a}(),TextRegExp=function(){function a(){}return a.pushStr=function(b){this.item=new Array;for(var c,d=/\[\]|\[[A-Za-z0-9]{6}\]/g;null!=(c=d.exec(b));){var e=new TextRegVo;e.begin=c.index,e.end=d.lastIndex,e.color=c.toString(),e.color=e.color.replace("[",""),e.color=e.color.replace("]",""),e.color.length<5?e.color=a.defaultColor:e.color="#"+e.color,this.item.push(e)}},a.isColor=function(a,b){for(var c=0;c<this.item.length;c++)if(a>=this.item[c].begin&&a<this.item[c].end)return b&&(b.fillStyle=this.item[c].color),!0;return!1},a.getTextMetrics=function(a,b){b||(b=""),this.pushStr(b);for(var c=b,d="",e=0;e<c.length;e++)this.isColor(e,a)||(d+=c[e]);var f=a.measureText(d);return f},a.getTextOnlyTxt=function(a,b){b||(b=""),this.pushStr(b);for(var c=b,d="",e=0;e<c.length;e++)this.isColor(e,a)||(d+=c[e]);return d},a.getNextWords=function(a,b){var c=-1;if("/"==a[b]&&a.length>b+2)for(var d=a[b+0]+a[b+1]+a[b+2],e=0;e<UIData.faceItem.length;e++)if(UIData.faceItem[e]==d)return e+1;return c},a.wrapText=function(b,c,d,e,f,g,h,i,j,k){void 0===e&&(e=0),void 0===f&&(f=0),void 0===g&&(g=500),void 0===h&&(h=10),void 0===i&&(i=12),void 0===j&&(j=""),void 0===k&&(k=4),a.defaultColor=d,""!=j&&(b.strokeStyle=j,b.lineWidth=k),this.pushStr(c);for(var l=c,m="",n=2,o=1,p=0;l&&p<l.length;p++)if(!this.isColor(p,b)){var q=b.measureText(m.replace("\n","")),r=this.getNextWords(l,p);if(-1==r)q.width>g||"\n"==l[p]?(n+=h,m="","\n"!=l[p]&&(""!=j&&b.strokeText(l[p],e,f+n),b.fillText(l[p],e,f+n)),o++):(""!=j&&b.strokeText(l[p],e+1*q.width,f+n),b.fillText(l[p],e+1*q.width,f+n)),m+=l[p];else{var s=1.4*i,t=new Rectangle(e+1*q.width+0,f+n-s/10,s,s);q.width>g&&(n+=h,m="",o++,t=new Rectangle(e+0,f+n-s/10,s,s)),this.drawFaceIcon(b,t,r),p+=2,m+="脸1"}}return o},a.drawFaceIcon=function(a,b,c){UiDraw.cxtDrawImg(a,"F_FACE_"+c,b,UIData.publicUi)},a.defaultColor="#000000",a}(),LabelTextFont=function(){function a(){}return a.writeSingleLabel=function(a,b,c,d,e,f,g,h,i){void 0===d&&(d=12),void 0===e&&(e=TextAlign.CENTER),void 0===f&&(f="#ffffff"),void 0===g&&(g=""),void 0===h&&(h=4),void 0===i&&(i=!0),-1!=f.indexOf("[")&&(f="#"+f.substr(1,6));var j=a.getRec(b),k=UIManager.getInstance().getContext2D(j.pixelWitdh,j.pixelHeight,!1);k.fillStyle=f,k.font=(i?"bolder ":"")+" "+d+"px "+UIData.font;var l=TextRegExp.getTextMetrics(k,c),m=0;return e==TextAlign.CENTER?m=(j.pixelWitdh-l.width)/2:e==TextAlign.RIGHT&&(m=j.pixelWitdh-l.width),TextRegExp.wrapText(k,c,f,m,0,j.pixelWitdh-d/2,20,d,g,h),a.updateCtx(k,j.pixelX,j.pixelY),l.width},a.writeSingleLabelToCtx=function(a,b,c,d,e,f,g,h,i){void 0===c&&(c=12),void 0===d&&(d=0),void 0===e&&(e=0),void 0===f&&(f=TextAlign.CENTER),void 0===g&&(g="#ffffff"),void 0===h&&(h=""),void 0===i&&(i=!0),-1!=g.indexOf("[")&&(g="#"+g.substr(1,6)),a.fillStyle=g,a.font=(i?"bolder ":"")+" "+c+"px "+UIData.font;var j=TextRegExp.getTextMetrics(a,b);return f==TextAlign.CENTER?d+=(a.canvas.width-j.width)/2:f==TextAlign.RIGHT&&(d+=a.canvas.width-j.width),TextRegExp.wrapText(a,b,g,d,e,9999,20,c,h),j.width},a.writeSingleLabelToCtxSetAnchor=function(a,b,c,d,e,f,g,h,i){void 0===c&&(c=12),void 0===d&&(d=0),void 0===e&&(e=0),void 0===f&&(f=TextAlign.CENTER),void 0===g&&(g="#ffffff"),void 0===h&&(h=""),void 0===i&&(i=!0),-1!=g.indexOf("[")&&(g="#"+g.substr(1,6)),a.fillStyle=g,a.font=(i?"bolder ":"")+" "+c+"px "+UIData.font;var j=TextRegExp.getTextMetrics(a,b);return f==TextAlign.CENTER?d-=j.width/2:f==TextAlign.RIGHT&&(d-=j.width),TextRegExp.wrapText(a,b,g,d,e,9999,20,c,h),j.width},a.writeText=function(a,b,c,d,e,f,g,h,i){void 0===h&&(h=0),void 0===i&&(i=!1),-1!=g.indexOf("[")&&(g="#"+g.substr(1,6));var j=new Array,k=a.getRec(b),l=UIManager.getInstance().getContext2D(k.pixelWitdh,k.pixelHeight,!1);l.fillStyle=g,l.font=(i?"bolder ":"")+f+"px "+UIData.font;var m=this.getTextxpos(TextAlign.LEFT,l);return h>0?j=this.wrapText(l,e,c,d,h,f+2):l.fillText(e,c+m,d),a.updateCtx(l,k.pixelX,k.pixelY),j},a.writeTextAutoCenterToCtx=function(a,b,c,d,e,f){void 0===c&&(c=12),void 0===f&&(f="#ffffff"),-1!=f.indexOf("[")&&(f="#"+f.substr(1,6)),a.fillStyle=f,a.font="bolder  "+c+"px "+UIData.font;var g=0,h=0;this.getTextxpos(TextAlign.LEFT,a);d>0&&(this.isNewline(a,b,d)||(h=e/2-c/2),TextRegExp.wrapText(a,b,f,g,h,d,c+3))},a.writeTextAutoVerticalCenter=function(a,b,c,d,e,f,g){void 0===g&&(g=!1),-1!=e.indexOf("[")&&(e="#"+e.substr(1,6));var h=a.getRec(b),i=UIManager.getInstance().getContext2D(h.pixelWitdh,h.pixelHeight,!1);i.fillStyle=e,i.font=(g?"bolder ":"")+d+"px "+UIData.font;var j=0,k=0;this.getTextxpos(TextAlign.LEFT,i);f>0&&(this.isNewline(i,c,f)||(k=h.pixelHeight/2-d/2),TextRegExp.wrapText(i,c,e,j,k,f,d+3)),a.updateCtx(i,h.pixelX,h.pixelY)},a.writeTextAutoCenter=function(a,b,c,d,e,f,g){void 0===g&&(g=!1),-1!=e.indexOf("[")&&(e="#"+e.substr(1,6));var h=a.getRec(b),i=UIManager.getInstance().getContext2D(h.pixelWitdh,h.pixelHeight,!1);i.fillStyle=e,i.font=(g?"bolder ":"")+d+"px "+UIData.font;var j=0,k=0;this.getTextxpos(TextAlign.LEFT,i);if(f>0){if(!this.isNewline(i,c,f)){var l=i.measureText(c);k=h.pixelHeight/2-d/2,j=h.pixelWitdh/2-l.width/2}TextRegExp.wrapText(i,c,e,j,k,f,d+3)}a.updateCtx(i,h.pixelX,h.pixelY)},a.isNewline=function(a,b,c){var d=b,e=a.measureText(d),f=e.width;return f>c?!0:!1},a.writeTextToCtx=function(a,b,c,d,e,f,g,h){void 0===g&&(g=!1),void 0===h&&(h=0),a.textBaseline=TextAlign.MIDDLE,a.textAlign=TextAlign.CENTER,a.fillStyle=f,a.font="bolder "+e+"px "+UIData.font;var i=this.getTextxpos(TextAlign.CENTER,a);h>0?this.wrapText(a,d,b,c,h,e+3):a.fillText(d,b+i,c)},a.getTextxpos=function(a,b){var c=0;return a==TextAlign.LEFT?c=0:a==TextAlign.RIGHT?c=b.canvas.width:a==TextAlign.CENTER&&(c=b.canvas.width/2),c},a.wrapText=function(a,b,c,d,e,f){for(var g=0,h=d,i=b,j="",k=0;k<i.length;k++)if("\n"==i[k])a.fillText(j,c,h),
j="",h+=f;else{var l=j+i[k],m=a.measureText(l),n=m.width;g=Math.max(g,n),n>e?(a.fillText(j,c,h),j=i[k]+"",h+=f):j=l}return a.fillText(j,c,h),h=h-d+f,[g,h]},a.clearLabel=function(a,b){var c=a.getRec(b),d=UIManager.getInstance().getContext2D(c.pixelWitdh,c.pixelHeight,!1);a.updateCtx(d,c.pixelX,c.pixelY)},a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},bloodTittle;!function(a){var b=function(){function a(){}return a.NORMALDAMAGE=1,a.CRIT=2,a.DODGE=3,a.TREATMENT=4,a.VERTIGO=5,a.FREEZE=6,a.ATTACKADD=7,a.ATTACKREDUCE=8,a.EXPERIENCE=9,a.NORMALDAMAGEUP=11,a.CRITUP=12,a.MYNORMALDAMAGE=13,a.MYNORMALDAMAGEUP=14,a.MISS=15,a}();a.TextJumpType=b;var c=function(){function a(){}return a}();a.TextJumpUiVo=c;var d=function(c){function d(){c.apply(this,arguments)}return __extends(d,c),d.prototype.makeData=function(){if(this._data){var a=this._data;switch(this.dtime=a.endtime,this.pos=a.pos,a.type){case b.NORMALDAMAGE:case b.TREATMENT:ArtFont.getInstance().writeFontToSkinName(this.parent.uiAtlas,this.textureStr,String(a.str),"NUM"+(a.type+50),TextAlign.RIGHT);break;case b.MYNORMALDAMAGEUP:case b.MYNORMALDAMAGE:ArtFont.getInstance().writeFontToSkinName(this.parent.uiAtlas,this.textureStr,String(a.str),ArtFont.num53,TextAlign.RIGHT);break;case b.NORMALDAMAGEUP:ArtFont.getInstance().writeFontToSkinName(this.parent.uiAtlas,this.textureStr,String(a.str),"NUM"+(a.type+40),TextAlign.RIGHT);break;case b.DODGE:case b.VERTIGO:case b.FREEZE:case b.MISS:this.drawTxtBytext(a);break;case b.ATTACKADD:case b.ATTACKREDUCE:case b.EXPERIENCE:case b.CRIT:case b.CRITUP:this._width=this.drawTxtBydigitalAndtext(a)}}},d.prototype.drawTxtBytext=function(a){var c=this.parent.uiAtlas.getRec(this.textureStr),d=UIManager.getInstance().getContext2D(c.pixelWitdh,c.pixelHeight,!1),e=50;return a.type==b.MISS&&(e=67),UiDraw.cxtDrawImg(d,"TYPE"+a.type,new Rectangle(c.pixelWitdh-e,c.pixelHeight-25,e,25),UIData.publicUi),TextureManager.getInstance().updateTexture(this.parent.uiAtlas.texture,c.pixelX,c.pixelY,d),50},d.prototype.drawTxtBydigitalAndtext=function(a){var c,d=this.parent.uiAtlas.getRec(this.textureStr),e=UIManager.getInstance().getContext2D(d.pixelWitdh,d.pixelHeight,!1),f=a.type,g=50,h=25;a.type==b.ATTACKREDUCE?(f=b.ATTACKADD,c=ArtFont.num53):a.type==b.ATTACKADD?c=ArtFont.num54:a.type==b.EXPERIENCE?c=ArtFont.num54:a.type==b.CRIT?(c=ArtFont.num55,g=78,h=50):a.type==b.CRITUP&&(f-=10,g=78,h=50,c=ArtFont.num55);var i=ArtFont.getInstance().getAirFontWidth(e,String(this._data.str),c);return i+=g,UiDraw.cxtDrawImg(e,"TYPE"+f,new Rectangle(d.pixelWitdh-i,d.pixelHeight-h,g,h),UIData.publicUi),ArtFont.getInstance().writeFontToCtxLeft(e,String(this._data.str),c,d.pixelWitdh-i+g+2,d.pixelHeight-h),TextureManager.getInstance().updateTexture(this.parent.uiAtlas.texture,d.pixelX,d.pixelY,e),i},d.prototype.update=function(){if(this._data){if(this.time=TimeUtil.getTimer(),this.time>=this.dtime)return this.ui.parent.removeChild(this.ui),void(this._data=null);var a=(this._data,this.changerules(this.time));this.ui.width=256*a[2],this.ui.height=50*a[3],this.ui.y=a[1]-this.ui.height,this.ui.x=a[0]-this.ui.width/2+25,this.ui.alpha=a[4]}},d.prototype.changerules=function(b){var c=this._data;b=(b-c.starttime)/1e3*60;var d,e,f,g,h,i=new Array,j=this.Vector3DToVector2D(new Vector3D(this.pos.x,this.pos.y,this.pos.z));switch(c.type){case a.TextJumpType.NORMALDAMAGE:case a.TextJumpType.MYNORMALDAMAGE:d=j.x,4>b?(e=j.y-4*b,f=b/4*1.3+.2,f>1.5&&(f=1.5),g=f,h=b/3*.8+.2,h>1&&(h=1)):8>b?(e=this._lastchange[1]-2,f=this._lastchange[2]-1/6,g=f,h=b/3*.8+.2,h>1&&(h=1)):15>b?(e=this._lastchange[1]-2,f=this._lastchange[2]+1/6,g=f,h=b/3*.8+.2,h>1&&(h=1)):30>b?(e=this._lastchange[1]-2,f=this._lastchange[2]-.05,g=f,h=b/3*.8+.2,h>1&&(h=1)):72>b&&(e=50>b?this._lastchange[1]-2:this._lastchange[1]+2,d=this._lastchange[0]-1.5,f=this._lastchange[2],g=f,h=this._lastchange[4]-.01,0>h&&(h=0));break;case a.TextJumpType.CRIT:d=j.x,4>b?(e=j.y-4*b,f=b/4*1.3+.2,f>1.5&&(f=1.5),g=f,h=b/3*.8+.2,h>1&&(h=1)):8>b?(e=this._lastchange[1]-2,f=this._lastchange[2]-1/6,g=f,h=b/3*.8+.2,h>1&&(h=1)):15>b?(e=this._lastchange[1]-2,f=this._lastchange[2]+.25,g=f,h=b/3*.8+.2,h>1&&(h=1)):30>b?(e=this._lastchange[1]-2,f=this._lastchange[2]-.05,g=f,h=b/3*.8+.2,h>1&&(h=1)):100>b&&(e=50>b?this._lastchange[1]-2:this._lastchange[1]+2,d=this._lastchange[0]-1.5,f=this._lastchange[2],g=f,h=this._lastchange[4]-.01,0>h&&(h=0));break;case a.TextJumpType.NORMALDAMAGEUP:case a.TextJumpType.CRITUP:case a.TextJumpType.MYNORMALDAMAGEUP:d=j.x,4>b?(e=j.y-4*b,f=b/4*1.5+.2,f>1.7&&(f=1.7),g=f,h=b/3*.3+.2,h>.5&&(h=.5)):8>b?(e=this._lastchange[1]-2,f=this._lastchange[2]-.25,g=f,h=b/3*.3+.2,h>.5&&(h=.5)):15>b?(e=this._lastchange[1]-2,f=this._lastchange[2]+.25,g=f,h=b/3*.3+.2,h>.5&&(h=.5)):30>b&&(e=this._lastchange[1]-2,f=this._lastchange[2]-1/15,g=f,h=this._lastchange[4]-1/80,0>h&&(h=0));break;case a.TextJumpType.TREATMENT:d=j.x,e=j.y-1.5*b,12>b?(f=Math.ceil(b)/12*.8+.2,g=f,h=Math.ceil(b)/12*.8+.2):60>b&&(f=1,g=f,h=1-(b-11)/48);break;case a.TextJumpType.EXPERIENCE:e=j.y-=15,e-=.5*b,40>b?(d=j.x-.9*b,f=Math.ceil(b)/40*.3+.5,g=f,h=1):60>b&&(d=j.x-36,f=this._lastchange[2],g=f,h=1-(b-39)/20);break;case a.TextJumpType.ATTACKADD:case a.TextJumpType.ATTACKREDUCE:d=j.x+=110,e=j.y-1.8*b,12>b?(f=Math.ceil(b)/12*1.3+.1,g=f,h=Math.ceil(b)/12*.8+.2):24>b?(f=1.4-(b-11)/12*.4,g=f,h=1):60>b&&(f=1,g=f,h=1-(b-23)/36);break;case a.TextJumpType.DODGE:case a.TextJumpType.MISS:case a.TextJumpType.VERTIGO:case a.TextJumpType.FREEZE:d=j.x-=50,12>b?(e=j.y-3*b,f=1,g=f,h=Math.ceil(b)/12):36>b?(e=j.y-33,f=1,g=f,h=1):72>b&&(e=j.y-33-1.5*(b-36),f=1,g=f,h=1-(b-35)/36)}return i.push(d),i.push(e),i.push(f),i.push(g),i.push(h),i.push(j.x),i.push(j.y),this._lastchange=i,i},d}(Disp2DBaseText);a.TextJumpUiDrawAndRefreash=d;var e=function(a){function b(){a.apply(this,arguments),this.tempMatrix=new Matrix3D}return __extends(b,a),b.prototype.makeData=function(){this._data&&(this.charNameMeshVo=this.data,this.lastKey!=this.charNameMeshVo.name&&(this.ui.width=179.2,this.ui.height=22*.7,this.lastKey=this.charNameMeshVo.name,LabelTextFont.writeSingleLabel(this.parent.uiAtlas,this.textureStr,this.charNameMeshVo.name,20,TextAlign.CENTER,"#ffffff","#27262e")),this.charNameMeshVo.needDraw=!1)},b.prototype.update=function(){if(this.charNameMeshVo){if(this.charNameMeshVo.needDraw&&this.makeData(),this.charNameMeshVo.pos)if(this.charNameMeshVo.visible){if(this.needUpData(this.charNameMeshVo.pos)||this.charNameMeshVo.visibleChange){var a=Scene_data.cam3D.cameraMatrix.clone(this.tempMatrix);a.append(Scene_data.viewMatrx3D);var b=a.transformVector(this.charNameMeshVo.pos);this.ui.x=(b.x/b.w+1)*(Scene_data.stageWidth/2)/UIData.Scale-this.ui.width/2,this.ui.y=(-b.y/b.w+1)*(Scene_data.stageHeight/2)/UIData.Scale-this.ui.height/2,this.oldPos.x=this.charNameMeshVo.pos.x,this.oldPos.y=this.charNameMeshVo.pos.y,this.charNameMeshVo.visibleChange=!1}}else this.ui.x=1e4;this.charNameMeshVo.clear&&(this.ui.parent.removeChild(this.ui),this._data=null)}},b}(Disp2DBaseText);a.CharNameUiVo=e;var f=function(a){function b(){a.apply(this,arguments),this.tempMatrix=new Matrix3D}return __extends(b,a),b.prototype.makeData=function(){var a=this;this._data&&(this._charTitleMeshVo=this.data,LoadManager.getInstance().load(Scene_data.fileRoot+getUItittleUrl(String(this._charTitleMeshVo.num)),LoadManager.IMG_TYPE,function(b){var c=a.parent.uiAtlas.getRec(a.textureStr);a.parent.uiAtlas.ctx=UIManager.getInstance().getContext2D(c.pixelWitdh,c.pixelHeight,!1);var d=Math.min(c.pixelWitdh/b.width,c.pixelHeight/b.height);d=Math.min(d,1);var e=b.width*d,f=b.height*d;a.parent.uiAtlas.ctx.drawImage(b,(c.pixelWitdh-e)/2,(c.pixelHeight-f)/2,e,f),TextureManager.getInstance().updateTexture(a.parent.uiAtlas.texture,c.pixelX,c.pixelY,a.parent.uiAtlas.ctx)}))},b.prototype.update=function(){if(this._charTitleMeshVo){if(this._charTitleMeshVo.needDraw&&(this.makeData(),this._charTitleMeshVo.needDraw=!1),this._charTitleMeshVo.pos)if(this._charTitleMeshVo.visible){if(this.needUpData(this._charTitleMeshVo.pos)){var a=Scene_data.cam3D.cameraMatrix.clone(this.tempMatrix);a.append(Scene_data.viewMatrx3D);var b=a.transformVector(this._charTitleMeshVo.pos);this.ui.x=(b.x/b.w+1)*(Scene_data.stageWidth/2)/UIData.Scale-this.ui.width/2,this.ui.y=(-b.y/b.w+1)*(Scene_data.stageHeight/2)/UIData.Scale-this.ui.height/2,this.oldPos.x=this._charTitleMeshVo.pos.x,this.oldPos.y=this._charTitleMeshVo.pos.y}}else this.ui.x=1e4;this._charTitleMeshVo.clear&&(this.ui.parent.removeChild(this.ui),this._data=null)}},b}(Disp2DBaseText);a.CharTitleUiVo=f;var g=function(){function a(){this._visible=!0,this.visibleChange=!1,this.clear=!1}return Object.defineProperty(a.prototype,"visible",{get:function(){return this._visible},set:function(a){this._visible=a,this.visibleChange=!0},enumerable:!0,configurable:!0}),a}();a.baseMeshVo=g}(bloodTittle||(bloodTittle={}));var CharTitleMeshVo=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.destory=function(){this.pos=null,this._num=null,this.clear=!0},Object.defineProperty(b.prototype,"num",{get:function(){return this._num},set:function(a){this._num=a,this.needDraw=!0},enumerable:!0,configurable:!0}),b}(bloodTittle.baseMeshVo),CharNameMeshVo=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),Object.defineProperty(b.prototype,"name",{get:function(){return this._name},set:function(a){this._name=a,this.needDraw=!0},enumerable:!0,configurable:!0}),b.prototype.destory=function(){this.pos=null,this._name=null,this.needDraw=null,this.clear=!0},b}(bloodTittle.baseMeshVo),BloodLineMeshVo=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.destory=function(){this.pos=null,this.num=null,this.colortype=null,this.clear=!0},b}(bloodTittle.baseMeshVo),JumpTextMeshVo=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.destory=function(){this.pos=null,this.clear=!0},b}(bloodTittle.baseMeshVo),JumpTxtContianerPanel=function(a){function b(b,c,d){a.call(this,b,c,d)}return __extends(b,a),b}(Dis2DUIContianerPanel),BloodManager=function(){function a(){this._totalNum=20,this.uiContianerItem=new Array,this._charTitleContianerPanel=new Dis2DUIContianerPanel(bloodTittle.CharTitleUiVo,new Rectangle(0,0,131,69),10),this._charNameContianerPanel=new Dis2DUIContianerPanel(bloodTittle.CharNameUiVo,new Rectangle(0,0,256,24),this._totalNum),this._jumpTxtContianerPanel=new AlphaUiContianer(bloodTittle.TextJumpUiDrawAndRefreash,new Rectangle(0,0,256,50),10),this._bloodLineUIConatiner=new bloodTittle.BloodLineUIConatiner,this.uiContianerItem.push(this._charTitleContianerPanel),this.uiContianerItem.push(this._charNameContianerPanel),this.uiContianerItem.push(this._jumpTxtContianerPanel),this.uiContianerItem.push(this._bloodLineUIConatiner)}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.getCharTitleMeshVo=function(a){void 0===a&&(a=0);var b=new CharTitleMeshVo;return b.num=a,b.pos=new Vector3D(0,50,0),this._charTitleContianerPanel.showTemp(b),b},a.prototype.getCharNameMeshVo=function(a){void 0===a&&(a="测试名");var b=new CharNameMeshVo;return b.name=a,b.pos=new Vector3D(0,50,0),this._charNameContianerPanel.showTemp(b),b},a.prototype.getBloodLineMeshVo=function(){var a=new BloodLineMeshVo;return a.num=100,a.colortype=0,a.pos=new Vector3D(0,50,0),this._bloodLineUIConatiner.showTemp(a),a},a.prototype.setJumpNum=function(a){this._jumpTxtContianerPanel.showTemp(a)},a.prototype.update=function(){for(var a=0;a<this.uiContianerItem.length;a++){this.uiContianerItem[a].update(0);for(var b=0;b<this._bloodLineUIConatiner.renderList.length;b++)this.uiContianerItem[a].renderList[b].update()}},a.prototype.resize=function(){this._jumpTxtContianerPanel.resize();for(var a=0;a<this.uiContianerItem.length;a++)this.uiContianerItem[a].resize();Scene_data.cam3D.needChange=!0},a}(),bloodTittle;!function(a){var b=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Pos"),a.bindAttribLocation(this.program,1,"v2uv")},b.prototype.getVertexShaderString=function(){var a="attribute vec3 v3Pos;attribute vec3 v2uv;uniform vec4 ui[30];uniform vec4 lifenum[30];varying vec2 v_texCoord;\nvarying vec4 v_lifenum;\nvoid main(void){ v_lifenum = lifenum[int(v2uv.z)]; v_texCoord = vec2(v2uv.x , v2uv.y ); vec4  data = ui[int(v2uv.z)];   vec3 pos = vec3(0.0,0.0,0.0);   pos.xy = v3Pos.xy *data.zw * 2.0;   pos.x += data.x * 2.0 - 1.0;   pos.y += -data.y * 2.0 + 1.0;   vec4 vt0= vec4(pos, 1.0);   gl_Position = vt0;}";return a},b.prototype.getFragmentShaderString=function(){var a="precision mediump float;\nuniform sampler2D s_texture;\nvarying vec2 v_texCoord;\nvarying vec4 v_lifenum;\nvoid main(void)\n{\nvec2  v_uv = v_texCoord;if(v_texCoord.x<v_lifenum.x){;\nv_uv.y = v_uv.y+v_lifenum.y;};\nvec4 infoUv = texture2D(s_texture, v_uv.xy);\ninfoUv.xyz *= infoUv.w;\ngl_FragColor = infoUv;\n}";return a},b.BloodUIShader="BloodUIShader",b}(Shader3D);a.BloodUIShader=b;var c=function(a){function b(){a.call(this),this.lifeNum=100,this.colortype=0}return __extends(b,a),b.prototype.pushVaData=function(a,b,c){return a.vertices.push(0,0,0,1,0,0,1,-1,0,0,-1,0),a.uvs.push(0,0,b,1,0,b,1,.25,b,0,.25,b),a.indexs.push(c,1+c,2+c,c,2+c,3+c),c+4},b}(UICompenent);a.BloodUICompenent=c;var d=function(a){function b(){a.apply(this,arguments),this.tempMatrix=new Matrix3D}return __extends(b,a),b.prototype.makeData=function(){this._data&&(this.bloodLineMeshVo=this.data)},b.prototype.update=function(){if(this.bloodLineMeshVo){if(this.bloodLineMeshVo.pos)if(this.bloodLineMeshVo.visible){if(this.needUpData(this.bloodLineMeshVo.pos)||this.bloodLineMeshVo.visibleChange){var a=Scene_data.cam3D.cameraMatrix.clone(this.tempMatrix);a.append(Scene_data.viewMatrx3D);var b=a.transformVector(new Vector3D(this.bloodLineMeshVo.pos.x,this.bloodLineMeshVo.pos.y,this.bloodLineMeshVo.pos.z));this.ui.x=(b.x/b.w+1)*(Scene_data.stageWidth/2)/UIData.Scale-this.ui.width/2,this.ui.y=(-b.y/b.w+1)*(Scene_data.stageHeight/2)/UIData.Scale-this.ui.height/2,this.bloodLineMeshVo.visibleChange=!1}this.ui.lifeNum=this.bloodLineMeshVo.num,this.ui.colortype=this.bloodLineMeshVo.colortype}else this.ui.x=1e4;this.bloodLineMeshVo.clear&&(this.ui.parent.removeChild(this.ui),this._data=null)}},b}(Disp2DBaseText);a.BloodDisp2DBaseText=d;var e=function(a){function d(){a.call(this),this.nextTime=0}return __extends(d,a),d.prototype.initData=function(){this._uiList=new Array,this.objData=new ObjData,ProgrmaManager.getInstance().registe(b.BloodUIShader,new b),this.shader=ProgrmaManager.getInstance().getProgram(b.BloodUIShader),this.program=this.shader.program,this.uiProLocation=Scene_data.context3D.getLocation(this.program,"ui"),this.ui2ProLocation=Scene_data.context3D.getLocation(this.program,"lifenum")},d.prototype.update=function(){if(this.visible&&0!=this._uiList.length){if(Scene_data.context3D.setBlendParticleFactors(this.blenderMode),Scene_data.context3D.setProgram(this.program),this.nextTime<TimeUtil.getTimer()||this.renderData2.length!=4*this._uiList.length){this.renderData2.length!=4*this._uiList.length&&(this.renderData2=new Float32Array(4*this._uiList.length));for(var a=0;a<this._uiList.length;a++){var b=this._uiList[a],c=b.lifeNum/100,d=8*(b.colortype+1)/32;this.renderData2[4*a+0]=c,this.renderData2[4*a+1]=d}this.nextTime=TimeUtil.getTimer()+300}if(Scene_data.context3D.setVc4fvLocation(this.uiProLocation,this.renderData),Scene_data.context3D.setVc4fvLocation(this.ui2ProLocation,this.renderData2),Scene_data.context3D.setVa(0,3,this.objData.vertexBuffer),Scene_data.context3D.setVa(1,3,this.objData.uvBuffer),this.uiAtlas&&Scene_data.context3D.setRenderTexture(this.shader,"s_texture",this.uiAtlas.texture,0),Scene_data.context3D.drawCall(this.objData.indexBuffer,this.objData.treNum),this.modelRenderList)for(var a=0;a<this.modelRenderList.length;a++)this.modelRenderList[a].update()}},d.prototype.creatBaseComponent=function(a){var b=new c;return b.tr.setRec(new UIRectangle(0,0,1,1)),b.width=64,b.height=8,b.uiRender=this,b.lifeNum=100,b},d.prototype.makeRenderDataVc=function(a){if((!this.renderData||this.renderData&&this.renderData.length!=4*this._uiList.length)&&(this.renderData=new Float32Array(4*this._uiList.length)),-1==a)for(var b=0;this._uiList&&b<this._uiList.length;b++)this._uiList[b].vcId=b,this.renderData[4*b+0]=this._uiList[b].renderData[0],this.renderData[4*b+1]=this._uiList[b].renderData[1],this.renderData[4*b+2]=this._uiList[b].renderData[2],this.renderData[4*b+3]=this._uiList[b].renderData[3];else a<this._uiList.length&&(this.renderData[4*a+0]=this._uiList[a].renderData[0],this.renderData[4*a+1]=this._uiList[a].renderData[1],this.renderData[4*a+2]=this._uiList[a].renderData[2],this.renderData[4*a+3]=this._uiList[a].renderData[3])},d}(UIRenderComponent);a.BloodUIRenderComponent=e;var f=function(a){function b(){a.call(this),this.width=UIData.designWidth,this.height=UIData.designHeight,this._baseRender=new e,this.addRender(this._baseRender),this._baseRender.uiAtlas=new UIAtlas,this._baseRender.uiAtlas.configData=new Array,this._uiItem=new Array,this.loadBloodTexture()}return __extends(b,a),b.prototype.loadBloodTexture=function(){},b.prototype.update=function(a){if(this._baseRender.uiAtlas.textureRes)for(var b=0;b<this._uiItem.length;b++)this._uiItem[b].data&&this._uiItem[b].update()},b.prototype.removeChild=function(b){for(var c=0;c<this._uiItem.length;c++)if(this._uiItem[c].ui==b){this._uiItem.splice(c,1);break}a.prototype.removeChild.call(this,b)},b.prototype.showTemp=function(a){if(this._uiItem.length>=30)return void console.log("超过30。暂时设置不可再添加");var b=new d;b.parent=this._baseRender,b.ui=this._baseRender.creatBaseComponent("test"),b.data=a,this.addChild(b.ui),this._uiItem.push(b)},b}(UIConatiner);a.BloodLineUIConatiner=f}(bloodTittle||(bloodTittle={}));var Curve=function(){function a(){this.valueV3d=[1,1,1,1]}return a.prototype.getValue=function(a){if(!this.valueVec||-1==this.begintFrame)return this.valueV3d;var b=float2int(a/Scene_data.frameTime-this.begintFrame);return 0>b?b=0:b>this.maxFrame-this.begintFrame&&(b=this.maxFrame-this.begintFrame),this.valueVec[b]},a.prototype.setData=function(a){this.type=a.type,this.maxFrame=a.maxFrame,a.items.length?this.begintFrame=a.items[0].frame:this.begintFrame=-1;for(var b=a.values[0].length,c=new Array,d=0;b>d;d++){var e=new Array;if(1==this.type)e.push(a.values[0][d]);else if(2==this.type)e.push(a.values[0][d],a.values[1][d]);else if(3==this.type)e.push(a.values[0][d],a.values[1][d],a.values[2][d]);else if(4==this.type){var f=a.values[3][d];e.push(a.values[0][d]*f,a.values[1][d]*f,a.values[2][d]*f,f)}c.push(e)}this.valueVec=c},a}(),Shadow=function(){function a(){this._visible=!1,this.data=[0,0,0,5]}return Object.defineProperty(a.prototype,"visible",{get:function(){return this._visible},set:function(a){this._visible=a,this.display.stateChage()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"x",{get:function(){return this.data[0]},set:function(a){this.data[0]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.data[1]},set:function(a){this.data[1]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"z",{get:function(){return this.data[2]},set:function(a){this.data[2]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"size",{get:function(){return this.data[3]},set:function(a){this.data[3]=a},enumerable:!0,configurable:!0}),a}(),ShadowManager=function(){function a(){this._displayList=new Array,ProgrmaManager.getInstance().registe(Display3DShadowShader.Display3DShadowShader,new Display3DShadowShader)}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.addShadow=function(){var a=this.getIdleShadow(),b=new Shadow;return a.addShadow(b),b},a.prototype.removeShadow=function(a){a.display.removeShadow(a)},a.prototype.update=function(){if(this._displayList.length){Scene_data.context3D.setWriteDepth(!1);for(var a=0;a<this._displayList.length;a++)this._displayList[a].update();Scene_data.context3D.setWriteDepth(!0)}},a.prototype.getIdleShadow=function(){for(var a=0;a<this._displayList.length;a++)if(this._displayList[a].hasIdle())return this._displayList[a];var b=new Display3dShadow;return this._displayList.push(b),b},a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},BaseRes=function(a){function b(){a.apply(this,arguments),this.allImgBytes=1e7}return __extends(b,a),b.prototype.read=function(a){void 0===a&&(a=null),this._imgFun=a;var c=this._byte.readInt();c==b.IMG_TYPE?Scene_data.supportBlob?this.readImg():this.readImgLow():c==b.OBJS_TYPE?this.readObj(this._byte):c==b.MATERIAL_TYPE?this.readMaterial():c==b.PARTICLE_TYPE?this.readParticle():c==b.ZIP_OBJS_TYPE&&this.readZipObj()},b.prototype.readZipObj=function(){var a=this._byte.readInt(),b=this._byte.buffer.slice(this._byte.position,this._byte.position+a);this._byte.position+=a;var c=unZip(b),d=new ByteArray(c);this.readObj(d)},b.prototype.readImg=function(){var a=this;this.imgNum=this._byte.readInt(),this.imgLoadNum=0;for(var b=(TimeUtil.getTimer(),new Array),c=new Array,d=0;d<this.imgNum;d++){var e=Scene_data.fileRoot+this._byte.readUTF(),f=this._byte.readInt();if(-1==e.search(".jpng")){var g=this._byte.buffer.slice(this._byte.position,this._byte.position+f);this._byte.position+=f;var h=new Blob([g],{type:"application/octet-binary"});b.push(h),c.push(e)}else this.readJpngImg(e)}for(var d=0;d<b.length;d++){var i=new Image;i.url=c[d],i.onload=function(b){a.loadImg(b.target);var c=b.target;URL.revokeObjectURL(c.src)},i.src=URL.createObjectURL(b[d])}},b.prototype.readJpngImg=function(a){var b=this,c=this._byte.readInt(),d=this._byte.buffer.slice(this._byte.position,this._byte.position+c);this._byte.position+=c;var e=new Blob([d],{type:"application/octet-binary"}),f=this._byte.readInt();d=this._byte.buffer.slice(this._byte.position,this._byte.position+f),this._byte.position+=f;var g=new Blob([d],{type:"application/octet-binary"}),h=new Image,i=new Image,j=0,k=function(c){if(j++,!(2>j)){var d=UIManager.getInstance().getContext2D(h.width,h.height);d.drawImage(h,0,0);var e=d.getImageData(0,0,h.width,h.height);d.clearRect(0,0,h.width,h.height),d.drawImage(i,0,0);for(var f=d.getImageData(0,0,h.width,h.height),g=0;g<e.data.length;g+=4){f.data[g]/255;e.data[g+3]=f.data[g]}b.addImg(a.replace(".jpng",".png"),e)}};h.onload=k,i.onload=k,h.src=URL.createObjectURL(e),i.src=URL.createObjectURL(g)},b.prototype.readImgLow=function(){var a=this;this.imgNum=this._byte.readInt(),this.imgLoadNum=0;for(var b=(TimeUtil.getTimer(),0),c=0;c<this.imgNum;c++){var d=Scene_data.fileRoot+this._byte.readUTF(),e=this._byte.readInt();b+=e;var f=new Image;f.url=d,f.onload=function(b){a.loadImg(b.target)},f.src=d}this.allImgBytes=b},b.prototype.loadImg=function(a){TextureManager.getInstance().addRes(a.url,a),this.countImg()},b.prototype.addImg=function(a,b){TextureManager.getInstance().addRes(a,b),this.countImg()},b.prototype.countImg=function(){this.imgLoadNum++,this.imgLoadNum==this.imgNum&&(this._imgComplete=!0,this.allResCom())},b.prototype.readObj=function(a){for(var b=a.readInt(),c=0;b>c;c++){var d=Scene_data.fileRoot+a.readUTF(),e=a.readInt(),f=new ByteArray;f.length=e,a.readBytes(f,0,e);ObjDataManager.getInstance().loadObjCom(f.buffer,d)}this._imgFun&&this._imgFun()},b.prototype.readMaterial=function(){for(var a=this._byte.readInt(),b=(TimeUtil.getTimer(),0);a>b;b++){var c=Scene_data.fileRoot+this._byte.readUTF(),d=this._byte.readInt(),e=new ByteArray;e.length=d,this._byte.readBytes(e,0,d),MaterialManager.getInstance().addResByte(c,e)}},b.prototype.readParticle=function(){for(var a=this._byte.readInt(),b=(TimeUtil.getTimer(),0);a>b;b++){var c=Scene_data.fileRoot+this._byte.readUTF(),d=this._byte.readInt(),e=new ByteArray;e.length=d,this._byte.readBytes(e,0,d),ParticleManager.getInstance().addResByte(c,e)}},b.prototype.readMaterialInfo=function(){var a=this._byte.readInt();if(a>0){for(var b=new Array,c=0;a>c;c++){var d=new Object;d.type=this._byte.readInt(),d.name=this._byte.readUTF(),0==d.type&&(d.url=this._byte.readUTF()),1==d.type&&(d.x=this._byte.readFloat()),2==d.type&&(d.x=this._byte.readFloat(),d.y=this._byte.readFloat()),3==d.type&&(d.x=this._byte.readFloat(),d.y=this._byte.readFloat(),d.z=this._byte.readFloat()),b.push(d)}return b}return null},b.readFloatTwoByte=function(a,b){var c=a.readInt();if(c>0){var d=a.readFloat();b.length=0;for(var e=0;c>e;e++)b.push(a.readFloatTwoByte(d))}},b.readFloatOneByte=function(a,b){var c=a.readInt();if(c>0)for(var d=0;c>d;d++)b.push((a.readByte()+128)/256)},b.readIntForTwoByte=function(a,b){for(var c=a.readInt(),d=0;c>d;d++)b.push(a.readShort())},b.readIntForOneByte=function(a,b){for(var c=a.readInt(),d=0;c>d;d++)b.push(a.readByte())},b.readBytes2ArrayBuffer=function(a,b,c,d,e,f){void 0===f&&(f=0);var g=a.readInt();if(!(0>=g)){var h;0==f&&(h=a.readFloat());for(var i=g/c,j=0;i>j;j++)for(var k=e*j+d,l=0;c>l;l++)0==f?b.setFloat32(4*(k+l),a.readFloatTwoByte(h),!0):1==f?b.setFloat32(4*(k+l),a.readFloatOneByte(),!0):2==f?b.setFloat32(4*(k+l),a.readByte(),!0):3==f?b.setFloat32(4*(k+l),(a.readByte()+128)/255,!0):4==f&&b.setFloat32(4*(k+l),a.readFloat(),!0)}},b.readMaterialParamData=function(a){var b=a.readInt();if(b>0){for(var c=new Array,d=0;b>d;d++){var e=new Object;e.name=a.readUTF(),e.type=a.readByte(),0==e.type?e.url=a.readUTF():1==e.type?e.x=a.readFloat():2==e.type?(e.x=a.readFloat(),e.y=a.readFloat()):3==e.type&&(e.x=a.readFloat(),e.y=a.readFloat(),e.z=a.readFloat()),c.push(e)}return c}return null},b.prototype.allResCom=function(){this._imgFun&&this._imgFun()},b.IMG_TYPE=1,b.OBJS_TYPE=2,b.MATERIAL_TYPE=3,b.PARTICLE_TYPE=4,b.SCENE_TYPE=5,b.ZIP_OBJS_TYPE=6,b.PREFAB_TYPE=1,b.SCENE_PARTICLE_TYPE=11,b}(ResCount),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ResManager=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.getInstance=function(){return this._instance||(this._instance=new b),this._instance},b.prototype.loadRoleRes=function(a,b,c){var d=new RoleRes;d.meshBatchNum=c,d.load(a,function(){b(d)})},b.prototype.loadSkillRes=function(a,b){var c=new SkillRes;c.load(a,function(){b(c)})},b.prototype.loadSceneRes=function(a,b,c,d){var e;return this._dic[a]?e=this._dic[a]:(e=new SceneRes,this._dic[a]=e),e.load(a,b,c,d),this.clearSceneUse(e),e},b.prototype.clearSceneUse=function(a){for(var b in this._dic){var c=this._dic[b];c.useNum>0&&c!=a&&(c.useNum=0)}a.useNum=1},b.prototype.gc=function(){for(var a in this._dic){var b=this._dic[a];b.useNum<=0&&(b.idleTime++,b.idleTime>=ResCount.GCTime&&(console.log("清理 -"+a),b.destory(),delete this._dic[a]))}},b}(ResGC),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},RoleRes=function(a){function b(){a.call(this),this.meshBatchNum=1}return __extends(b,a),b.prototype.load=function(a,b){var c=this;this._fun=b,LoadManager.getInstance().load(a,LoadManager.BYTE_TYPE,function(a){c.loadComplete(a)})},b.prototype.loadComplete=function(a){this._byte=new ByteArray(a),this._byte.position=0,this.version=this._byte.readInt(),this.readMesh()},b.prototype.readMesh=function(){this.roleUrl=this._byte.readUTF(),this.version>=16&&(this.ambientLightColor=new Vector3D,this.sunLigthColor=new Vector3D,this.nrmDircet=new Vector3D,this.ambientLightColor.x=this._byte.readFloat(),this.ambientLightColor.y=this._byte.readFloat(),this.ambientLightColor.z=this._byte.readFloat(),this.ambientLightIntensity=this._byte.readFloat(),this.ambientLightColor.scaleBy(this.ambientLightIntensity),this.sunLigthColor.x=this._byte.readFloat(),this.sunLigthColor.y=this._byte.readFloat(),this.sunLigthColor.z=this._byte.readFloat(),this.sunLigthIntensity=this._byte.readFloat(),this.sunLigthColor.scaleBy(this.sunLigthIntensity),this.nrmDircet.x=this._byte.readFloat(),this.nrmDircet.y=this._byte.readFloat(),this.nrmDircet.z=this._byte.readFloat()),MeshDataManager.getInstance().readData(this._byte,this.meshBatchNum,this.roleUrl,this.version),this.readAction()},b.prototype.readAction=function(){var a,b=this;a=this.version>=30?getZipByte(this._byte):this._byte,this.actionAry=new Array;for(var c=a.readInt(),d=0;c>d;d++){var e=a.readUTF();AnimManager.getInstance().readData(a,this.roleUrl+e),this.actionAry.push(e)}this.read(function(){b.readNext()})},b.prototype.readNext=function(){this.read(),this.read(),this._fun()},b}(BaseRes),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},SkillRes=function(a){function b(){a.call(this),this.meshBatchNum=1}return __extends(b,a),b.prototype.load=function(a,b){var c=this;this._fun=b,LoadManager.getInstance().load(a,LoadManager.BYTE_TYPE,function(a){c.loadComplete(a)})},b.prototype.loadComplete=function(a){var b=this;this._byte=new ByteArray(a),this._byte.position=0,this.version=this._byte.readInt(),this.skillUrl=this._byte.readUTF(),this.read(function(){b.readNext()})},b.prototype.readNext=function(){if(this.read(),this.read(),this.version<27){this._byte.readUTF()}this.data=this.readData(this._byte),this._fun()},b.prototype.readData=function(a){for(var b=a.readInt(),c=new Object,d=0;b>d;d++){var e=new Object,f=a.readUTF(),g=a.readUTF();e.skillname=f,e.action=g,e.type=a.readFloat(),this.version>=26?(e.blood=a.readInt(),0==e.blood&&(e.blood=SkillVo.defaultBloodTime)):e.blood=SkillVo.defaultBloodTime,e.data=new Array;for(var h=a.readInt(),i=0;h>i;i++){var j=new Object;switch(j.url=a.readUTF(),j.frame=a.readFloat(),e.type){case 1:j.beginType=a.readInt(),0==j.beginType?(j.beginPos=new Vector3D,j.beginPos.x=a.readFloat(),j.beginPos.y=a.readFloat(),j.beginPos.z=a.readFloat()):1==j.beginType&&(j.beginSocket=a.readUTF()),j.hitSocket=a.readUTF(),j.endParticle=a.readUTF(),j.multype=a.readInt(),j.speed=a.readFloat();break;case 3:j.beginSocket=a.readUTF(),j.beginType=a.readFloat(),j.multype=a.readFloat(),j.speed=a.readFloat();break;case 4:if(this.version>=27){var k=a.readBoolean();j.hasSocket=k,k?j.socket=a.readUTF():(j.pos=this.readV3d(a),j.rotation=this.readV3d(a))}else j.hasSocket=!1,j.pos=this.readV3d(a),j.rotation=this.readV3d(a);break;default:alert("没有类型readData")}e.data.push(j)}c[f]=e}return c},b.prototype.readV3d=function(a){var b=new Vector3D;return b.x=a.readFloat(),b.y=a.readFloat(),b.z=a.readFloat(),b.w=a.readFloat(),b},b}(BaseRes),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ModelRes=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.load=function(a,b){var c=this;this._fun=b,LoadManager.getInstance().load(a,LoadManager.BYTE_TYPE,function(a){c.loadComplete(a)})},b.prototype.loadComplete=function(a){var b=this;this._byte=new ByteArray(a),this._byte.position=0,this.read(function(){b.readNexte()})},b.prototype.readNexte=function(){this.read(),this.read(),this.objUrl=this._byte.readUTF(),this.materialUrl=this._byte.readUTF(),this._byte.readBoolean()&&(this.light=new LightVo,this.light.ambientColor[0]=this._byte.readFloat(),this.light.ambientColor[1]=this._byte.readFloat(),this.light.ambientColor[2]=this._byte.readFloat(),this.light.sunColor[0]=this._byte.readFloat(),this.light.sunColor[1]=this._byte.readFloat(),this.light.sunColor[2]=this._byte.readFloat(),
this.light.sunDirect[0]=this._byte.readFloat(),this.light.sunDirect[1]=this._byte.readFloat(),this.light.sunDirect[2]=this._byte.readFloat()),this._fun()},b}(BaseRes),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},GroupRes=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.load=function(a,b){var c=this;this._fun=b,LoadManager.getInstance().load(a,LoadManager.BYTE_TYPE,function(a){c.loadComplete(a)})},b.prototype.loadComplete=function(a){var b=this;this.dataAry=new Array,this._byte=new ByteArray(a),this._byte.position=0,this.version=this._byte.readInt(),this.read(function(){b.readNext()})},b.prototype.readNext=function(){this.read(),this.read(),this.read();var a=this._byte.readBoolean();if(a)for(var b=this._byte.readInt(),c=0;b>c;c++)this.readItem(!0);else this.readItem(!1);this._fun(),this._fun=null,this._byte=null},b.prototype.readItem=function(a){var b=this._byte.readInt(),c=new GroupItem;c.isGroup=a,a&&(c.x=this._byte.readFloat(),c.y=this._byte.readFloat(),c.z=this._byte.readFloat(),c.scaleX=this._byte.readFloat(),c.scaleY=this._byte.readFloat(),c.scaleZ=this._byte.readFloat(),c.rotationX=this._byte.readFloat(),c.rotationY=this._byte.readFloat(),c.rotationZ=this._byte.readFloat()),b==BaseRes.PREFAB_TYPE?(c.objUrl=this._byte.readUTF(),c.materialUrl=this._byte.readUTF(),this.version>=4&&(c.materialInfoArr=this.readMaterialInfo()),c.types=BaseRes.PREFAB_TYPE):b==BaseRes.SCENE_PARTICLE_TYPE&&(c.particleUrl=this._byte.readUTF(),c.types=BaseRes.SCENE_PARTICLE_TYPE),this.dataAry.push(c)},b.prototype.initReg=function(){this._objDic=new Object,this._materialDic=new Object,this._particleDic=new Object;for(var a=0;a<this.dataAry.length;a++){var b=this.dataAry[a];b.objUrl&&(this._objDic[Scene_data.fileRoot+b.objUrl]=!0),b.materialUrl&&(this._materialDic[Scene_data.fileRoot+b.materialUrl]=!0),b.particleUrl&&(this._particleDic[Scene_data.fileRoot+b.particleUrl]=!0)}for(var c in this._objDic)ObjDataManager.getInstance().registerUrl(c);for(var c in this._materialDic)MaterialManager.getInstance().registerUrl(c);for(var c in this._particleDic)ParticleManager.getInstance().registerUrl(c)},b.prototype.destory=function(){a.prototype.destory.call(this);for(var b in this._objDic)ObjDataManager.getInstance().releaseUrl(b);for(var b in this._materialDic)MaterialManager.getInstance().releaseUrl(b);for(var b in this._particleDic)ParticleManager.getInstance().releaseUrl(b);this.dataAry=null,this._objDic=null,this._particleDic=null,this._materialDic=null},b}(BaseRes),GroupItem=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(Object3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},SceneRes=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.load=function(a,c,d,e){var f=this;if(this.sceneData)return void(this.isNeedReload()?(c(),d(1),this.applyByteArray()):(c(),d(1),e(this.sceneData)));this._completeFun=c,this._readDataFun=e,this._progressFun=d;var g=b.sceneConfigData;g&&g[a]?this.loadZipMap(a,g[a].len):(a=Scene_data.fileRoot+getMapUrl(a),LoadManager.getInstance().load(a,LoadManager.BYTE_TYPE,function(a){f.loadComplete(a)},null,d))},b.prototype.loadZipMap=function(a,b){for(var c=this,d=new Array,e=new Array,f=0,g=new Array,h=0;b>h;h++)g[h]=0;for(var i=function(a){var b=a.response,g=d.indexOf(a);if(e[g]=b,f++,f==d.length){for(var h=0,i=0;i<e.length;i++)h+=e[i].byteLength;for(var j=new Uint8Array(h),k=0,i=0;i<e.length;i++)j.set(new Uint8Array(e[i]),k),k+=e[i].byteLength;c.loadComplete(j.buffer)}},j=function(a,e){var f=d.indexOf(a);g[f]=e;for(var h=0,i=0;b>i;i++)h+=g[i];h/=b,c._progressFun(h)},h=0;b>h;h++){var k=new XMLHttpRequest;k.onreadystatechange=function(a){var b=a.target;200==b.status&&4==b.readyState&&i(b)},k.onprogress=function(a){var b=a.target;j(b,a.loaded/a.total)};var l=Scene_data.fileRoot+getZipMapUrl(a)+h+".txt";d.push(k),k.open("GET",l,!0),k.responseType="arraybuffer",k.send()}},b.prototype.isNeedReload=function(){for(var a=this.sceneData.buildItem,b=0;b<a.length;b++)if(a[b].type==BaseRes.PREFAB_TYPE&&a[b].lighturl){var c=Scene_data.fileRoot+a[b].lighturl;return TextureManager.getInstance().hasTexture(c)?!1:!0}return ResCount.GCTime-this.idleTime<10},b.prototype.loadComplete=function(a){this._byte=new ByteArray(a),this._completeFun(),this.applyByteArray()},b.prototype.applyByteArray=function(){var a=this;this._byte.position=0,this.version=this._byte.readInt(),this.read(function(){a.readNext()})},b.prototype.readNext=function(){this.read(),this.read(),this.read(),this.readScene(),this._readDataFun(this.sceneData)},b.prototype.readScene=function(){this._byte.readInt();this.readAstat(),this.version>=28&&this.readTerrainIdInfoBitmapData(this._byte);var a=this._byte.readInt();this.sceneData=JSON.parse(this._byte.readUTFBytes(a)),this.sceneData.astar=this._astarDataMesh,this.sceneData.terrain=this._terrainDataItem},b.prototype.readTerrainIdInfoBitmapData=function(a){var b=a.readInt();if(b){var c=b,d=a.buffer.slice(a.position,a.position+c);a.position+=c;var e=unZip(d),f=new ByteArray(e);this._terrainDataItem=GroundDataMesh.meshAllgroundData(f)}},b.prototype.readAstat=function(){var a=this._byte.readBoolean();if(a){this._astarDataMesh=new AstarDataMesh,this._astarDataMesh.aPos=new Vector3D,this._astarDataMesh.astarItem=new Array,this._astarDataMesh.heightItem=new Array,this._astarDataMesh.jumpItem=new Array,this._astarDataMesh.midu=this._byte.readFloat(),this._astarDataMesh.aPos.x=this._byte.readFloat(),this._astarDataMesh.aPos.y=this._byte.readFloat(),this._astarDataMesh.aPos.z=this._byte.readFloat();var b,c,d=this._byte.readInt(),e=this._byte.readInt();if(this._astarDataMesh.width=d,this._astarDataMesh.height=e,this.version<25){for(b=0;e>b;b++){var f=new Array;for(c=0;d>c;c++)f.push(this._byte.readFloat());this._astarDataMesh.astarItem.push(f)}for(b=0;e>b;b++){var g=new Array;for(c=0;d>c;c++)g.push(this._byte.readFloat());this._astarDataMesh.heightItem.push(g)}}else{var h=this._byte.readFloat(),i=this.readAstarFromByte(this._byte),j=this.readAstarFromByte(this._byte),k=0,l=0;for(b=0;e>b;b++){var f=new Array,m=new Array;for(c=0;d>c;c++){var n=i[k++];if(f.push(n),1==n){var o=j[l++];m.push(o)}else m.push(0)}this._astarDataMesh.astarItem.push(f),this._astarDataMesh.jumpItem.push(m)}for(this._astarDataMesh.jumpItem,b=0;e>b;b++){var g=new Array;for(c=0;d>c;c++)g.push(this._byte.readShort()/h);this._astarDataMesh.heightItem.push(g)}}}},b.prototype.readAstarFromByte=function(a){for(var b=a.readUnsignedInt(),c=Math.ceil(b/32),d=new Array,e=0;c>e;e++)for(var f=a.readUnsignedInt(),g=0;32>g;g++){var h=1&f;d.length<b&&d.push(h),f>>=1}return d},b}(BaseRes),AstarDataMesh=function(){function a(){}return a}(),both_null_action=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onNull_action",a}(),both_ping_pong=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onPing_pong",a}(),c2s_forced_into=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onForced_into",a}(),c2s_get_session=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.sessionkey=this.input.readString(),a.account=this.input.readString(),a.version=this.input.readString()},a.param_count=3,a.optname="onGet_session",a}(),both_route_trace=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.val=this.input.readString()},a.param_count=1,a.optname="onRoute_trace",a}(),c2s_write_client_log=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.type=this.input.readUint32(),a.uid=this.input.readString(),a.guid=this.input.readString(),a.log=this.input.readString()},a.param_count=4,a.optname="onWrite_client_log",a}(),s2c_operation_failed=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.type=this.input.readUint16(),a.reason=this.input.readUint16(),a.data=this.input.readString()},a.param_count=3,a.optname="onOperation_failed",a}(),both_sync_mstime=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.mstime_now=this.input.readUint32(),a.time_now=this.input.readUint32(),a.open_time=this.input.readUint32()},a.param_count=3,a.optname="onSync_mstime",a}(),s2c_ud_object=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onUd_object",a}(),c2s_ud_control=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onUd_control",a}(),s2c_ud_control_result=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onUd_control_result",a}(),s2c_grid_ud_object=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onGrid_ud_object",a}(),s2c_grid_ud_object_2=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onGrid_ud_object_2",a}(),s2c_login_queue_index=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.index=this.input.readUint32()},a.param_count=1,a.optname="onLogin_queue_index",a}(),s2c_kicking_type=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.k_type=this.input.readUint32()},a.param_count=1,a.optname="onKicking_type",a}(),c2s_get_chars_list=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onGet_chars_list",a}(),s2c_chars_list=function(){function a(){this.optcode=0,this.list=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.list.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new char_create_info;e.read(this.input),a.list.push(e)}a.faction_name=this.input.readString(),a.queen_name=this.input.readString(),a.icon=this.input.readUint8()},a.param_count=4,a.optname="onChars_list",a}(),c2s_check_name=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.name=this.input.readString()},a.param_count=1,a.optname="onCheck_name",a}(),s2c_check_name_result=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.result=this.input.readUint8()},a.param_count=1,a.optname="onCheck_name_result",a}(),c2s_char_create=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.info=new char_create_info,a.info.read(this.input)},a.param_count=1,a.optname="onChar_create",a}(),s2c_char_create_result=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.result=this.input.readUint8()},a.param_count=1,a.optname="onChar_create_result",a}(),c2s_delete_char=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint32()},a.param_count=1,a.optname="onDelete_char",a}(),s2c_delete_char_result=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.result=this.input.readUint8()},a.param_count=1,a.optname="onDelete_char_result",a}(),c2s_player_login=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString()},a.param_count=1,a.optname="onPlayer_login",a}(),c2s_player_logout=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onPlayer_logout",a}(),c2s_regularise_account=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.uid=this.input.readString()},a.param_count=1,a.optname="onRegularise_account",a}(),c2s_char_remotestore=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.key=this.input.readUint32(),a.value=this.input.readUint32()},a.param_count=2,a.optname="onChar_remotestore",a}(),c2s_char_remotestore_str=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.key=this.input.readUint32(),a.value=this.input.readString()},a.param_count=2,a.optname="onChar_remotestore_str",a}(),c2s_teleport=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.intGuid=this.input.readUint32()},a.param_count=1,a.optname="onTeleport",a}(),both_move_stop=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readUint32(),a.pos_x=this.input.readUint16(),a.pos_y=this.input.readUint16()},a.param_count=3,a.optname="onMove_stop",a}(),both_unit_move=function(){function a(){this.optcode=0,this.path=new Array}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readUint32(),a.pos_x=this.input.readUint16(),a.pos_y=this.input.readUint16(),a.path.length=0;for(var c=this.input.readUint16(),d=0;c>d;d++)a.path.push(this.input.readInt8())},a.param_count=4,a.optname="onUnit_move",a}(),c2s_use_gameobject=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.target=this.input.readUint32()},a.param_count=1,a.optname="onUse_gameobject",a}(),c2s_bag_exchange_pos=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.src_bag=this.input.readUint32(),a.src_pos=this.input.readUint32(),a.dst_bag=this.input.readUint32(),a.dst_pos=this.input.readUint32()},a.param_count=4,a.optname="onBag_exchange_pos",a}(),c2s_bag_destroy=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.item_guid=this.input.readString(),a.num=this.input.readUint32(),a.bag_id=this.input.readUint32()},a.param_count=3,a.optname="onBag_destroy",a}(),c2s_bag_item_split=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.bag_id=this.input.readUint8(),a.src_pos=this.input.readUint16(),a.count=this.input.readUint32(),a.dst_pos=this.input.readUint16(),a.dst_bag=this.input.readUint8()},a.param_count=5,a.optname="onBag_item_split",a}(),c2s_bag_item_user=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.item_guid=this.input.readString(),a.count=this.input.readUint32()},a.param_count=2,a.optname="onBag_item_user",a}(),s2c_bag_item_cooldown=function(){function a(){this.optcode=0,this.list=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.list.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new item_cooldown_info;e.read(this.input),a.list.push(e)}},a.param_count=1,a.optname="onBag_item_cooldown",a}(),s2c_grid_unit_move=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onGrid_unit_move",a}(),s2c_grid_unit_move_2=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onGrid_unit_move_2",a}(),c2s_exchange_item=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.entry=this.input.readUint32(),a.count=this.input.readUint32(),a.tar_entry=this.input.readUint32()},a.param_count=3,a.optname="onExchange_item",a}(),c2s_bag_extension=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.bag_id=this.input.readUint8(),a.extension_type=this.input.readUint8(),a.bag_pos=this.input.readUint32()},a.param_count=3,a.optname="onBag_extension",a}(),c2s_npc_get_goods_list=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.npc_id=this.input.readUint32()},a.param_count=1,a.optname="onNpc_get_goods_list",a}(),s2c_npc_goods_list=function(){function a(){this.optcode=0,this.goods=new Array}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.goods.length=0;for(var c=this.input.readUint16(),d=0;c>d;d++)a.goods.push(this.input.readUint32());a.npc_id=this.input.readUint32()},a.param_count=2,a.optname="onNpc_goods_list",a}(),c2s_store_buy=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint32(),a.count=this.input.readUint32()},a.param_count=2,a.optname="onStore_buy",a}(),c2s_npc_sell=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.npc_id=this.input.readUint32(),a.item_guid=this.input.readString(),a.num=this.input.readUint32()},a.param_count=3,a.optname="onNpc_sell",a}(),c2s_npc_repurchase=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.item_id=this.input.readString()},a.param_count=1,a.optname="onNpc_repurchase",a}(),c2s_avatar_fashion_enable=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.pos=this.input.readUint8()},a.param_count=1,a.optname="onAvatar_fashion_enable",a}(),c2s_questhelp_talk_option=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.quest_id=this.input.readUint32(),a.option_id=this.input.readUint32(),a.value0=this.input.readInt32(),a.value1=this.input.readInt32()},a.param_count=4,a.optname="onQuesthelp_talk_option",a}(),c2s_taxi_hello=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readUint32()},a.param_count=1,a.optname="onTaxi_hello",a}(),s2c_taxi_stations_list=function(){function a(){this.optcode=0,this.stations=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.npcid=this.input.readUint32(),a.stations.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new taxi_menu_info;e.read(this.input),a.stations.push(e)}},a.param_count=2,a.optname="onTaxi_stations_list",a}(),c2s_taxi_select_station=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.station_id=this.input.readUint32(),a.guid=this.input.readUint32()},a.param_count=2,a.optname="onTaxi_select_station",a}(),c2s_gossip_select_option=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.option=this.input.readUint32(),a.guid=this.input.readUint32(),a.unknow=this.input.readString()},a.param_count=3,a.optname="onGossip_select_option",a}(),c2s_gossip_hello=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readUint32()},a.param_count=1,a.optname="onGossip_hello",a}(),s2c_gossip_message=function(){function a(){this.optcode=0,this.gossip_items=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.npcid=this.input.readUint32(),a.npc_entry=this.input.readUint32(),a.option_id=this.input.readUint32(),a.option_text=this.input.readString(),a.gossip_items.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new gossip_menu_option_info;e.read(this.input),a.gossip_items.push(e)}},a.param_count=5,a.optname="onGossip_message",a}(),c2s_questgiver_status_query=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readUint32()},a.param_count=1,a.optname="onQuestgiver_status_query",a}(),s2c_questgiver_status=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readUint32(),a.status=this.input.readUint8()},a.param_count=2,a.optname="onQuestgiver_status",a}(),both_query_quest_status=function(){function a(){this.optcode=0,this.quest_array=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.quest_array.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new quest_status;e.read(this.input),a.quest_array.push(e)}},a.param_count=1,a.optname="onQuery_quest_status",a}(),c2s_questhelp_get_canaccept_list=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onQuesthelp_get_canaccept_list",a}(),s2c_questhelp_canaccept_list=function(){function a(){this.optcode=0,this.quests=new Array}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.quests.length=0;for(var c=this.input.readUint16(),d=0;c>d;d++)a.quests.push(this.input.readUint32())},a.param_count=1,a.optname="onQuesthelp_canaccept_list",a}(),s2c_questupdate_faild=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.reason=this.input.readUint8()},a.param_count=1,a.optname="onQuestupdate_faild",a}(),s2c_questupdate_complete=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.quest_id=this.input.readUint32()},a.param_count=1,a.optname="onQuestupdate_complete",a}(),c2s_questlog_remove_quest=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.slot=this.input.readUint8(),a.reserve=this.input.readUint64()},a.param_count=2,a.optname="onQuestlog_remove_quest",a}(),c2s_questgiver_complete_quest=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readUint32(),a.quest_id=this.input.readUint32(),a.reward=this.input.readUint8()},a.param_count=3,a.optname="onQuestgiver_complete_quest",a}(),s2c_questhelp_next=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.current_id=this.input.readUint32(),a.next_id=this.input.readUint32(),a.guid=this.input.readUint32()},a.param_count=3,a.optname="onQuesthelp_next",a}(),c2s_questhelp_complete=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.quest_id=this.input.readUint32(),a.quest_statue=this.input.readUint8(),a.reserve=this.input.readUint8()},a.param_count=3,a.optname="onQuesthelp_complete",a}(),s2c_questupdate_accept=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.quest_id=this.input.readUint32()},a.param_count=1,a.optname="onQuestupdate_accept",a}(),c2s_questhelp_update_status=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.quest_id=this.input.readUint32(),a.slot_id=this.input.readUint32(),a.num=this.input.readUint32()},a.param_count=3,a.optname="onQuesthelp_update_status",a}(),s2c_questgetter_complete=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.quest_id=this.input.readUint32()},a.param_count=1,a.optname="onQuestgetter_complete",a}(),c2s_questgiver_accept_quest=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.npcid=this.input.readUint32(),a.quest_id=this.input.readUint32()},a.param_count=2,a.optname="onQuestgiver_accept_quest",a}(),c2s_questupdate_use_item=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.item_id=this.input.readUint32()},a.param_count=1,a.optname="onQuestupdate_use_item",a}(),c2s_questhelp_query_book=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.dynasty=this.input.readUint32()},a.param_count=1,a.optname="onQuesthelp_query_book",a}(),s2c_questhelp_book_quest=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.quest_id=this.input.readUint32()},a.param_count=1,a.optname="onQuesthelp_book_quest",a}(),s2c_use_gameobject_action=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.player_id=this.input.readUint32(),a.gameobject_id=this.input.readUint32()},a.param_count=2,a.optname="onUse_gameobject_action",a}(),c2s_set_attack_mode=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.mode=this.input.readUint8(),a.reserve=this.input.readUint64()},a.param_count=2,a.optname="onSet_attack_mode",a}(),both_select_target=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint32()},a.param_count=1,a.optname="onSelect_target",a}(),s2c_combat_state_update=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.cur_state=this.input.readUint8()},a.param_count=1,a.optname="onCombat_state_update",a}(),s2c_exp_update=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.exp=this.input.readInt32(),a.type=this.input.readUint8(),a.vip_exp=this.input.readInt32()},a.param_count=3,a.optname="onExp_update",a}(),both_spell_start=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.spell_id=this.input.readUint32(),a.target_pos_x=this.input.readUint16(),a.target_pos_y=this.input.readUint16(),a.caster=this.input.readUint32(),a.target=this.input.readUint32()},a.param_count=5,a.optname="onSpell_start",a}(),both_spell_stop=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString()},a.param_count=1,a.optname="onSpell_stop",a}(),both_jump=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readUint32(),a.pos_x=this.input.readFloat(),a.pos_y=this.input.readFloat()},a.param_count=3,a.optname="onJump",a}(),c2s_resurrection=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.type=this.input.readUint8(),a.reserve=this.input.readUint64()},a.param_count=2,a.optname="onResurrection",a}(),both_trade_request=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString()},a.param_count=1,a.optname="onTrade_request",a}(),both_trade_reply=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString(),a.reply=this.input.readUint8()},a.param_count=2,a.optname="onTrade_reply",a}(),s2c_trade_start=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString()},a.param_count=1,a.optname="onTrade_start",a}(),both_trade_decide_items=function(){function a(){this.optcode=0,this.items=new Array}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.items.length=0;for(var c=this.input.readUint16(),d=0;c>d;d++)a.items.push(this.input.readString());a.gold_ingot=this.input.readInt32(),a.silver=this.input.readInt32()},a.param_count=3,a.optname="onTrade_decide_items",a}(),s2c_trade_finish=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onTrade_finish",a}(),both_trade_cancel=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onTrade_cancel",a}(),both_trade_ready=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onTrade_ready",a}(),s2c_chat_unit_talk=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readUint32(),a.content=this.input.readUint32(),a.say=this.input.readString()},a.param_count=3,a.optname="onChat_unit_talk",a}(),c2s_chat_near=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.content=this.input.readString()},a.param_count=1,a.optname="onChat_near",a}(),c2s_chat_whisper=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString(),a.content=this.input.readString()},a.param_count=2,a.optname="onChat_whisper",a}(),both_chat_faction=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString(),a.name=this.input.readString(),a.content=this.input.readString(),a.faction=this.input.readUint8()},a.param_count=4,a.optname="onChat_faction",a}(),both_chat_world=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString(),a.faction=this.input.readUint8(),a.name=this.input.readString(),a.content=this.input.readString()},a.param_count=4,a.optname="onChat_world",a}(),both_chat_horn=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString(),a.faction=this.input.readUint8(),a.name=this.input.readString(),a.content=this.input.readString()},a.param_count=4,a.optname="onChat_horn",a}(),both_chat_notice=function(){function a(){this.optcode=0;
}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint32(),a.content=this.input.readString(),a.data=this.input.readString()},a.param_count=3,a.optname="onChat_notice",a}(),c2s_query_player_info=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString(),a.flag=this.input.readUint32(),a.callback_id=this.input.readUint32()},a.param_count=3,a.optname="onQuery_player_info",a}(),s2c_query_result_update_object=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onQuery_result_update_object",a}(),c2s_receive_gift_packs=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onReceive_gift_packs",a}(),s2c_map_update_object=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onMap_update_object",a}(),s2c_fighting_info_update_object=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onFighting_info_update_object",a}(),s2c_fighting_info_update_object_2=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onFighting_info_update_object_2",a}(),c2s_instance_enter=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.instance_id=this.input.readUint32()},a.param_count=1,a.optname="onInstance_enter",a}(),c2s_instance_next_state=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.level=this.input.readUint16(),a.param=this.input.readUint32()},a.param_count=2,a.optname="onInstance_next_state",a}(),c2s_instance_exit=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.reserve=this.input.readUint32()},a.param_count=1,a.optname="onInstance_exit",a}(),c2s_limit_activity_receive=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint32(),a.type=this.input.readUint32()},a.param_count=2,a.optname="onLimit_activity_receive",a}(),s2c_kill_man=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.killer=this.input.readString(),a.killer_name=this.input.readString(),a.victim=this.input.readString(),a.victim_name=this.input.readString()},a.param_count=4,a.optname="onKill_man",a}(),s2c_player_upgrade=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readUint32()},a.param_count=1,a.optname="onPlayer_upgrade",a}(),c2s_warehouse_save_money=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.money=this.input.readInt32(),a.money_gold=this.input.readInt32(),a.money_bills=this.input.readInt32()},a.param_count=3,a.optname="onWarehouse_save_money",a}(),c2s_warehouse_take_money=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.money=this.input.readInt32(),a.money_gold=this.input.readInt32(),a.money_bills=this.input.readInt32()},a.param_count=3,a.optname="onWarehouse_take_money",a}(),c2s_use_gold_opt=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.type=this.input.readUint8(),a.param=this.input.readString()},a.param_count=2,a.optname="onUse_gold_opt",a}(),c2s_use_silver_opt=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.type=this.input.readUint8()},a.param_count=1,a.optname="onUse_silver_opt",a}(),s2c_gm_rightfloat=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint32(),a.end_time=this.input.readUint32(),a.zone1=this.input.readUint32(),a.zone2=this.input.readUint32(),a.zone3=this.input.readUint32(),a.subject=this.input.readString(),a.content=this.input.readString(),a.link=this.input.readString(),a.mode=this.input.readUint8()},a.param_count=9,a.optname="onGm_rightfloat",a}(),s2c_del_gm_rightfloat=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint32()},a.param_count=1,a.optname="onDel_gm_rightfloat",a}(),both_sync_mstime_app=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.mstime_now=this.input.readUint32(),a.time_now=this.input.readUint32(),a.open_time=this.input.readUint32()},a.param_count=3,a.optname="onSync_mstime_app",a}(),c2s_open_window=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.window_type=this.input.readUint32()},a.param_count=1,a.optname="onOpen_window",a}(),c2s_player_gag=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.player_id=this.input.readString(),a.end_time=this.input.readUint32(),a.content=this.input.readString()},a.param_count=3,a.optname="onPlayer_gag",a}(),c2s_player_kicking=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.player_id=this.input.readString()},a.param_count=1,a.optname="onPlayer_kicking",a}(),s2c_merge_server_msg=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.merge_host=this.input.readString(),a.merge_port=this.input.readUint32(),a.merge_key=this.input.readString(),a.merge_type=this.input.readUint32(),a.reserve=this.input.readUint32(),a.reserve2=this.input.readUint32()},a.param_count=6,a.optname="onMerge_server_msg",a}(),c2s_rank_list_query=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.call_back_id=this.input.readUint32(),a.rank_list_type=this.input.readUint8(),a.start_index=this.input.readUint16(),a.end_index=this.input.readUint16()},a.param_count=4,a.optname="onRank_list_query",a}(),s2c_rank_list_query_result=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onRank_list_query_result",a}(),c2s_client_update_scened=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onClient_update_scened",a}(),s2c_num_lua=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onNum_lua",a}(),c2s_loot_select=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.x=this.input.readUint16(),a.y=this.input.readUint16()},a.param_count=2,a.optname="onLoot_select",a}(),c2s_goback_to_game_server=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onGoback_to_game_server",a}(),c2s_world_war_CS_player_info=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onWorld_war_CS_player_info",a}(),s2c_join_or_leave_server=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.join_or_leave=this.input.readUint8(),a.server_type=this.input.readUint8(),a.server_pid=this.input.readUint32(),a.server_fd=this.input.readUint32(),a.time=this.input.readUint32()},a.param_count=5,a.optname="onJoin_or_leave_server",a}(),both_world_war_SC_player_info=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onWorld_war_SC_player_info",a}(),both_clientSubscription=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readUint32()},a.param_count=1,a.optname="onClientSubscription",a}(),s2c_lua_script=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onLua_script",a}(),c2s_char_update_info=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.info=new char_create_info,a.info.read(this.input)},a.param_count=1,a.optname="onChar_update_info",a}(),s2c_notice_watcher_map_info=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.wather_guid=this.input.readString(),a.map_id=this.input.readUint32(),a.instance_id=this.input.readUint32()},a.param_count=3,a.optname="onNotice_watcher_map_info",a}(),c2s_modify_watch=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.opt=this.input.readUint8(),a.cid=this.input.readUint32(),a.key=this.input.readString()},a.param_count=3,a.optname="onModify_watch",a}(),c2s_kuafu_chuansong=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.str_data=this.input.readString(),a.watcher_guid=this.input.readString(),a.reserve=this.input.readUint32()},a.param_count=3,a.optname="onKuafu_chuansong",a}(),c2s_show_suit=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.position=this.input.readUint8()},a.param_count=1,a.optname="onShow_suit",a}(),c2s_show_position=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.channel=this.input.readUint8()},a.param_count=1,a.optname="onShow_position",a}(),c2s_gold_respawn=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.useGold=this.input.readUint8()},a.param_count=1,a.optname="onGold_respawn",a}(),s2c_field_death_cooldown=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.type=this.input.readUint8(),a.value=this.input.readUint32(),a.killername=this.input.readString(),a.cooldown=this.input.readUint16(),a.params=this.input.readString()},a.param_count=5,a.optname="onField_death_cooldown",a}(),c2s_mall_buy=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint32(),a.count=this.input.readUint32(),a.time=this.input.readUint32()},a.param_count=3,a.optname="onMall_buy",a}(),c2s_strength=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.part=this.input.readUint8()},a.param_count=1,a.optname="onStrength",a}(),s2c_strength_success=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.level=this.input.readUint16()},a.param_count=1,a.optname="onStrength_success",a}(),c2s_forceInto=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onForceInto",a}(),c2s_create_faction=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.name=this.input.readString(),a.icon=this.input.readUint8()},a.param_count=2,a.optname="onCreate_faction",a}(),c2s_faction_upgrade=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onFaction_upgrade",a}(),c2s_faction_join=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readString()},a.param_count=1,a.optname="onFaction_join",a}(),c2s_raise_base_spell=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.raiseType=this.input.readUint8(),a.spellId=this.input.readUint16()},a.param_count=2,a.optname="onRaise_base_spell",a}(),c2s_upgrade_anger_spell=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.spellId=this.input.readUint16()},a.param_count=1,a.optname="onUpgrade_anger_spell",a}(),c2s_raise_mount=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onRaise_mount",a}(),c2s_upgrade_mount=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.useItem=this.input.readUint8()},a.param_count=1,a.optname="onUpgrade_mount",a}(),c2s_upgrade_mount_one_step=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.useItem=this.input.readUint8()},a.param_count=1,a.optname="onUpgrade_mount_one_step",a}(),c2s_illusion_mount_active=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.illuId=this.input.readUint16()},a.param_count=1,a.optname="onIllusion_mount_active",a}(),c2s_illusion_mount=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.illuId=this.input.readUint16()},a.param_count=1,a.optname="onIllusion_mount",a}(),c2s_ride_mount=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onRide_mount",a}(),s2c_grid_unit_jump=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onGrid_unit_jump",a}(),c2s_gem=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.part=this.input.readUint8()},a.param_count=1,a.optname="onGem",a}(),c2s_change_battle_mode=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.mode=this.input.readUint8()},a.param_count=1,a.optname="onChange_battle_mode",a}(),s2c_peace_mode_cd=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.mode=this.input.readUint8()},a.param_count=1,a.optname="onPeace_mode_cd",a}(),c2s_divine_active=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onDivine_active",a}(),c2s_divine_uplev=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onDivine_uplev",a}(),c2s_divine_switch=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onDivine_switch",a}(),c2s_jump_start=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.pos_x=this.input.readUint16(),a.pos_y=this.input.readUint16()},a.param_count=2,a.optname="onJump_start",a}(),c2s_enter_vip_instance=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint16(),a.hard=this.input.readUint8()},a.param_count=2,a.optname="onEnter_vip_instance",a}(),c2s_sweep_vip_instance=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint16()},a.param_count=1,a.optname="onSweep_vip_instance",a}(),c2s_hang_up=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onHang_up",a}(),c2s_hang_up_setting=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.value0=this.input.readUint32(),a.value1=this.input.readUint32(),a.value2=this.input.readUint32(),a.value3=this.input.readUint32()},a.param_count=4,a.optname="onHang_up_setting",a}(),c2s_enter_trial_instance=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onEnter_trial_instance",a}(),c2s_sweep_trial_instance=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onSweep_trial_instance",a}(),c2s_reset_trial_instance=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onReset_trial_instance",a}(),s2c_sweep_instance_reward=function(){function a(){this.optcode=0,this.list=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.inst_sub_type=this.input.readUint8(),a.data1=this.input.readUint8(),a.data2=this.input.readUint8(),a.data3=this.input.readUint8(),a.list.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new item_reward_info;e.read(this.input),a.list.push(e)}},a.param_count=5,a.optname="onSweep_instance_reward",a}(),c2s_reenter_instance=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onReenter_instance",a}(),s2c_merry_go_round=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onMerry_go_round",a}(),c2s_social_add_friend=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString()},a.param_count=1,a.optname="onSocial_add_friend",a}(),c2s_social_sureadd_friend=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString()},a.param_count=1,a.optname="onSocial_sureadd_friend",a}(),c2s_social_gift_friend=function(){function a(){this.optcode=0,this.gift=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString(),a.gift.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new item_reward_info;e.read(this.input),a.gift.push(e)}},a.param_count=2,a.optname="onSocial_gift_friend",a}(),c2s_social_recommend_friend=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onSocial_recommend_friend",a}(),s2c_social_get_recommend_friend=function(){function a(){this.optcode=0,this.list=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.list.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new social_friend_info;e.read(this.input),a.list.push(e)}},a.param_count=1,a.optname="onSocial_get_recommend_friend",a}(),c2s_social_revenge_enemy=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString()},a.param_count=1,a.optname="onSocial_revenge_enemy",a}(),c2s_social_del_friend=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString()},a.param_count=1,a.optname="onSocial_del_friend",a}(),c2s_teleport_main_city=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onTeleport_main_city",a}(),c2s_chat_by_channel=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.channel=this.input.readUint8(),a.content=this.input.readString()},a.param_count=2,a.optname="onChat_by_channel",a}(),s2c_send_chat=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.channel=this.input.readUint8(),a.guid=this.input.readString(),a.title=this.input.readUint8(),a.name=this.input.readString(),a.vip=this.input.readUint8(),a.zs=this.input.readUint8(),a.lvl=this.input.readUint8(),a.gender=this.input.readUint8(),a.content=this.input.readString(),a.to_guid=this.input.readString(),a.faction_guid=this.input.readString()},a.param_count=11,a.optname="onSend_chat",a}(),c2s_social_clear_apply=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onSocial_clear_apply",a}(),c2s_msg_decline=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.value0=this.input.readUint32(),a.value1=this.input.readUint32()},a.param_count=2,a.optname="onMsg_decline",a}(),s2c_faction_get_list_result=function(){function a(){this.optcode=0,this.list=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.list.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new faction_info;e.read(this.input),a.list.push(e)}a.curpag=this.input.readUint8(),a.maxpag=this.input.readUint8()},a.param_count=3,a.optname="onFaction_get_list_result",a}(),c2s_faction_getlist=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.page=this.input.readUint8(),a.num=this.input.readUint8(),a.grep=this.input.readUint8()},a.param_count=3,a.optname="onFaction_getlist",a}(),c2s_faction_manager=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.opt_type=this.input.readUint8(),a.reserve_int1=this.input.readUint16(),a.reserve_int2=this.input.readUint16(),a.reserve_str1=this.input.readString(),a.reserve_str2=this.input.readString()},a.param_count=5,a.optname="onFaction_manager",a}(),c2s_faction_member_operate=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.opt_type=this.input.readUint8(),a.reserve_int1=this.input.readUint16(),a.reserve_int2=this.input.readUint16(),a.reserve_str1=this.input.readString(),a.reserve_str2=this.input.readString()},a.param_count=5,a.optname="onFaction_member_operate",a}(),c2s_faction_fast_join=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onFaction_fast_join",a}(),c2s_social_add_friend_byname=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.name=this.input.readString()},a.param_count=1,a.optname="onSocial_add_friend_byname",a}(),c2s_read_mail=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.indx=this.input.readUint16()},a.param_count=1,a.optname="onRead_mail",a}(),c2s_pick_mail=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.indx=this.input.readUint16()},a.param_count=1,a.optname="onPick_mail",a}(),c2s_remove_mail=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.indx=this.input.readUint16()},a.param_count=1,a.optname="onRemove_mail",a}(),c2s_pick_mail_one_step=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onPick_mail_one_step",a}(),c2s_remove_mail_one_step=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onRemove_mail_one_step",a}(),c2s_block_chat=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString()},a.param_count=1,a.optname="onBlock_chat",a}(),c2s_cancel_block_chat=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.indx=this.input.readUint8()},a.param_count=1,a.optname="onCancel_block_chat",a}(),c2s_use_broadcast_gameobject=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.target=this.input.readUint32()},a.param_count=1,a.optname="onUse_broadcast_gameobject",a}(),c2s_world_boss_enroll=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onWorld_boss_enroll",a}(),c2s_world_boss_fight=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onWorld_boss_fight",a}(),c2s_change_line=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.lineNo=this.input.readUint32()},a.param_count=1,a.optname="onChange_line",a}(),c2s_roll_world_boss_treasure=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onRoll_world_boss_treasure",a}(),s2c_roll_result=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.point=this.input.readUint8(),a.name=this.input.readString(),a.isHighest=this.input.readUint8(),a.timestamp=this.input.readUint32(),a.rollid=this.input.readUint8()},a.param_count=5,a.optname="onRoll_result",a}(),s2c_boss_rank=function(){function a(){this.optcode=0,this.rankList=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.rankType=this.input.readUint8(),a.rankList.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new rank_info;e.read(this.input),a.rankList.push(e)}a.mine=this.input.readUint8()},a.param_count=3,a.optname="onBoss_rank",a}(),c2s_rank_add_like=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.type=this.input.readUint8(),a.guid=this.input.readString()},a.param_count=2,a.optname="onRank_add_like",a}(),s2c_rank_add_like_result=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.type=this.input.readUint8(),a.guid=this.input.readString(),a.num=this.input.readUint32()},a.param_count=3,a.optname="onRank_add_like_result",a}(),c2s_res_instance_enter=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onRes_instance_enter",a}(),c2s_res_instance_sweep=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onRes_instance_sweep",a}(),c2s_show_map_line=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onShow_map_line",a}(),s2c_send_map_line=function(){function a(){this.optcode=0,this.info=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.info.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new line_info;e.read(this.input),a.info.push(e)}},a.param_count=1,a.optname="onSend_map_line",a}(),s2c_item_notice=function(){function a(){this.optcode=0,this.list=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.showType=this.input.readUint8(),a.list.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new item_reward_info;e.read(this.input),a.list.push(e)}},a.param_count=2,a.optname="onItem_notice",a}(),c2s_teleport_map=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.mapid=this.input.readUint32(),a.lineNo=this.input.readUint32()},a.param_count=2,a.optname="onTeleport_map",a}(),c2s_teleport_field_boss=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.mapid=this.input.readUint32(),a.lineNo=this.input.readUint32()},a.param_count=2,a.optname="onTeleport_field_boss",a}(),c2s_get_activity_reward=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8(),a.vip=this.input.readUint8()},a.param_count=2,a.optname="onGet_activity_reward",a}(),c2s_get_achieve_reward=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onGet_achieve_reward",a}(),c2s_get_achieve_all_reward=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onGet_achieve_all_reward",a}(),c2s_set_title=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onSet_title",a}(),c2s_init_title=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onInit_title",a}(),c2s_welfare_shouchong_reward=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onWelfare_shouchong_reward",a}(),c2s_welfare_checkin=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onWelfare_checkin",a}(),c2s_welfare_checkin_all=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onWelfare_checkin_all",a}(),c2s_welfare_checkin_getback=function(){
function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onWelfare_checkin_getback",a}(),c2s_welfare_level=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onWelfare_level",a}(),c2s_welfare_active_getback=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8(),a.best=this.input.readUint8(),a.num=this.input.readUint16()},a.param_count=3,a.optname="onWelfare_active_getback",a}(),c2s_pick_quest_reward=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.indx=this.input.readUint8()},a.param_count=1,a.optname="onPick_quest_reward",a}(),c2s_talk_with_npc=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.entry=this.input.readUint16(),a.questId=this.input.readUint16()},a.param_count=2,a.optname="onTalk_with_npc",a}(),c2s_use_virtual_item=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.entry=this.input.readUint16()},a.param_count=1,a.optname="onUse_virtual_item",a}(),c2s_pick_quest_chapter_reward=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.indx=this.input.readUint8()},a.param_count=1,a.optname="onPick_quest_chapter_reward",a}(),c2s_kuafu_3v3_match=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onKuafu_3v3_match",a}(),s2c_kuafu_match_start=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.indx=this.input.readUint8()},a.param_count=1,a.optname="onKuafu_match_start",a}(),c2s_kuafu_3v3_buytimes=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.num=this.input.readUint8()},a.param_count=1,a.optname="onKuafu_3v3_buytimes",a}(),c2s_kuafu_3v3_dayreward=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onKuafu_3v3_dayreward",a}(),c2s_kuafu_3v3_getranlist=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onKuafu_3v3_getranlist",a}(),s2c_kuafu_3v3_ranlist=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.list=this.input.readString()},a.param_count=1,a.optname="onKuafu_3v3_ranlist",a}(),c2s_welfare_getalllist_getback=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.best=this.input.readUint8()},a.param_count=1,a.optname="onWelfare_getalllist_getback",a}(),s2c_welfare_rewardlist_getback=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.list=this.input.readString(),a.cost=this.input.readString()},a.param_count=2,a.optname="onWelfare_rewardlist_getback",a}(),c2s_welfare_getall_getback=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.best=this.input.readUint8()},a.param_count=1,a.optname="onWelfare_getall_getback",a}(),c2s_kuafu_3v3_getmyrank=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onKuafu_3v3_getmyrank",a}(),s2c_kuafu_3v3_myrank=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.rank=this.input.readUint8()},a.param_count=1,a.optname="onKuafu_3v3_myrank",a}(),s2c_kuafu_3v3_kill_detail=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.indx1=this.input.readUint32(),a.indx2=this.input.readUint32()},a.param_count=2,a.optname="onKuafu_3v3_kill_detail",a}(),s2c_kuafu_3v3_wait_info=function(){function a(){this.optcode=0,this.list=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.list.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new wait_info;e.read(this.input),a.list.push(e)}},a.param_count=1,a.optname="onKuafu_3v3_wait_info",a}(),both_kuafu_3v3_cancel_match=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.type=this.input.readUint32()},a.param_count=1,a.optname="onKuafu_3v3_cancel_match",a}(),c2s_kuafu_3v3_match_oper=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.oper=this.input.readUint32()},a.param_count=1,a.optname="onKuafu_3v3_match_oper",a}(),s2c_kuafu_3v3_decline_match=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.type=this.input.readUint32()},a.param_count=1,a.optname="onKuafu_3v3_decline_match",a}(),c2s_kuafu_xianfu_match=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.indx=this.input.readUint8()},a.param_count=1,a.optname="onKuafu_xianfu_match",a}(),s2c_kuafu_match_wait=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.type=this.input.readUint8(),a.target=this.input.readUint8(),a.count=this.input.readUint8(),a.data=this.input.readUint32(),a.params=this.input.readString()},a.param_count=5,a.optname="onKuafu_match_wait",a}(),s2c_kuafu_xianfu_minimap_info=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onKuafu_xianfu_minimap_info",a}(),c2s_buy_xianfu_item=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.type=this.input.readUint8(),a.indx=this.input.readUint8(),a.count=this.input.readUint16()},a.param_count=3,a.optname="onBuy_xianfu_item",a}(),c2s_xianfu_random_respawn=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onXianfu_random_respawn",a}(),c2s_doujiantai_fight=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.rank=this.input.readUint16()},a.param_count=1,a.optname="onDoujiantai_fight",a}(),c2s_doujiantai_buytime=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.num=this.input.readUint8()},a.param_count=1,a.optname="onDoujiantai_buytime",a}(),c2s_doujiantai_clearcd=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onDoujiantai_clearcd",a}(),c2s_doujiantai_first_reward=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onDoujiantai_first_reward",a}(),both_doujiantai_get_enemys_info=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onDoujiantai_get_enemys_info",a}(),c2s_doujiantai_get_rank=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.startIdx=this.input.readUint16(),a.endIdx=this.input.readUint16()},a.param_count=2,a.optname="onDoujiantai_get_rank",a}(),c2s_doujiantai_refresh_enemys=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onDoujiantai_refresh_enemys",a}(),both_doujiantai_top3=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onDoujiantai_top3",a}(),both_use_jump_point=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint32()},a.param_count=1,a.optname="onUse_jump_point",a}(),c2s_bag_item_sell=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.item_guid=this.input.readString(),a.count=this.input.readUint32()},a.param_count=2,a.optname="onBag_item_sell",a}(),c2s_bag_item_sort=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onBag_item_sort",a}(),c2s_submit_quest_daily2=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onSubmit_quest_daily2",a}(),s2c_attribute_changed=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onAttribute_changed",a}(),s2c_bag_find_equip_better=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.item_id=this.input.readUint32(),a.pos=this.input.readUint32()},a.param_count=2,a.optname="onBag_find_equip_better",a}(),s2c_module_active=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.moduleId=this.input.readUint32()},a.param_count=1,a.optname="onModule_active",a}(),c2s_pick_daily2_quest_reward=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.indx=this.input.readUint8()},a.param_count=1,a.optname="onPick_daily2_quest_reward",a}(),c2s_finish_now_guide=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onFinish_now_guide",a}(),c2s_get_cultivation_info=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onGet_cultivation_info",a}(),s2c_update_cultivation_info=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.start_time=this.input.readUint32(),a.lost=this.input.readUint32()},a.param_count=2,a.optname="onUpdate_cultivation_info",a}(),c2s_get_cultivation_rivals_info=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onGet_cultivation_rivals_info",a}(),s2c_update_cultivation_rivals_info_list=function(){function a(){this.optcode=0,this.list=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.list.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new cultivation_rivals_info;e.read(this.input),a.list.push(e)}},a.param_count=1,a.optname="onUpdate_cultivation_rivals_info_list",a}(),c2s_get_cultivation_reward=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onGet_cultivation_reward",a}(),c2s_refresh_cultivation_rivals=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onRefresh_cultivation_rivals",a}(),c2s_plunder_cultivation_rival=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.index=this.input.readUint32()},a.param_count=1,a.optname="onPlunder_cultivation_rival",a}(),c2s_revenge_cultivation_rival=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.index=this.input.readUint32()},a.param_count=1,a.optname="onRevenge_cultivation_rival",a}(),c2s_buy_cultivation_left_plunder_count=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.count=this.input.readUint32()},a.param_count=1,a.optname="onBuy_cultivation_left_plunder_count",a}(),s2c_show_cultivation_result_list=function(){function a(){this.optcode=0,this.list=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.result=this.input.readInt32(),a.name=this.input.readString(),a.list.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new item_reward_info;e.read(this.input),a.list.push(e)}},a.param_count=3,a.optname="onShow_cultivation_result_list",a}(),c2s_get_login_activity_reward=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint32()},a.param_count=1,a.optname="onGet_login_activity_reward",a}(),s2c_cast_spell_start=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.caster_guid=this.input.readUint32(),a.target_guid=this.input.readUint32(),a.spellid=this.input.readUint16(),a.data=this.input.readString()},a.param_count=4,a.optname="onCast_spell_start",a}(),c2s_finish_optional_guide_step=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guide_id=this.input.readUint32(),a.step=this.input.readUint8()},a.param_count=2,a.optname="onFinish_optional_guide_step",a}(),c2s_execute_quest_cmd_after_accepted=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.indx=this.input.readUint16()},a.param_count=1,a.optname="onExecute_quest_cmd_after_accepted",a}(),s2c_show_unit_attribute=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onShow_unit_attribute",a}(),c2s_back_to_famity=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onBack_to_famity",a}(),s2c_faction_boss_send_result=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.result=this.input.readUint32(),a.boss_id=this.input.readUint32(),a.money=this.input.readUint32()},a.param_count=3,a.optname="onFaction_boss_send_result",a}(),c2s_challange_boss=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onChallange_boss",a}(),c2s_pick_offline_reward=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onPick_offline_reward",a}(),s2c_offline_reward_result=function(){function a(){this.optcode=0,this.list=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.reserve=this.input.readUint32(),a.reserve2=this.input.readUint32(),a.reserve3=this.input.readUint32(),a.reserve4=this.input.readUint32(),a.list.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new item_reward_info;e.read(this.input),a.list.push(e)}},a.param_count=5,a.optname="onOffline_reward_result",a}(),c2s_smelting_equip=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.pos_str=this.input.readString()},a.param_count=1,a.optname="onSmelting_equip",a}(),c2s_storehouse_hand_in=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.pos_str=this.input.readString()},a.param_count=1,a.optname="onStorehouse_hand_in",a}(),c2s_storehouse_exchange=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.pos=this.input.readUint32()},a.param_count=1,a.optname="onStorehouse_exchange",a}(),c2s_storehouse_destroy=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.pos=this.input.readUint32()},a.param_count=1,a.optname="onStorehouse_destroy",a}(),c2s_send_faction_gift=function(){function a(){this.optcode=0,this.list=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.list.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new item_reward_info;e.read(this.input),a.list.push(e)}a.msg=this.input.readString(),a.msg_type=this.input.readUint32()},a.param_count=3,a.optname="onSend_faction_gift",a}(),c2s_get_faction_gift_exreward=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.count_id=this.input.readUint32()},a.param_count=1,a.optname="onGet_faction_gift_exreward",a}(),c2s_get_all_faction_gift_exreward=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onGet_all_faction_gift_exreward",a}(),s2c_show_faction_gift_page=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onShow_faction_gift_page",a}(),s2c_show_faction_gift_info=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onShow_faction_gift_info",a}(),s2c_show_faction_gift_unthank_page=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onShow_faction_gift_unthank_page",a}(),s2c_show_faction_gift_history_page=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onShow_faction_gift_history_page",a}(),c2s_get_faction_gift_rank_page=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.page=this.input.readUint32()},a.param_count=1,a.optname="onGet_faction_gift_rank_page",a}(),s2c_show_faction_gift_rank_result_list=function(){function a(){this.optcode=0,this.list=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.list.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new faction_gift_rank_info;e.read(this.input),a.list.push(e)}a.info=new faction_gift_rank_info,a.info.read(this.input),a.page=this.input.readUint32()},a.param_count=3,a.optname="onShow_faction_gift_rank_result_list",a}(),s2c_show_faction_gift_rank_change=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.old_rank=this.input.readUint32(),a.new_rank=this.input.readUint32(),a.info=new faction_gift_rank_info,a.info.read(this.input)},a.param_count=3,a.optname="onShow_faction_gift_rank_change",a}(),s2c_show_faction_gift_rank_info=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.info=new faction_gift_rank_info,a.info.read(this.input)},a.param_count=1,a.optname="onShow_faction_gift_rank_info",a}(),c2s_divine_forge=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint32(),a.count=this.input.readUint32()},a.param_count=2,a.optname="onDivine_forge",a}(),c2s_divine_advance=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint32()},a.param_count=1,a.optname="onDivine_advance",a}(),c2s_divine_spirit=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint32(),a.protect=this.input.readUint32(),a.improve=this.input.readUint32()},a.param_count=3,a.optname="onDivine_spirit",a}(),c2s_query_mass_boss_info=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onQuery_mass_boss_info",a}(),s2c_mass_boss_info_ret=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.count=this.input.readUint32(),a.percent=this.input.readUint8()},a.param_count=2,a.optname="onMass_boss_info_ret",a}(),c2s_query_mass_boss_rank=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onQuery_mass_boss_rank",a}(),s2c_mass_boss_rank_result=function(){function a(){this.optcode=0,this.info=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.info.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new mass_boss_rank_info;e.read(this.input),a.info.push(e)}},a.param_count=1,a.optname="onMass_boss_rank_result",a}(),c2s_try_mass_boss=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onTry_mass_boss",a}(),c2s_buy_mass_boss_times=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.cnt=this.input.readUint8()},a.param_count=1,a.optname="onBuy_mass_boss_times",a}(),c2s_group_instance_match=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.indx=this.input.readUint8()},a.param_count=1,a.optname="onGroup_instance_match",a}(),c2s_buy_group_instance_times=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.count=this.input.readUint8()},a.param_count=1,a.optname="onBuy_group_instance_times",a}(),c2s_talisman_active=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint32()},a.param_count=1,a.optname="onTalisman_active",a}(),c2s_talisman_lvup=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint32()},a.param_count=1,a.optname="onTalisman_lvup",a}(),c2s_wings_active=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onWings_active",a}(),c2s_wings_bless=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onWings_bless",a}(),c2s_wings_rankup=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onWings_rankup",a}(),c2s_wings_strength=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onWings_strength",a}(),c2s_meridian_practise=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onMeridian_practise",a}(),c2s_add_meridian_exp=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onAdd_meridian_exp",a}(),c2s_raise_mount_level_base=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onRaise_mount_level_base",a}(),c2s_active_mount=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onActive_mount",a}(),s2c_show_faction_bossdefense_damage_list=function(){function a(){this.optcode=0,this.list=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.list.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new mass_boss_rank_info;e.read(this.input),a.list.push(e)}},a.param_count=1,a.optname="onShow_faction_bossdefense_damage_list",a}(),s2c_show_faction_tower_sweep_list=function(){function a(){this.optcode=0,this.list=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.list.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new item_reward_info;e.read(this.input),a.list.push(e)}},a.param_count=1,a.optname="onShow_faction_tower_sweep_list",a}(),s2c_send_instance_result=function(){function a(){this.optcode=0,this.list=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.state=this.input.readUint8(),a.cd=this.input.readUint8(),a.list.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new item_reward_info;e.read(this.input),a.list.push(e)}a.type=this.input.readUint8(),a.data=this.input.readString()},a.param_count=5,a.optname="onSend_instance_result",a}(),c2s_match_single_pvp=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onMatch_single_pvp",a}(),c2s_buy_match_single_pvp_times=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.cnt=this.input.readUint8()},a.param_count=1,a.optname="onBuy_match_single_pvp_times",a}(),c2s_pick_match_single_pvp_extra_reward=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onPick_match_single_pvp_extra_reward",a}(),c2s_equipdevelop_operate=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.opt_type=this.input.readUint8(),a.reserve_int1=this.input.readUint16(),a.reserve_int2=this.input.readUint16(),a.reserve_str1=this.input.readString(),a.reserve_str2=this.input.readString()},a.param_count=5,a.optname="onEquipdevelop_operate",a}(),c2s_active_appearance=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint16()},a.param_count=1,a.optname="onActive_appearance",a}(),c2s_equip_appearance=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint16()},a.param_count=1,a.optname="onEquip_appearance",a}(),c2s_cancel_equip_appearance=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.type=this.input.readUint8()},a.param_count=1,a.optname="onCancel_equip_appearance",a}(),c2s_rename=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.name=this.input.readString()},a.param_count=1,a.optname="onRename",a}(),c2s_unlock_title=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.indx=this.input.readUint8()},a.param_count=1,a.optname="onUnlock_title",a}(),c2s_social_buy_revenge_times=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.count=this.input.readUint8()},a.param_count=1,a.optname="onSocial_buy_revenge_times",a}(),c2s_enter_risk_instance=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onEnter_risk_instance",a}(),c2s_social_remove_enemy=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString()},a.param_count=1,a.optname="onSocial_remove_enemy",a}(),c2s_get_player_overview=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString()},a.param_count=1,a.optname="onGet_player_overview",a}(),s2c_show_player_overview=function(){function a(){this.optcode=0,this.equip=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString(),a.name=this.input.readString(),a.equip.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new equip_info;e.read(this.input),a.equip.push(e)}a.force=this.input.readUint32(),a.vip=this.input.readUint32(),a.title=this.input.readUint32(),a.gender=this.input.readUint32(),a.coat=this.input.readUint32(),a.weapon=this.input.readUint32()},a.param_count=9,a.optname="onShow_player_overview",a}(),c2s_send_faction_invite=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString()},a.param_count=1,a.optname="onSend_faction_invite",a}(),s2c_show_faction_invite=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.guid=this.input.readString(),a.name=this.input.readString(),a.faction_guid=this.input.readString(),a.faction_name=this.input.readString()},a.param_count=4,a.optname="onShow_faction_invite",a}(),c2s_buy_vipgift=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint32()},a.param_count=1,a.optname="onBuy_vipgift",a}(),c2s_activity_opt_buy_dailygift=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.act_id=this.input.readUint32(),a.index=this.input.readUint32()},a.param_count=2,a.optname="onActivity_opt_buy_dailygift",a}(),c2s_draw_lottery=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.actId=this.input.readUint32(),a.type=this.input.readUint8()},a.param_count=2,a.optname="onDraw_lottery",a}(),c2s_activity_opt_get_rank_process_reward=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.act_id=this.input.readUint32(),a.index=this.input.readUint32()},a.param_count=2,a.optname="onActivity_opt_get_rank_process_reward",a}(),c2s_activity_opt_get_rank_list=function(){
function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.act_id=this.input.readUint32()},a.param_count=1,a.optname="onActivity_opt_get_rank_list",a}(),s2c_activity_opt_show_rank_list=function(){function a(){this.optcode=0,this.list=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.act_id=this.input.readUint32(),a.list.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new act_rank_info;e.read(this.input),a.list.push(e)}},a.param_count=2,a.optname="onActivity_opt_show_rank_list",a}(),c2s_activity_opt_buy_limitgift=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.act_id=this.input.readUint32(),a.index=this.input.readUint32()},a.param_count=2,a.optname="onActivity_opt_buy_limitgift",a}(),c2s_welfare_get_recharge_reward=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onWelfare_get_recharge_reward",a}(),c2s_welfare_get_consume_reward=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onWelfare_get_consume_reward",a}(),c2s_welfare_get_sevenday_reward=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.id=this.input.readUint8()},a.param_count=1,a.optname="onWelfare_get_sevenday_reward",a}(),s2c_send_server_open_time=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b,a.open_time=this.input.readUint32()},a.param_count=1,a.optname="onSend_server_open_time",a}(),c2s_risk_get_rank=function(){function a(){this.optcode=0}return a.read=function(a,b){null==this.input&&(this.input=new ByteArray),this.input=b},a.param_count=0,a.optname="onRisk_get_rank",a}(),s2c_risk_get_rank_result=function(){function a(){this.optcode=0,this.list=new Array}return a.read=function(a,b){if(null==this.input&&(this.input=new ByteArray),this.input=b,a.list.length)throw Error("通讯对象池有异常");for(var c=this.input.readUint16(),d=0;c>d;d++){var e=new act_rank_info;e.read(this.input),a.list.push(e)}},a.param_count=1,a.optname="onRisk_get_rank_result",a}(),Protocols=function(){function a(a){this._FUNCS=new Object,this._stream=new ByteArray,this._send_func=a,this._stream.endian=Endian.LITTLE_ENDIAN,this._FUNCS[0]="null_action",this._FUNCS[1]="ping_pong",this._FUNCS[2]="forced_into",this._FUNCS[3]="get_session",this._FUNCS[4]="route_trace",this._FUNCS[5]="write_client_log",this._FUNCS[7]="sync_mstime",this._FUNCS[9]="ud_control",this._FUNCS[15]="get_chars_list",this._FUNCS[17]="check_name",this._FUNCS[19]="char_create",this._FUNCS[21]="delete_char",this._FUNCS[23]="player_login",this._FUNCS[24]="player_logout",this._FUNCS[25]="regularise_account",this._FUNCS[26]="char_remotestore",this._FUNCS[27]="char_remotestore_str",this._FUNCS[28]="teleport",this._FUNCS[29]="move_stop",this._FUNCS[30]="unit_move",this._FUNCS[31]="use_gameobject",this._FUNCS[32]="bag_exchange_pos",this._FUNCS[33]="bag_destroy",this._FUNCS[34]="bag_item_split",this._FUNCS[35]="bag_item_user",this._FUNCS[39]="exchange_item",this._FUNCS[40]="bag_extension",this._FUNCS[41]="npc_get_goods_list",this._FUNCS[43]="store_buy",this._FUNCS[44]="npc_sell",this._FUNCS[45]="npc_repurchase",this._FUNCS[46]="avatar_fashion_enable",this._FUNCS[47]="questhelp_talk_option",this._FUNCS[48]="taxi_hello",this._FUNCS[50]="taxi_select_station",this._FUNCS[51]="gossip_select_option",this._FUNCS[52]="gossip_hello",this._FUNCS[54]="questgiver_status_query",this._FUNCS[56]="query_quest_status",this._FUNCS[57]="questhelp_get_canaccept_list",this._FUNCS[61]="questlog_remove_quest",this._FUNCS[62]="questgiver_complete_quest",this._FUNCS[64]="questhelp_complete",this._FUNCS[66]="questhelp_update_status",this._FUNCS[68]="questgiver_accept_quest",this._FUNCS[69]="questupdate_use_item",this._FUNCS[70]="questhelp_query_book",this._FUNCS[73]="set_attack_mode",this._FUNCS[74]="select_target",this._FUNCS[77]="spell_start",this._FUNCS[78]="spell_stop",this._FUNCS[79]="jump",this._FUNCS[80]="resurrection",this._FUNCS[81]="trade_request",this._FUNCS[82]="trade_reply",this._FUNCS[84]="trade_decide_items",this._FUNCS[86]="trade_cancel",this._FUNCS[87]="trade_ready",this._FUNCS[89]="chat_near",this._FUNCS[90]="chat_whisper",this._FUNCS[91]="chat_faction",this._FUNCS[92]="chat_world",this._FUNCS[93]="chat_horn",this._FUNCS[94]="chat_notice",this._FUNCS[95]="query_player_info",this._FUNCS[97]="receive_gift_packs",this._FUNCS[101]="instance_enter",this._FUNCS[102]="instance_next_state",this._FUNCS[103]="instance_exit",this._FUNCS[104]="limit_activity_receive",this._FUNCS[107]="warehouse_save_money",this._FUNCS[108]="warehouse_take_money",this._FUNCS[109]="use_gold_opt",this._FUNCS[110]="use_silver_opt",this._FUNCS[113]="sync_mstime_app",this._FUNCS[114]="open_window",this._FUNCS[115]="player_gag",this._FUNCS[116]="player_kicking",this._FUNCS[118]="rank_list_query",this._FUNCS[120]="client_update_scened",this._FUNCS[122]="loot_select",this._FUNCS[123]="goback_to_game_server",this._FUNCS[124]="world_war_CS_player_info",this._FUNCS[126]="world_war_SC_player_info",this._FUNCS[127]="clientSubscription",this._FUNCS[129]="char_update_info",this._FUNCS[131]="modify_watch",this._FUNCS[132]="kuafu_chuansong",this._FUNCS[133]="show_suit",this._FUNCS[134]="show_position",this._FUNCS[135]="gold_respawn",this._FUNCS[137]="mall_buy",this._FUNCS[139]="strength",this._FUNCS[141]="forceInto",this._FUNCS[142]="create_faction",this._FUNCS[143]="faction_upgrade",this._FUNCS[144]="faction_join",this._FUNCS[145]="raise_base_spell",this._FUNCS[146]="upgrade_anger_spell",this._FUNCS[147]="raise_mount",this._FUNCS[148]="upgrade_mount",this._FUNCS[149]="upgrade_mount_one_step",this._FUNCS[150]="illusion_mount_active",this._FUNCS[151]="illusion_mount",this._FUNCS[152]="ride_mount",this._FUNCS[154]="gem",this._FUNCS[155]="change_battle_mode",this._FUNCS[157]="divine_active",this._FUNCS[158]="divine_uplev",this._FUNCS[159]="divine_switch",this._FUNCS[160]="jump_start",this._FUNCS[161]="enter_vip_instance",this._FUNCS[162]="sweep_vip_instance",this._FUNCS[163]="hang_up",this._FUNCS[164]="hang_up_setting",this._FUNCS[165]="enter_trial_instance",this._FUNCS[166]="sweep_trial_instance",this._FUNCS[167]="reset_trial_instance",this._FUNCS[169]="reenter_instance",this._FUNCS[171]="social_add_friend",this._FUNCS[172]="social_sureadd_friend",this._FUNCS[173]="social_gift_friend",this._FUNCS[174]="social_recommend_friend",this._FUNCS[176]="social_revenge_enemy",this._FUNCS[177]="social_del_friend",this._FUNCS[178]="teleport_main_city",this._FUNCS[179]="chat_by_channel",this._FUNCS[181]="social_clear_apply",this._FUNCS[182]="msg_decline",this._FUNCS[184]="faction_getlist",this._FUNCS[185]="faction_manager",this._FUNCS[186]="faction_member_operate",this._FUNCS[187]="faction_fast_join",this._FUNCS[188]="social_add_friend_byname",this._FUNCS[190]="read_mail",this._FUNCS[191]="pick_mail",this._FUNCS[192]="remove_mail",this._FUNCS[193]="pick_mail_one_step",this._FUNCS[194]="remove_mail_one_step",this._FUNCS[195]="block_chat",this._FUNCS[196]="cancel_block_chat",this._FUNCS[200]="use_broadcast_gameobject",this._FUNCS[201]="world_boss_enroll",this._FUNCS[202]="world_boss_fight",this._FUNCS[203]="change_line",this._FUNCS[204]="roll_world_boss_treasure",this._FUNCS[207]="rank_add_like",this._FUNCS[210]="res_instance_enter",this._FUNCS[211]="res_instance_sweep",this._FUNCS[212]="show_map_line",this._FUNCS[216]="teleport_map",this._FUNCS[217]="teleport_field_boss",this._FUNCS[218]="get_activity_reward",this._FUNCS[220]="get_achieve_reward",this._FUNCS[221]="get_achieve_all_reward",this._FUNCS[222]="set_title",this._FUNCS[223]="init_title",this._FUNCS[224]="welfare_shouchong_reward",this._FUNCS[225]="welfare_checkin",this._FUNCS[226]="welfare_checkin_all",this._FUNCS[227]="welfare_checkin_getback",this._FUNCS[228]="welfare_level",this._FUNCS[229]="welfare_active_getback",this._FUNCS[230]="pick_quest_reward",this._FUNCS[231]="talk_with_npc",this._FUNCS[232]="use_virtual_item",this._FUNCS[233]="pick_quest_chapter_reward",this._FUNCS[234]="kuafu_3v3_match",this._FUNCS[236]="kuafu_3v3_buytimes",this._FUNCS[237]="kuafu_3v3_dayreward",this._FUNCS[238]="kuafu_3v3_getranlist",this._FUNCS[240]="welfare_getalllist_getback",this._FUNCS[242]="welfare_getall_getback",this._FUNCS[248]="kuafu_3v3_getmyrank",this._FUNCS[252]="kuafu_3v3_cancel_match",this._FUNCS[253]="kuafu_3v3_match_oper",this._FUNCS[255]="kuafu_xianfu_match",this._FUNCS[258]="buy_xianfu_item",this._FUNCS[259]="xianfu_random_respawn",this._FUNCS[260]="doujiantai_fight",this._FUNCS[261]="doujiantai_buytime",this._FUNCS[262]="doujiantai_clearcd",this._FUNCS[263]="doujiantai_first_reward",this._FUNCS[265]="doujiantai_get_enemys_info",this._FUNCS[266]="doujiantai_get_rank",this._FUNCS[270]="doujiantai_refresh_enemys",this._FUNCS[271]="doujiantai_top3",this._FUNCS[272]="use_jump_point",this._FUNCS[273]="bag_item_sell",this._FUNCS[274]="bag_item_sort",this._FUNCS[280]="submit_quest_daily2",this._FUNCS[284]="pick_daily2_quest_reward",this._FUNCS[285]="finish_now_guide",this._FUNCS[286]="get_cultivation_info",this._FUNCS[288]="get_cultivation_rivals_info",this._FUNCS[290]="get_cultivation_reward",this._FUNCS[291]="refresh_cultivation_rivals",this._FUNCS[292]="plunder_cultivation_rival",this._FUNCS[293]="revenge_cultivation_rival",this._FUNCS[294]="buy_cultivation_left_plunder_count",this._FUNCS[296]="get_login_activity_reward",this._FUNCS[301]="finish_optional_guide_step",this._FUNCS[302]="execute_quest_cmd_after_accepted",this._FUNCS[320]="back_to_famity",this._FUNCS[322]="challange_boss",this._FUNCS[325]="pick_offline_reward",this._FUNCS[327]="smelting_equip",this._FUNCS[328]="storehouse_hand_in",this._FUNCS[329]="storehouse_exchange",this._FUNCS[330]="storehouse_destroy",this._FUNCS[331]="send_faction_gift",this._FUNCS[332]="get_faction_gift_exreward",this._FUNCS[333]="get_all_faction_gift_exreward",this._FUNCS[338]="get_faction_gift_rank_page",this._FUNCS[342]="divine_forge",this._FUNCS[343]="divine_advance",this._FUNCS[344]="divine_spirit",this._FUNCS[352]="query_mass_boss_info",this._FUNCS[354]="query_mass_boss_rank",this._FUNCS[356]="try_mass_boss",this._FUNCS[357]="buy_mass_boss_times",this._FUNCS[358]="group_instance_match",this._FUNCS[359]="buy_group_instance_times",this._FUNCS[360]="talisman_active",this._FUNCS[361]="talisman_lvup",this._FUNCS[362]="wings_active",this._FUNCS[363]="wings_bless",this._FUNCS[364]="wings_rankup",this._FUNCS[365]="wings_strength",this._FUNCS[366]="meridian_practise",this._FUNCS[367]="add_meridian_exp",this._FUNCS[368]="raise_mount_level_base",this._FUNCS[369]="active_mount",this._FUNCS[376]="match_single_pvp",this._FUNCS[377]="buy_match_single_pvp_times",this._FUNCS[378]="pick_match_single_pvp_extra_reward",this._FUNCS[380]="equipdevelop_operate",this._FUNCS[381]="active_appearance",this._FUNCS[382]="equip_appearance",this._FUNCS[383]="cancel_equip_appearance",this._FUNCS[384]="rename",this._FUNCS[385]="unlock_title",this._FUNCS[386]="social_buy_revenge_times",this._FUNCS[387]="enter_risk_instance",this._FUNCS[388]="social_remove_enemy",this._FUNCS[389]="get_player_overview",this._FUNCS[391]="send_faction_invite",this._FUNCS[393]="buy_vipgift",this._FUNCS[394]="activity_opt_buy_dailygift",this._FUNCS[395]="draw_lottery",this._FUNCS[396]="activity_opt_get_rank_process_reward",this._FUNCS[397]="activity_opt_get_rank_list",this._FUNCS[399]="activity_opt_buy_limitgift",this._FUNCS[400]="welfare_get_recharge_reward",this._FUNCS[401]="welfare_get_consume_reward",this._FUNCS[402]="welfare_get_sevenday_reward",this._FUNCS[404]="risk_get_rank"}return a.prototype.getFuncName=function(a){return this._FUNCS[a]?this._FUNCS[a]:null},a.prototype.null_action=function(){this._stream.reset(),this._stream.optcode=0,this._stream.writeUint16(0),this._send_func(this._stream)},a.prototype.ping_pong=function(){this._stream.reset(),this._stream.optcode=1,this._stream.writeUint16(1),this._send_func(this._stream)},a.prototype.forced_into=function(){this._stream.reset(),this._stream.optcode=2,this._stream.writeUint16(2),this._send_func(this._stream)},a.prototype.get_session=function(a,b,c){this._stream.reset(),this._stream.optcode=3,this._stream.writeUint16(3),this._stream.writeString(a),this._stream.writeString(b),this._stream.writeString(c),this._send_func(this._stream)},a.prototype.route_trace=function(a){this._stream.reset(),this._stream.optcode=4,this._stream.writeUint16(4),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.write_client_log=function(a,b,c,d){this._stream.reset(),this._stream.optcode=5,this._stream.writeUint16(5),this._stream.writeUint32(a),this._stream.writeString(b),this._stream.writeString(c),this._stream.writeString(d),this._send_func(this._stream)},a.prototype.sync_mstime=function(a,b,c){this._stream.reset(),this._stream.optcode=7,this._stream.writeUint16(7),this._stream.writeUint32(a),this._stream.writeUint32(b),this._stream.writeUint32(c),this._send_func(this._stream)},a.prototype.ud_control=function(){this._stream.reset(),this._stream.optcode=9,this._stream.writeUint16(9),this._send_func(this._stream)},a.prototype.get_chars_list=function(){this._stream.reset(),this._stream.optcode=15,this._stream.writeUint16(15),this._send_func(this._stream)},a.prototype.check_name=function(a){this._stream.reset(),this._stream.optcode=17,this._stream.writeUint16(17),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.char_create=function(a){this._stream.reset(),this._stream.optcode=19,this._stream.writeUint16(19),a.write(this._stream),this._send_func(this._stream)},a.prototype.delete_char=function(a){this._stream.reset(),this._stream.optcode=21,this._stream.writeUint16(21),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.player_login=function(a){this._stream.reset(),this._stream.optcode=23,this._stream.writeUint16(23),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.player_logout=function(){this._stream.reset(),this._stream.optcode=24,this._stream.writeUint16(24),this._send_func(this._stream)},a.prototype.regularise_account=function(a){this._stream.reset(),this._stream.optcode=25,this._stream.writeUint16(25),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.char_remotestore=function(a,b){this._stream.reset(),this._stream.optcode=26,this._stream.writeUint16(26),this._stream.writeUint32(a),this._stream.writeUint32(b),this._send_func(this._stream)},a.prototype.char_remotestore_str=function(a,b){this._stream.reset(),this._stream.optcode=27,this._stream.writeUint16(27),this._stream.writeUint32(a),this._stream.writeString(b),this._send_func(this._stream)},a.prototype.teleport=function(a){this._stream.reset(),this._stream.optcode=28,this._stream.writeUint16(28),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.move_stop=function(a,b,c){this._stream.reset(),this._stream.optcode=29,this._stream.writeUint16(29),this._stream.writeUint32(a),this._stream.writeUint16(b),this._stream.writeUint16(c),this._send_func(this._stream)},a.prototype.unit_move=function(a,b,c,d){this._stream.reset(),this._stream.optcode=30,this._stream.writeUint16(30),this._stream.writeUint32(a),this._stream.writeUint16(b),this._stream.writeUint16(c),this._stream.writeUint16(d.length);for(var e=0;e<d.length;e++)this._stream.writeInt8(d[e]);this._send_func(this._stream)},a.prototype.use_gameobject=function(a){this._stream.reset(),this._stream.optcode=31,this._stream.writeUint16(31),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.bag_exchange_pos=function(a,b,c,d){this._stream.reset(),this._stream.optcode=32,this._stream.writeUint16(32),this._stream.writeUint32(a),this._stream.writeUint32(b),this._stream.writeUint32(c),this._stream.writeUint32(d),this._send_func(this._stream)},a.prototype.bag_destroy=function(a,b,c){this._stream.reset(),this._stream.optcode=33,this._stream.writeUint16(33),this._stream.writeString(a),this._stream.writeUint32(b),this._stream.writeUint32(c),this._send_func(this._stream)},a.prototype.bag_item_split=function(a,b,c,d,e){this._stream.reset(),this._stream.optcode=34,this._stream.writeUint16(34),this._stream.writeUint8(a),this._stream.writeUint16(b),this._stream.writeUint32(c),this._stream.writeUint16(d),this._stream.writeUint8(e),this._send_func(this._stream)},a.prototype.bag_item_user=function(a,b){this._stream.reset(),this._stream.optcode=35,this._stream.writeUint16(35),this._stream.writeString(a),this._stream.writeUint32(b),this._send_func(this._stream)},a.prototype.exchange_item=function(a,b,c){this._stream.reset(),this._stream.optcode=39,this._stream.writeUint16(39),this._stream.writeUint32(a),this._stream.writeUint32(b),this._stream.writeUint32(c),this._send_func(this._stream)},a.prototype.bag_extension=function(a,b,c){this._stream.reset(),this._stream.optcode=40,this._stream.writeUint16(40),this._stream.writeUint8(a),this._stream.writeUint8(b),this._stream.writeUint32(c),this._send_func(this._stream)},a.prototype.npc_get_goods_list=function(a){this._stream.reset(),this._stream.optcode=41,this._stream.writeUint16(41),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.store_buy=function(a,b){this._stream.reset(),this._stream.optcode=43,this._stream.writeUint16(43),this._stream.writeUint32(a),this._stream.writeUint32(b),this._send_func(this._stream)},a.prototype.npc_sell=function(a,b,c){this._stream.reset(),this._stream.optcode=44,this._stream.writeUint16(44),this._stream.writeUint32(a),this._stream.writeString(b),this._stream.writeUint32(c),this._send_func(this._stream)},a.prototype.npc_repurchase=function(a){this._stream.reset(),this._stream.optcode=45,this._stream.writeUint16(45),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.avatar_fashion_enable=function(a){this._stream.reset(),this._stream.optcode=46,this._stream.writeUint16(46),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.questhelp_talk_option=function(a,b,c,d){this._stream.reset(),this._stream.optcode=47,this._stream.writeUint16(47),this._stream.writeUint32(a),this._stream.writeUint32(b),this._stream.writeInt32(c),this._stream.writeInt32(d),this._send_func(this._stream)},a.prototype.taxi_hello=function(a){this._stream.reset(),this._stream.optcode=48,this._stream.writeUint16(48),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.taxi_select_station=function(a,b){this._stream.reset(),this._stream.optcode=50,this._stream.writeUint16(50),this._stream.writeUint32(a),this._stream.writeUint32(b),this._send_func(this._stream)},a.prototype.gossip_select_option=function(a,b,c){this._stream.reset(),this._stream.optcode=51,this._stream.writeUint16(51),this._stream.writeUint32(a),this._stream.writeUint32(b),this._stream.writeString(c),this._send_func(this._stream)},a.prototype.gossip_hello=function(a){this._stream.reset(),this._stream.optcode=52,this._stream.writeUint16(52),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.questgiver_status_query=function(a){this._stream.reset(),this._stream.optcode=54,this._stream.writeUint16(54),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.query_quest_status=function(a){this._stream.reset(),this._stream.optcode=56,this._stream.writeUint16(56),this._stream.writeUint16(a.length);for(var b=0;b<a.length;b++)a[b].write(this._stream);this._send_func(this._stream)},a.prototype.questhelp_get_canaccept_list=function(){this._stream.reset(),this._stream.optcode=57,this._stream.writeUint16(57),this._send_func(this._stream)},a.prototype.questlog_remove_quest=function(a,b){this._stream.reset(),this._stream.optcode=61,this._stream.writeUint16(61),this._stream.writeUint8(a),this._stream.writeUint64(b),this._send_func(this._stream)},a.prototype.questgiver_complete_quest=function(a,b,c){this._stream.reset(),this._stream.optcode=62,this._stream.writeUint16(62),this._stream.writeUint32(a),this._stream.writeUint32(b),this._stream.writeUint8(c),this._send_func(this._stream)},a.prototype.questhelp_complete=function(a,b,c){this._stream.reset(),this._stream.optcode=64,this._stream.writeUint16(64),this._stream.writeUint32(a),this._stream.writeUint8(b),this._stream.writeUint8(c),this._send_func(this._stream)},a.prototype.questhelp_update_status=function(a,b,c){this._stream.reset(),this._stream.optcode=66,this._stream.writeUint16(66),this._stream.writeUint32(a),this._stream.writeUint32(b),this._stream.writeUint32(c),this._send_func(this._stream)},a.prototype.questgiver_accept_quest=function(a,b){this._stream.reset(),this._stream.optcode=68,this._stream.writeUint16(68),this._stream.writeUint32(a),this._stream.writeUint32(b),this._send_func(this._stream)},a.prototype.questupdate_use_item=function(a){this._stream.reset(),this._stream.optcode=69,this._stream.writeUint16(69),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.questhelp_query_book=function(a){this._stream.reset(),this._stream.optcode=70,this._stream.writeUint16(70),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.set_attack_mode=function(a,b){this._stream.reset(),this._stream.optcode=73,this._stream.writeUint16(73),this._stream.writeUint8(a),this._stream.writeUint64(b),this._send_func(this._stream)},a.prototype.select_target=function(a){this._stream.reset(),this._stream.optcode=74,this._stream.writeUint16(74),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.spell_start=function(a,b,c,d,e){this._stream.reset(),this._stream.optcode=77,this._stream.writeUint16(77),this._stream.writeUint32(a),this._stream.writeUint16(b),this._stream.writeUint16(c),this._stream.writeUint32(d),this._stream.writeUint32(e),this._send_func(this._stream)},a.prototype.spell_stop=function(a){this._stream.reset(),this._stream.optcode=78,this._stream.writeUint16(78),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.jump=function(a,b,c){this._stream.reset(),this._stream.optcode=79,this._stream.writeUint16(79),this._stream.writeUint32(a),this._stream.writeFloat(b),this._stream.writeFloat(c),this._send_func(this._stream)},a.prototype.resurrection=function(a,b){this._stream.reset(),this._stream.optcode=80,this._stream.writeUint16(80),this._stream.writeUint8(a),this._stream.writeUint64(b),this._send_func(this._stream)},a.prototype.trade_request=function(a){this._stream.reset(),this._stream.optcode=81,this._stream.writeUint16(81),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.trade_reply=function(a,b){this._stream.reset(),this._stream.optcode=82,this._stream.writeUint16(82),this._stream.writeString(a),this._stream.writeUint8(b),this._send_func(this._stream)},a.prototype.trade_decide_items=function(a,b,c){if(this._stream.reset(),this._stream.optcode=84,this._stream.writeUint16(84),a.length>1e3)throw"StringArray::length max 1000";this._stream.writeUint16(a.length);for(var d=0;d<a.length;d++)this._stream.writeString(a[d]);this._stream.writeInt32(b),this._stream.writeInt32(c),this._send_func(this._stream)},a.prototype.trade_cancel=function(){this._stream.reset(),this._stream.optcode=86,this._stream.writeUint16(86),this._send_func(this._stream)},a.prototype.trade_ready=function(){this._stream.reset(),this._stream.optcode=87,this._stream.writeUint16(87),this._send_func(this._stream)},a.prototype.chat_near=function(a){this._stream.reset(),this._stream.optcode=89,this._stream.writeUint16(89),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.chat_whisper=function(a,b){this._stream.reset(),this._stream.optcode=90,this._stream.writeUint16(90),this._stream.writeString(a),this._stream.writeString(b),this._send_func(this._stream)},a.prototype.chat_faction=function(a,b,c,d){this._stream.reset(),this._stream.optcode=91,this._stream.writeUint16(91),this._stream.writeString(a),this._stream.writeString(b),this._stream.writeString(c),this._stream.writeUint8(d),this._send_func(this._stream)},a.prototype.chat_world=function(a,b,c,d){this._stream.reset(),this._stream.optcode=92,this._stream.writeUint16(92),this._stream.writeString(a),this._stream.writeUint8(b),this._stream.writeString(c),this._stream.writeString(d),this._send_func(this._stream)},a.prototype.chat_horn=function(a,b,c,d){this._stream.reset(),this._stream.optcode=93,this._stream.writeUint16(93),this._stream.writeString(a),this._stream.writeUint8(b),this._stream.writeString(c),this._stream.writeString(d),this._send_func(this._stream)},a.prototype.chat_notice=function(a,b,c){this._stream.reset(),this._stream.optcode=94,this._stream.writeUint16(94),this._stream.writeUint32(a),this._stream.writeString(b),this._stream.writeString(c),this._send_func(this._stream)},a.prototype.query_player_info=function(a,b,c){this._stream.reset(),this._stream.optcode=95,this._stream.writeUint16(95),this._stream.writeString(a),this._stream.writeUint32(b),this._stream.writeUint32(c),this._send_func(this._stream)},a.prototype.receive_gift_packs=function(){this._stream.reset(),this._stream.optcode=97,this._stream.writeUint16(97),this._send_func(this._stream)},a.prototype.instance_enter=function(a){this._stream.reset(),this._stream.optcode=101,this._stream.writeUint16(101),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.instance_next_state=function(a,b){this._stream.reset(),this._stream.optcode=102,this._stream.writeUint16(102),this._stream.writeUint16(a),this._stream.writeUint32(b),this._send_func(this._stream)},a.prototype.instance_exit=function(a){this._stream.reset(),this._stream.optcode=103,this._stream.writeUint16(103),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.limit_activity_receive=function(a,b){this._stream.reset(),this._stream.optcode=104,this._stream.writeUint16(104),this._stream.writeUint32(a),this._stream.writeUint32(b),this._send_func(this._stream)},a.prototype.warehouse_save_money=function(a,b,c){this._stream.reset(),this._stream.optcode=107,this._stream.writeUint16(107),this._stream.writeInt32(a),this._stream.writeInt32(b),this._stream.writeInt32(c),this._send_func(this._stream)},a.prototype.warehouse_take_money=function(a,b,c){this._stream.reset(),this._stream.optcode=108,this._stream.writeUint16(108),this._stream.writeInt32(a),this._stream.writeInt32(b),this._stream.writeInt32(c),this._send_func(this._stream)},a.prototype.use_gold_opt=function(a,b){this._stream.reset(),this._stream.optcode=109,this._stream.writeUint16(109),this._stream.writeUint8(a),this._stream.writeString(b),this._send_func(this._stream)},a.prototype.use_silver_opt=function(a){this._stream.reset(),this._stream.optcode=110,this._stream.writeUint16(110),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.sync_mstime_app=function(a,b,c){this._stream.reset(),this._stream.optcode=113,this._stream.writeUint16(113),this._stream.writeUint32(a),this._stream.writeUint32(b),this._stream.writeUint32(c),this._send_func(this._stream)},a.prototype.open_window=function(a){this._stream.reset(),this._stream.optcode=114,this._stream.writeUint16(114),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.player_gag=function(a,b,c){this._stream.reset(),this._stream.optcode=115,this._stream.writeUint16(115),this._stream.writeString(a),this._stream.writeUint32(b),this._stream.writeString(c),this._send_func(this._stream)},a.prototype.player_kicking=function(a){this._stream.reset(),this._stream.optcode=116,this._stream.writeUint16(116),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.rank_list_query=function(a,b,c,d){this._stream.reset(),this._stream.optcode=118,this._stream.writeUint16(118),this._stream.writeUint32(a),this._stream.writeUint8(b),this._stream.writeUint16(c),this._stream.writeUint16(d),this._send_func(this._stream)},a.prototype.client_update_scened=function(){this._stream.reset(),this._stream.optcode=120,this._stream.writeUint16(120),this._send_func(this._stream)},a.prototype.loot_select=function(a,b){this._stream.reset(),this._stream.optcode=122,this._stream.writeUint16(122),this._stream.writeUint16(a),this._stream.writeUint16(b),this._send_func(this._stream)},a.prototype.goback_to_game_server=function(){this._stream.reset(),this._stream.optcode=123,this._stream.writeUint16(123),this._send_func(this._stream)},a.prototype.world_war_CS_player_info=function(){this._stream.reset(),this._stream.optcode=124,this._stream.writeUint16(124),this._send_func(this._stream)},a.prototype.world_war_SC_player_info=function(){this._stream.reset(),this._stream.optcode=126,this._stream.writeUint16(126),this._send_func(this._stream)},a.prototype.clientSubscription=function(a){this._stream.reset(),this._stream.optcode=127,this._stream.writeUint16(127),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.char_update_info=function(a){this._stream.reset(),this._stream.optcode=129,this._stream.writeUint16(129),a.write(this._stream),this._send_func(this._stream)},a.prototype.modify_watch=function(a,b,c){this._stream.reset(),this._stream.optcode=131,this._stream.writeUint16(131),this._stream.writeUint8(a),this._stream.writeUint32(b),this._stream.writeString(c),this._send_func(this._stream)},a.prototype.kuafu_chuansong=function(a,b,c){this._stream.reset(),this._stream.optcode=132,this._stream.writeUint16(132),this._stream.writeString(a),this._stream.writeString(b),this._stream.writeUint32(c),this._send_func(this._stream)},a.prototype.show_suit=function(a){this._stream.reset(),this._stream.optcode=133,this._stream.writeUint16(133),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.show_position=function(a){this._stream.reset(),this._stream.optcode=134,this._stream.writeUint16(134),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.gold_respawn=function(a){this._stream.reset(),this._stream.optcode=135,this._stream.writeUint16(135),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.mall_buy=function(a,b,c){this._stream.reset(),this._stream.optcode=137,this._stream.writeUint16(137),this._stream.writeUint32(a),this._stream.writeUint32(b),this._stream.writeUint32(c),this._send_func(this._stream)},a.prototype.strength=function(a){this._stream.reset(),this._stream.optcode=139,this._stream.writeUint16(139),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.forceInto=function(){this._stream.reset(),this._stream.optcode=141,this._stream.writeUint16(141),this._send_func(this._stream)},a.prototype.create_faction=function(a,b){this._stream.reset(),this._stream.optcode=142,this._stream.writeUint16(142),this._stream.writeString(a),this._stream.writeUint8(b),this._send_func(this._stream)},a.prototype.faction_upgrade=function(){this._stream.reset(),this._stream.optcode=143,this._stream.writeUint16(143),this._send_func(this._stream)},a.prototype.faction_join=function(a){this._stream.reset(),this._stream.optcode=144,this._stream.writeUint16(144),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.raise_base_spell=function(a,b){this._stream.reset(),this._stream.optcode=145,this._stream.writeUint16(145),this._stream.writeUint8(a),this._stream.writeUint16(b),this._send_func(this._stream)},a.prototype.upgrade_anger_spell=function(a){this._stream.reset(),this._stream.optcode=146,this._stream.writeUint16(146),this._stream.writeUint16(a),this._send_func(this._stream)},a.prototype.raise_mount=function(){this._stream.reset(),this._stream.optcode=147,this._stream.writeUint16(147),this._send_func(this._stream)},a.prototype.upgrade_mount=function(a){this._stream.reset(),this._stream.optcode=148,this._stream.writeUint16(148),this._stream.writeUint8(a),this._send_func(this._stream);
},a.prototype.upgrade_mount_one_step=function(a){this._stream.reset(),this._stream.optcode=149,this._stream.writeUint16(149),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.illusion_mount_active=function(a){this._stream.reset(),this._stream.optcode=150,this._stream.writeUint16(150),this._stream.writeUint16(a),this._send_func(this._stream)},a.prototype.illusion_mount=function(a){this._stream.reset(),this._stream.optcode=151,this._stream.writeUint16(151),this._stream.writeUint16(a),this._send_func(this._stream)},a.prototype.ride_mount=function(){this._stream.reset(),this._stream.optcode=152,this._stream.writeUint16(152),this._send_func(this._stream)},a.prototype.gem=function(a){this._stream.reset(),this._stream.optcode=154,this._stream.writeUint16(154),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.change_battle_mode=function(a){this._stream.reset(),this._stream.optcode=155,this._stream.writeUint16(155),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.divine_active=function(a){this._stream.reset(),this._stream.optcode=157,this._stream.writeUint16(157),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.divine_uplev=function(a){this._stream.reset(),this._stream.optcode=158,this._stream.writeUint16(158),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.divine_switch=function(a){this._stream.reset(),this._stream.optcode=159,this._stream.writeUint16(159),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.jump_start=function(a,b){this._stream.reset(),this._stream.optcode=160,this._stream.writeUint16(160),this._stream.writeUint16(a),this._stream.writeUint16(b),this._send_func(this._stream)},a.prototype.enter_vip_instance=function(a,b){this._stream.reset(),this._stream.optcode=161,this._stream.writeUint16(161),this._stream.writeUint16(a),this._stream.writeUint8(b),this._send_func(this._stream)},a.prototype.sweep_vip_instance=function(a){this._stream.reset(),this._stream.optcode=162,this._stream.writeUint16(162),this._stream.writeUint16(a),this._send_func(this._stream)},a.prototype.hang_up=function(){this._stream.reset(),this._stream.optcode=163,this._stream.writeUint16(163),this._send_func(this._stream)},a.prototype.hang_up_setting=function(a,b,c,d){this._stream.reset(),this._stream.optcode=164,this._stream.writeUint16(164),this._stream.writeUint32(a),this._stream.writeUint32(b),this._stream.writeUint32(c),this._stream.writeUint32(d),this._send_func(this._stream)},a.prototype.enter_trial_instance=function(){this._stream.reset(),this._stream.optcode=165,this._stream.writeUint16(165),this._send_func(this._stream)},a.prototype.sweep_trial_instance=function(){this._stream.reset(),this._stream.optcode=166,this._stream.writeUint16(166),this._send_func(this._stream)},a.prototype.reset_trial_instance=function(){this._stream.reset(),this._stream.optcode=167,this._stream.writeUint16(167),this._send_func(this._stream)},a.prototype.reenter_instance=function(){this._stream.reset(),this._stream.optcode=169,this._stream.writeUint16(169),this._send_func(this._stream)},a.prototype.social_add_friend=function(a){this._stream.reset(),this._stream.optcode=171,this._stream.writeUint16(171),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.social_sureadd_friend=function(a){this._stream.reset(),this._stream.optcode=172,this._stream.writeUint16(172),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.social_gift_friend=function(a,b){this._stream.reset(),this._stream.optcode=173,this._stream.writeUint16(173),this._stream.writeString(a),this._stream.writeUint16(b.length);for(var c=0;c<b.length;c++)b[c].write(this._stream);this._send_func(this._stream)},a.prototype.social_recommend_friend=function(){this._stream.reset(),this._stream.optcode=174,this._stream.writeUint16(174),this._send_func(this._stream)},a.prototype.social_revenge_enemy=function(a){this._stream.reset(),this._stream.optcode=176,this._stream.writeUint16(176),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.social_del_friend=function(a){this._stream.reset(),this._stream.optcode=177,this._stream.writeUint16(177),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.teleport_main_city=function(){this._stream.reset(),this._stream.optcode=178,this._stream.writeUint16(178),this._send_func(this._stream)},a.prototype.chat_by_channel=function(a,b){this._stream.reset(),this._stream.optcode=179,this._stream.writeUint16(179),this._stream.writeUint8(a),this._stream.writeString(b),this._send_func(this._stream)},a.prototype.social_clear_apply=function(){this._stream.reset(),this._stream.optcode=181,this._stream.writeUint16(181),this._send_func(this._stream)},a.prototype.msg_decline=function(a,b){this._stream.reset(),this._stream.optcode=182,this._stream.writeUint16(182),this._stream.writeUint32(a),this._stream.writeUint32(b),this._send_func(this._stream)},a.prototype.faction_getlist=function(a,b,c){this._stream.reset(),this._stream.optcode=184,this._stream.writeUint16(184),this._stream.writeUint8(a),this._stream.writeUint8(b),this._stream.writeUint8(c),this._send_func(this._stream)},a.prototype.faction_manager=function(a,b,c,d,e){this._stream.reset(),this._stream.optcode=185,this._stream.writeUint16(185),this._stream.writeUint8(a),this._stream.writeUint16(b),this._stream.writeUint16(c),this._stream.writeString(d),this._stream.writeString(e),this._send_func(this._stream)},a.prototype.faction_member_operate=function(a,b,c,d,e){this._stream.reset(),this._stream.optcode=186,this._stream.writeUint16(186),this._stream.writeUint8(a),this._stream.writeUint16(b),this._stream.writeUint16(c),this._stream.writeString(d),this._stream.writeString(e),this._send_func(this._stream)},a.prototype.faction_fast_join=function(){this._stream.reset(),this._stream.optcode=187,this._stream.writeUint16(187),this._send_func(this._stream)},a.prototype.social_add_friend_byname=function(a){this._stream.reset(),this._stream.optcode=188,this._stream.writeUint16(188),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.read_mail=function(a){this._stream.reset(),this._stream.optcode=190,this._stream.writeUint16(190),this._stream.writeUint16(a),this._send_func(this._stream)},a.prototype.pick_mail=function(a){this._stream.reset(),this._stream.optcode=191,this._stream.writeUint16(191),this._stream.writeUint16(a),this._send_func(this._stream)},a.prototype.remove_mail=function(a){this._stream.reset(),this._stream.optcode=192,this._stream.writeUint16(192),this._stream.writeUint16(a),this._send_func(this._stream)},a.prototype.pick_mail_one_step=function(){this._stream.reset(),this._stream.optcode=193,this._stream.writeUint16(193),this._send_func(this._stream)},a.prototype.remove_mail_one_step=function(){this._stream.reset(),this._stream.optcode=194,this._stream.writeUint16(194),this._send_func(this._stream)},a.prototype.block_chat=function(a){this._stream.reset(),this._stream.optcode=195,this._stream.writeUint16(195),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.cancel_block_chat=function(a){this._stream.reset(),this._stream.optcode=196,this._stream.writeUint16(196),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.use_broadcast_gameobject=function(a){this._stream.reset(),this._stream.optcode=200,this._stream.writeUint16(200),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.world_boss_enroll=function(){this._stream.reset(),this._stream.optcode=201,this._stream.writeUint16(201),this._send_func(this._stream)},a.prototype.world_boss_fight=function(){this._stream.reset(),this._stream.optcode=202,this._stream.writeUint16(202),this._send_func(this._stream)},a.prototype.change_line=function(a){this._stream.reset(),this._stream.optcode=203,this._stream.writeUint16(203),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.roll_world_boss_treasure=function(){this._stream.reset(),this._stream.optcode=204,this._stream.writeUint16(204),this._send_func(this._stream)},a.prototype.rank_add_like=function(a,b){this._stream.reset(),this._stream.optcode=207,this._stream.writeUint16(207),this._stream.writeUint8(a),this._stream.writeString(b),this._send_func(this._stream)},a.prototype.res_instance_enter=function(a){this._stream.reset(),this._stream.optcode=210,this._stream.writeUint16(210),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.res_instance_sweep=function(a){this._stream.reset(),this._stream.optcode=211,this._stream.writeUint16(211),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.show_map_line=function(){this._stream.reset(),this._stream.optcode=212,this._stream.writeUint16(212),this._send_func(this._stream)},a.prototype.teleport_map=function(a,b){this._stream.reset(),this._stream.optcode=216,this._stream.writeUint16(216),this._stream.writeUint32(a),this._stream.writeUint32(b),this._send_func(this._stream)},a.prototype.teleport_field_boss=function(a,b){this._stream.reset(),this._stream.optcode=217,this._stream.writeUint16(217),this._stream.writeUint32(a),this._stream.writeUint32(b),this._send_func(this._stream)},a.prototype.get_activity_reward=function(a,b){this._stream.reset(),this._stream.optcode=218,this._stream.writeUint16(218),this._stream.writeUint8(a),this._stream.writeUint8(b),this._send_func(this._stream)},a.prototype.get_achieve_reward=function(a){this._stream.reset(),this._stream.optcode=220,this._stream.writeUint16(220),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.get_achieve_all_reward=function(){this._stream.reset(),this._stream.optcode=221,this._stream.writeUint16(221),this._send_func(this._stream)},a.prototype.set_title=function(a){this._stream.reset(),this._stream.optcode=222,this._stream.writeUint16(222),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.init_title=function(a){this._stream.reset(),this._stream.optcode=223,this._stream.writeUint16(223),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.welfare_shouchong_reward=function(){this._stream.reset(),this._stream.optcode=224,this._stream.writeUint16(224),this._send_func(this._stream)},a.prototype.welfare_checkin=function(){this._stream.reset(),this._stream.optcode=225,this._stream.writeUint16(225),this._send_func(this._stream)},a.prototype.welfare_checkin_all=function(a){this._stream.reset(),this._stream.optcode=226,this._stream.writeUint16(226),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.welfare_checkin_getback=function(a){this._stream.reset(),this._stream.optcode=227,this._stream.writeUint16(227),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.welfare_level=function(a){this._stream.reset(),this._stream.optcode=228,this._stream.writeUint16(228),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.welfare_active_getback=function(a,b,c){this._stream.reset(),this._stream.optcode=229,this._stream.writeUint16(229),this._stream.writeUint8(a),this._stream.writeUint8(b),this._stream.writeUint16(c),this._send_func(this._stream)},a.prototype.pick_quest_reward=function(a){this._stream.reset(),this._stream.optcode=230,this._stream.writeUint16(230),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.talk_with_npc=function(a,b){this._stream.reset(),this._stream.optcode=231,this._stream.writeUint16(231),this._stream.writeUint16(a),this._stream.writeUint16(b),this._send_func(this._stream)},a.prototype.use_virtual_item=function(a){this._stream.reset(),this._stream.optcode=232,this._stream.writeUint16(232),this._stream.writeUint16(a),this._send_func(this._stream)},a.prototype.pick_quest_chapter_reward=function(a){this._stream.reset(),this._stream.optcode=233,this._stream.writeUint16(233),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.kuafu_3v3_match=function(){this._stream.reset(),this._stream.optcode=234,this._stream.writeUint16(234),this._send_func(this._stream)},a.prototype.kuafu_3v3_buytimes=function(a){this._stream.reset(),this._stream.optcode=236,this._stream.writeUint16(236),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.kuafu_3v3_dayreward=function(a){this._stream.reset(),this._stream.optcode=237,this._stream.writeUint16(237),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.kuafu_3v3_getranlist=function(){this._stream.reset(),this._stream.optcode=238,this._stream.writeUint16(238),this._send_func(this._stream)},a.prototype.welfare_getalllist_getback=function(a){this._stream.reset(),this._stream.optcode=240,this._stream.writeUint16(240),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.welfare_getall_getback=function(a){this._stream.reset(),this._stream.optcode=242,this._stream.writeUint16(242),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.kuafu_3v3_getmyrank=function(){this._stream.reset(),this._stream.optcode=248,this._stream.writeUint16(248),this._send_func(this._stream)},a.prototype.kuafu_3v3_cancel_match=function(a){this._stream.reset(),this._stream.optcode=252,this._stream.writeUint16(252),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.kuafu_3v3_match_oper=function(a){this._stream.reset(),this._stream.optcode=253,this._stream.writeUint16(253),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.kuafu_xianfu_match=function(a){this._stream.reset(),this._stream.optcode=255,this._stream.writeUint16(255),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.buy_xianfu_item=function(a,b,c){this._stream.reset(),this._stream.optcode=258,this._stream.writeUint16(258),this._stream.writeUint8(a),this._stream.writeUint8(b),this._stream.writeUint16(c),this._send_func(this._stream)},a.prototype.xianfu_random_respawn=function(){this._stream.reset(),this._stream.optcode=259,this._stream.writeUint16(259),this._send_func(this._stream)},a.prototype.doujiantai_fight=function(a){this._stream.reset(),this._stream.optcode=260,this._stream.writeUint16(260),this._stream.writeUint16(a),this._send_func(this._stream)},a.prototype.doujiantai_buytime=function(a){this._stream.reset(),this._stream.optcode=261,this._stream.writeUint16(261),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.doujiantai_clearcd=function(){this._stream.reset(),this._stream.optcode=262,this._stream.writeUint16(262),this._send_func(this._stream)},a.prototype.doujiantai_first_reward=function(a){this._stream.reset(),this._stream.optcode=263,this._stream.writeUint16(263),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.doujiantai_get_enemys_info=function(){this._stream.reset(),this._stream.optcode=265,this._stream.writeUint16(265),this._send_func(this._stream)},a.prototype.doujiantai_get_rank=function(a,b){this._stream.reset(),this._stream.optcode=266,this._stream.writeUint16(266),this._stream.writeUint16(a),this._stream.writeUint16(b),this._send_func(this._stream)},a.prototype.doujiantai_refresh_enemys=function(){this._stream.reset(),this._stream.optcode=270,this._stream.writeUint16(270),this._send_func(this._stream)},a.prototype.doujiantai_top3=function(){this._stream.reset(),this._stream.optcode=271,this._stream.writeUint16(271),this._send_func(this._stream)},a.prototype.use_jump_point=function(a){this._stream.reset(),this._stream.optcode=272,this._stream.writeUint16(272),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.bag_item_sell=function(a,b){this._stream.reset(),this._stream.optcode=273,this._stream.writeUint16(273),this._stream.writeString(a),this._stream.writeUint32(b),this._send_func(this._stream)},a.prototype.bag_item_sort=function(){this._stream.reset(),this._stream.optcode=274,this._stream.writeUint16(274),this._send_func(this._stream)},a.prototype.submit_quest_daily2=function(){this._stream.reset(),this._stream.optcode=280,this._stream.writeUint16(280),this._send_func(this._stream)},a.prototype.pick_daily2_quest_reward=function(a){this._stream.reset(),this._stream.optcode=284,this._stream.writeUint16(284),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.finish_now_guide=function(){this._stream.reset(),this._stream.optcode=285,this._stream.writeUint16(285),this._send_func(this._stream)},a.prototype.get_cultivation_info=function(){this._stream.reset(),this._stream.optcode=286,this._stream.writeUint16(286),this._send_func(this._stream)},a.prototype.get_cultivation_rivals_info=function(){this._stream.reset(),this._stream.optcode=288,this._stream.writeUint16(288),this._send_func(this._stream)},a.prototype.get_cultivation_reward=function(){this._stream.reset(),this._stream.optcode=290,this._stream.writeUint16(290),this._send_func(this._stream)},a.prototype.refresh_cultivation_rivals=function(){this._stream.reset(),this._stream.optcode=291,this._stream.writeUint16(291),this._send_func(this._stream)},a.prototype.plunder_cultivation_rival=function(a){this._stream.reset(),this._stream.optcode=292,this._stream.writeUint16(292),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.revenge_cultivation_rival=function(a){this._stream.reset(),this._stream.optcode=293,this._stream.writeUint16(293),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.buy_cultivation_left_plunder_count=function(a){this._stream.reset(),this._stream.optcode=294,this._stream.writeUint16(294),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.get_login_activity_reward=function(a){this._stream.reset(),this._stream.optcode=296,this._stream.writeUint16(296),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.finish_optional_guide_step=function(a,b){this._stream.reset(),this._stream.optcode=301,this._stream.writeUint16(301),this._stream.writeUint32(a),this._stream.writeUint8(b),this._send_func(this._stream)},a.prototype.execute_quest_cmd_after_accepted=function(a){this._stream.reset(),this._stream.optcode=302,this._stream.writeUint16(302),this._stream.writeUint16(a),this._send_func(this._stream)},a.prototype.back_to_famity=function(){this._stream.reset(),this._stream.optcode=320,this._stream.writeUint16(320),this._send_func(this._stream)},a.prototype.challange_boss=function(){this._stream.reset(),this._stream.optcode=322,this._stream.writeUint16(322),this._send_func(this._stream)},a.prototype.pick_offline_reward=function(){this._stream.reset(),this._stream.optcode=325,this._stream.writeUint16(325),this._send_func(this._stream)},a.prototype.smelting_equip=function(a){this._stream.reset(),this._stream.optcode=327,this._stream.writeUint16(327),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.storehouse_hand_in=function(a){this._stream.reset(),this._stream.optcode=328,this._stream.writeUint16(328),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.storehouse_exchange=function(a){this._stream.reset(),this._stream.optcode=329,this._stream.writeUint16(329),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.storehouse_destroy=function(a){this._stream.reset(),this._stream.optcode=330,this._stream.writeUint16(330),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.send_faction_gift=function(a,b,c){this._stream.reset(),this._stream.optcode=331,this._stream.writeUint16(331),this._stream.writeUint16(a.length);for(var d=0;d<a.length;d++)a[d].write(this._stream);this._stream.writeString(b),this._stream.writeUint32(c),this._send_func(this._stream)},a.prototype.get_faction_gift_exreward=function(a){this._stream.reset(),this._stream.optcode=332,this._stream.writeUint16(332),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.get_all_faction_gift_exreward=function(){this._stream.reset(),this._stream.optcode=333,this._stream.writeUint16(333),this._send_func(this._stream)},a.prototype.get_faction_gift_rank_page=function(a){this._stream.reset(),this._stream.optcode=338,this._stream.writeUint16(338),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.divine_forge=function(a,b){this._stream.reset(),this._stream.optcode=342,this._stream.writeUint16(342),this._stream.writeUint32(a),this._stream.writeUint32(b),this._send_func(this._stream)},a.prototype.divine_advance=function(a){this._stream.reset(),this._stream.optcode=343,this._stream.writeUint16(343),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.divine_spirit=function(a,b,c){this._stream.reset(),this._stream.optcode=344,this._stream.writeUint16(344),this._stream.writeUint32(a),this._stream.writeUint32(b),this._stream.writeUint32(c),this._send_func(this._stream)},a.prototype.query_mass_boss_info=function(a){this._stream.reset(),this._stream.optcode=352,this._stream.writeUint16(352),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.query_mass_boss_rank=function(a){this._stream.reset(),this._stream.optcode=354,this._stream.writeUint16(354),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.try_mass_boss=function(a){this._stream.reset(),this._stream.optcode=356,this._stream.writeUint16(356),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.buy_mass_boss_times=function(a){this._stream.reset(),this._stream.optcode=357,this._stream.writeUint16(357),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.group_instance_match=function(a){this._stream.reset(),this._stream.optcode=358,this._stream.writeUint16(358),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.buy_group_instance_times=function(a){this._stream.reset(),this._stream.optcode=359,this._stream.writeUint16(359),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.talisman_active=function(a){this._stream.reset(),this._stream.optcode=360,this._stream.writeUint16(360),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.talisman_lvup=function(a){this._stream.reset(),this._stream.optcode=361,this._stream.writeUint16(361),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.wings_active=function(){this._stream.reset(),this._stream.optcode=362,this._stream.writeUint16(362),this._send_func(this._stream)},a.prototype.wings_bless=function(){this._stream.reset(),this._stream.optcode=363,this._stream.writeUint16(363),this._send_func(this._stream)},a.prototype.wings_rankup=function(){this._stream.reset(),this._stream.optcode=364,this._stream.writeUint16(364),this._send_func(this._stream)},a.prototype.wings_strength=function(){this._stream.reset(),this._stream.optcode=365,this._stream.writeUint16(365),this._send_func(this._stream)},a.prototype.meridian_practise=function(){this._stream.reset(),this._stream.optcode=366,this._stream.writeUint16(366),this._send_func(this._stream)},a.prototype.add_meridian_exp=function(a){this._stream.reset(),this._stream.optcode=367,this._stream.writeUint16(367),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.raise_mount_level_base=function(){this._stream.reset(),this._stream.optcode=368,this._stream.writeUint16(368),this._send_func(this._stream)},a.prototype.active_mount=function(){this._stream.reset(),this._stream.optcode=369,this._stream.writeUint16(369),this._send_func(this._stream)},a.prototype.match_single_pvp=function(){this._stream.reset(),this._stream.optcode=376,this._stream.writeUint16(376),this._send_func(this._stream)},a.prototype.buy_match_single_pvp_times=function(a){this._stream.reset(),this._stream.optcode=377,this._stream.writeUint16(377),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.pick_match_single_pvp_extra_reward=function(a){this._stream.reset(),this._stream.optcode=378,this._stream.writeUint16(378),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.equipdevelop_operate=function(a,b,c,d,e){this._stream.reset(),this._stream.optcode=380,this._stream.writeUint16(380),this._stream.writeUint8(a),this._stream.writeUint16(b),this._stream.writeUint16(c),this._stream.writeString(d),this._stream.writeString(e),this._send_func(this._stream)},a.prototype.active_appearance=function(a){this._stream.reset(),this._stream.optcode=381,this._stream.writeUint16(381),this._stream.writeUint16(a),this._send_func(this._stream)},a.prototype.equip_appearance=function(a){this._stream.reset(),this._stream.optcode=382,this._stream.writeUint16(382),this._stream.writeUint16(a),this._send_func(this._stream)},a.prototype.cancel_equip_appearance=function(a){this._stream.reset(),this._stream.optcode=383,this._stream.writeUint16(383),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.rename=function(a){this._stream.reset(),this._stream.optcode=384,this._stream.writeUint16(384),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.unlock_title=function(a){this._stream.reset(),this._stream.optcode=385,this._stream.writeUint16(385),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.social_buy_revenge_times=function(a){this._stream.reset(),this._stream.optcode=386,this._stream.writeUint16(386),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.enter_risk_instance=function(){this._stream.reset(),this._stream.optcode=387,this._stream.writeUint16(387),this._send_func(this._stream)},a.prototype.social_remove_enemy=function(a){this._stream.reset(),this._stream.optcode=388,this._stream.writeUint16(388),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.get_player_overview=function(a){this._stream.reset(),this._stream.optcode=389,this._stream.writeUint16(389),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.send_faction_invite=function(a){this._stream.reset(),this._stream.optcode=391,this._stream.writeUint16(391),this._stream.writeString(a),this._send_func(this._stream)},a.prototype.buy_vipgift=function(a){this._stream.reset(),this._stream.optcode=393,this._stream.writeUint16(393),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.activity_opt_buy_dailygift=function(a,b){this._stream.reset(),this._stream.optcode=394,this._stream.writeUint16(394),this._stream.writeUint32(a),this._stream.writeUint32(b),this._send_func(this._stream)},a.prototype.draw_lottery=function(a,b){this._stream.reset(),this._stream.optcode=395,this._stream.writeUint16(395),this._stream.writeUint32(a),this._stream.writeUint8(b),this._send_func(this._stream)},a.prototype.activity_opt_get_rank_process_reward=function(a,b){this._stream.reset(),this._stream.optcode=396,this._stream.writeUint16(396),this._stream.writeUint32(a),this._stream.writeUint32(b),this._send_func(this._stream)},a.prototype.activity_opt_get_rank_list=function(a){this._stream.reset(),this._stream.optcode=397,this._stream.writeUint16(397),this._stream.writeUint32(a),this._send_func(this._stream)},a.prototype.activity_opt_buy_limitgift=function(a,b){this._stream.reset(),this._stream.optcode=399,this._stream.writeUint16(399),this._stream.writeUint32(a),this._stream.writeUint32(b),this._send_func(this._stream)},a.prototype.welfare_get_recharge_reward=function(a){this._stream.reset(),this._stream.optcode=400,this._stream.writeUint16(400),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.welfare_get_consume_reward=function(a){this._stream.reset(),this._stream.optcode=401,this._stream.writeUint16(401),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.welfare_get_sevenday_reward=function(a){this._stream.reset(),this._stream.optcode=402,this._stream.writeUint16(402),this._stream.writeUint8(a),this._send_func(this._stream)},a.prototype.risk_get_rank=function(){this._stream.reset(),this._stream.optcode=404,this._stream.writeUint16(404),this._send_func(this._stream)},a.MSG_NULL_ACTION=0,a.MSG_PING_PONG=1,a.CMSG_FORCED_INTO=2,a.CMSG_GET_SESSION=3,a.MSG_ROUTE_TRACE=4,a.CMSG_WRITE_CLIENT_LOG=5,a.SMSG_OPERATION_FAILED=6,a.MSG_SYNC_MSTIME=7,a.SMSG_UD_OBJECT=8,a.CMSG_UD_CONTROL=9,a.SMSG_UD_CONTROL_RESULT=10,a.SMSG_GRID_UD_OBJECT=11,a.SMSG_GRID_UD_OBJECT_2=12,a.SMSG_LOGIN_QUEUE_INDEX=13,a.SMSG_KICKING_TYPE=14,a.CMSG_GET_CHARS_LIST=15,a.SMSG_CHARS_LIST=16,a.CMSG_CHECK_NAME=17,a.SMSG_CHECK_NAME_RESULT=18,a.CMSG_CHAR_CREATE=19,a.SMSG_CHAR_CREATE_RESULT=20,a.CMSG_DELETE_CHAR=21,a.SMSG_DELETE_CHAR_RESULT=22,a.CMSG_PLAYER_LOGIN=23,a.CMSG_PLAYER_LOGOUT=24,a.CMSG_REGULARISE_ACCOUNT=25,a.CMSG_CHAR_REMOTESTORE=26,a.CMSG_CHAR_REMOTESTORE_STR=27,a.CMSG_TELEPORT=28,a.MSG_MOVE_STOP=29,a.MSG_UNIT_MOVE=30,a.CMSG_USE_GAMEOBJECT=31,a.CMSG_BAG_EXCHANGE_POS=32,a.CMSG_BAG_DESTROY=33,a.CMSG_BAG_ITEM_SPLIT=34,a.CMSG_BAG_ITEM_USER=35,a.SMSG_BAG_ITEM_COOLDOWN=36,a.SMSG_GRID_UNIT_MOVE=37,a.SMSG_GRID_UNIT_MOVE_2=38,a.CMSG_EXCHANGE_ITEM=39,a.CMSG_BAG_EXTENSION=40,a.CMSG_NPC_GET_GOODS_LIST=41,a.SMSG_NPC_GOODS_LIST=42,a.CMSG_STORE_BUY=43,a.CMSG_NPC_SELL=44,a.CMSG_NPC_REPURCHASE=45,a.CMSG_AVATAR_FASHION_ENABLE=46,a.CMSG_QUESTHELP_TALK_OPTION=47,a.CMSG_TAXI_HELLO=48,a.SMSG_TAXI_STATIONS_LIST=49,a.CMSG_TAXI_SELECT_STATION=50,a.CMSG_GOSSIP_SELECT_OPTION=51,a.CMSG_GOSSIP_HELLO=52,a.SMSG_GOSSIP_MESSAGE=53,a.CMSG_QUESTGIVER_STATUS_QUERY=54,a.SMSG_QUESTGIVER_STATUS=55,a.MSG_QUERY_QUEST_STATUS=56,a.CMSG_QUESTHELP_GET_CANACCEPT_LIST=57,a.SMSG_QUESTHELP_CANACCEPT_LIST=58,a.SMSG_QUESTUPDATE_FAILD=59,a.SMSG_QUESTUPDATE_COMPLETE=60,a.CMSG_QUESTLOG_REMOVE_QUEST=61,a.CMSG_QUESTGIVER_COMPLETE_QUEST=62,a.SMSG_QUESTHELP_NEXT=63,a.CMSG_QUESTHELP_COMPLETE=64,a.SMSG_QUESTUPDATE_ACCEPT=65,a.CMSG_QUESTHELP_UPDATE_STATUS=66,a.SMSG_QUESTGETTER_COMPLETE=67,a.CMSG_QUESTGIVER_ACCEPT_QUEST=68,a.CMSG_QUESTUPDATE_USE_ITEM=69,a.CMSG_QUESTHELP_QUERY_BOOK=70,a.SMSG_QUESTHELP_BOOK_QUEST=71,a.SMSG_USE_GAMEOBJECT_ACTION=72,a.CMSG_SET_ATTACK_MODE=73,a.MSG_SELECT_TARGET=74,a.SMSG_COMBAT_STATE_UPDATE=75,a.SMSG_EXP_UPDATE=76,a.MSG_SPELL_START=77,a.MSG_SPELL_STOP=78,a.MSG_JUMP=79,a.CMSG_RESURRECTION=80,a.MSG_TRADE_REQUEST=81,a.MSG_TRADE_REPLY=82,a.SMSG_TRADE_START=83,a.MSG_TRADE_DECIDE_ITEMS=84,a.SMSG_TRADE_FINISH=85,a.MSG_TRADE_CANCEL=86,a.MSG_TRADE_READY=87,a.SMSG_CHAT_UNIT_TALK=88,a.CMSG_CHAT_NEAR=89,a.CMSG_CHAT_WHISPER=90,a.MSG_CHAT_FACTION=91,a.MSG_CHAT_WORLD=92,a.MSG_CHAT_HORN=93,a.MSG_CHAT_NOTICE=94,a.CMSG_QUERY_PLAYER_INFO=95,a.SMSG_QUERY_RESULT_UPDATE_OBJECT=96,a.CMSG_RECEIVE_GIFT_PACKS=97,a.SMSG_MAP_UPDATE_OBJECT=98,a.SMSG_FIGHTING_INFO_UPDATE_OBJECT=99,a.SMSG_FIGHTING_INFO_UPDATE_OBJECT_2=100,a.CMSG_INSTANCE_ENTER=101,a.CMSG_INSTANCE_NEXT_STATE=102,a.CMSG_INSTANCE_EXIT=103,a.CMSG_LIMIT_ACTIVITY_RECEIVE=104,a.SMSG_KILL_MAN=105,a.SMSG_PLAYER_UPGRADE=106,a.CMSG_WAREHOUSE_SAVE_MONEY=107,a.CMSG_WAREHOUSE_TAKE_MONEY=108,a.CMSG_USE_GOLD_OPT=109,a.CMSG_USE_SILVER_OPT=110,a.SMSG_GM_RIGHTFLOAT=111,a.SMSG_DEL_GM_RIGHTFLOAT=112,a.MSG_SYNC_MSTIME_APP=113,a.CMSG_OPEN_WINDOW=114,a.CMSG_PLAYER_GAG=115,a.CMSG_PLAYER_KICKING=116,a.SMSG_MERGE_SERVER_MSG=117,a.CMSG_RANK_LIST_QUERY=118,a.SMSG_RANK_LIST_QUERY_RESULT=119,a.CMSG_CLIENT_UPDATE_SCENED=120,a.SMSG_NUM_LUA=121,a.CMSG_LOOT_SELECT=122,a.CMSG_GOBACK_TO_GAME_SERVER=123,a.CMSG_WORLD_WAR_CS_PLAYER_INFO=124,a.SMSG_JOIN_OR_LEAVE_SERVER=125,a.MSG_WORLD_WAR_SC_PLAYER_INFO=126,a.MSG_CLIENTSUBSCRIPTION=127,a.SMSG_LUA_SCRIPT=128,a.CMSG_CHAR_UPDATE_INFO=129,a.SMSG_NOTICE_WATCHER_MAP_INFO=130,a.CMSG_MODIFY_WATCH=131,a.CMSG_KUAFU_CHUANSONG=132,a.CMSG_SHOW_SUIT=133,a.CMSG_SHOW_POSITION=134,a.CMSG_GOLD_RESPAWN=135,a.SMSG_FIELD_DEATH_COOLDOWN=136,a.CMSG_MALL_BUY=137,a.CMSG_STRENGTH=139,a.SMSG_STRENGTH_SUCCESS=140,a.CMSG_FORCEINTO=141,a.CMSG_CREATE_FACTION=142,a.CMSG_FACTION_UPGRADE=143,a.CMSG_FACTION_JOIN=144,a.CMSG_RAISE_BASE_SPELL=145,a.CMSG_UPGRADE_ANGER_SPELL=146,a.CMSG_RAISE_MOUNT=147,a.CMSG_UPGRADE_MOUNT=148,a.CMSG_UPGRADE_MOUNT_ONE_STEP=149,a.CMSG_ILLUSION_MOUNT_ACTIVE=150,a.CMSG_ILLUSION_MOUNT=151,a.CMSG_RIDE_MOUNT=152,a.SMSG_GRID_UNIT_JUMP=153,a.CMSG_GEM=154,a.CMSG_CHANGE_BATTLE_MODE=155,a.SMSG_PEACE_MODE_CD=156,a.CMSG_DIVINE_ACTIVE=157,a.CMSG_DIVINE_UPLEV=158,a.CMSG_DIVINE_SWITCH=159,a.CMSG_JUMP_START=160,a.CMSG_ENTER_VIP_INSTANCE=161,a.CMSG_SWEEP_VIP_INSTANCE=162,
a.CMSG_HANG_UP=163,a.CMSG_HANG_UP_SETTING=164,a.CMSG_ENTER_TRIAL_INSTANCE=165,a.CMSG_SWEEP_TRIAL_INSTANCE=166,a.CMSG_RESET_TRIAL_INSTANCE=167,a.SMSG_SWEEP_INSTANCE_REWARD=168,a.CMSG_REENTER_INSTANCE=169,a.SMSG_MERRY_GO_ROUND=170,a.CMSG_SOCIAL_ADD_FRIEND=171,a.CMSG_SOCIAL_SUREADD_FRIEND=172,a.CMSG_SOCIAL_GIFT_FRIEND=173,a.CMSG_SOCIAL_RECOMMEND_FRIEND=174,a.SMSG_SOCIAL_GET_RECOMMEND_FRIEND=175,a.CMSG_SOCIAL_REVENGE_ENEMY=176,a.CMSG_SOCIAL_DEL_FRIEND=177,a.CMSG_TELEPORT_MAIN_CITY=178,a.CMSG_CHAT_BY_CHANNEL=179,a.SMSG_SEND_CHAT=180,a.CMSG_SOCIAL_CLEAR_APPLY=181,a.CMSG_MSG_DECLINE=182,a.SMSG_FACTION_GET_LIST_RESULT=183,a.CMSG_FACTION_GETLIST=184,a.CMSG_FACTION_MANAGER=185,a.CMSG_FACTION_MEMBER_OPERATE=186,a.CMSG_FACTION_FAST_JOIN=187,a.CMSG_SOCIAL_ADD_FRIEND_BYNAME=188,a.CMSG_READ_MAIL=190,a.CMSG_PICK_MAIL=191,a.CMSG_REMOVE_MAIL=192,a.CMSG_PICK_MAIL_ONE_STEP=193,a.CMSG_REMOVE_MAIL_ONE_STEP=194,a.CMSG_BLOCK_CHAT=195,a.CMSG_CANCEL_BLOCK_CHAT=196,a.CMSG_USE_BROADCAST_GAMEOBJECT=200,a.CMSG_WORLD_BOSS_ENROLL=201,a.CMSG_WORLD_BOSS_FIGHT=202,a.CMSG_CHANGE_LINE=203,a.CMSG_ROLL_WORLD_BOSS_TREASURE=204,a.SMSG_ROLL_RESULT=205,a.SMSG_BOSS_RANK=206,a.CMSG_RANK_ADD_LIKE=207,a.SMSG_RANK_ADD_LIKE_RESULT=208,a.CMSG_RES_INSTANCE_ENTER=210,a.CMSG_RES_INSTANCE_SWEEP=211,a.CMSG_SHOW_MAP_LINE=212,a.SMSG_SEND_MAP_LINE=213,a.SMSG_ITEM_NOTICE=214,a.CMSG_TELEPORT_MAP=216,a.CMSG_TELEPORT_FIELD_BOSS=217,a.CMSG_GET_ACTIVITY_REWARD=218,a.CMSG_GET_ACHIEVE_REWARD=220,a.CMSG_GET_ACHIEVE_ALL_REWARD=221,a.CMSG_SET_TITLE=222,a.CMSG_INIT_TITLE=223,a.CMSG_WELFARE_SHOUCHONG_REWARD=224,a.CMSG_WELFARE_CHECKIN=225,a.CMSG_WELFARE_CHECKIN_ALL=226,a.CMSG_WELFARE_CHECKIN_GETBACK=227,a.CMSG_WELFARE_LEVEL=228,a.CMSG_WELFARE_ACTIVE_GETBACK=229,a.CMSG_PICK_QUEST_REWARD=230,a.CMSG_TALK_WITH_NPC=231,a.CMSG_USE_VIRTUAL_ITEM=232,a.CMSG_PICK_QUEST_CHAPTER_REWARD=233,a.CMSG_KUAFU_3V3_MATCH=234,a.SMSG_KUAFU_MATCH_START=235,a.CMSG_KUAFU_3V3_BUYTIMES=236,a.CMSG_KUAFU_3V3_DAYREWARD=237,a.CMSG_KUAFU_3V3_GETRANLIST=238,a.SMSG_KUAFU_3V3_RANLIST=239,a.CMSG_WELFARE_GETALLLIST_GETBACK=240,a.SMSG_WELFARE_REWARDLIST_GETBACK=241,a.CMSG_WELFARE_GETALL_GETBACK=242,a.CMSG_KUAFU_3V3_GETMYRANK=248,a.SMSG_KUAFU_3V3_MYRANK=249,a.SMSG_KUAFU_3V3_KILL_DETAIL=250,a.SMSG_KUAFU_3V3_WAIT_INFO=251,a.MSG_KUAFU_3V3_CANCEL_MATCH=252,a.CMSG_KUAFU_3V3_MATCH_OPER=253,a.SMSG_KUAFU_3V3_DECLINE_MATCH=254,a.CMSG_KUAFU_XIANFU_MATCH=255,a.SMSG_KUAFU_MATCH_WAIT=256,a.SMSG_KUAFU_XIANFU_MINIMAP_INFO=257,a.CMSG_BUY_XIANFU_ITEM=258,a.CMSG_XIANFU_RANDOM_RESPAWN=259,a.CMSG_DOUJIANTAI_FIGHT=260,a.CMSG_DOUJIANTAI_BUYTIME=261,a.CMSG_DOUJIANTAI_CLEARCD=262,a.CMSG_DOUJIANTAI_FIRST_REWARD=263,a.MSG_DOUJIANTAI_GET_ENEMYS_INFO=265,a.CMSG_DOUJIANTAI_GET_RANK=266,a.CMSG_DOUJIANTAI_REFRESH_ENEMYS=270,a.MSG_DOUJIANTAI_TOP3=271,a.MSG_USE_JUMP_POINT=272,a.CMSG_BAG_ITEM_SELL=273,a.CMSG_BAG_ITEM_SORT=274,a.CMSG_SUBMIT_QUEST_DAILY2=280,a.SMSG_ATTRIBUTE_CHANGED=281,a.SMSG_BAG_FIND_EQUIP_BETTER=282,a.SMSG_MODULE_ACTIVE=283,a.CMSG_PICK_DAILY2_QUEST_REWARD=284,a.CMSG_FINISH_NOW_GUIDE=285,a.CMSG_GET_CULTIVATION_INFO=286,a.SMSG_UPDATE_CULTIVATION_INFO=287,a.CMSG_GET_CULTIVATION_RIVALS_INFO=288,a.SMSG_UPDATE_CULTIVATION_RIVALS_INFO_LIST=289,a.CMSG_GET_CULTIVATION_REWARD=290,a.CMSG_REFRESH_CULTIVATION_RIVALS=291,a.CMSG_PLUNDER_CULTIVATION_RIVAL=292,a.CMSG_REVENGE_CULTIVATION_RIVAL=293,a.CMSG_BUY_CULTIVATION_LEFT_PLUNDER_COUNT=294,a.SMSG_SHOW_CULTIVATION_RESULT_LIST=295,a.CMSG_GET_LOGIN_ACTIVITY_REWARD=296,a.SMSG_CAST_SPELL_START=300,a.CMSG_FINISH_OPTIONAL_GUIDE_STEP=301,a.CMSG_EXECUTE_QUEST_CMD_AFTER_ACCEPTED=302,a.SMSG_SHOW_UNIT_ATTRIBUTE=310,a.CMSG_BACK_TO_FAMITY=320,a.SMSG_FACTION_BOSS_SEND_RESULT=321,a.CMSG_CHALLANGE_BOSS=322,a.CMSG_PICK_OFFLINE_REWARD=325,a.SMSG_OFFLINE_REWARD_RESULT=326,a.CMSG_SMELTING_EQUIP=327,a.CMSG_STOREHOUSE_HAND_IN=328,a.CMSG_STOREHOUSE_EXCHANGE=329,a.CMSG_STOREHOUSE_DESTROY=330,a.CMSG_SEND_FACTION_GIFT=331,a.CMSG_GET_FACTION_GIFT_EXREWARD=332,a.CMSG_GET_ALL_FACTION_GIFT_EXREWARD=333,a.SMSG_SHOW_FACTION_GIFT_PAGE=334,a.SMSG_SHOW_FACTION_GIFT_INFO=335,a.SMSG_SHOW_FACTION_GIFT_UNTHANK_PAGE=336,a.SMSG_SHOW_FACTION_GIFT_HISTORY_PAGE=337,a.CMSG_GET_FACTION_GIFT_RANK_PAGE=338,a.SMSG_SHOW_FACTION_GIFT_RANK_RESULT_LIST=339,a.SMSG_SHOW_FACTION_GIFT_RANK_CHANGE=340,a.SMSG_SHOW_FACTION_GIFT_RANK_INFO=341,a.CMSG_DIVINE_FORGE=342,a.CMSG_DIVINE_ADVANCE=343,a.CMSG_DIVINE_SPIRIT=344,a.CMSG_QUERY_MASS_BOSS_INFO=352,a.SMSG_MASS_BOSS_INFO_RET=353,a.CMSG_QUERY_MASS_BOSS_RANK=354,a.SMSG_MASS_BOSS_RANK_RESULT=355,a.CMSG_TRY_MASS_BOSS=356,a.CMSG_BUY_MASS_BOSS_TIMES=357,a.CMSG_GROUP_INSTANCE_MATCH=358,a.CMSG_BUY_GROUP_INSTANCE_TIMES=359,a.CMSG_TALISMAN_ACTIVE=360,a.CMSG_TALISMAN_LVUP=361,a.CMSG_WINGS_ACTIVE=362,a.CMSG_WINGS_BLESS=363,a.CMSG_WINGS_RANKUP=364,a.CMSG_WINGS_STRENGTH=365,a.CMSG_MERIDIAN_PRACTISE=366,a.CMSG_ADD_MERIDIAN_EXP=367,a.CMSG_RAISE_MOUNT_LEVEL_BASE=368,a.CMSG_ACTIVE_MOUNT=369,a.SMSG_SHOW_FACTION_BOSSDEFENSE_DAMAGE_LIST=370,a.SMSG_SHOW_FACTION_TOWER_SWEEP_LIST=371,a.SMSG_SEND_INSTANCE_RESULT=375,a.CMSG_MATCH_SINGLE_PVP=376,a.CMSG_BUY_MATCH_SINGLE_PVP_TIMES=377,a.CMSG_PICK_MATCH_SINGLE_PVP_EXTRA_REWARD=378,a.CMSG_EQUIPDEVELOP_OPERATE=380,a.CMSG_ACTIVE_APPEARANCE=381,a.CMSG_EQUIP_APPEARANCE=382,a.CMSG_CANCEL_EQUIP_APPEARANCE=383,a.CMSG_RENAME=384,a.CMSG_UNLOCK_TITLE=385,a.CMSG_SOCIAL_BUY_REVENGE_TIMES=386,a.CMSG_ENTER_RISK_INSTANCE=387,a.CMSG_SOCIAL_REMOVE_ENEMY=388,a.CMSG_GET_PLAYER_OVERVIEW=389,a.SMSG_SHOW_PLAYER_OVERVIEW=390,a.CMSG_SEND_FACTION_INVITE=391,a.SMSG_SHOW_FACTION_INVITE=392,a.CMSG_BUY_VIPGIFT=393,a.CMSG_ACTIVITY_OPT_BUY_DAILYGIFT=394,a.CMSG_DRAW_LOTTERY=395,a.CMSG_ACTIVITY_OPT_GET_RANK_PROCESS_REWARD=396,a.CMSG_ACTIVITY_OPT_GET_RANK_LIST=397,a.SMSG_ACTIVITY_OPT_SHOW_RANK_LIST=398,a.CMSG_ACTIVITY_OPT_BUY_LIMITGIFT=399,a.CMSG_WELFARE_GET_RECHARGE_REWARD=400,a.CMSG_WELFARE_GET_CONSUME_REWARD=401,a.CMSG_WELFARE_GET_SEVENDAY_REWARD=402,a.SMSG_SEND_SERVER_OPEN_TIME=403,a.CMSG_RISK_GET_RANK=404,a.SMSG_RISK_GET_RANK_RESULT=405,a}(),point=function(){function a(){}return a.prototype.read=function(a){this.pos_x=a.readFloat(),this.pos_y=a.readFloat()},a.prototype.write=function(a){a.writeFloat(this.pos_x),a.writeFloat(this.pos_y)},a}(),taxi_menu_info=function(){function a(){this.taxi_text=""}return a.prototype.read=function(a){this.id=a.readInt32(),this.taxi_text=a.readStringByLen(50),this.map_id=a.readUint32(),this.pos_x=a.readUint16(),this.pos_y=a.readUint16()},a.prototype.write=function(a){a.writeInt32(this.id),a.writeStringByLen(this.taxi_text,50),a.writeUint32(this.map_id),a.writeUint16(this.pos_x),a.writeUint16(this.pos_y)},a}(),char_create_info=function(){function a(){this.name="",this.guid="",this.inviteGuid="",this.faction_name=""}return a.prototype.read=function(a){this.name=a.readStringByLen(50),this.faction=a.readUint8(),this.gender=a.readUint8(),this.level=a.readUint16(),this.guid=a.readStringByLen(50),this.head_id=a.readUint32(),this.hair_id=a.readUint32(),this.race=a.readUint8(),this.inviteGuid=a.readStringByLen(50),this.faction_name=a.readStringByLen(50),this.icon=a.readUint8()},a.prototype.write=function(a){a.writeStringByLen(this.name,50),a.writeUint8(this.faction),a.writeUint8(this.gender),a.writeUint16(this.level),a.writeStringByLen(this.guid,50),a.writeUint32(this.head_id),a.writeUint32(this.hair_id),a.writeUint8(this.race),a.writeStringByLen(this.inviteGuid,50),a.writeStringByLen(this.faction_name,50),a.writeUint8(this.icon)},a}(),quest_option=function(){function a(){this.quest_title=""}return a.prototype.read=function(a){this.quest_id=a.readUint32(),this.quest_icon=a.readUint32(),this.quest_level=a.readUint16(),this.quest_title=a.readStringByLen(50),this.flags=a.readUint32()},a.prototype.write=function(a){a.writeUint32(this.quest_id),a.writeUint32(this.quest_icon),a.writeUint16(this.quest_level),a.writeStringByLen(this.quest_title,50),a.writeUint32(this.flags)},a}(),quest_canaccept_info=function(){function a(){this.title=""}return a.prototype.read=function(a){this.quest_id=a.readUint32(),this.quest_type=a.readUint8(),this.title=a.readStringByLen(50),this.npc_id=a.readUint32(),this.quest_level=a.readUint32()},a.prototype.write=function(a){a.writeUint32(this.quest_id),a.writeUint8(this.quest_type),a.writeStringByLen(this.title,50),a.writeUint32(this.npc_id),a.writeUint32(this.quest_level)},a}(),gossip_menu_option_info=function(){function a(){this.option_title=""}return a.prototype.read=function(a){this.id=a.readInt32(),this.option_icon=a.readInt32(),this.option_title=a.readStringByLen(200)},a.prototype.write=function(a){a.writeInt32(this.id),a.writeInt32(this.option_icon),a.writeStringByLen(this.option_title,200)},a}(),item_cooldown_info=function(){function a(){}return a.prototype.read=function(a){this.item=a.readUint32(),this.cooldown=a.readUint32()},a.prototype.write=function(a){a.writeUint32(this.item),a.writeUint32(this.cooldown)},a}(),quest_status=function(){function a(){}return a.prototype.read=function(a){this.quest_id=a.readUint16(),this.status=a.readUint8()},a.prototype.write=function(a){a.writeUint16(this.quest_id),a.writeUint8(this.status)},a}(),item_reward_info=function(){function a(){}return a.prototype.read=function(a){this.item_id=a.readUint16(),this.num=a.readUint32()},a.prototype.write=function(a){a.writeUint16(this.item_id),a.writeUint32(this.num)},a}(),social_friend_info=function(){function a(){this.guid="",this.name="",this.faction=""}return a.prototype.read=function(a){this.guid=a.readStringByLen(50),this.name=a.readStringByLen(50),this.faction=a.readStringByLen(50),this.level=a.readUint16(),this.icon=a.readUint16(),this.vip=a.readUint16()},a.prototype.write=function(a){a.writeStringByLen(this.guid,50),a.writeStringByLen(this.name,50),a.writeStringByLen(this.faction,50),a.writeUint16(this.level),a.writeUint16(this.icon),a.writeUint16(this.vip)},a}(),faction_info=function(){function a(){this.faction_guid="",this.faction_name="",this.faction_bz="",this.faction_gg=""}return a.prototype.read=function(a){this.faction_guid=a.readStringByLen(50),this.faction_name=a.readStringByLen(50),this.faction_bz=a.readStringByLen(50),this.faction_gg=a.readStringByLen(108),this.level=a.readUint16(),this.icon=a.readUint8(),this.player_count=a.readUint16(),this.minlev=a.readUint16()},a.prototype.write=function(a){a.writeStringByLen(this.faction_guid,50),a.writeStringByLen(this.faction_name,50),a.writeStringByLen(this.faction_bz,50),a.writeStringByLen(this.faction_gg,108),a.writeUint16(this.level),a.writeUint8(this.icon),a.writeUint16(this.player_count),a.writeUint16(this.minlev)},a}(),rank_info=function(){function a(){this.name=""}return a.prototype.read=function(a){this.name=a.readStringByLen(50),this.value=a.readFloat()},a.prototype.write=function(a){a.writeStringByLen(this.name,50),a.writeFloat(this.value)},a}(),line_info=function(){function a(){}return a.prototype.read=function(a){this.lineNo=a.readUint16(),this.rate=a.readUint8()},a.prototype.write=function(a){a.writeUint16(this.lineNo),a.writeUint8(this.rate)},a}(),wait_info=function(){function a(){this.name=""}return a.prototype.read=function(a){this.name=a.readStringByLen(50),this.state=a.readInt8()},a.prototype.write=function(a){a.writeStringByLen(this.name,50),a.writeInt8(this.state)},a}(),cultivation_rivals_info=function(){function a(){this.name=""}return a.prototype.read=function(a){this.index=a.readUint32(),this.name=a.readStringByLen(50),this.level=a.readUint32(),this.weapon=a.readUint32(),this.avatar=a.readUint32(),this.divine=a.readUint32(),this.force=a.readUint32(),this.chest=a.readUint32(),this.gender=a.readUint32()},a.prototype.write=function(a){a.writeUint32(this.index),a.writeStringByLen(this.name,50),a.writeUint32(this.level),a.writeUint32(this.weapon),a.writeUint32(this.avatar),a.writeUint32(this.divine),a.writeUint32(this.force),a.writeUint32(this.chest),a.writeUint32(this.gender)},a}(),faction_gift_info=function(){function a(){this.guid="",this.msg="",this.item_list="",this.reply_list=""}return a.prototype.read=function(a){this.rank=a.readUint32(),this.id=a.readUint32(),this.point=a.readUint32(),this.thank=a.readUint32(),this.reply=a.readUint32(),this.time=a.readUint32(),this.count_id=a.readUint32(),this.guid=a.readStringByLen(50),this.msg=a.readStringByLen(50),this.item_list=a.readStringByLen(150),this.reply_list=a.readStringByLen(100)},a.prototype.write=function(a){a.writeUint32(this.rank),a.writeUint32(this.id),a.writeUint32(this.point),a.writeUint32(this.thank),a.writeUint32(this.reply),a.writeUint32(this.time),a.writeUint32(this.count_id),a.writeStringByLen(this.guid,50),a.writeStringByLen(this.msg,50),a.writeStringByLen(this.item_list,150),a.writeStringByLen(this.reply_list,100)},a}(),faction_gift_rank_info=function(){function a(){this.queen_name="",this.faction_name="",this.guard_name=""}return a.prototype.read=function(a){this.rank=a.readUint32(),this.point=a.readUint32(),this.queen_name=a.readStringByLen(50),this.faction_name=a.readStringByLen(50),this.guard_name=a.readStringByLen(50),this.faction_flag=a.readUint32(),this.queen_vip=a.readUint32(),this.guard_vip=a.readUint32()},a.prototype.write=function(a){a.writeUint32(this.rank),a.writeUint32(this.point),a.writeStringByLen(this.queen_name,50),a.writeStringByLen(this.faction_name,50),a.writeStringByLen(this.guard_name,50),a.writeUint32(this.faction_flag),a.writeUint32(this.queen_vip),a.writeUint32(this.guard_vip)},a}(),mass_boss_info=function(){function a(){}return a.prototype.read=function(a){this.id=a.readUint8(),this.state=a.readUint8(),this.time=a.readUint32(),this.percent=a.readUint8(),this.count=a.readUint16()},a.prototype.write=function(a){a.writeUint8(this.id),a.writeUint8(this.state),a.writeUint32(this.time),a.writeUint8(this.percent),a.writeUint16(this.count)},a}(),mass_boss_rank_info=function(){function a(){this.name=""}return a.prototype.read=function(a){this.name=a.readStringByLen(50),this.dam=a.readDouble()},a.prototype.write=function(a){a.writeStringByLen(this.name,50),a.writeDouble(this.dam)},a}(),equip_info=function(){function a(){this.equip=""}return a.prototype.read=function(a){this.equip=a.readStringByLen(50)},a.prototype.write=function(a){a.writeStringByLen(this.equip,50)},a}(),act_rank_info=function(){function a(){this.name=""}return a.prototype.read=function(a){this.name=a.readStringByLen(50),this.value=a.readUint32()},a.prototype.write=function(a){a.writeStringByLen(this.name,50),a.writeUint32(this.value)},a}(),OprateResult=function(){function a(){}return a.OPRATE_TYPE_LOGIN=1,a.OPRATE_TYPE_KICKING=2,a.OPRATE_TYPE_JUMP=3,a.OPRATE_TYPE_ATTK_LOSE=4,a.OPRATE_TYPE_SPELL_LOSE=5,a.OPRATE_TYPE_INTERACTION=6,a.OPRATE_TYPE_USE_GAMEOBJECT=7,a.OPRATE_TYPE_BAG=8,a.OPRATE_TYPE_TRADE=9,a.OPRATE_TYPE_CHAT=10,a.OPERTE_TYPE_RECEIVE_GIFT_PACKS=11,a.OPERTE_TYPE_QUEST=12,a.OPERTE_TYPE_NPCBUY=13,a.OPERTE_TYPE_FUBEN=14,a.OPERTE_TYPE_KUAFU=15,a.OPERTE_TYPE_RANK_LIST=16,a.OPERTE_TYPE_CLOSE=17,a.OPERTE_TYPE_HOSTING=18,a.OPERTE_TYPE_STRENGTH=19,a.OPERTE_TYPE_CHANGE_BATTLE_MODE_LOSE=20,a.OPERTE_TYPE_SOCIAL=21,a.OPERTE_TYPE_FACTION=22,a.OPERTE_TYPE_FIELD_BOSS=23,a.OPERTE_TYPE_WORLD_BOSS=24,a.OPRATE_TYPE_MOUNT_QICHENG=25,a.OPRATE_TYPE_TELEPORT=26,a.OPRATE_TYPE_UPGRADE=27,a.OPRATE_TYPE_ACTIVITY=28,a.OPRATE_TYPE_ACHIEVE=29,a.OPRATE_TYPE_ATHLETICS=30,a.OPRATE_TYPE_XIANFU=31,a.OPRATE_TYPE_REWARD=32,a.OPRATE_TYPE_DOUJIAN=33,a.OPRATE_TYPE_GEM=34,a.OPRATE_RESULT_SUCCESS=1,a.OPRATE_RESULT_NAME_REPEAT=2,a.OPRATE_RESULT_NAME_ILLEGAL=3,a.OPRATE_RESULT_CHAR_CAP=4,a.OPRATE_RESULT_SCENED_CLOSE=5,a.OPRATE_RESULT_SCENED_ERROR=6,a.OPRATE_RESULT_LOGINED_IN=7,a.OPRATE_RESULT_OTHER_LOGINED=8,a.OPRATE_RESULT_GAME_VERSION_ERROR=9,a.OPRATE_RESULT_MAP_VERSION_ERROR=10,a.OPRATE_RESULT_DATA_VERSION_ERROR=11,a.OPRATE_RESULT_VERSION_FORMAT_ERROR=12,a.OPRATE_RESULT_APPD_ERROR=13,a.OPRATE_RESULT_LOCK_ACCOUNT=14,a.OPRATE_RESULT_LOCK_IP=15,a.OPRATE_RESULT_APPD_CLOSE=16,a.OPRATE_RESULT_NAME_TOO_LONG=17,a.OPRATE_RESULT_NAME_HAS_PINGBI=18,a.OPRATE_RESULT_LOGOUT_UNFINISHED=19,a.OPRATE_RESULT_PID_OR_SID_ERROR=20,a.OPRATE_RESULT_DB_RESULT_ERROR=21,a.OPRATE_RESULT_MERGE_SERVER=22,a.OPRATE_RESULT_PLAYER_ZIBAO=23,a.OPRATE_RESULT_GENDER_ILLEGAL=24,a.KICKING_TYPE_GM_LOCK_IP=0,a.KICKING_TYPE_GM_LOCK_ACCOUNT=1,a.KICKING_TYPE_GM_KICKING=2,a.KICKING_TYPE_KUANGCHANG_RELIVE=3,a.KICKING_TYPE_FUCK_PINGBI=4,a.KICKING_TYPE_QUEST_GET_ITEM=5,a.KICKING_TYPE_NOT_MONEY=6,a.JUMP_RESULT_NOMAL=1,a.JUMP_RESULT_DEAD=2,a.JUMP_RESULT_ENERGY=3,a.JUMP_RESULT_MAP_CANT_JUMP=4,a.JUMP_RESULT_CANT_JUMP=5,a.JUMP_RESULT_MAX_DISTANCE=6,a.JUMP_RESULT_WRONG_COORD=7,a.JUMP_RESULT_SPELL_CD=8,a.JUMP_RESULT_NOT_ACTIVE_SPELL=9,a.ATTACK_LOST_CANTATTACK=1,a.ATTACK_LOST_TARGET_DEAD=2,a.ATTACK_LOST_NEED_TARGET=3,a.ATTACK_LOST_OUT_OF_RANGE=4,a.ATTACK_LOST_WRONG_TARGET=5,a.ATTACK_LOST_MOVING=6,a.LOST_RESON_SPELL_DOENT_EXIST=1,a.LOST_RESON_NOT_HAVE_SPELL=2,a.LOST_RESON_NOT_ENOUGH_ANGER=3,a.LOST_RESON_SPELL_COOLDOWN=4,a.LOST_RESON_ALREADY_CAST=5,a.LOST_RESON_TARGET_DEAD=6,a.LOST_RESON_NEED_TARGET=7,a.LOST_RESON_JUMP_DENY=8,a.LOST_RESON_SCENE_DENY=9,a.LOST_RESON_CAN_NOT_CAST=10,a.LOST_RESON_HAS_CONFLICT_SPELL=11,a.LOST_RESON_NOTHAS_CHUZHAN=12,a.LOST_RESON_WRONG_FACTION=13,a.LOST_RESON_ACTIVE_SPELL_SUCCESS=14,a.LOST_RESON_IN_SAFE_ZONE=15,a.LOST_RESON_YXT_WRONG_FACTION=16,a.LOST_RESON_PVP_STATE=17,a.INTERACTION_TOO_FAR=1,a.INTERACTION_BOOK_DAILYNUM_FULL=2,a.INTERACTION_NO_ENOUGH_ENDURANCE=3,a.INTERACTION_JHM_ERROR=4,a.INTERACTION_WORSHIP=5,a.INTERACTION_JHM_HAVE=6,a.INTERACTION_JHM_IS_USED=7,a.INTERACTION_JHM_NOT_USE_RANGE=8,a.USE_GAMEOBJECT_SUCCEED=1,a.USE_GAMEOBJECT_FAIL=2,a.USE_GAMEOBJECT_QUEST=3,a.USE_GAMEOBJECT_TOO_FAST=4,a.BAG_RESULT_NULL=1,a.BAG_RESULT_ITEM_NOT_EXIST=2,a.BAG_RESULT_CHANGE_ERROR=3,a.BAG_RESULT_DESTROY_BIND=4,a.BAG_RESULT_ITEM_NOT_SELF=5,a.BAG_RESULT_REPAIR_FULL=6,a.BAG_RESULT_BAG_NOT_EXIST=7,a.BAG_RESULT_POS_NOT_EXIST=8,a.BAG_RESULT_DESTROY_TOOMUCH=9,a.BAG_RESULT_BAN_FOR_TRADE=10,a.BAG_RESULT_SPLIT_FAILURE=11,a.BAG_RESULT_LACK_USER=12,a.BAG_RESULT_BAG_FULL=13,a.BAG_RESULT_MAX_COUNT=14,a.BAG_RESULT_SELL_BIND=15,a.BAG_RESULT_REPAIR_OK=16,a.BAG_RESULT_REPAIR_MONEY_LACK=17,a.BAG_RESULT_EXTENSION_BAG=18,a.BAG_RESULT_EXTENSION_MAX_SIZE=19,a.BAG_RESULT_EXTENSION_MATERIAL_LACK=20,a.BAG_RESULT_EXTENSION_TRADE=21,a.BAG_RESULT_USE_ITEM_COUNT_MAX=22,a.BAG_RESULT_NOT_ITEM=23,a.BAG_RESULT_ITEM_USEING=24,a.BAG_RESULT_GET_ITEMS=25,a.BAG_RESULT_USE_ITEMS=26,a.BAG_RESULT_GET_ITEMS_ORANGE=27,a.BAG_RESULT_USE_ITEMS_GENERALS=28,a.BAG_RESULT_GET_ITEMS_CABX=29,a.BAG_RESULT_GET_ITEMS_CABX_BUFF=30,a.BAG_RESULT_ALREADY_KAIGUANG=31,a.BAG_RESULT_EXCHANGE_SUCCESS=32,a.BAG_RESULT_OPEN_ITEMS_SUCCESS=33,a.BAG_RESULT_OPEN_ITEMS_FAIL=34,a.BAG_RESULT_GET_ITEMS_GENERALS_EQUIP=35,a.BAG_RESULT_GET_SHOWHAND_JIEZHI=36,a.BAG_RESULT_USE_WUJIANG_EXP_CARD=37,a.BAG_RESULT_USE_ITEMS_SUCCESS=38,a.BAG_RESULT_BAG_FULL_SEND_MAIL=39,a.BAG_RESULT_BAG_FULL_AUTO_SELL=40,a.TRADE_RESULT_TYPE_NOT_TARGET=1,a.TRADE_RESULT_TYPE_TRADEING=2,a.TRADE_RESULT_TYPE_NOT_TRADE=3,a.TRADE_RESULT_TYPE_BAG_SIZE=4,a.TRADE_RESULT_TYPE_UNRECOGNISED=5,a.TRADE_RESULT_TYPE_TARGET_CANCEL=6,a.TRADE_RESULT_TYPE_LACK_MONEY=7,a.TRADE_RESULT_TYPE_IS_BIND=8,a.CHAT_RESULT_NOT_PLAYER=1,a.CHAT_RESULT_IS_GAG=2,a.CHAT_LEVEL_WHISPER_LEVEL_NO=3,a.CHAT_LEVEL_WORLD_LEVEL_NO=4,a.CHAT_RESULT_CHECK_LIMIT=5,a.CHAT_RESULT_NO_FACTION=6,a.CHAT_RESULT_NO_GROUP=7,a.RECEIVE_GIFT_PACKS_NOT_FIND=1,a.RECEIVE_GIFT_PACKS_CHAR_ERROR=2,a.RECEIVE_GIFT_PACKS_CHAR_CREATE=3,a.RECEIVE_GIFT_PACKS_RECEIVED=4,a.RECEIVE_GIFT_PACKS_ONLINE_AWARD=5,a.RECEIVE_GIFT_PACKS_ONLINE_XIANSHI=6,a.INVALIDREASON_QUEST_FAILED_LOW_LEVEL=1,a.INVALIDREASON_QUEST_FAILED_WRONG_RACE=2,a.INVALIDREASON_QUEST_ALREADY_DONE=3,a.INVALIDREASON_QUEST_ONLY_ONE_TIMED=4,a.INVALIDREASON_QUEST_ALREADY_ON=5,a.INVALIDREASON_QUEST_FAILED_EXPANSION=6,a.INVALIDREASON_QUEST_ALREADY_ON2=7,a.INVALIDREASON_QUEST_FAILED_MISSING_ITEMS=8,a.INVALIDREASON_QUEST_FAILED_NOT_ENOUGH_MONEY=9,a.INVALIDREASON_DAILY_QUESTS_REMAINING=10,a.INVALIDREASON_QUEST_FAILED_CAIS=11,a.INVALIDREASON_DAILY_QUEST_COMPLETED_TODAY=12,a.INVALIDREASON_QUEST_FINISH_ALL_RIHUAN=13,a.QUEST_TYPE_PROCESS=14,a.NPC_BUY_ITEM_NO_EXIST=0,a.NPC_BUY_ITEM_UNDER=1,a.NPC_BUY_ITEM_NO_OPEN=2,a.NPC_BUY_ITEM_OUT_TIME=3,a.NPC_BUY_BAG_OUT_SIZE=4,a.NPC_BUY_MONEY_NO_ENOUGH=5,a.NPC_BUY_MONEY_TRANSFINITE=6,a.NPC_BUY_SELL_OUT=7,a.FUBEN_OPRATE_NO_GROUP_STATE=0,a.FUBEN_OPRATE_NOT_TWO_PEOPLE=1,a.FUBEN_OPRATE_NO_ENERGY=2,a.FUBEN_OPRATE_NO_MONEY=3,a.FUBEN_OPRATE_TEAM_NO_LEVEL=4,a.FUBEN_OPRATE_TEAM_NO_ENERGY=5,a.FUBEN_OPRATE_NO_GROUP=6,a.FUBEN_OPRATE_SEND_TEAM_FRIEND=7,a.FUBEN_OPRATE_TEAM_REFUSE_ENETR=8,a.FUBEN_OPRATE_TEAM_ON_FUBEN_MAP=9,a.FUBEN_OPRATE_TEAM_HAVE_FLAGS=10,a.FUBEN_OPRATE_REFRESH_BOSS=11,a.FUBEN_OPRATE_KILLED_BOSS=12,a.FUBEN_OPRATE_MORE_TIMES=13,a.FUBEN_OPRATE_NO_CREATURES=14,a.KUAFU_OPERATE_CONN_DISCONN=0,a.KUAFU_OPERATE_HASNOT_REGISTER=1,a.RANK_LIST_OPERATE_SUCCEED=0,a.RANK_LIST_OPERATE_TYPE_ERROR=1,a.RANK_LIST_OPERATE_OUT_OF_RANGE=2,a.RANK_LIST_OPERATE_MAX_LIKE=4,a.RANK_LIST_OPERATE_HAS_LIKE=5,a.ACTIVITY_OPERATE_NOTVIP=0,a.ACTIVITY_OPERATE_NOENOUGH=1,a.ACTIVITY_OPERATE_HASGET=2,a.ACHIEVE_OPERATE_NO_FIND=0,a.ACHIEVE_OPERATE_NO_GET=1,a.ACHIEVE_OPERATE_HASGET=2,a.ACHIEVE_OPERATE_NO_ALL=3,a.ACHIEVE_OPERATE_TITLE_SUC=4,a.ACHIEVE_OPERATE_TITLE_FAL=5,a.ACHIEVE_OPERATE_NO_MONEY=6,a.ATHLETICS_OPERATE_NO_LEV=1,a.ATHLETICS_OPERATE_NO_FORCE=2,a.ATHLETICS_OPERATE_NO_OPEN=3,a.ATHLETICS_OPERATE_NO_TIME_BUY=4,a.ATHLETICS_OPERATE_NO_TIME=5,a.ATHLETICS_OPERATE_IN_MATCH=6,a.ATHLETICS_OPERATE_MAX_BUY=7,a.ATHLETICS_OPERATE_NO_MONEY=8,a.ATHLETICS_OPERATE_HAS_DAY_REWARD=9,a.ATHLETICS_OPERATE_NO_DAY_REWARD=10,a.ATHLETICS_OPERATE_BUFF_OCCUR=11,a.DOUJIAN_OPERATE_NO_LEV=0,a.DOUJIAN_OPERATE_ZHUCHENG=1,a.DOUJIAN_OPERATE_NO_TIME=2,a.DOUJIAN_OPERATE_IN_CD=3,a.DOUJIAN_OPERATE_MAX_TIME=4,a.DOUJIAN_OPERATE_NO_MONEY=5,a.DOUJIAN_OPERATE_NO_MONEY_CD=6,a.DOUJIAN_OPERATE_SELF_BATTLE=7,a.DOUJIAN_OPERATE_OTHER_BATTLE=8,a.DOUJIAN_OPERATE_COUNTDOWN=9,a.PLAYER_CLOSE_OPERTE_APPD_ONE1=1e3,a.PLAYER_CLOSE_OPERTE_APPD_ONE2=1001,a.PLAYER_CLOSE_OPERTE_APPD_ONE3=1002,a.PLAYER_CLOSE_OPERTE_APPD_ONE4=1003,a.PLAYER_CLOSE_OPERTE_APPD_ONE5=1004,a.PLAYER_CLOSE_OPERTE_APPD_ONE6=1005,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE4=2001,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE5=2002,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE6=2003,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE7=6,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE8=2004,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE9=2005,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE10=2006,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE11=2007,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE12=2008,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE13=2009,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE14=2010,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE15=2011,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE16=2012,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE17=2013,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE18=2014,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE19=2015,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE20=2016,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE21=2017,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE22=2018,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE23=2019,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE24=2020,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE25=2021,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE26=2022,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE27=2023,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE28=2024,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE39=2025,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE40=2026,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE41=2027,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE42=2028,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE43=2029,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE44=2030,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE45=2031,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE46=2032,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE47=2033,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE48=2034,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE49=2035,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE50=2036,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE51=2037,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE52=2038,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE53=2039,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE54=2040,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE55=2041,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE56=2042,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE57=2045,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE58=2043,a.PLAYER_CLOSE_OPERTE_LOGDIN_ONE59=2044,a.PLAYER_CLOSE_OPERTE_LOGDIN_2046=2046,a.PLAYER_CLOSE_OPERTE_LOGDIN_2047=2047,a.PLAYER_CLOSE_OPERTE_LOGDIN_2048=2048,a.PLAYER_CLOSE_OPERTE_SCREND_ONE29=3001,a.PLAYER_CLOSE_OPERTE_SCREND_ONE30=3002,a.PLAYER_CLOSE_OPERTE_SCREND_ONE31=3003,a.PLAYER_CLOSE_OPERTE_SCREND_ONE32=3004,a.PLAYER_CLOSE_OPERTE_SCREND_ONE33=3005,a.PLAYER_CLOSE_OPERTE_SCREND_ONE34=3006,a.PLAYER_CLOSE_OPERTE_SCREND_ONE35=3007,a.PLAYER_CLOSE_OPERTE_SCREND_ONE36=3008,a.PLAYER_CLOSE_OPERTE_SCREND_ONE37=3009,a.PLAYER_CLOSE_OPERTE_SCREND_ONE38=3010,a.PLAYER_CLOSE_OPERTE_POLICED_4001=4001,a.OPERTE_TYPE_FACTION_IS_HAVE=0,a.OPERTE_TYPE_FACTION_NAME_ERR=1,a.OPERTE_TYPE_FACTION_NAME_HAVE_FUCK=2,a.OPERTE_TYPE_FACTION_NAME_REPEAT=3,a.OPERTE_TYPE_FACTION_CREATE_MAX=4,a.OPERTE_TYPE_FACTION_CREATE_COST=5,a.OPERTE_TYPE_FACTION_NOT_MANAGER=6,a.OPERTE_TYPE_FACTION_NOTICE_ERR=7,a.OPERTE_TYPE_FACTION_NOTICE_ERR_PB=8,a.OPERTE_TYPE_FACTION_LEV_LOW=9,a.OPERTE_TYPE_FACTION_MEMBER_MAX_COUNT=10,a.OPERTE_TYPE_FACTION_JOIN_SUCESS=11,a.OPERTE_TYPE_FACTION_FACTION_REFUSED_JOIN=12,a.OPERTE_TYPE_FACTION_KICKED=13,a.OPERTE_TYPE_FACTION_KICK_SUCCESS=14,a.OPERTE_TYPE_FACTION_MAX_ZHIWEI=15,a.OPERTE_TYPE_FACTION_APPOINT_SUCCESS=16,a.OPERTE_TYPE_FACTION_PROMOTED=17,a.OPERTE_TYPE_FACTION_APPOINT_NOSELF=18,a.OPERTE_TYPE_FACTION_DONATIONMAX=19,a.OPERTE_TYPE_FACTION_DONATION_GOLD=20,a.OPERTE_TYPE_FACTION_DONATION_YB=21,a.OPERTE_TYPE_FACTION_SHOP_NUMLOW=22,a.OPERTE_TYPE_FACTION_DEVOTE=23,a.OPEATE_TYPE_FACTION_MONEY_ERR=24,a.OPEATE_TYPE_FACTION_LEVEL_UP=25,a.OPEATE_TYPE_FACTION_NOT_JOIN=26,a.OPERTE_TYPE_FACTION_PLAYER_OFFLINE=40,a.OPERTE_TYPE_FACTION_BOSS_START=50,a.OPERTE_TYPE_FACTION_GIFT_THANK=59,a.OPERTE_TYPE_FACTION_GIFT_THANK_ALL=60,a.OPERTE_TYPE_FACTION_GIFT_GET_EXREWARD=61,a.OPERTE_TYPE_FACTION_GIFT_GET_EXREWARD_ALL=62,a.OPERTE_TYPE_FACTION_GIFT_SEND=63,a.OPERTE_TYPE_FACTION_GIFT_SEND_FAIL=64,a.OPERTE_TYPE_FACTION_GIFT_NOTICE=65,a.OPERTE_TYPE_FACTION_BOSSDEFENSE_TIME_ERROR=66,a.OPERTE_TYPE_SOCIAL_HAS_SEND=1,a.OPERTE_TYPE_SOCIAL_NOT_FIND=2,a.OPERTE_TYPE_SOCIAL_SELF_FULL=3,a.OPERTE_TYPE_SOCIAL_TARGET_FULL=4,a.OPERTE_TYPE_SOCIAL_ALREADY_FRIEND=5,a.OPERTE_TYPE_SOCIAL_ADD_MYSELF=6,a.OPERTE_TYPE_SOCIAL_HAS_SEND_ADD=7,a.OPERTE_TYPE_SOCIAL_NO_MONEY=8,a.OPERTE_TYPE_SOCIAL_NOT_ENEMY=9,a.OPERTE_TYPE_SOCIAL_ENEMY_OFFLINE=10,a.OPERTE_TYPE_SOCIAL_ENEMY_NOT_IN_FIELD=11,a.OPERTE_TYPE_SOCIAL_REVENGE_TIMES_NOT_ENOUGH=12,a.OPERTE_TYPE_SOCIAL_RENAME_SUCCESS=13,a.OPERTE_TYPE_SOCIAL_OTHNER_FACTION=14,a.OPERTE_TYPE_SOCIAL_SAME_FACTION=15,a.HOSTING_OPERTE_IS_SELF=0,a.HOSTING_OPERTE_LEVEL_NOT=1,a.HOSTING_OPERTE_IS_HOSTING=2,a.HOSTING_OPERTE_IS_HOSTING_APPLY=3,a.HOSTING_OPERTE_FRIEND_NOT=4,a.HOSTING_OPERTE_HAS_NOT_24H=5,a.HOSTING_OPERTE_FRIEND_OUTLINE=6,a.HOSTING_OPERTE_FRIEND_ERR=7,a.HOSTING_OPERTE_NOT_HOSTING=8,a.HOSTING_OPERTE_FRIEND_ONLINE=9,a.HOSTING_OPERTE_LOGIN_HOSTING=10,a.HOSTING_OPERTE_FRIEND_APPLY=11,a.HOSTING_OPERTE_LOGIN=12,a.HOSTING_OPERTE_SUCCESS=13,a.HOSTING_OPERTE_CANCEL=14,a.HOSTING_OPERTE_REFUSED=15,a.HOSTING_OPERTE_NOT_DUE_TO=16,a.HOSTING_OPERTE_FRIEND_HOSTING_LOGIN=17,a.HOSTING_OPERTE_FRIEND_NOT_HAS_YOU=18,a.STRENGTH_OPERTE_FAIL=0,a.BATTLE_MODE_OPERTE_PEACE_MODE_DENY=0,a.BATTLE_MODE_OPERTE_PEACE_MODE_IN_CD=1,a.FIELD_BOSS_OPERTE_WILL_START=1,a.FIELD_BOSS_OPERTE_WILL_OCCUR=2,a.FIELD_BOSS_OPERTE_OCCUR=3,a.FIELD_BOSS_OPERTE_BOSS_BORN=4,a.FIELD_BOSS_OPERTE_BOSS_KILL=5,a.FIELD_BOSS_OPERTE_PROTECT=6,a.FIELD_BOSS_OPERTE_PICKED=7,a.FIELD_BOSS_OPERTE_TOO_FAR=8,a.WORLD_BOSS_OPERTE_NOT_ENROLL=0,a.WORLD_BOSS_OPERTE_WILL_START=1,a.WORLD_BOSS_OPERTE_WILL_ROLL1=2,a.WORLD_BOSS_OPERTE_WILL_ROLL2=3,a.WORLD_BOSS_OPERTE_ENROLL=4,a.MOUNT_QICHENG_FIGHT=0,a.MOUNT_QICHENG_JUMP=1,a.TELEPORT_OPRATE_PVP_STATE=0,a.UPGRADE_OPRATE_SKILL_SUCCESS=0,a.UPGRADE_OPRATE_MOUNT_EXP=1,a.UPGRADE_OPRATE_MOUNT_STAR=2,a.UPGRADE_OPRATE_MOUNT=3,a.UPGRADE_OPRATE_ANGLE_SKILL=4,a.UPGRADE_OPRATE_BLESS_SUCCESS=5,a.UPGRADE_OPRATE_BLESS_EXP=6,a.UPGRADE_OPRATE_GEM_SUCCESS=7,a.UPGRADE_OPRATE_GEM_EXP=8,a.UPGRADE_OPRATE_TALISMAN_ACTIVE=9,a.UPGRADE_OPRATE_TALISMAN_LVUP=10,a.UPGRADE_OPRATE_WINGS_ACTIVE=11,a.UPGRADE_OPRATE_WINGS_BLESS=12,a.UPGRADE_OPRATE_WINGS_RANKUP=13,a.UPGRADE_OPRATE_WINGS_STRENGTH_SUCESS=14,a.UPGRADE_OPRATE_WINGS_STRENGTH_FAIL=15,a.UPGRADE_OPRATE_EQUIPDEVELOP_STRENGTH_SUCCESS=16,a.UPGRADE_OPRATE_EQUIPDEVELOP_REFINE_STAR_SUCCESS=17,a.UPGRADE_OPRATE_EQUIPDEVELOP_REFINE_STAR_FAIL=18,a.UPGRADE_OPRATE_EQUIPDEVELOP_REFINE_RANK_SUCCESS=19,a.UPGRADE_OPRATE_EQUIPDEVELOP_REFINE_RANK_FAIL=20,a.UPGRADE_OPRATE_EQUIPDEVELOP_GEM_ACTIVE_SUCCESS=21,a.UPGRADE_OPRATE_EQUIPDEVELOP_GEM_LVUP_SUCCESS=22,a.UPGRADE_OPRATE_EQUIPDEVELOP_WASHATTRS_WASH=23,a.UPGRADE_OPRATE_EQUIPDEVELOP_WASHATTRS_SAVE=24,a.UPGRADE_OPRATE_EQUIPDEVELOP_BONUS_STRENGTH=25,a.UPGRADE_OPRATE_EQUIPDEVELOP_BONUS_REFINE=26,a.UPGRADE_OPRATE_EQUIPDEVELOP_BONUS_GEM=27,a.UPGRADE_OPRATE_FACTIONSKILL_LVUP=28,a.UPGRADE_OPRATE_MOUNT_ILLUSION_ACTIVE=29,a.UPGRADE_OPRATE_CLOTH_ILLUSION_ACTIVE=30,a.UPGRADE_OPRATE_WEAPON_ILLUSION_ACTIVE=31,a.UPGRADE_OPRATE_TITLE_ACTIVE=32,a.UPGRADE_OPRATE_MOUNT_ILLUSION_SET=33,a.UPGRADE_OPRATE_MOUNT_ILLUSION_UNSET=34,a.UPGRADE_OPRATE_FASHION_ILLUSION_SET=35,a.UPGRADE_OPRATE_FASHION_ILLUSION_UNSET=36,a.UPGRADE_OPRATE_MOUNT_LEVEL_UP=37,a.XIANFU_TYPE_BOSS_OCCUR=0,a.XIANFU_TYPE_BOSS_KILL=1,a.REWARD_TYPE_ACTIVITY=0,a.REWARD_TYPE_RECHARGE=1,a.REWARD_TYPE_GIFT_PACKS=2,a.REWARD_TYPE_QUEST=3,a.REWARD_TYPE_NEWPLAYER=4,a.REWARD_TYPE_OPEN_ITEM=5,a.REWARD_TYPE_LOOT=6,a.REWARD_TYPE_GM_COMMAND=7,a.REWARD_TYPE_ITEM_BLEND=8,a.REWARD_TYPE_SEVEN_DAY_GIFT=9,a.REWARD_TYPE_JHM_GIFT=10,a.REWARD_TYPE_OPEN_BOX=11,a.REWARD_TYPE_FUBEN_EWAIJINAGLI=12,a.REWARD_TYPE_CAPTURE_YAOHUN=13,a.REWARD_TYPE_FSZL_EWAIJINAGLI=14,a.REWARD_TYPE_PRESTIGE=15,a.REWARD_TYPE_TIANDILINGKUANG=16,a.REWARD_TYPE_PANTAOYUAN=17,a.REWARD_TYPE_WABAO=18,a.REWARD_TYPE_HONGYAN=19,a.REWARD_TYPE_FORGE_DECOMPOSE=20,a.REWARD_TYPE_WORLD_BOSS_ROLL=21,a.REWARD_TYPE_VIP_INSTANCE_REWARD=22,a.REWARD_TYPE_TRIAL_INSTANCE_REWARD=23,a.REWARD_TYPE_ACHIEVE=24,a.REWARD_TYPE_SHOUCHONG=25,a.REWARD_TYPE_CHECKIN=26,a.REWARD_TYPE_GETBACK=27,a.REWARD_TYPE_TOTAL_CHECKIN=28,a.REWARD_TYPE_WELFARE_LEVEL=29,a.REWARD_TYPE_3V3_KUAFU=30,a.REWARD_TYPE_INSTANCE_SWEEP=31,a.REWARD_TYPE_XIANFU=32,a.GEM_TYPE_CRIT=0,a}(),SharedDef=function(){function a(){}return a.MAX_MONEY=2e15,a.MAX_MONEY_TRUE=4e15,a.MAX_BUFF_DURATION=65535,a.INIT_QUEST_ID=1,a.ZHUCHENG_DITU_ID=1,a.ZHUCHENG_FUHUO_X=118,a.ZHUCHENG_FUHUO_Y=145,a.BORN_MAP=1001,a.BORN_X=143,a.BORN_Y=113,a.BORN_OR=2,a.BORN_LV=1,a.VIP_MAX_LEVEL=10,a.MAX_RMB_PLAYER_LEVEL=6,a.WORLD_SERVER_TYPE_GAME=0,a.WORLD_SERVER_TYPE_PK=1,a.KUAFU_TYPE_NONE=0,a.KUAFU_TYPE_FENGLIUZHEN=1,a.KUAFU_TYPE_XIANFU=2,a.KUAFU_TYPE_PLUNDER=3,a.KUAFU_TYPE_GROUP_INSTANCE=4,a.MATCH_TYPE_LOCAL_SINGLE_PVP=5,a.MAX_KUAFU_TYPE=6,a.MERGE_TYPE_MERGE=0,a.MERGE_TYPE_GAME_TO_PK=1,a.MERGE_TYPE_PK_TO_GAME=2,a.CONTEXT_TYPE_YEYOU=0,a.CONTEXT_TYPE_PHONE=1,a.MAX_CONTEXT_TYPE=2,a.CHAR_GENDER_MALE=0,a.CHAR_GENDER_FEMALE=1,a.CHAR_GENDER_NONE=2,a.MAX_CHAR_GENDER=3,a.RACE_NONE=0,a.RACE_STRONG=1,a.RACE_HANDSOME=2,a.RACE_LAURIE=3,a.RACE_BEAUTY=4,a.HEAD_NONE=0,a.HEAD_STRONG=1,a.HEAD_HANDSOME=2,a.HEAD_LAURIE=3,a.HEAD_BEAUTY=4,a.HEAD_TOTAL=4,a.RESURRECTION_IN_SITU=0,a.RESURRECTION_SPAWNPOINT=1,a.RESURRPCTION_FREE=2,a.RESURRPCTION_MONEY=3,a.RESURRPCTION_TIME=4,a.RESURRPCTION_HUANHUNDAN=5,a.MAX_RESURRECTION_TYPE=6,a.GM_LEVEL_0=0,a.GM_LEVEL_1=1,a.GM_LEVEL_2=2,a.GM_LEVEL_3=3,a.GO_FLAG_DYNAMIC=0,a.GO_FLAG_TELE=1,a.GO_FLAG_QUEST=2,a.GO_FLAG_LOOT=3,a.GO_FLAG_GEAR=10,a.GO_FLAG_UNUSE=4,a.GO_FLAG_FOREVER=5,a.GO_FLAG_USEMODE=8,a.GO_FLAG_CARTON=9,a.GO_FLAG_REBORN=11,a.GO_FLAG_SCRIPT=12,a.GO_FLAG_GET_ITEM_NOTICE=13,a.WORLD_MAP_DEFAULT=0,a.TYPEID_OBJECT=0,a.TYPEID_UNIT=1,a.TYPEID_PLAYER=2,a.TYPEID_GAMEOBJECT=3,a.MAX_CLIENT_OBJECT_TYPES=4,a.ITEM_QUAL_WHITE=0,a.ITEM_QUAL_GREEN=1,a.ITEM_QUAL_BLUE=2,a.ITEM_QUAL_PURPLE=3,a.ITEM_QUAL_ORANGE=4,a.ITEM_QUAL_RED=5,a.MAX_QUAL=6,a.ATTACK_MODE_PEACE=0,a.ATTACK_MODE_TEAM=1,a.ATTACK_MODE_RED=2,a.ATTACK_MODE_ALL=3,a.ATTACK_MODE_FACTION=4,a.ATTACK_MODE_BANG=5,a.MAX_ATTACK_MODE=6,a.REACT_PASSIVE=0,a.REACT_DEFENSIVE=1,a.REACT_AGGRESSIVE=2,a.REACT_AGGRESSIVE_UNIT=3,a.REACT_AGGRESSIVE_PLAYER=4,a.MAX_REACT_STATES=5,a.MERGE_OPT_TYPE_INIT=0,
a.MERGE_OPT_TYPE_SAVE_DB=1,a.MERGE_OPT_TYPE_TARGET_SERVER_OK=2,a.MERGE_OPT_TYPE_END=3,a.MERGE_OPT_TYPE_SAVE_ING=4,a.MERGE_SERVER_TYPE_ORIGINAL=1,a.MERGE_SERVER_TYPE_TARGAT=2,a.BACK_OPT_TYPE_INIT=0,a.BACK_OPT_TYPE_SUCCESS=1,a.ITEM_BIND_NONE=0,a.ITEM_BIND_USE=1,a.ITEM_BIND_GET=2,a.ITEM_GIFT_GET_NONE=0,a.ITEM_GIFT_GET_MUST=1,a.PLAYER_ONLINE_STATE_OUTLINE=0,a.PLAYER_ONLINE_STATE_ONLINE=1,a.DISAPPEAR_MOTION_TYPE=9999,a.IDLE_MOTION_TYPE=0,a.RANDOM_MOTION_TYPE=1,a.WAYPOINT_MOTION_TYPE=2,a.TARGET_MOTION_TYPE=3,a.HOME_MOTION_TYPE=4,a.CONFUSED_MOTION_TYPE=5,a.FLEEING_MOTION_TYPE=6,a.FOLLOW_MOTION_TYPE=7,a.FOLLOW_INLINE_MOTION_TYPE=8,a.WAYFINDING_MOTION_TYPE=9,a.WAYFINDING_ATTACK_MOTION_TYPE=10,a.MERCENARY_MOTION_TYPE=11,a.WAYFINDDST_MOTION_TYPE=12,a.DEADLINE_MOTION_TYPE=13,a.MAX_MOTION_TYPE=14,a.TARGET_TYPE_ONESELF=0,a.TARGET_TYPE_FRIENDLY=1,a.TARGET_TYPE_ENEMY=2,a.TARGET_TYPE_ALL=3,a.TARGET_TYPE_POINT=4,a.TARGET_TYPE_SELFPOINT=5,a.TARGET_TYPE_CREATURE=6,a.TARGET_TYPE_PLAYER=7,a.TRADE_STATE_TYPE_FREE=0,a.TRADE_STATE_TYPE_APPLY=1,a.TRADE_STATE_TYPE_EXECUTION=2,a.TRADE_STATE_TYPE_PUT_ITEM_END=3,a.TRADE_STATE_TYPE_WAIT_FINISH=4,a.TRADE_TYPE_TRADE=0,a.TRADE_TYPE_STALL=1,a.MOVE_ITEM_FAIL=0,a.MOVE_ITEM_SUC=1,a.MOVE_ITEM_HAVE_BIND=2,a.MOVE_ITEM_NOT_BIND=3,a.SUB_ITEM_FAIL=0,a.SUB_ITEM_HAVE_BIND=1,a.SUB_ITEM_NOT_BIND=2,a.SUB_ITEM_HAVE_FAILTIME=3,a.ITEM_SAVE_MODE_INSERT=0,a.ITEM_SAVE_MODE_UPDATE=1,a.GOLD_INGOT_RECHARGE_NORMAL=1,a.GOLD_INGOT_RECHARGE_HANDSEL=2,a.GOLD_INGOT_RECHARGE_SUB=3,a.GOLD_INGOT_RECHARGE_HAND=4,a.MAX_GOLD_INGOT_RECHARGE_TYPE=5,a.RECHARGE_STATUS_TYPE_START=0,a.RECHARGE_STATUS_TYPE_RUNMING=1,a.RECHARGE_STATUS_TYPE_END=2,a.KICKING_STATUS_START=0,a.KICKING_STATUS_END=1,a.LOCKING_STATUS_START=0,a.LOCKING_STATUS_RUNNING=1,a.LOCKING_STATUS_END=2,a.SYSTEM_NOTICE_STATUS_START=0,a.SYSTEM_NOTICE_STATUS_RUNNING=1,a.SYSTEM_NOTICE_STATUS_END=2,a.SYSTEM_NOTICE_STATUS_DELETE=3,a.SYSTEM_NOTICE_STATUS_GARBAGE=4,a.GIFT_PACKS_STATUS_START=0,a.GIFT_PACKS_STATUS_SENDING=1,a.GIFT_PACKS_STATUS_OK=2,a.GIFT_PACKS_STATUS_END=3,a.GIFT_PACKS_AUDIENCE_TYPE_ONE=1,a.GIFT_PACKS_AUDIENCE_TYPE_ALL=2,a.GIFT_PACKS_AUDIENCE_TYPE_ALL_ONLINE=3,a.GIFT_PACKS_OPER_TYPE_RECEIVE=0,a.GIFT_PACKS_OPER_TYPE_READ=1,a.GIFT_PACKS_OPER_TYPE_DELETE=2,a.GAG_STATUS_START=0,a.GAG_STATUS_OFFLINE=1,a.GAG_STATUS_END=1,a.GM_LEVEL_TABLE_START=0,a.GM_LEVEL_TABLE_END=1,a.NOTICE_TYPE_SCROLL=1,a.NOTICE_TYPE_PROMPT=2,a.NOTICE_TYPE_FIXED=3,a.MAX_NOTICE_TYPE=10,a.CHAT_TYPE_SYSTEM=0,a.CHAT_TYPE_WORLD=1,a.CHAT_TYPE_FACTION=2,a.CHAT_TYPE_CURRENT=3,a.CHAT_TYPE_HORM=4,a.CHAT_TYPE_GROUP=5,a.CHAT_TYPE_WHISPER=6,a.MAX_CHAT_TYPE=7,a.PLATFORM_GAME2="2",a.PLATFORM_QQ="360",a.PLATFORM_NULL="9999",a.POST_TYPE_NONE=0,a.POST_TYPE_CHAT=1,a.POST_TYPE_UPGRADE=2,a.MAX_POST_TYPE=3,a.LOG_FILE_TYPE_GAME_BUY=0,a.LOG_FILE_TYPE_GAME_SELL=1,a.LOG_FILE_TYPE_RECHARGE=2,a.LOG_FILE_TYPE_SHOP_BUY=3,a.LOG_FILE_TYPE_ITEM_USE=4,a.LOG_FILE_TYPE_DEAL=5,a.LOG_FILE_TYPE_YB_INCOME=6,a.LOG_FILE_TYPE_ITEM_INCOME=7,a.LOG_FILE_TYPE_YB_EXPEND=8,a.LOG_FILE_TYPE_LOGIN=9,a.LOG_FILE_TYPE_LOGOUT=10,a.LOG_FILE_TYPE_CREATE_ROLE=11,a.LOG_FILE_TYPE_DEATH=12,a.LOG_FILE_TYPE_ACCEPT_TASK=13,a.LOG_FILE_TYPE_TASK=14,a.LOG_FILE_TYPE_UPGRADE=15,a.LOG_FILE_TYPE_GOLD=16,a.LOG_FILE_TYPE_MAP=17,a.LOG_FILE_TYPE_LONGER=18,a.LOG_FILE_TYPE_MONSTER=19,a.LOG_FILE_TYPE_TRANSCRIPT=20,a.LOG_FILE_TYPE_ONLINE=21,a.LOG_FILE_TYPE_GAME_ENTER=22,a.LOG_FILE_TYPE_ITEM_LOG=23,a.LOG_FILE_TYPE_CHAT=24,a.LOG_FILE_TYPE_RELIVE=25,a.LOG_FILE_TYPE_BIND_GOLD=26,a.LOG_FILE_TYPE_NEW_CARD_RECEIVE=27,a.LOG_FILE_TYPE_STALL=28,a.LOG_FILE_TYPE_WANTED_PACKET=29,a.LOG_FILE_TYPE_ERROR_PACKET=30,a.LOG_FILE_TYPE_CHOOSE_FACTION=31,a.LOG_FILE_TYPE_ACTIVITY_INFO=32,a.LOG_FILE_TYPE_ABNORMAL_PACKETS=33,a.LOG_FILE_TYPE_CLIENT_INFO=34,a.LOG_FILE_TYPE_GIFTMONEY_BUY=35,a.LOG_FILE_TYPE_GIFTMONEY_INCOME=36,a.LOG_FILE_TYPE_ATTACK_PACKET=37,a.LOG_FILE_TYPE_FORMAT_LOG=38,a.LOG_FILE_TYPE_CLIENT_LOG=39,a.LOG_FILE_TYPE_FORGE_LOG=40,a.LOG_FILE_TYPE_OBJECT_LOSS=41,a.MAX_LOG_FILE_TYPE=42,a.SKILL_EFFECT_TYPE_NORMAL=0,a.SKILL_EFFECT_TYPE_HUIXUE1=1,a.SKILL_EFFECT_TYPE_ROAR=2,a.SKILL_EFFECT_TYPE_BLADE_STORM=3,a.SKILL_EFFECT_TYPE_HEAL=4,a.SKILL_EFFECT_TYPE_SNOW_STORM=5,a.SKILL_EFFECT_TYPE_LOADED=99,a.LOG_FILE_TENCENT_USER=0,a.LOG_FILE_TENCENT_PLAYER=1,a.LOG_FILE_TENCENT_RECHAGRE=2,a.LOG_FILE_TENCENT_UPGRADELOG=3,a.LOG_FILE_TENCENT_NEWTASK=4,a.LOG_FILE_TENCENT_LOGIN=5,a.LOG_FILE_TENCENT_OFFLINE=6,a.LOG_FILE_TENCENT_ONLINE=7,a.LOG_FILE_TENCENT_MONEYLOG=8,a.MAX_LOG_FILE_TENCENT_TYPE=9,a.DEAD_PLACE_TYPE_FIELD=1,a.DEAD_PLACE_TYPE_XIANFU=2,a.DEAD_PLACE_TYPE_GROUP_INSTANCE=3,a.ACCACK_PACKET_TYPE_UNPACK=0,a.ACCACK_PACKET_TYPE_DATA=1,a.ACCACK_PACKET_TYPE_ORDER=2,a.ACCACK_PACKET_TYPE_DISCARD=3,a.MAX_ACCACK_PACKET_TYPE=4,a.LOG_YB_INCOME_TYPE_ACTIVITY=0,a.LOG_YB_INCOME_TYPE_RECHARGE=1,a.LOG_YB_INCOME_TYPE_USE_ITEM=2,a.LOG_YB_INCOME_TYPE_GIFT_PACKS=3,a.LOG_ITEM_OPER_TYPE_ACTIVITY=0,a.LOG_ITEM_OPER_TYPE_RECHARGE=1,a.LOG_ITEM_OPER_TYPE_GIFT_PACKS=2,a.LOG_ITEM_OPER_TYPE_QUEST=3,a.LOG_ITEM_OPER_TYPE_NEWPLAYER=4,a.LOG_ITEM_OPER_TYPE_OPEN_ITEM=5,a.LOG_ITEM_OPER_TYPE_LOOT=6,a.LOG_ITEM_OPER_TYPE_GM_COMMAND=7,a.LOG_ITEM_OPER_TYPE_ITEM_BLEND=8,a.LOG_ITEM_OPER_TYPE_SEVEN_DAY_GIFT=9,a.LOG_ITEM_OPER_TYPE_JHM_GIFT=10,a.LOG_ITEM_OPER_TYPE_OPEN_BOX=11,a.LOG_ITEM_OPER_TYPE_FUBEN_EWAIJINAGLI=12,a.LOG_ITEM_OPER_TYPE_CAPTURE_YAOHUN=13,a.LOG_ITEM_OPER_TYPE_FSZL_EWAIJINAGLI=14,a.LOG_ITEM_OPER_TYPE_PRESTIGE=15,a.LOG_ITEM_OPER_TYPE_TIANDILINGKUANG=16,a.LOG_ITEM_OPER_TYPE_PANTAOYUAN=17,a.LOG_ITEM_OPER_TYPE_WABAO=18,a.LOG_ITEM_OPER_TYPE_HONGYAN=19,a.LOG_ITEM_OPER_TYPE_FORGE_DECOMPOSE=20,a.LOG_ITEM_OPER_TYPE_WORLD_BOSS_ROLL=21,a.LOG_ITEM_OPER_TYPE_VIP_INSTANCE_REWARD=22,a.LOG_ITEM_OPER_TYPE_TRIAL_INSTANCE_REWARD=23,a.LOG_ITEM_OPER_TYPE_ACHIEVE=24,a.LOG_ITEM_OPER_TYPE_SHOUCHONG=25,a.LOG_ITEM_OPER_TYPE_CHECKIN=26,a.LOG_ITEM_OPER_TYPE_GETBACK=27,a.LOG_ITEM_OPER_TYPE_TOTAL_CHECKIN=28,a.LOG_ITEM_OPER_TYPE_WELFARE_LEVEL=29,a.LOG_ITEM_OPER_TYPE_3V3_KUAFU=30,a.LOG_ITEM_OPER_TYPE_INSTANCE_SWEEP=31,a.LOG_ITEM_OPER_TYPE_XIANFU=32,a.LOG_ITEM_OPER_TYPE_DOUJIAN_FIRST_REWARD=33,a.LOG_ITEM_OPER_TYPE_DOUJIAN_COMBAT_REWARD=34,a.LOG_ITEM_OPER_TYPE_CULTIVATION_REWARD=35,a.LOG_ITEM_OPER_TYPE_CULTIVATION_PLUNDER_REWARD=36,a.LOG_ITEM_OPER_TYPE_LOGIN_ACTIVITY_REWARD=37,a.LOG_ITEM_OPER_TYPE_GROUP_INSTANCE=38,a.LOG_ITEM_OPER_TYPE_XIANFU_PRACTISE=40,a.LOG_ITEM_OPER_TYPE_FACTION_BOSS=41,a.LOG_ITEM_OPER_TYPE_OFFLINE=42,a.LOG_ITEM_OPER_TYPE_STOREHOUSE=43,a.LOG_ITEM_OPER_TYPE_MASS_BOSS=44,a.LOG_ITEM_OPER_TYPE_SHOP_BUY=45,a.LOG_ITEM_OPER_TYPE_FACTION_BOSSDEFENSE=46,a.LOG_ITEM_OPER_TYPE_FACTION_TOWER=47,a.LOG_ITEM_OPER_TYPE_SINGLE_PVP=48,a.LOG_ITEM_OPER_TYPE_ACT_LOTTERY=49,a.LOG_ITEM_OPER_TYPE_ACT_DAILYGIFT=50,a.LOG_ITEM_OPER_TYPE_ACT_RANK=51,a.LOG_ITEM_OPER_TYPE_ACT_LIMITGIFT=52,a.LOG_ITEM_OPER_TYPE_RECHARGE_REWARD=53,a.LOG_ITEM_OPER_TYPE_CONSUME_REWARD=54,a.LOG_ITEM_OPER_TYPE_NPC_BUY=102,a.LOG_ITEM_OPER_TYPE_BIND_SHOP_BUY=103,a.LOG_ITEM_OPER_TYPE_REPURCHASE=104,a.LOG_ITEM_OPER_TYPE_ACTI_BUY=105,a.LOG_ITEM_OPER_TYPE_XIANFU_BUY=106,a.LOG_ITEM_OPER_TYPE_NPC_SELL=200,a.LOG_ITEM_OPER_TYPE_DEL_FAILTIME=201,a.LOG_ITEM_OPER_TYPE_USE=202,a.LOG_ITEM_OPER_TYPE_DISPOSE=203,a.LOG_ITEM_OPER_TYPE_HEAL=204,a.LOG_ITEM_OPER_TYPE_TRADE_GET=301,a.LOG_ITEM_OPER_TYPE_TRADE_PAY=302,a.LOG_ITEM_OPER_TYPE_STALL_OPEN=303,a.LOG_ITEM_OPER_TYPE_STALL_CLOSE=304,a.LOG_ITEM_OPER_TYPE_STALL_BUY=305,a.LOG_ITEM_OPER_TYPE_LINGDI_XUANSHANG=306,a.LOG_ITEM_OPER_TYPE_LINGDI_MIJING=307,a.LOG_ITEM_OPER_TYPE_WUJIANG_ZHENGZHAN=308,a.LOG_ITEM_OPER_TYPE_KAOZHUANGYUAN=309,a.HT_MONEY_CHANGE_TYPE_RECHARGE=1,a.HT_MONEY_CHANGE_TYPE_CONSUMPTION=2,a.HT_MONEY_CHANGE_TYPE_SUB=3,a.HT_MONEY_CHANGE_TYPE_REWARD=4,a.HT_MONEY_CHANGE_TYPE_REBATE=5,a.HT_MONEY_CHANGE_TYPE_TRADING=6,a.MONEY_CHANGE_TYPE_CHARGE=0,a.MONEY_CHANGE_TYPE_STORE_BUY=1,a.MONEY_CHANGE_TYPE_MALL_BUY=2,a.MONEY_CHANGE_TYPE_STALL_SALE=3,a.MONEY_CHANGE_TYPE_TRADE=4,a.MONEY_CHANGE_MAIL=5,a.MONEY_CHANGE_QUEST=6,a.MONEY_CHANGE_DEAD=7,a.MONEY_CHANGE_RIHUAN=8,a.MONEY_CHANGE_USE_ITEM=9,a.MONEY_CHANGE_GIFT_PACKS=10,a.MONEY_CHANGE_NPC_SELL=11,a.MONEY_CHANGE_ITEM_REPAIR=12,a.MONEY_CHANGE_ITEM_APPRAISAL=13,a.MONEY_CHANGE_NPC_REPURCHASE=14,a.MONEY_CHANGE_GM_COMMAND=15,a.MONEY_CHANGE_CREATE_FACTION=16,a.MONEY_CHANGE_WAREHOUSE_HANLD=17,a.MONEY_CHANGE_SELECT_LOOT=18,a.MONEY_CHANGE_ACTIVITY=19,a.MONEY_CHANGE_TYPE_CHARGE_2=20,a.MONEY_CHANGE_TYPE_CHARGE_3=21,a.MONEY_CHANGE_TYPE_CHARGE_4=22,a.MONEY_CHANGE_USE_LABA=23,a.MONEY_CHANGE_BAG_EXTENSION=24,a.MONEY_CHANGE_ITEM_BLEND=25,a.MONEY_CHANGE_SEVEN_DAY_GIFT=26,a.MONEY_CHANGE_CLEAR_PK_VALUE=27,a.MONEY_CHANGE_JHM_REWARD=28,a.MONEY_CHANGE_ONLINE_GIFT=29,a.MONEY_CHANGE_SPELL_UP=30,a.MONEY_CHANGE_USE_BOX=31,a.MONEY_CHANGE_BOX_OPEN=32,a.MONEY_CHANGE_BOX_RANDOM=33,a.MONEY_CHANGE_JINGJIE=34,a.MONEY_CHANGE_SHENBING_BUY=35,a.MONEY_CHANGE_ATUO_GOLD_RESPAWN=36,a.MONEY_CHANGE_FUBEN_KILLALL=37,a.MONEY_CHANGE_FUBEN_EWAI=38,a.MONEY_CHANGE_FUBEN_BUY=39,a.MONEY_CHANGE_FSZL_REWARD=40,a.MONEY_CHANGE_PRESTIGE=41,a.MONEY_CHANGE_PANTAO_CAIJI=42,a.MONEY_CHANGE_LINGKUANG_CAIJI=43,a.MONEY_CHANGE_QIYU_ZHUOYAO=44,a.MONEY_CHANGE_RESET_FORGE_ADD=45,a.MONEY_CHANGE_WABAO=46,a.MONEY_CHANGE_HONGYAN_BUY_HUOLI=47,a.MONEY_CHANGE_HONGYAN_SHIJIAN=48,a.MONEY_CHANGE_HONGYAN_BUY_FASHION=49,a.MONEY_CHANGE_FORGE_STRENG=50,a.MONEY_CHANGE_FORGE_GEM=51,a.MONEY_CHANGE_LINGDI_ZHAOMU=52,a.MONEY_CHANGE_LINGDI_XUANSHANG=53,a.MONEY_CHANGE_LINGDI_MIJING=54,a.MONEY_CHANGE_WUJIANG_REFRESH_PUB=55,a.MONEY_CHANGE_FENGLIUZHEN_PUB_AUCTION=56,a.MONEY_CHANGE_WUJIANG_QINGJIU=55,a.MONEY_CHANGE_LINGDI_ZHENGBING=56,a.MONEY_CHANGE_FENGLIUZHEN_ZHUANPAN_ENTER=57,a.MONEY_CHANGE_USE_SPELL=58,a.MONEY_CHANGE_UP_ASSISTSPELL=59,a.MONEY_CHANGE_LINGDI_BUY_BINGLI=60,a.MONEY_CHANGE_WUJIANG_ZHENGZHAN=61,a.MONEY_CHANGE_BUY_JUNLLING=62,a.MONEY_CHANGE_SELL_WUJIANG_EQUIP=63,a.MONEY_CHANGE_FENGLIUZHEN_KAOZHUANGYUAN=64,a.MONEY_CHANGE_ZHUBO_SEND_GIFTS=65,a.MONEY_CHANGE_ZHUBO_GRAB_SOFA=66,a.MONEY_CHANGE_RAISE_MOUNT=67,a.MONEY_CHANGE_ILLUSION=68,a.MONEY_CHANGE_BIND_INGOT_NOT_ENOUGH=69,a.MONEY_CHANGE_ACTIVE_SPELL=70,a.MONEY_CHANGE_BUY_VIP_INSTANCE=71,a.MONEY_CHANGE_BUY_HP_ITEM=72,a.MONEY_CHANGE_RESET_TRIAL=73,a.MONEY_CHANGE_SOCIAL_GIFT=74,a.MONEY_CHANGE_FACTION_DONATION=75,a.MONEY_CHANGE_FACTION_SHOP=76,a.MONEY_CHANGE_WORLD_BOSS_ROLL=77,a.MONEY_CHANGE_VIP_INSTANCE_REWARD=78,a.MONEY_CHANGE_TRIAL_INSTANCE_REWARD=79,a.MONEY_CHANGE_WELF_ACTIVE_GETBACK=80,a.MONEY_CHANGE_SHOUCHONG=81,a.MONEY_CHANGE_CHECKIN=82,a.MONEY_CHANGE_TOTAL_CHECKIN=83,a.MONEY_CHANGE_WELFARE_LEVEL=84,a.MONEY_CHANGE_ACHIEVE=85,a.MONEY_CHANGE_3V3KUAFU=86,a.MONEY_CHANGE_VIP_INSTANCE_SWEEP=87,a.MONEY_CHANGE_GIFT_PACKET=88,a.MONEY_CHANGE_KUAFU_WORLD_3V3=89,a.MONEY_CHANGE_KUAFU_WORLD_XIANFU=90,a.MONEY_CHANGE_BUY_XIANFU_TICKET=91,a.MONEY_CHANGE_DOUJIAN_BUY_TIMES=92,a.MONEY_CHANGE_DOUJIAN_CLEARCD=93,a.MONEY_CHANGE_DOUJIAN_FIRST_REWARD=94,a.MONEY_CHANGE_DOUJIAN_COMBATWIN_REWARD=95,a.MONEY_CHANGE_CULTIVATION_PURCHASE=96,a.MONEY_CHANGE_CULTIVATION_REWARD=97,a.MONEY_CHANGE_CULTIVATION_PLUNDER_REWARD=98,a.MONEY_CHANGE_LOGIN_ACTIVITY_REWARD=99,a.MONEY_CHANGE_FACTION_BOSS=100,a.MONEY_CHANGE_OFFLINE=101,a.MONEY_CHANGE_STOREHOUSE=102,a.MONEY_CHANGE_MASS_BOSS=103,a.MONEY_CHANGE_MASS_BOSS_BUY_TIMES=104,a.MONEY_CHANGE_GROUP_INSTANCE_BUY_TIMES=105,a.MONEY_CHANGE_KUAFU_GROUP_INSTANCE=106,a.MONEY_CHANGE_MERIDIAN=107,a.MONEY_CHANGE_FACTION_BOSSDEFENSE=108,a.MONEY_CHANGE_FACTION_TOWER=109,a.MONEY_CHANGE_SINGLE_PVP=110,a.MONEY_CHANGE_EQUIPDEVELOP=111,a.MONEY_CHANGE_APPEARANCE=112,a.MONEY_CHANGE_FACTIONSKILL=113,a.MONEY_CHANGE_UNLOCKTITLE=114,a.MONEY_CHANGE_RENAME=115,a.MONEY_CHANGE_RANK_LIKE=116,a.MONEY_CHANGE_ACT_LOTTERY=117,a.MONEY_CHANGE_ACT_DAILYGIFT=118,a.MONEY_CHANGE_ACT_RANK=119,a.MONEY_CHANGE_ACT_LIMITGIFT=120,a.MONEY_CHANGE_RECHARGE_REWARD=121,a.MONEY_CHANGE_CONSUME_REWARD=122,a.MAX_MONEY_CHANGE_TYPE=123,a.BAG_VIRTUAL_TYPE_STALL=-1,a.BAG_VIRTUAL_TYPE_UNKNOWN=-2,a.SPECIALL_BAG_TYPE_MAIL=-3,a.ITEM_TYPE_NONE=0,a.ITEM_TYPE_EQUIP=1,a.ITEM_TYPE_BOX=15,a.ITEM_TYPE_MATERIAL=3,a.ITEM_TYPE_MEDICINE=12,a.ITEM_TYPE_FASHION=5,a.ITEM_TYPE_BUFF=25,a.ITEM_TYPE_SHELI=6,a.ITEM_TYPE_PK_MEDICINE=7,a.ITEM_TYPE_PET_MEDICINE=8,a.ITEM_TYPE_NUMBER=9,a.ITEM_RECORD_BROADCAST=1,a.ITEM_RECORD_XIANFU=2,a.ITEM_RECORD_MAP=3,a.ITEM_FLAGS_QUEST=0,a.ITEM_FLAGS_RMB=1,a.ITEM_FLAGS_APPRAISAL=2,a.ITEM_FLAGS_BROKEN=3,a.ITEM_FLAGS_USABLE=4,a.ITEM_FLAGS_LOCKED=5,a.ITEM_FLAGS_REFUNDABLE=6,a.ITEM_FLAGS_UNIQUE_EQUIPPED=7,a.ITEM_FLAGS_SPECIALUSE=8,a.ITEM_FLAGS_BOP_TRADEABLE=9,a.ITEM_FLAGS_IS_BINDED=10,a.ITEM_FLAGS_IS_JIPIN=11,a.ITEM_USE_SELF=0,a.ITEM_USE_TARGET=1,a.ITEM_USE_NULL=2,a.ITEM_USE_RESULT_DISAPPEAR=0,a.ITEM_USE_RESULT_NOT_DISAPPEAR=1,a.ITEM_USE_RESULT_SUB_DURABLE=2,a.ITEM_USE_RESULT_UN_USE=3,a.LOG_ITEM_RETURN_TYPE_HAVE=0,a.LOG_ITEM_RETURN_TYPE_LOSE=1,a.LOG_ITEM_RETURN_TYPE_CLEAR=2,a.LOG_ITEM_RETURN_TYPE_GOLD=3,a.MOUNT_STATE_FREE=0,a.MOUNT_STATE_WAS_RIDING=1,a.QUEST_STATUS_NONE=0,a.QUEST_STATUS_COMPLETE=1,a.QUEST_STATUS_UNAVAILABLE=2,a.QUEST_STATUS_INCOMPLETE=3,a.QUEST_STATUS_AVAILABLE=4,a.QUEST_STATUS_FAILED=5,a.QUEST_STATUS_END=6,a.QUEST_STATUS_SHOW_INCOMPLETE=13,a.QUEST_STATUS_SHOW_END=16,a.MAX_QUEST_STATUS=17,a.BOOK_STATUS_NONE=0,a.BOOK_STATUS_COMPLETE=1,a.BOOK_STATUS_UNAVAILABLE=2,a.BOOK_STATUS_INCOMPLETE=3,a.BOOK_STATUS_AVAILABLE=4,a.BOOK_STATUS_FAILED=5,a.BOOK_STATUS_REWARDED=6,a.DIALOG_STATUS_NONE=0,a.DIALOG_STATUS_UNAVAILABLE=1,a.DIALOG_STATUS_CHAT=2,a.DIALOG_STATUS_INCOMPLETE=5,a.DIALOG_STATUS_REWARD_REP=6,a.DIALOG_STATUS_AVAILABLE_REP=7,a.DIALOG_STATUS_AVAILABLE=8,a.DIALOG_STATUS_REWARD2=9,a.DIALOG_STATUS_REWARD=10,a.MAX_DIALOG_STATUS=11,a.QUEST_FLAGS_COMMIT_NOT_NEED_NPC=256,a.QUEST_FLAGS_ACCEPT_NOT_NEED_NPC=512,a.QUEST_FLAGS_DAILY=1024,a.QUEST_FLAGS_AUTO_FAIL_OFF=1,a.QUEST_FLAGS_AUTO_COMPLETE=16,a.QUEST_FLAGS_AUTO_REWARDED=32,a.QUEST_FLAGS_AUTO_ACCEPT=64,a.QUEST_FLAGS_MANUAL=128,a.QUEST_FLAGS_CANREMOVE=4096,a.QUEST_FLAGS_FLAGS_REPEATABLE=65536,a.QUEST_FLAGS_FLAGS_EXPLORATION_OR_EVENT=131072,a.QUEST_FLAGS_FLAGS_DB_ALLOWED=65535,a.QUEST_FLAGS_FLAGS_DELIVER=262144,a.QUEST_FLAGS_FLAGS_SPEAKTO=524288,a.QUEST_FLAGS_FLAGS_KILL_OR_CAST=1048576,a.QUEST_FLAGS_FLAGS_TIMED=2097152,a.QUEST_FLAGS_FLAGS_BUY_ITEM=4194304,a.QUEST_FLAGS_FLAGS_OPT_SYS=8388608,a.QUEST_FLAGS_FLAGS_LEVEL_CREATURE=16777216,a.QUEST_FLAGS_FLAGS_LEVEL_PLAYER=33554432,a.QUEST_RELATION_TYPE_START=0,a.QUEST_RELATION_TYPE_END=1,a.QUEST_UNCHANGED=0,a.QUEST_CHANGED=1,a.QUEST_NEW=2,a.MAX_ACHIEVE_COUNT=100,a.ACHIEVE_FIELD_REWARD=0,a.ACHIEVE_FIELD_CURRENT=1,a.MAX_ACHIEVE_FIELD=2,a.MAX_QUEST_COUNT=50,a.MAX_DAILY2_QUEST_COUNT=10,a.MAX_QUEST_TARGET_COUNT=5,a.QUEST_TARGET_INFO_SHORT0=0,a.QUEST_TARGET_INFO_PROCESS=1,a.MAX_QUEST_TARGET_INFO_COUNT=2,a.QUEST_INFO_ID=0,a.QUEST_INFO_STEP_START=1,a.QUEST_INFO_STEP_END=11,a.MAX_QUEST_INFO_COUNT=11,a.MAX_TITLE_COUNT=100,a.TITLE_FIELD_INFO=0,a.TITLE_FIELD_TIME=1,a.MAX_TITLE_FIELD=2,a.WELFA_BACK_TYPE_COUNT=10,a.WELFA_BACK_ITEM=0,a.WELFA_BACK_ITEM_END=8,a.WELFA_BACK_ITEM_NUM=9,a.MAX_WELFA_BACK_ITEM=10,a.QUEST_FIELD_ACHIEVE_START=0,a.QUEST_FIELD_ACHIEVE_END=200,a.QUEST_FIELD_ACHIEVE_ALL=200,a.QUEST_FIELD_ACHIEVE_REWARD=201,a.QUEST_FIELD_QUEST_START=202,a.QUEST_FIELD_QUEST_END=752,a.QUEST_FIELD_TITLE_START=752,a.QUEST_FIELD_TITLE_END=952,a.QUEST_FIELD_WELFARE_SHOUCHONG=952,a.QUEST_FIELD_WELFARE_CHECKIN=953,a.QUEST_FIELD_WELFARE_CHECKIN_ALL=954,a.QUEST_FIELD_WELFARE_LEVEL=955,a.QUEST_FIELD_WELFARE_BACK_START=956,a.QUEST_FIELD_WELFARE_BACK_END=1056,a.QUEST_FIELD_DAILY2_FINISHED=1056,a.QUEST_FIELD_DAILY2_SUBMIT=1057,a.QUEST_FIELD_DAILY2_QUEST_START=1058,a.QUEST_FIELD_DAILY2_QUEST_END=1168,a.QUEST_FIELD_WELFARE_RECHARGE_REWARD_FLAG=1168,a.QUEST_FIELD_WELFARE_CONSUME_REWARD_FLAG=1169,a.QUEST_FIELD_WELFARE_SEVEN_DAY_PROCESS=1170,a.QUEST_FIELD_WELFARE_SEVEN_DAY_FLAG=1171,a.COMBAT_STATE_LEAVE=0,a.COMBAT_STATE_ENTER=1,a.UNIT_STAT_DIED=1,a.UNIT_STAT_MELEE_ATTACKING=2,a.UNIT_STAT_CAST_SPELL=4,a.UNIT_STAT_SPELL_PROCESS=8,a.UNIT_STAT_ROAMING=16,a.UNIT_STAT_CHASE=32,a.UNIT_STAT_SEARCHING=64,a.UNIT_STAT_FLEEING=128,a.UNIT_STAT_IN_FLIGHT=256,a.UNIT_STAT_FOLLOW=512,a.UNIT_STAT_ROOT=1024,a.UNIT_STAT_CONFUSED=2048,a.UNIT_STAT_DISTRACTED=4096,a.UNIT_STAT_ISOLATED=8192,a.UNIT_STAT_ATTACK_PLAYER=16384,a.UNIT_STAT_ALL_STATE=65535,a.DEATH_STATE_ALIVE=0,a.DEATH_STATE_CORPSE=1,a.DEATH_STATE_DEAD=2,a.HITINFO_NORMALSWING=1,a.HITINFO_CRITHIT=2,a.HITINFO_MISS=3,a.HITINFO_GEDANG=4,a.HITINFO_CRITICALHIT=5,a.HITINFO_BLOWFLY=6,a.HITINFO_LIUXUE=7,a.HITINFO_CURE=8,a.HITINFO_JUMP_EVA=9,a.HITINFO_POISON=10,a.HITINFO_ICE=11,a.HITINFO_FANTANSHANGHAI=12,a.MOVE_STATUS_STOP=0,a.MOVE_STATUS_RUN=1,a.UNIT_NPC_FLAG_NONE=-1,a.UNIT_NPC_FLAG_GOSSIP=0,a.UNIT_NPC_FLAG_QUESTGIVER=1,a.UNIT_NPC_FLAG_UNK1=2,a.UNIT_NPC_FLAG_UNK2=3,a.UNIT_NPC_FLAG_TRAINER=4,a.UNIT_NPC_FLAG_TRAINER_CLASS=5,a.UNIT_NPC_FLAG_TRAINER_PROFESSION=6,a.UNIT_NPC_FLAG_VENDOR=7,a.UNIT_NPC_FLAG_VENDOR_PROP=8,a.UNIT_NPC_FLAG_VENDOR_WEAPON=9,a.UNIT_NPC_FLAG_VENDOR_POISON=10,a.UNIT_NPC_FLAG_VENDOR_REAGENT=11,a.UNIT_NPC_FLAG_VENDOR_EQUIPMENT=12,a.UNIT_NPC_FLAG_FLIGHTMASTER=13,a.UNIT_NPC_FLAG_SPIRITHEALER=14,a.UNIT_NPC_FLAG_SPIRITGUIDE=15,a.UNIT_NPC_FLAG_INNKEEPER=16,a.UNIT_NPC_FLAG_WAREHOUSE=17,a.UNIT_NPC_FLAG_PETITIONER=18,a.UNIT_NPC_FLAG_TABARDDESIGNER=19,a.UNIT_NPC_FLAG_BATTLEMASTER=20,a.UNIT_NPC_FLAG_AUCTIONEER=21,a.UNIT_NPC_FLAG_STABLEMASTER=22,a.UNIT_NPC_FLAG_GUILD_BANKER=23,a.UNIT_NPC_FLAG_CHALLENGE=24,a.UNIT_NPC_FLAG_ONE_ONE=25,a.BUFF_ONEPOINTFIVE_JINGYAN=101,a.BUFF_TOW_JINGYAN=102,a.BUFF_THREE_JINGYAN=103,a.BUFF_FIVE_JINGYAN=104,a.BUFF_FANTAN=105,a.BUFF_LIANJIE=106,a.BUFF_BEILIANJIE=107,a.BUFF_GANGCI=108,a.BUFF_DINGSHEN=109,a.BUFF_YUNXUAN=110,a.BUFF_YUNMIE_ELING=111,a.BUFF_HUIFU_HUDUN=112,a.BUFF_FANJI_HUDUN=113,a.BUFF_LINGXUE=114,a.BUFF_ZHUOSHAO=115,a.BUFF_JUDU=116,a.BUFF_ZHONGDU=117,a.BUFF_BINGJIA=118,a.BUFF_BINGDONG=119,a.BUFF_BAOZHA_DILEI=120,a.BUFF_SHOUWEI_ZHAOHUAN=121,a.BUFF_BIAOJI=122,a.BUFF_KUANGBAO=123,a.BUFF_JIANSU=124,a.BUFF_CHENMO=125,a.BUFF_XUECHI=126,a.BUFF_WAIGONGMIANYI=127,a.BUFF_NEIGONGMIAN=128,a.BUFF_WUDI=129,a.BUFF_ZHANSHEN_FUTI=130,a.BUFF_JINGANG_BUHUAITI=131,a.BUFF_KUANGBEN=132,a.BUFF_HUOBA=133,a.BUFF_LINGTI=134,a.BUFF_HUANHUA_ZHU=135,a.BUFF_HUANHUA_REN=136,a.BUFF_HUANHUA_GUI=137,a.BUFF_HUANHUA_XIAN=138,a.BUFF_HUANHUA_XIULUO=139,a.BUFF_XIULUOLI=140,a.BUFF_ZHENYING=141,a.BUFF_ZHANDOU_STATE=142,a.BUFF_JUMP_DOWN=144,a.BUFF_ANXIANG_SHUYING=145,a.BUFF_ZHIKONG=146,a.BUFF_FUKONG=147,a.BUFF_JUMP_JUMP=143,a.BUFF_NEW_PLAYER_PROTECTED=148,a.BUFF_DEATH_PROTECTED=149,a.BUFF_INVINCIBLE=150,a.BUFF_INVISIBLE=151,a.BUFF_YINCHANG=152,a.BUFF_ROAR=153,a.BUFF_HEAL=200,a.BUFF_ATTACK=201,a.BUFF_ARMOR=202,a.BUFF_CRIT=203,a.BUFF_ALLATTR=204,a.BUFF_DEFAULT_EFFECT_ID_JUMP_JUMP=1,a.BUFF_DEFAULT_EFFECT_ID_NEW_PLAYER_PROTECTED=2,a.BUFF_DEFAULT_EFFECT_ID_DEATH_PROTECTED=3,a.MAX_2JI_SHIJIAN_UINT32=20,a.MAX_HONGYAN_DATI_COUNT=10,a.HONGYAN_JIESHI_MEIREN=0,a.HONGYAN_DIANZAN=1,a.HONGYAN_PINGJIA=2,a.HONGYAN_SHIZHUANG_JIHUO=3,a.HONGYAN_SHIZHUANG_CHUANDAI=4,a.HONGYAN_XIANGCE_JIHUO=5,a.HONGYAN_SHIJIAN_CHULI=6,a.HONGYAN_CHUYOU=7,a.HONGYAN_HUIFU_HUOLI=8,a.HONGYAN_ADD_NEIWU_SHIJIAN=9,a.HONGYAN_PLAYER_ATTRS_XIAYI=0,a.HONGYAN_PLAYER_ATTRS_FENGLIU=1,a.HONGYAN_PLAYER_ATTRS_MINGSHENG=2,a.HONGYAN_PLAYER_ATTRS_WENTAO=3,a.HONGYAN_PLAYER_ATTRS_WULUE=4,a.HONGYAN_PLAYER_ATTRS_CAIYI=5,a.HONGYAN_PLAYER_ATTRS_QINHE=6,a.HONGYAN_PLAYER_ATTRS_LIYI=7,a.HONGYAN_PLAYER_ATTRS_XIANGMAO=8,a.HONGYAN_PLAYER_ATTRS_HUOLI=9,a.MAX_PLAYER_ATTRS=10,a.HONGYAN_MEIREN_ATTRS_JIESHI_BIT=0,a.HONGYAN_MEIREN_ATTRS_XINGGE_BIT=1,a.HONGYAN_MEIREN_ATTRS_AIHAO_BIT=2,a.HONGYAN_MEIREN_ATTRS_CHANGJING_BIT=3,a.HONGYAN_MEIREN_ATTRS_SHIZHUANG_BIT=4,a.HONGYAN_MEIREN_QINMIDU_UINT16=5,a.HONGYAN_MEIREN_XIANGCE_BIT=6,a.MAX_MEIREN_ATTRS_TYPE=7,a.HONGYAN_MEIREN_DIANZAN=0,a.HONGYAN_MEIREN_MEIHAO=1,a.HONGYAN_MEIREN_JIESHI_COUNT=2,a.MAX_MEIREN_RENQI_TYPE=3,a.HONGYAN_CAIXUE=0,a.HONGYAN_ZHENFEI=1,a.HONGYAN_YANLIN=2,a.HONGYAN_MURONGYANYAN=3,a.HONGYAN_YAORU=4,a.HONGYAN_XIANGJING=5,a.HONGYAN_HENGXIAOZHUO=6,a.HONGYAN_LIJI=7,a.HONGYAN_SIQI=8,a.HONGYAN_YOUYOU=9,a.HONGYAN_LINCHUER=10,a.HONGYAN_WANYAN_YUNNA=11,a.HONGYAN_QUANHUIQIAO=12,a.HONGYAN_TUOBALVZHU=13,a.HONGYAN_QINGYAN=14,a.HONGYAN_SUOMOER=15,a.HONGYAN_GUQIANQIAN=16,a.HONGYAN_AYIGULI=17,a.HONGYAN_ZUOYUYI=18,a.HONGYAN_ZILUO=19,a.HONGYAN_QUNUO=20,a.HONGYAN_XUANYING=21,a.MAX_MEIREN=32,a.GM_COMMAND_NULL=0,a.GM_COMMAND_JIULONGCHAO=1,a.GM_COMMAND_SUCAI=2,a.GM_COMMAND_JIAOBEN=3,a.GM_COMMAND_TI=4,a.GM_COMMAND_ZAIXIAN=5,a.GM_COMMAND_DITURENSHU=6,a.GM_COMMAND_ZHAOCAI=7,a.GM_COMMAND_ZHIZAO=8,a.GM_COMMAND_QINGLI=9,a.GM_COMMAND_ZHUANGBEI=10,a.GM_COMMAND_PAIHANGBANG=12,a.GM_COMMAND_YOUJIAN=13,a.GM_COMMAND_BENGDIAO=15,a.GM_COMMAND_BANGZHU=16,a.GM_COMMAND_GONGGAO=17,a.GM_COMMAND_SHIJIETISHI=18,a.GM_COMMAND_PAIDUI=19,a.GM_COMMAND_PINGBICI=20,a.GM_COMMAND_GUANBIFUWUQI=21,a.GM_COMMAND_CHONGZHI=22,a.GM_COMMAND_GUANBIDITU=23,a.GM_COMMAND_DENGJI=24,a.GM_COMMAND_QINGLIRENWUWUPIN=25,a.GM_COMMAND_QINGLIRENWU=26,a.GM_COMMAND_WANCHENGRENWU=27,a.GM_COMMAND_JIESHOURENWU=28,a.GM_COMMAND_GANDIAO=29,a.GM_COMMAND_SHUAGUAI=30,a.GM_COMMAND_CHUANSONG=31,a.GM_COMMAND_XIAZOU=32,a.GM_COMMAND_SUICIDE=33,a.GM_COMMAND_SERVER_INFO=34,a.GM_COMMAND_DB=35,a.GM_COMMAND_KAIFUSHIJIAN=36,a.GM_COMMAND_TEST_SHUJU=37,a.GM_COMMAND_UPDATE_SERVER=38,a.GM_COMMAND_RESESSION_OPTS=39,a.GM_COMMAND_RENWUTIAOZHUAN=40,a.GM_COMMAND_BACKUP_DATA=41,a.GM_COMMAND_RETURN_DATA=42,a.GM_COMMAND_PRINT_OBJECT=43,a.GM_COMMAND_TEST_HEFU=44,a.GM_COMMAND_CLEAR_PAIHANGBANG=45,a.GM_COMMAND_MEMORY_RECOVERY=46,a.GM_COMMAND_PRINT_MAP=47,a.GM_COMMAND_DEL_MAP_INFO=48,a.GM_COMMAND_RESTORE_SYSTEM=49,a.GM_COMMAND_CALL_REMOVE_ITEM=50,a.GM_COMMAND_SUBLINE=51,a.GM_COMMAND_CUSTOM=52,a.GM_COMMAND_VIP=53,a.GM_COMMAND_SELF_KILL=54,a.QUERY_PLAYER_FLAG_BASE=0,a.QUERY_PLAYER_FLAG_NAME=1,a.QUERY_PLAYER_FLAG_EQUIP=2,a.QUERY_PLAYER_FLAG_PIFENG=3,a.QUERY_PLAYER_FLAG_FORCE=4,a.QUERY_PLAYER_FLAG_OTHER=5,a.QUERY_PLAYER_FLAG_MOUNT=20,a.QUERY_PLAYER_FLAG_EQUIP_BAG=21,a.QUERY_PLAYER_FLAG_MAIN_BAG=22,a.QUERY_PLAYER_FLAG_STORAGE_BAG=23,a.QUERY_PLAYER_FLAG_STALL_BAG=24,a.QUEST_TYPE_MAIN=0,a.QUEST_TYPE_EXTENSIONS=1,a.QUEST_TYPE_ACTIVITY=2,a.QUEST_TYPE_QIYU=3,a.QUEST_TYPE_DAILY=4,a.QUEST_TYPE_DAILY2=5,a.QUEST_TARGET_TYPE_PLAYER_LEVEL=1,a.QUEST_TARGET_TYPE_PLAYER_FORCE=2,a.QUEST_TARGET_TYPE_FACTION=3,a.QUEST_TARGET_TYPE_FACTION_DONATION=4,a.QUEST_TARGET_TYPE_FACTION_ACTIVITY=5,a.QUEST_TARGET_TYPE_FIELD_BOSS=6,a.QUEST_TARGET_TYPE_WORLD_BOSS=7,a.QUEST_TARGET_TYPE_RESOURCE_INSTANCE=8,a.QUEST_TARGET_TYPE_TRIAL_INSTANCE=9,a.QUEST_TARGET_TYPE_OWN_DIVINE=10,a.QUEST_TARGET_TYPE_EQUIP_DIVINE=11,a.QUEST_TARGET_TYPE_STRENGTH_DIVINE=12,a.QUEST_TARGET_TYPE_RAISE_SKILL=13,a.QUEST_TARGET_TYPE_TRAIN_MOUNT=14,a.QUEST_TARGET_TYPE_RAISE_MOUNT_SKILL=15,a.QUEST_TARGET_TYPE_FRIEND_DONATION=16,a.QUEST_TARGET_TYPE_STRENGTH_SUIT=17,a.QUEST_TARGET_TYPE_STRENGTH_GEM=18,a.QUEST_TARGET_TYPE_TALK=19,a.QUEST_TARGET_TYPE_PICK_GAME_OBJECT=20,a.QUEST_TARGET_TYPE_CHECK_GAME_OBJECT=21,a.QUEST_TARGET_TYPE_KILL_MONSTER=22,a.QUEST_TARGET_TYPE_USE_ITEM=23,a.QUEST_TARGET_TYPE_SUIT=24,a.QUEST_TARGET_TYPE_MOUNT_LEVEL=25,a.QUEST_TARGET_TYPE_FRIEND_NUM=26,a.QUEST_TARGET_TYPE_KILL_MONSTER_NUM=27,a.QUEST_TARGET_TYPE_DIVINE_NUM=28,a.QUEST_TARGET_TYPE_DIVINE_LEV=29,a.QUEST_TARGET_TYPE_DOUJIANTAI=30,a.QUEST_TARGET_TYPE_TITLE_NUMBER=31,a.QUEST_TARGET_TYPE_FASHION_NUMBER=32,a.QUEST_TARGET_TYPE_ACHIEVE=40,a.QUEST_TARGET_TYPE_SUIT_TITLE=41,a.QUEST_TARGET_TYPE_SUIT_FASHION=42,a.QUEST_TARGET_TYPE_JOIN_DOUJIANTAI=43,a.QUEST_TARGET_TYPE_JOIN_KUAFU_3V3=44,a.QUEST_TARGET_TYPE_WIN_KUAFU_3V3=45,a.QUEST_TARGET_TYPE_JOIN_XIANFU=46,a.QUEST_TARGET_TYPE_WIN_XIANFU=47,a.QUEST_TARGET_TYPE_KILL_MONSTER_COLLECT=48,a.QUEST_TARGET_TYPE_TURN_ITEM_IN=49,a.QUEST_TARGET_TYPE_PASS_WORLD_RISK=50,a.QUEST_TARGET_TYPE_SMELT=51,a.QUEST_TARGET_TYPE_CONTRIBUTE_TIMES=52,a.QUEST_TARGET_TYPE_CONTRIBUTE_TOTAL_TIMES=53,a.QUEST_TARGET_TYPE_CONTRIBUTE_CHARM=54,a.QUEST_TARGET_TYPE_CONTRIBUTE_ITEM=55,a.QUEST_TARGET_TYPE_LOOT_ITEM=56,a.QUEST_TARGET_TYPE_SINGLE_THX_TIMES=57,a.QUEST_TARGET_TYPE_TOTAL_THX_TIMES=58,a.QUEST_TARGET_TYPE_WINGS_UPGRADE_LEVEL=59,a.QUEST_TARGET_TYPE_WINGS_UPDRADE_TIMES=60,a.QUEST_TARGET_TYPE_WINGS_STRENGTH_LEVEL=61,a.QUEST_TARGET_TYPE_WINGS_STRENGTH_TIMES=62,a.QUEST_TARGET_TYPE_TALISMAN_LEVEL=63,a.QUEST_TARGET_TYPE_MOUNT_STRENGTH_LEVEL=64,a.QUEST_TARGET_TYPE_REFINE_SUIT=65,a.QUEST_TARGET_TYPE_WASH_SUIT=66,a.QUEST_TARGET_TYPE_MERIDIAN_LEVEL=67,a.QUEST_TARGET_TYPE_JOIN_SINGLE_PVP=68,a.QUEST_TARGET_TYPE_SINGLE_PVP_WINS=69,a.QUEST_TARGET_TYPE_ACTIVE_TASK=70,a.QUEST_TARGET_TYPE_DAILY_TASK=71,a.QUEST_TARGET_TYPE_GEM_TOTAL_LEVEL=72,a.CURRENCY_HANDLE_TYPE_ADD=0,a.CURRENCY_HANDLE_TYPE_SUB=1,a.SPELL_VALID_TIME_POTIAN_2=0,a.SPELL_VALID_TIME_POTIAN_3=1,a.SPELL_VALID_TIME_YUNFEI_2=2,a.SPELL_VALID_TIME_YUNFEI_3=3,a.SPELL_VALID_TIME_FENGFAN_2=4,a.SPELL_VALID_TIME_ZHUXIAN_2=5,a.SPELL_VALID_TIME_ZHUXIAN_3=6,a.MAX_SPELL_VALID=15,a.MAX_SPELL_SLOT=6,a.NOMAL_ATTACK_TIME=1300,a.NOMAL_MOVE_SPEED=130,a.MAX_ITEM_SPELL=3,a.MAX_BASE_ATTR_FIELD_COUNT=15,a.MAX_BUFF=50,a.MAX_UNIT_BUFF=16,a.EQUIPMENT_TYPE_OTHER=0,a.EQUIPMENT_TYPE_MAIN_WEAPON=1,a.EQUIPMENT_TYPE_COAT=2,a.EQUIPMENT_TYPE_LEG=3,a.EQUIPMENT_TYPE_BELT=4,a.EQUIPMENT_TYPE_SHOES=5,a.EQUIPMENT_TYPE_HELMET=6,a.EQUIPMENT_TYPE_NECKLACE=7,a.EQUIPMENT_TYPE_PANTS=8,a.EQUIPMENT_TYPE_LRING=9,a.EQUIPMENT_TYPE_BRACELET=10,a.EQUIPMENT_TYPE_CLOAK=11,a.EQUIPMENT_TYPE_RRING=12,a.EQUIPMENT_TYPE_FASHION=13,a.EQUIPMENT_TYPE_RESERVE3=14,a.EQUIPMENT_TYPE_RESERVE4=15,a.EQUIPMENT_TYPE_RESERVE5=16,a.EQUIPMENT_TYPE_RESERVE6=17,a.EQUIPMENT_TYPE_RESERVE7=18,a.EQUIPMENT_TYPE_RESERVE8=19,a.EQUIPMENT_TYPE_MAX_POS=20,a.FASHION_TYPE_MAIN_WEAPON=20,a.FASHION_TYPE_HELMET=21,a.FASHION_TYPE_COAT=22,a.FASHION_TYPE_BELT=23,a.FASHION_TYPE_LEG=24,a.FASHION_TYPE_PANTS=25,a.FASHION_TYPE_SHOES=26,a.FASHION_TYPE_BRACELET=27,a.FASHION_TYPE_NECKLACE=28,a.FASHION_TYPE_RING=29,a.FASHION_TYPE_CLOAK=30,a.FASHION_TYPE_RESERVE1=31,a.FASHION_TYPE_RESERVE2=32,a.FASHION_TYPE_RESERVE3=33,a.FASHION_TYPE_RESERVE4=34,a.FASHION_TYPE_RESERVE5=35,a.FASHION_TYPE_RESERVE6=36,a.FASHION_TYPE_RESERVE7=37,a.FASHION_TYPE_RESERVE8=38,a.FASHION_TYPE_RESERVE9=39,a.MAX_EQUIPMENT_TYPE=40,a.WEAPON_POS_MAIN=0,a.WEAPON_POS_OFF=1,a.WEAPON_POS_SINGLE_HAND=2,a.WEAPON_POS_BOTH_HANDS=3,a.MAX_WEAPON_POS=4,a.POWER_MANA=0,a.POWER_ENERGY=1,a.MAX_POWERS=2,a.COMBAT_RATE_CRIT=0,a.COMBAT_RATE_EVA=1,a.MAX_COMBAT_RATE=2,a.BAG_TYPE_MAIN_BAG=0,a.BAG_TYPE_EQUIP=1,a.BAG_TYPE_EQUIP_BAG=2,a.BAG_TYPE_GEM=3,a.BAG_TYPE_GEM_BAG=4,a.MAX_BAG=20,a.BAG_EXTENSION_TYPE_AUTO=0,a.BAG_EXTENSION_TYPE_GOLD=1,a.SAFETY_CODE_MODIFY_TYPE_CODE=0,a.SAFETY_CODE_MODIFY_TYPE_QUESTION=1,a.Item_Loot_Gold_Ingot=1,a.Item_Loot_Bind_Gold=2,a.Item_Loot_Silver=3,a.Item_Loot_Renown=5,a.Item_Loot_Honor=6,a.Item_Loot_Exploit=7,a.Item_Loot_Contrib=8,a.Item_Loot_Exp=104,a.Item_Loot_Mount_Exp=10,a.Item_Loot_QI=13,a.Item_Loot_BEAST=14,a.Item_Loot_GEM=15,a.MONEY_TYPE_GOLD_INGOT=1,a.MONEY_TYPE_BIND_GOLD=2,a.MONEY_TYPE_SILVER=3,a.MONEY_TYPE_SILVER_WAREHOUSE=4,a.MAX_MONEY_TYPE=22,a.BASE_ATTR_HP=0,a.BASE_ATTR_DAMAGE=1,a.BASE_ATTR_ARMOR=2,a.BASE_ATTR_HIT=3,a.BASE_ATTR_DODGE=4,a.BASE_ATTR_CRIT=5,a.BASE_ATTR_CRIT_RESIST=6,a.BASE_MOVE_SPEED=7,a.BASE_ATTACK_SPEED=8,a.MAX_BASE_ATTR=9,a.EQUIP_ATTR_NONE=0,a.EQUIP_ATTR_MAX_HEALTH=1,a.EQUIP_ATTR_DAMAGE=2,a.EQUIP_ATTR_ARMOR=3,a.EQUIP_ATTR_HIT=4,a.EQUIP_ATTR_MISS=5,a.EQUIP_ATTR_CRIT=6,a.EQUIP_ATTR_TOUGH=7,a.EQUIP_ATTR_ATTACK_SPEED=8,a.EQUIP_ATTR_MOVE_SPEED=9,a.EQUIP_ATTR_IGNORE_ARMOR=10,a.EQUIP_ATTR_IGNORE_MISS=11,a.EQUIP_ATTR_RECOVERY=12,a.EQUIP_ATTR_DAMAGE_AMPLIFY_RATE=13,a.EQUIP_ATTR_DAMAGE_RESIST_RATE=14,a.EQUIP_ATTR_DAMAGE_RETURN_RATE=15,a.EQUIP_ATTR_VAMPIRIC_RATE=16,a.EQUIP_ATTR_RECOVERY_RATE=17,a.EQUIP_ATTR_CRIT_RATE=18,a.EQUIP_ATTR_CRIT_RESIST_RATE=19,a.EQUIP_ATTR_CRIT_DAM_RATE=20,a.EQUIP_ATTR_CRIT_RESIST_DAM_RATE=21,a.EQUIP_ATTR_HIT_RATE=22,a.EQUIP_ATTR_MISS_RATE=23,a.EQUIP_ATTR_STUN_RATE=24,a.EQUIP_ATTR_ROOTS_RATE=25,a.EQUIP_ATTR_SILENCE_RATE=26,a.EQUIP_ATTR_CHAOS_RATE=27,a.EQUIP_ATTR_CHARM_RATE=28,a.EQUIP_ATTR_CONTROL_ENHANCE_RATE=29,a.EQUIP_ATTR_CONTROL_RESIST_RATE=30,a.MAX_EQUIP_ATTR=31,a.ITEM_OTHER_ATTR_FAIL_TIME=31,a.ITEM_OTHER_ATTR_STRONG_LV=32,a.ITEM_OTHER_ATTR_STRONG_FAIL_COUNT=33,a.ITEM_OTHER_ATTR_FORCE=34,a.SPELL_CD_BASE=0,a.SPELL_CD_SPECIAL=1,a.MAX_SPELL_CD_TYPE=2,a.QUEST_ID_OFFSET=0,a.QUEST_STATE_OFFSET=1,a.QUEST_COUNTS_OFFSET=2,a.QUEST_COUNTS_OFFSET_1=3,a.QUEST_COUNTS_OFFSET_2=4,a.QUEST_COUNTS_OFFSET_3=5,a.QUEST_TIME_OFFSET=6,a.QUEST_FLAG_OFFSET=7,a.MAX_QUEST_OFFSET=8,a.QUEST_SLOT_FLAGS_REWARD=0,a.QUEST_SLOT_FLAGS_EXPLORE=1,a.MAX_QUEST_LOG_SIZE=32,a.QUEST_OBJECTIVES_COUNT=8,a.QUEST_REWARD_CHOICES_COUNT=6,a.QUEST_REWARDS_COUNT=4,a.QUEST_LOW_LEVEL_HIDE_DIFF=4,a.QUEST_ITEMS_COUNTS=10,a.QUEST_COMPLETE_LIST=200,a.BINLOG_STRING_FIELD_GUID=0,a.BINLOG_STRING_FIELD_NAME=1,a.BINLOG_STRING_FIELD_VERSION=2,a.BINLOG_STRING_FIELD_OWNER=3,a.LOOT_PUBLIC_INT_START_POS=0,a.LOOT_PUBLIC_INT_END_POS=1,a.LOOT_PUBLIC_INT_BEGIN=2,a.LOOT_PUBLIC_INT_ENTRY=0,a.LOOT_PUBLIC_INT_MONEY_SUM=1,a.MAX_LOOT_PUBLIC_INT_FIELD=2,a.LOOT_PUBLIC_STR_OWNER=0,a.MAX_LOOT_PUBLIC_STR_FIELD=1,a.LOOT_PRIVATE_INT_FAIL_TIME=0,a.LOOT_PRIVATE_INT_EXIST_TIME=1,a.LOOT_PRIVATE_INT_OWNER_TIME=2,a.LOOT_PRIVATE_INT_FLAG=3,a.MAX_LOOT_PRIVATE_INT_FIELD=4,a.LOOT_PRIVATE_STRING_CREATE_BY=0,a.LOOT_PRIVATE_STRING_CREATE_NAME=1,a.MAX_LOOT_PRIVATE_STRING=2,a.LOOT_STR_FIELD_BEGIN=4,a.LOOT_FLAG_GET_ITEM_NOTICE=0,a.LOOT_FLAG_ITEM_BIND=1,a.PLAYER_PASSIVE_SPELL_MAX_COUNT=100,a.UNIT_CANDO_OFFSET_TYPE_CANT_CAST=0,a.UNIT_CANDO_OFFSET_TYPE_CANT_MOVE=1,a.UNIT_FIELD_BYTE_0=0,a.UNIT_FIELD_BYTE_1=1,a.UNIT_FIELD_BYTE_2=2,a.UNIT_FIELD_BYTE_3=3,a.UNIT_FIELD_BYTE_4=4,a.UNIT_FIELD_MOUNT_LEVEL=5,a.UNIT_FIELD_DIVINE_ID=6,a.UNIT_FIELD_UINT16_0=7,a.UNIT_FIELD_UINT16_1=8,a.UNIT_FIELD_UINT16_2=9,a.UNIT_FIELD_SELF_DEFENSE_GUID=10,a.UNIT_FIELD_FLAGS=11,a.GO_FIELD_FLAGS=12,a.GO_FIELD_DATA=13,a.UNIT_FIELD_NPC_FLAG=17,a.UNIT_FIELD_INSTANCE_ID=18,a.UNIT_FIELD_EQUIPMENT_COAT=19,a.UNIT_FIELD_EQUIPMENT_MAIN_WEAPON=20,a.UNIT_FIELD_BUFF=21,a.UNIT_FIELD_BUFF_TM=29,a.UNIT_FIELD_BUFF_RESERVE=37,a.UNIT_FIELD_BUFF_EFFECT_ID=53,a.UNIT_FIELD_BUFF_CASTER_GUID=69,a.UNIT_FIELD_FORCE=85,a.UNIT_FIELD_HEALTH=87,a.UNIT_FIELD_MAX_HEALTH=88,a.UNIT_FIELD_DAMAGE=89,a.UNIT_FIELD_ARMOR=90,a.UNIT_FIELD_HIT=91,a.UNIT_FIELD_MISS=92,a.UNIT_FIELD_CRIT=93,a.UNIT_FIELD_TOUGH=94,a.UNIT_FIELD_ATTACK_SPEED=95,a.UNIT_FIELD_MOVE_SPEED=96,a.UNIT_FIELD_IGNORE_ARMOR=97,a.UNIT_FIELD_IGNORE_MISS=98,a.UNIT_FIELD_RECOVERY=99,a.UNIT_FIELD_DAMAGE_AMPLIFY_RATE=100,a.UNIT_FIELD_DAMAGE_RESIST_RATE=101,a.UNIT_FIELD_DAMAGE_RETURN_RATE=102,a.UNIT_FIELD_VAMPIRIC_RATE=103,a.UNIT_FIELD_RECOVERY_RATE=104,a.UNIT_FIELD_CRIT_RATE=105,a.UNIT_FIELD_CRIT_RESIST_RATE=106,a.UNIT_FIELD_CRIT_DAM_RATE=107,a.UNIT_FIELD_CRIT_RESIST_DAM_RATE=108,a.UNIT_FIELD_HIT_RATE=109,a.UNIT_FIELD_MISS_RATE=110,a.UNIT_FIELD_STUN_RATE=111,a.UNIT_FIELD_ROOTS_RATE=112,a.UNIT_FIELD_SILENCE_RATE=113,a.UNIT_FIELD_CHAOS_RATE=114,a.UNIT_FIELD_CHARM_RATE=115,a.UNIT_FIELD_CONTROL_ENHANCE_RATE=116,a.UNIT_FIELD_CONTROL_RESIST_RATE=117,a.UNIT_FIELD_ANGER=118,a.UNIT_FIELD_USE_RESPAWN_MAPID=119,a.UNIT_FIELD_PROCESS_TIME=120,a.UNIT_FIELD_PROCESS_SECONDS=121,a.UINT_FIELD_BOSS_DATA=122,a.UINT_FIELD_BOSS_DATA1=123,a.UINT_FIELD_VIEW_MODE=123,a.UINT_FIELD_VIRTUAL_CAMP=124,a.UINT_FIELD_XIANFU_INFO=125,a.UINT_FIELD_VIP_LEVEL=126,a.UINT_FIELD_VIP_TIME_OUT=127,a.UINT_FIELD_VAMPIRIC=128,a.UINT_INT_FIELD_ILLUSION=130,a.UINT_FIELD_BOOS_CUR_SPELLID=131,a.UINT_FIELD_BOOS_CUR_SPELL_TIME=132,a.UINT_FIELD_BOOS_CUR_SPELL_LAST_COUNT=133,a.UINT_INT_FIELD_PASSIVE_SPELL_START=134,a.UINT_INT_FIELD_PASSIVE_SPELL_END=234,a.UINT_INT_FIELD_WINGS_RANK=234,a.UNIT_INT_FIELD_APPEARANCE=235,a.MAX_UNIT_FIELD=236,a.GO_STRING_FIELD_CREATED_BY=4,a.UNIT_STRING_FIELD_ALIAS_NAME=5,a.UNIT_STRING_FIELD_PICK_NAME=6,a.UNIT_STRING_FIELD_GROUP_PEACE_ID=7,a.UNIT_STRING_FIELD_FACTION_GUID=8,a.MAX_UNIT_STRING_FIELD=9,a.GO_ENTRY_TELETEPORT=1,a.GO_ENTRY_LOOT=9,a.GO_TELETEPORTER_TO_MAPID=13,a.GO_TELETEPORTER_TO_X=14,a.GO_TELETEPORTER_TO_Y=15,a.GO_QUEST_ID_0=13,a.GO_QUEST_ID_1=14,a.GO_QUEST_ID_2=15,a.GO_QUEST_ID_3=16,a.GO_STRING_FIELD_CREATED_NAME=5,a.GO_GEAR_STATUS=13,a.GO_GEAR_KILLER=14,a.GO_GEAR_STATUS_START=1,a.GO_GEAR_STATUS_OPEN=2,a.GO_GEAR_STATUS_CLOSE=3,a.GO_GEAR_STATUS_END=4,
a.UNIT_FIELD_FLAGS_CANT_CAST=0,a.UNIT_FIELD_FLAGS_CANT_MOVE=1,a.UNIT_FIELD_FLAGS_BUFF_DAZUO=2,a.UNIT_FIELD_FLAGS_GUAJIBAOHU=3,a.UNIT_FIELD_FLAGS_FACTION_LINGXIU=4,a.UNIT_FIELD_FLAGS_FACTION_GUWU=5,a.UNIT_FIELD_FLAGS_IS_BOSS_CREATURE=6,a.UNIT_FIELD_FLAGS_USE_GAMEOBJECT=7,a.UNIT_FIELD_FLAGS_IS_FLZ_PUB_CREATURE=8,a.UNIT_FIELD_FLAGS_QUEST_FOLLOW_CREATUR=9,a.UNIT_FIELD_FLAGS_IS_PVP=10,a.UNIT_FIELD_FLAGS_IS_FIELD_BOSS_CREATURE=11,a.PLAYER_SCENED_FLAS_HUNG_UP=0,a.PLAYER_SCENED_FLAS_PVP_STATE=1,a.PLAYER_SCENED_FLAGS_FUBEN_HUNG_UP=2,a.PLAYER_APPD_INT_FIELD_FLAGS_IS_ZIBAO=0,a.PLAYER_APPD_INT_FIELD_FLAGS_YEYOU_ONLINE=1,a.PLAYER_APPD_INT_FIELD_FLAGS_PHONE_ONLINE=2,a.PLAYER_APPD_INT_FIELD_FLAGS_FROM_KUAFU=3,a.PLAYER_APPD_INT_FIELD_FLAGS_GIFT_CREATE=4,a.PLAYER_APPD_INT_FIELD_FLAGS_LIMIT_CREATE=5,a.PLAYER_APPD_INT_FIELD_FLAGS_IS_FIRST_RECHARGE=6,a.PLAYER_APPD_INT_FIELD_FLAGS_NEW_PLAYER=7,a.PLAYER_APPD_INT_FIELD_FLAGS_SAFETY_CODE_CHECK=8,a.PLAYER_APPD_INT_FIELD_FLAGS_AUTO_GROUP=9,a.PLAYER_APPD_INT_FIELD_FLAGS_IS_HOSTING_LOGIN=10,a.PLAYER_APPD_INT_FIELD_FLAGS_IS_HOSTING_APPLY=11,a.PLAYER_APPD_INT_FIELD_FLAGS_SOCIAL_CREATE=12,a.PLAYER_APPD_INT_FIELD_FLAGS_ITEM_CREATE=13,a.PLAYER_APPD_INT_FIELD_FLAGS_LOGICAL_CREATE=14,a.PLAYER_APPD_INT_FIELD_FLAGS_SPELL_CREATE=15,a.PLAYER_APPD_INT_FIELD_FLAGS_INSTANCE_CREATE=16,a.PLAYER_APPD_INT_FIELD_FLAGS_QUEST_CREATE=17,a.QIANLI_TYPE_LILIANG=0,a.QIANLI_TYPE_TIZHI=1,a.QIANLI_TYPE_SHENFA=2,a.QIANLI_TYPE_FANGYU=3,a.MAX_QIANLI_TYPE=4,a.MAX_CLIENT_UINT32_COUNT=100,a.MAX_CLIENT_STRING_COUNT=20,a.MAX_ITEMS_CD_COUNT=20,a.MAX_ITEM_USED_COUNT=5,a.MAX_SPELL_CAPACITY=20,a.SPELL_BASE_LEVEL=0,a.SPELL_BASE_FORCE=1,a.SPELL_BASE_ID=2,a.MAX_SPELLBASE=3,a.FUNCTIONAL_QING_GONG=1,a.FUNCTIONAL_TI_YUN_ZONG=2,a.FUNCTIONAL_RIDE=3,a.FUNCTIONAL_DA_ZUO=4,a.PLAYER_SLOT_SPELL_MAX_COUNT=12,a.PLAYER_IMPORTANT_CD_COUNT=20,a.SHORT_SLOT_SPELL_ID=0,a.BYTE_SLOT_SPELL_LV=2,a.BYTE_SLOT=3,a.SPELL_ACTIVE_BY_LEVEL=0,a.SPELL_ACTIVE_BY_QUEST=1,a.SPELL_ACTIVE_BY_ITEM=2,a.IMPORTANT_SPELL_ID=0,a.IMPORTANT_SPELL_CD=1,a.MAX_IMPORTANT_SPELL_ATTR_COUNT=2,a.OPEN_MENU_MAIN_ID=0,a.OPEN_MENU_SUB_FLAG=1,a.MAX_OPEN_MENU_ATTR_COUNT=2,a.GIFT_PACKS_TYPE_ITEM_GIVE=0,a.GIFT_PACKS_TYPE_SYSTEM_COMPENSATION=1,a.GIFT_PACKS_TYPE_BAG_FULL=2,a.GIFT_PACKS_TYPE_LEVEL_RANK=3,a.GIFT_PACKS_TYPE_WORLD_BOSS=4,a.GIFT_PACKS_TYPE_3V3_WEEK=5,a.GIFT_PACKS_TYPE_3V3_MONTH=6,a.GIFT_PACKS_TYPE_DOUJIAN_DAY=7,a.GIFT_PACKS_TYPE_FACTION_BOSS=8,a.GIFT_PACKS_TYPE_FACTION_GIFT_RANK=9,a.GIFT_PACKS_TYPE_ACT_RANK=10,a.SCENED_APPD_ENTER_DAILY_INSTANCE=1,a.SCENED_APPD_ENTER_VIP_INSTANCE=2,a.SCENED_APPD_USE_ITEM=3,a.SCENED_APPD_USE_RESPAWN_ITEM=4,a.SCENED_APPD_ENTER_TRIAL_INSTANCE=5,a.SCENED_APPD_PASS_TRIAL_INSTANCE=6,a.SCENED_APPD_PASS_VIP_INSTANCE=7,a.SCENED_APPD_ADD_ENEMY=8,a.SCENED_APPD_ENTER_RES_INSTANCE=9,a.SCENED_APPD_ADD_MAIL=10,a.SCENED_APPD_PASS_RES_INSTANCE=11,a.SCENED_APPD_KILL_MONSTER=12,a.SCENED_APPD_JOIN_FIELD_BOSS=13,a.SCENED_APPD_GAMEOBJECT=14,a.SCENED_APPD_TALK=15,a.SCENED_APPD_RIDE=16,a.SCENED_APPD_GOLD_RESPAWN=17,a.SCENED_APPD_DOUJIANTAI=18,a.SCENED_APPD_KILL_MONSTER_COLLECT=19,a.SCENED_APPD_XIULIANCHANG=20,a.SCENED_APPD_XIANFU_PRACTISE=21,a.SCENED_APPD_ADD_OFFLINE_RISK_REWARD=22,a.SCENED_APPD_PASS_WORLD_RISK=23,a.SCENED_APPD_ENTER_MASS_BOSS_INSTANCE=24,a.SCENED_APPD_FACTION_TOWER_WIN=25,a.SCENED_APPD_SINGLE_PVP_RESULT=26,a.SCENED_APPD_ENTER_QUALIFY_INSTANCE=27,a.APPD_SCENED_SWEEP_TRIAL_INSTANCE=1,a.APPD_SCENED_SWEEP_VIP_INSTANCE=2,a.APPD_SCENED_RESPAWN=3,a.APPD_SCENED_NEAR_BY_CHAT=4,a.APPD_SCENED_ADD_EXP=5,a.APPD_SCENED_CLEAR_FIELD_BOSS=6,a.APPD_SCENED_REBORN_FIELD_BOSS=7,a.APPD_SCENED_WORLD_BOSS_WAITING=8,a.APPD_SCENED_FIGHT_WORLD_BOSS=9,a.APPD_SCENED_WORLD_BOSS_END=10,a.APPD_SCENED_WORLD_BOSS_ENTER=11,a.APPD_SCENED_REMIND_INSTANCE_ENTER=12,a.APPD_SCENED_MASS_BOSS_REBORN=13,a.INSTANCE_SUB_TYPE_VIP=1,a.INSTANCE_SUB_TYPE_TRIAL=2,a.INSTANCE_SUB_TYPE_WORLD_BOSS=3,a.INSTANCE_SUB_TYPE_RES=4,a.INSTANCE_SUB_TYPE_KUAFU_3V3=5,a.INSTANCE_SUB_TYPE_XIANFU=6,a.INSTANCE_SUB_TYPE_DOUJIANTAI=7,a.INSTANCE_SUB_TYPE_XIANFU_EXPERIENCE=8,a.INSTANCE_SUB_TYPE_XIULIAN=9,a.INSTANCE_SUB_TYPE_PLOT=10,a.INSTANCE_SUB_TYPE_MASS_BOSS=11,a.INSTANCE_SUB_TYPE_KUAFU_GROUP=12,a.INSTANCE_SUB_TYPE_FACTION_BOSSDEFENSE=13,a.INSTANCE_SUB_TYPE_FACTION_TOWER=14,a.INSTANCE_SUB_TYPE_QUALIFY=15,a.INSTANCE_SUB_TYPE_RISK=16,a.CHAT_CHANNEL_SYSTEM=0,a.CHAT_CHANNEL_WORLD=1,a.CHAT_CHANNEL_NEARBY=2,a.CHAT_CHANNEL_FAMILY=3,a.CHAT_CHANNEL_GROUP=4,a.MAX_CHAT_BLOCK_COUNT=30,a.MAX_RANK_LIKE=10,a.MAX_SHOP_LIMIT=20,a.MAX_WORLD_3V3_COUNT=3,a.MAX_BUYED_FACTION_SHOP=8,a.MAX_PLAYER_OPEN_MENU_COUNT=50,a.MAX_OPTIONAL_GUIDE_COUNT=30,a.MAX_PLAYER_CULTIVATION_RIVAL_COUNT=4,a.MAX_PLAYER_CULTIVATION_PLUNDER_RECORD_COUNT=10,a.MAX_PLAYER_FACTION_SKILL_COUNT=20,a.FACTION_DATA_INT_GIFT_ID=0,a.FACTION_DATA_INT_GIFT_POINT=1,a.FACTION_DATA_INT_GIFT_FLAG_THANK=2,a.FACTION_DATA_INT_GIFT_TIME=3,a.FACTION_DATA_INT_GIFT_COUNT_ID=4,a.MAX_FACTION_DATA_INT_GIFT=5,a.FACTION_DATA_STRING_GIFT_GUID=0,a.FACTION_DATA_STRING_GIFT_MSG=1,a.FACTION_DATA_STRING_GIFT_ITEM_LIST=2,a.FACTION_DATA_STRING_GIFT_REPLY_LIST=3,a.MAX_FACTION_DATA_STRING_GIFT=4,a.FACTION_DATA_REPLY_TYPE_TEXT=0,a.FACTION_DATA_REPLY_TYPE_VOICE=1,a.MAX_FACTION_DATA_GIFT_COUNT=150,a.MAX_FACTION_DATA_GIFT_REPLY_COUNT=200,a.MAX_FACTION_DATA_GIFT_CACHE_COUNT=1e3,a.PLAYER_FIELD_FD=0,a.PLAYER_FIELD_MERGE_DATA_INDEX=1,a.PLAYER_FIELD_ENTRY=2,a.PLAYER_FIELD_MAP_ID=3,a.PLAYER_FIELD_INSTANCE_ID=4,a.PLAYER_FIELD_LINE_NO=5,a.PLAYER_FIELD_POS_X=6,a.PLAYER_FIELD_POS_Y=7,a.PLAYER_FIELD_ORIENTATION=8,a.PLAYER_FIELD_MOVESPEED=9,a.PLAYER_FIELD_LEVEL=11,a.PLAYER_FIELD_BYTES_0=12,a.PLAYER_FIELD_NPC_FLAG=13,a.PLAYER_FIELD_DEATH_STATE=14,a.PLAYER_FIELD_HEALTH=15,a.PLAYER_FIELD_MAX_HEALTH=17,a.PLAYER_FIELD_DAMAGE=19,a.PLAYER_FIELD_ARMOR=21,a.PLAYER_FIELD_HIT=23,a.PLAYER_FIELD_MISS=25,a.PLAYER_FIELD_CRIT=27,a.PLAYER_FIELD_TOUGH=29,a.PLAYER_FIELD_ATTACK_SPEED=31,a.PLAYER_FIELD_MOVE_SPEED=33,a.PLAYER_FIELD_IGNORE_ARMOR=35,a.PLAYER_FIELD_IGNORE_MISS=37,a.PLAYER_FIELD_RECOVERY=39,a.PLAYER_FIELD_DAMAGE_AMPLIFY_RATE=41,a.PLAYER_FIELD_DAMAGE_RESIST_RATE=43,a.PLAYER_FIELD_DAMAGE_RETURN_RATE=45,a.PLAYER_FIELD_VAMPIRIC_RATE=47,a.PLAYER_FIELD_RECOVERY_RATE=49,a.PLAYER_FIELD_CRIT_RATE=51,a.PLAYER_FIELD_CRIT_RESIST_RATE=53,a.PLAYER_FIELD_CRIT_DAM_RATE=55,a.PLAYER_FIELD_CRIT_RESIST_DAM_RATE=57,a.PLAYER_FIELD_HIT_RATE=59,a.PLAYER_FIELD_MISS_RATE=61,a.PLAYER_FIELD_STUN_RATE=63,a.PLAYER_FIELD_ROOTS_RATE=65,a.PLAYER_FIELD_SILENCE_RATE=67,a.PLAYER_FIELD_CHAOS_RATE=69,a.PLAYER_FIELD_CHARM_RATE=71,a.PLAYER_FIELD_CONTROL_ENHANCE_RATE=73,a.PLAYER_FIELD_CONTROL_RESIST_RATE=75,a.PLAYER_FIELD_ATTR_RESERVE0=77,a.PLAYER_FIELD_ATTR_RESERVE1=79,a.PLAYER_FIELD_ATTR_RESERVE2=81,a.PLAYER_FIELD_ATTR_RESERVE3=83,a.PLAYER_FIELD_ATTR_RESERVE4=85,a.PLAYER_FIELD_ATTR_RESERVE5=87,a.PLAYER_FIELD_ATTR_RESERVE6=89,a.PLAYER_FIELD_ATTR_RESERVE7=91,a.PLAYER_FIELD_BUFF=93,a.PLAYER_FIELD_BUFF_RESERVE=143,a.PLAYER_INT_FIELD_BUFF_GIVER_UINT_GUID=193,a.PLAYER_INT_FIELD_BUFF_EFFECT_ID_START=243,a.PLAYER_INT_FIELD_BUFF_EFFECT_ID_END=293,a.PLAYER_FIELD_SKIN=293,a.PLAYER_FIELD_BYTES_1=294,a.PLAYER_FIELD_FORCE=295,a.PLAYER_FIELD_EQUIPMENT=297,a.PLAYER_FIELD_CUR_MOUNT=317,a.PLAYER_FIELD_PEACE_MODE_CD=318,a.PLAYER_FIELD_NOTORIETY=319,a.PLAYER_FIELD_BYTES_2=320,a.PLAYER_FIELD_BYTES_3=321,a.PLAYER_FIELD_BYTES_4=322,a.PLAYER_FIELD_BYTES_5=323,a.PLAYER_FIELD_AUTO_HP=324,a.PLAYER_FIELD_AUTO_MP=326,a.PLAYER_FIELD_VIP_LEVEL=328,a.PLAYER_FIELD_VIP_TIME_OUT=329,a.PLAYER_FIELD_HOOK=330,a.PLAYER_FIELD_HOOK_BYTE0=331,a.PLAYER_FIELD_HOOK_BYTE1=332,a.PLAYER_FIELD_HOOK_SHORT=333,a.PLAYER_FIELD_HOOK_BYTE3=334,a.PLAYER_FIELD_FLAGS=335,a.PLAYER_FIELD_FLAGS_END=343,a.PLAYER_FIELD_ONLINE_TIME=343,a.PLAYER_FIELD_ANGER=344,a.PLAYER_FIELD_TRIAL_LAYERS=345,a.PLAYER_INT_FIELD_TRIAL_FINISHED_SECTIONID=346,a.PLAYER_INT_FIELD_TRIAL_PROCESS=347,a.PLAYER_FIELD_DECLINE_CHANNEL_BYTE0=348,a.PLAYER_FIELD_DECLINE_CHANNEL_BYTE1=349,a.PLAYER_SCENED_INT_FIELD_PLAYER_JUMP_CD=350,a.PLAYER_INT_FIELD_SYSTEM_MAIL_ID=351,a.PLAYER_FIELD_DIVINE_NUM=352,a.PLAYER_FIELD_DIVINE_FORCE=353,a.PLAYER_FIELD_MOUNT_FORCE=354,a.PLAYER_FIELD_SKILL_FORCE=355,a.PLAYER_FILED_GEM_FORCE=356,a.PLAYER_FIELD_STRENGTH_FORCE=357,a.PLAYER_FIELD_RANK_LIKE=358,a.PLAYER_FIELD_USE_RANK_LIKE=359,a.PLAYER_FIELD_SHOP_LIMIT_START=360,a.PLAYER_FIELD_SHOP_LIMIT_END=380,a.PLAYER_EXPAND_INT_FCM_LOGIN_TIME=380,a.PLAYER_EXPAND_INT_FCM_LOGOUT_TIME=381,a.PLAYER_EXPAND_INT_CREATE_TIME=382,a.PLAYER_EXPAND_INT_LAST_LOGIN_TIME=383,a.PLAYER_EXPAND_INT_LAST_LOGOUT_TIME=384,a.PLAYER_EXPAND_INT_NUMBER_OF_LOGINS=385,a.PLAYER_EXPAND_INT_MONEY=386,a.PLAYER_EXPAND_INT_MONEY_END=430,a.PLAYER_EXPAND_INT_USE_FASHION=430,a.PLAYER_EXPAND_INT_XP=431,a.PLAYER_EXPAND_INT_NEXT_LEVEL_XP=433,a.PLAYER_EXPAND_INT_XP_ADDED=435,a.PLAYER_EXPAND_INT_XP_PICKED=437,a.PLAYER_EXPAND_INT_MAP_STATUS=439,a.PLAYER_EXPAND_INT_GAG_END_TIME=440,a.PLAYER_EXPAND_INT_TO_MAP=441,a.PLAYER_EXPAND_INT_TO_INSTANCE_ID=442,a.PLAYER_EXPAND_INT_TO_POS_X=443,a.PLAYER_EXPAND_INT_TO_POS_Y=444,a.PLAYER_EXPAND_INT_TO_LINE_NO=445,a.PLAYER_EXPAND_INT_DB_MAP=446,a.PLAYER_EXPAND_INT_DB_POS_X=447,a.PLAYER_EXPAND_INT_DB_POS_Y=448,a.PLAYER_EXPAND_INT_CLIENT_DATA=449,a.PLAYER_APPD_INT_FIELD_FLAG=549,a.PLAYER_APPD_INT_FIELD_FLAG_END=556,a.PLAYER_APPD_INT_FIELD_DAILY_TIME=556,a.PLAYER_APPD_INT_FIELD_RESET_WEEK=557,a.PLAYER_APPD_INT_FIELD_RESET_DALIY=558,a.PLAYER_APPD_INT_FIELD_RECHARGE_SUM=582,a.PLAYER_APPD_INT_FIELD_LAST_RECHARGE_TIME=583,a.PLAYER_APPD_INT_FLELD_JHM_FLAGS=584,a.PLAYER_APPD_INT_FLELD_JHM_FLAGS_END=592,a.PLAYER_APPD_INT_FIELD_EXTENSION_END_TIME=593,a.PLAYER_APPD_INT_FIELD_EXTENSION_REMAIN_TIME=594,a.PLAYER_INT_FIELD_BLOCK_COUNT=596,a.PLAYER_INT_FIELD_WORLD_BOSS_JOIN_ID=597,a.PLAYER_INT_FIELD_WORLD_BOSS_JOIN_STATE=598,a.PLAYER_SCENED_INT_FLAGS=599,a.PLAYER_INT_FIELD_SPELL_START=607,a.PLAYER_INT_FIELD_SPELL_END=619,a.PLAYER_INT_FIELD_IMPORTANT_SPELL_CD_START=619,a.PLAYER_INT_FIELD_IMPORTANT_SPELL_CD_END=659,a.PLAYER_EXPAND_KILL_MONSTER=659,a.PLAYER_APPD_INT_FIELD_KUAFU_WARID=660,a.PLAYER_INT_FIELD_KUAFU_NUMBER=661,a.PLAYER_INT_FIELD_MAIN_QUEST_ID=662,a.PLAYER_INT_FIELD_QUEST_CHAPTER=663,a.PLAYER_INT_FIELD_MOUNT_LEVEL=664,a.PLAYER_INT_FIELD_DIVINE_ID=665,a.PLAYER_INT_FIELD_PASSIVE_SPELL_START=666,a.PLAYER_INT_FIELD_PASSIVE_SPELL_END=766,a.PLAYER_INT_FIELD_VIRTUAL_CAMP=766,a.PLAYER_INT_FIELD_WORLD_3V3_SCORE=767,a.PLAYER_INT_FIELD_WORLD_3V3_TOTAL_SCORE=768,a.PLAYER_INT_FIELD_WORLD_3V3_TREND_INFO=769,a.PLAYER_INT_FIELD_DOUJIANTAI_RANK=770,a.PLAYER_INT_FIELD_DOUJIANTAI_REFRESH_TIME=771,a.PLAYER_INT_FIELD_ARREARS=772,a.PLAYER_INT_FIELD_DAILY_QUEST_FINISHED=774,a.PLAYER_INT_FIELD_BAG_SORT_TIME=775,a.PLAYER_INT_FIELD_OPEN_MENU_INDEX=776,a.PLAYER_INT_FIELD_OPEN_MENU_START=777,a.PLAYER_INT_FIELD_OPEN_MENU_END=877,a.PLAYER_INT_FIELD_BUYED_FACTION_SHOP=878,a.PLAYER_INT_FIELD_BUYED_FACTION_SHOP_END=886,a.PLAYER_INT_FIELD_GUIDE_ID_LAST=887,a.PLAYER_INT_FIELD_GUIDE_ID_NOW=888,a.PLAYER_INT_FIELD_CULTIVATION_LAST_PLUNDER_TIME=889,a.PLAYER_INT_FIELD_CULTIVATION_LAST_REFRESH_TIME=890,a.PLAYER_INT_FIELD_CULTIVATION_TODAY_PLUNDER_EXP=891,a.PLAYER_INT_FIELD_CULTIVATION_TODAY_PLUNDER_CHEST=892,a.PLAYER_INT_FIELD_CULTIVATION_TODAY_PURCHASE_COUNT=893,a.PLAYER_INT_FIELD_CULTIVATION_LEFT_PLUNDER_COUNT=894,a.PLAYER_INT_FIELD_CULTIVATION_PLUNDER_RECORD_INDEX=895,a.PLAYER_INT_FIELD_CULTIVATION_TOTAL_BEEN_PLUNDER_COUNT=896,a.PLAYER_INT_FIELD_CULTIVATION_TODAY_TOTAL_PLUNDER_COUNT=897,a.PLAYER_INT_FIELD_CULTIVATION_START_TIME=898,a.PLAYER_INT_FIELD_CULTIVATION_LOST_INFO=899,a.PLAYER_INT_FIELD_LOGIN_ACTIVITY_TOTAL_DAYS=900,a.PLAYER_INT_FIELD_LOGIN_ACTIVITY_REWARD_STATUS_START=901,a.PLAYER_INT_FIELD_LOGIN_ACTIVITY_REWARD_STATUS_END=903,a.PLAYER_INT_FIELD_OPTIONAL_GUIDE_START=904,a.PLAYER_INT_FIELD_OPTIONAL_GUIDE_END=964,a.PLAYER_INT_FILED_LEAVE_RISK_TIME=964,a.PLAYER_INT_FILED_LEAVE_RISK_SUIT_SCORE=965,a.PLAYER_INT_FILED_FACTION_BUILDING_SPEEDUP_DAILY_COUNT=966,a.PLAYER_INT_FILED_FACTION_DONATE_GIFT_EXCHANGE_DAILY_COUNT=967,a.PLAYER_INT_FILED_CHARM_POINT=968,a.PLAYER_INT_FILED_FACTION_GIFT_NEXT_COUNT_ID=970,a.PLAYER_INT_FILED_FACTION_GIFT_START=971,a.PLAYER_INT_FILED_FACTION_GIFT_END=1721,a.PLAYER_INT_FIELD_CREATE_ICON=1721,a.PLAYER_INT_FIELD_FACTION_GIFT_POINT_COUNT=1722,a.PLAYER_INT_FIELD_FACTION_GIFT_SEND_COUNT=1724,a.PLAYER_INT_FIELD_FACTION_GIFT_BEEN_THANK_COUNT=1725,a.PLAYER_INT_FIELD_MASS_BOSS_BUYED_TIMES=1726,a.PLAYER_INT_FIELD_MASS_BOSS_TIMES=1727,a.PLAYER_INT_FIELD_MASS_BOSS_CD=1728,a.PLAYER_INT_FIELD_TALISMAN_FORCE=1729,a.PLAYER_INT_FIELD_WINGS_FORCE=1730,a.PLAYER_INT_FIELD_GROUP_INSTANCE_CLEAR_FLAG=1731,a.PLAYER_INT_FIELD_MERIDIAN_FORCE=1732,a.PLAYER_INT_FIELD_WINGS_RANK=1733,a.PLAYER_INT_FIELD_FACTION_BOSSDEFENSE_TICKETS=1734,a.PLAYER_INT_FIELD_FACTION_TOWER_CLEAR_FLOOR=1735,a.PLAYER_INT_FIELD_FACTION_TOWER_FLAG=1736,a.PLAYER_INT_FIELD_QUALIFY_SCORE=1737,a.PLAYER_INT_FIELD_FACTION_SKILL_LV_START=1738,a.PLAYER_INT_FIELD_FACTION_SKILL_LV_END=1758,a.PLAYER_INT_FIELD_APPEARANCE=1758,a.PLAYER_INT_FIELD_WEAPON_FORCE=1759,a.PLAYER_INT_FIELD_CLOTH_FORCE=1760,a.PLAYER_INT_FIELD_POKEDEX_FORCE=1761,a.PLAYER_INT_FIELD_TITLE_FORCE=1762,a.PLAYER_INT_FIELD_RENAME_TIMES=1763,a.PLAYER_INT_FIELD_REVENGE_TIMES=1764,a.PLAYER_INT_FIELD_REVENGE_BUY_TIMES=1765,a.PLAYER_INT_FIELD_WINGS_STAR=1766,a.PLAYER_INT_FIELD_VIPGIFT_FLAG=1767,a.PLAYER_APPD_INT_FIELD_CONSUME_SUM=1768,a.PLAYER_STRING_FIELD_ACCOUNT=4,a.PLAYER_STRING_FIELD_TELEPORT_GUID=5,a.PLAYER_APPD_STRING_FIELD_CLIENT_DATA=6,a.PLAYER_STRING_FIELD_LAST_LOGIN_IP=26,a.PLAYER_STRING_FIELD_RECHARGE_ID=27,a.PLAYER_STRING_FIELD_CREATE_LOGIN_IP=28,a.PLAYER_APPD_STRING_FIELD_PINGTAI_INFO=29,a.PLAYER_STRING_FIELD_DB_KUAFU_INFO=30,a.PLAYER_STRING_FIELD_FACTION_GUID=31,a.PLAYER_STRING_FIELD_FACTION_NAME=32,a.PLAYER_STRING_FIELD_BLOCK_START=33,a.PLAYER_STRING_FIELD_BLOCK_END=63,a.PLAYER_STRING_FIELD_RANKLIKE_START=63,a.PLAYER_STRING_FIELD_RANKLIKE_ENE=73,a.PLAYER_STRING_INT_FIELD_CULTIVATION_RIVAL_GUID_START=74,a.PLAYER_STRING_INT_FIELD_CULTIVATION_RIVAL_GUID_END=78,a.PLAYER_STRING_INT_FIELD_CULTIVATION_PLUNDER_RECORD_START=79,a.PLAYER_STRING_INT_FIELD_CULTIVATION_PLUNDER_RECORD_END=89,a.PLAYER_STRING_FIELD_INVITE_FACTION_GUID=89,a.PLAYER_STRING_FIELD_CREATE_FACTION_NAME=90,a.PLAYER_STRING_FILED_FACTION_GIFT_START=91,a.PLAYER_STRING_FILED_FACTION_GIFT_END=691,a.PLAYER_STRING_FIELD_GROUP_PEACE_ID=691,a.PLAYER_BASIC_SPELL_CAPACITY=30,a.PLAYER_DIVINE_SPELL_CAPACITY=15,a.PLAYER_TALISMAN_SPELL_CAPACITY=15,a.SHORT_SPELL_ID=0,a.SHORT_SPELL_LV=1,a.SLOT_COMBO=1,a.SLOT_DIVINE=5,a.SLOT_ANGER=6,a.SPELL_SLOT_COUNT=6,a.SKILL_TYPE_DIVINE=4,a.MOUNT_UPGRADE_SKILL_COUNT=10,a.MOUNT_ILLUSION_COUNT=30,a.EQUIPMENT_COUNT=10,a.DIVINE_PASSIVE_SKILL_COUNT=3,a.EQUIPDEVELOP_GEM_COUNT=10,a.ILLUSION_ATTR_ID=0,a.ILLUSION_ATTR_SPELL_START=1,a.ILLUSION_ATTR_SPELL_END=3,a.ILLUSION_ATTR_EXPIRE=3,a.MAX_ILLUSION_ATTR_COUNT=4,a.EXPIRE_TYPE_ILLUSION=0,a.EXPIRE_TYPE_DIVINE=1,a.STRENGTHEN_LEV_BLESS=0,a.MAX_STRENGTHEN_COUNT=1,a.GEM_LEV=0,a.GEM_CURID_BLESS=3,a.MAX_GEM_COUNT=4,a.DIVINE_ID_LEV_BLESS=0,a.DIVINE_TIME=1,a.DIVINE_SKILL=2,a.DIVINE_PASSIVE_SKILL=3,a.DIVINE_IMPROVE=6,a.MAX_DIVINE_COUNT=7,a.TALISMAN_ID_LV=0,a.TALISMAN_FORCE=1,a.MAX_TALISMAN_COUNT=2,a.EQUIPDEVELOP_STRENGTH_LV=0,a.EQUIPDEVELOP_REFINE_LV=1,a.EQUIPDEVELOP_GEM_LV_START=2,a.EQUIPDEVELOP_GEM_LV_END=7,a.MAX_EQUIPDEVELOP_COUNT=8,a.RAISE_BASE_SKILL=1,a.RAISE_MOUNT_SKILL=2,a.RAISE_ILLUSION_SKILL=3,a.RAISE_DIVINE_SKILL=4,a.EQUIPDEVELOP_TYPE_STRENGTH_LVUP=1,a.EQUIPDEVELOP_TYPE_REFINE_STAR_LVUP=2,a.EQUIPDEVELOP_TYPE_REFINE_RANK_LVUP=3,a.EQUIPDEVELOP_TYPE_GEM_ACTIVE=4,a.EQUIPDEVELOP_TYPE_GEM_LVUP=5,a.EQUIPDEVELOP_TYPE_WASHATTRS_WASH=6,a.EQUIPDEVELOP_TYPE_WASHATTRS_SAVE=7,a.EQUIPDEVELOP_TYPE_WASHATTRS_DEL=8,a.MAX_EXTERIOR_COUNT=200,a.PLAYER_ACTIVITTY_DATA_INT_0=0,a.PLAYER_ACTIVITTY_DATA_INT_1=1,a.PLAYER_ACTIVITTY_DATA_INT_2=2,a.PLAYER_ACTIVITTY_DATA_INT_3=3,a.MAX_PLAYERACTIVITTYDATAINT_COUNT=4,a.PLAYER_ACTIVITTY_DATA_STRING_0=0,a.MAX_PLAYERACTIVITTYDATASTRING_COUNT=1,a.MAX_PLAYERDACTIVITTYDATA_COUNT=100,a.SPELL_BASE_COUNT=0,a.SPELL_INT_FIELD_BASE_SPELL_START=1,a.SPELL_INT_FIELD_BASE_SPELL_END=31,a.SPELL_INT_FIELD_MOUNT_LEVEL=31,a.SPELL_INT_FIELD_MOUNT_TRAIN_EXP=32,a.SPELL_INT_FIELD_MOUNT_LEVEL_BASE=33,a.SPELL_INT_FIELD_MOUNT_SPELL_START=34,a.SPELL_INT_FIELD_MOUNT_SPELL_END=44,a.SPELL_INT_FIELD_MOUNT_BLESS_EXP=44,a.SPELL_INT_FIELD_MOUNT_ILLUSION_START=45,a.SPELL_INT_FIELD_MOUNT_ILLUSION_END=165,a.SPELL_STRENGTHEN_START=166,a.SPELL_STRENGTHEN_END=176,a.SPELL_STRENGTHEN_ALLMUL=177,a.SPELL_GEM_START=178,a.SPELL_GEM_END=218,a.SPELL_GEM_ALLMUL=219,a.SPELL_DIVINE_COUNT=220,a.SPELL_DIVINE_START=221,a.SPELL_DIVINE_END=326,a.SPELL_TALISMAN_START=326,a.SPELL_TALISMAN_END=356,a.SPELL_WINGS_ID=356,a.SPELL_WINGS_LEVEL=357,a.SPELL_WINGS_BLESS_EXP=358,a.SPELL_INT_FIELD_MERIDIAN_LEVEL=359,a.SPELL_INT_FIELD_MERIDIAN_EXP=360,a.SPELL_INT_FIELD_MERIDIAN_CNT_START=361,a.SPELL_INT_FIELD_MERIDIAN_CNT_END=374,a.SPELL_INT_FIELD_EQUIPDEVELOP_START=374,a.SPELL_INT_FIELD_EQUIPDEVELOP_END=454,a.SPELL_INT_FIELD_EQUIPDEVELOP_BONUS_LV=454,a.SPELL_INT_FIELD_APPEARANCE_START=455,a.SPELL_INT_FIELD_APPEARANCE_END=655,a.SPELL_INT_FIELD_PLAYER_ACTIVITY_DATA_START=655,a.SPELL_INT_FIELD_PLAYER_ACTIVITY_DATA_END=1055,a.SPELL_STRING_FIELD_EQUIPDEVELOP_WASHATTRS_INFO=4,a.SPELL_STRING_FIELD_PLAYER_ACTIVITY_DATA_START=5,a.SPELL_STRING_FIELD_PLAYER_ACTIVITY_DATA_END=105,a.SOCIAL_FRIEND_MAX_NUM=60,a.SOCIAL_APPLY_MAX_NUM=10,a.SOCIAL_ENEMY_MAX_NUM=20,a.SOCIAL_START=4,a.SOCIAL_ICON_VIP_LEV=0,a.SOCIAL_FAMILIAR_LEV_EXP=1,a.SOCIAL_FAMILIAR_FORCE=2,a.MAX_FRIENT_COUNT=4,a.SOCIAL_BASE_COUNT=0,a.SOCIAL_REVENGE_NUM=4,a.SOCIAL_REVENGE_CD=5,a.SOCIAL_FRIEND_START=6,a.SOCIAL_FRIEND_END=246,a.SOCIAL_ENEMY_START=246,a.SOCIAL_ENEMY_END=326,a.SOCIAL_APPLY_START=326,a.SOCIAL_APPLY_END=366,a.SOCIAL_APPLY_CLEAR_FLAG=366,a.SOCIAL_ENEMY_TIME_START=367,a.SOCIAL_ENEMY_TIME_END=387,a.FACTION_EVENT_TYPE_NULL=0,a.FACTION_EVENT_TYPE_ADD_MEMBER=1,a.FACTION_EVENT_TYPE_SUB_MEMBER=2,a.FACTION_EVENT_TYPE_APPOINT=3,a.FACTION_EVENT_TYPE_KICK_MEMBER=4,a.FACTION_EVENT_TYPE_JUANXIAN=5,a.FACTION_EVENT_TYPE_HONGBAO=6,a.FACTION_EVENT_TYPE_SHANGXIANG=7,a.FACTION_MANAGER_TYPE_AGREE_JOIN=0,a.FACTION_MANAGER_TYPE_REFUSE_JOIN=1,a.FACTION_MANAGER_TYPE_KICK=2,a.FACTION_MANAGER_TYPE_APPOINT=3,a.FACTION_MANAGER_TYPE_RECRUIT=4,a.FACTION_MANAGER_TYPE_LEVEL_UP=5,a.FACTION_MANAGER_TYPE_CHANGE_FLAGS=6,a.FACTION_MANAGER_TYPE_NOTICE=7,a.FACTION_MANAGER_TYPE_AGREE_JOIN_ALL=8,a.FACTION_MANAGER_TYPE_REFUSE_JOIN_ALL=9,a.FACTION_MANAGER_TYPE_QUIT=10,a.FACTION_MANAGER_TYPE_JUANXIAN=0,a.FACTION_MANAGER_TYPE_FULI=1,a.FACTION_MANAGER_TYPE_FA_HONGBAO=2,a.FACTION_MANAGER_TYPE_LQ_HONGBAO=3,a.FACTION_MANAGER_TYPE_SHANGXIANG=4,a.FACTION_MANAGER_TYPE_SHOP=5,a.FACTION_MANAGER_TYPE_BUY_TOKEN=6,a.FACTION_MANAGER_TYPE_CHALLENGE_BOSS=7,a.FACTION_MANAGER_TYPE_BUILDING_UPGRADE=8,a.FACTION_MANAGER_TYPE_BUILDING_UPGRADE_SPEEDUP=9,a.FACTION_MANAGER_TYPE_DONATE_GIFT_EXCHANGE=10,a.FACTION_MANAGER_TYPE_GIFT_SHOW_PAGE=11,a.FACTION_MANAGER_TYPE_GIFT_SHOW_INFO=12,a.FACTION_MANAGER_TYPE_GIFT_SHOW_UNTHANK_PAGE=13,a.FACTION_MANAGER_TYPE_GIFT_SHOW_HISTORY_PAGE=14,a.FACTION_MANAGER_TYPE_GIFT_THANK=15,a.FACTION_MANAGER_TYPE_GIFT_THANK_ALL=16,a.FACTION_MANAGER_TYPE_GIFT_THANK_AND_REPLY=17,a.FACTION_MANAGER_TYPE_GIFT_REPLY=18,a.FACTION_MANAGER_TYPE_BOSSDEFENSE_CHALLENGE=19,a.FACTION_MANAGER_TYPE_BOSSDEFENSE_DAMAGE_LIST=20,a.FACTION_MANAGER_TYPE_TOWER_CHALLENGE=21,a.FACTION_MANAGER_TYPE_TOWER_SWEEP=22,a.FACTION_MANAGER_TYPE_TOWER_CHEST=23,a.FACTION_MANAGER_TYPE_SKILL_LVUP=24,a.FACTION_BUILDING_TYPE_MAINHALL=1,a.FACTION_BUILDING_TYPE_STOREHOUSE=2,a.FACTION_BUILDING_TYPE_BANK=3,a.FACTION_BUILDING_TYPE_EVENT=4,a.FACTION_BUILDING_TYPE_SKILL=5,a.FACTION_BUILDING_TYPE_SHOP=6,a.MAX_FACTION_MENBER_BUFF_NUM=6,a.MAX_FACTION_BUFF_NUM=6,a.MAX_CUR_SCREEN_BUFF_NUM=6,a.MAX_FACTION_APLLY_MAMBER_COUNT=3,a.MAX_FACTION_MAMBER_COUNT=50,a.MAX_FACTION_EVENT_COUNT=10,a.MAX_FACTION_SHOP=8,a.MAX_FACTION_HONGBAO_COUNT=10,a.MAX_FACTION_BOSS_COUNT=10,a.MAX_FACTION_BUILDING_COUNT=10,a.FACTION_INT_MEMBER_FORCE=0,a.FACTION_INT_MEMBER_UINT16=2,a.FACTION_INT_MEMBER_BYTE=3,a.FACTION_INT_MEMBER_LOGOUT_TIME=4,a.FACTION_INT_MEMBER_FLAGS=5,a.FACTION_INT_MEMBER_TOTAL_CONTRIBUTION=6,a.FACTION_INT_MEMBER_CHARM=7,a.FACTION_INT_MEMBER_TOTAL_SEND_CHARM=9,a.FACTION_INT_MEMBER_TOWER_TODAY_FLOOR=10,a.MAX_FACTION_INT_MEMBER=11,a.FACTION_STRING_MEMBER_GUID=0,a.FACTION_STRING_MEMBER_NAME=1,a.MAX_FACTION_STRING_MEMBER=2,a.FACTION_INT_EVENT_TYPE_VALUE=0,a.FACTION_INT_EVENT_RESERVE=1,a.MAX_FACTION_INT_EVENT=2,a.FACTION_MEMBER_IDENTITY_NULL=0,a.FACTION_MEMBER_IDENTITY_BANGZHU=1,a.FACTION_MEMBER_IDENTITY_FU_BANGZHU=2,a.FACTION_MEMBER_IDENTITY_TANGZHU=3,a.FACTION_MEMBER_IDENTITY_JINGYING=4,a.FACTION_MEMBER_IDENTITY_QUNZHONG=5,a.FACTION_FLAGS_AUTO=0,a.FACTION_FLAGS_IS_BOSS_ADD=1,a.FACTION_BUFF_ID=0,a.FACTION_BUFF_END_TM=1,a.MAX_FACTION_BUFF=2,a.MAX_FACTION_STOREHOUSE_COUNT=100,a.MAX_FACTION_STOREHOUSE_RECORD_COUNT=10,a.FACTION_INT_BOSSDEFENSE_POOL_ID=0,a.FACTION_INT_BOSSDEFENSE_HP=1,a.FACTION_INT_BOSSDEFENSE_MAX_HP=2,a.FACTION_INT_BOSSDEFENSE_STATUS=3,a.MAX_FACTION_BOSSDEFENSE=4,a.MAX_FACTION_BOSSDEFENSE_COUNT=6,a.FACTION_INT_FIELD_PLAYER_NOW_INDEX=0,a.FACTION_INT_FIELD_FLAG=1,a.FACTION_INT_FIELD_PLAYER=2,a.FACTION_INT_FIELD_PLAYER_END=552,a.FACTION_INT_FIELD_APPLY_PLAYER_COUNT_INDEX=552,a.FACTION_INT_FIELD_APPLY_PLAYER=553,a.FACTION_INT_FIELD_APPLY_PLAYER_END=586,a.FACTION_INT_FIELD_EVENT=586,a.FACTION_INT_FIELD_EVENT_END=606,a.FACTION_INT_FIELD_EVENT_FALG=606,a.FACTION_INT_FIELD_SHOP=607,a.FACTION_INT_FIELD_SHOP_END=615,a.FACTION_INT_FIELD_FORCE=615,a.FACTION_INT_FIELD_MONEY=617,a.FACTION_INT_FIELD_LEVEL=619,a.FACTION_INT_FIELD_ACTIVITY=620,a.FACTION_INT_FIELD_RANK=621,a.FACTION_INT_FIELD_FLAGS_ID=622,a.FACTION_INT_FIELD_MINLEV=623,a.FACTION_INT_FIELD_TOKEN_NUM=624,a.FACTION_INT_FIELD_TOKEN_POINTS=625,a.FACTION_INT_FIELD_TOKEN_POINTS_COUNT=626,a.FACTION_INT_FIELD_TOKEN_TODAY_BUY_COUNT=627,a.FACTION_INT_FIELD_CHALLENGE_BOSS_ID_MAX=628,a.FACTION_INT_FIELD_CHALLENGE_BOSS_ID=629,a.FACTION_INT_FIELD_CHALLENGE_BOSS_START_TIME=630,a.FACTION_INT_FIELD_CHALLENGE_BOSS_HP_RATE=631,a.FACTION_INT_FIELD_CHALLENGE_BOSS_POS=632,a.FACTION_INT_FIELD_PROTECT_TARGET_HP_RATE=633,a.FACTION_INT_FIELD_PROTECT_TARGET_POS=634,a.FACTION_INT_FIELD_CHALLENGE_BOSS_DAMAGE_RANK_START=635,a.FACTION_INT_FIELD_CHALLENGE_BOSS_DAMAGE_RANK_END=685,a.FACTION_INT_FIELD_CHALLENGE_BOSS_TOTAL_RANK_START=685,a.FACTION_INT_FIELD_CHALLENGE_BOSS_TOTAL_RANK_END=735,a.FACTION_INT_FIELD_STOREHOUSE_ITEM_COUNT=735,a.FACTION_INT_FIELD_STOREHOUSE_RECORD_CURSOR=736,a.FACTION_INT_FIELD_BUILDING_ID_START=737,a.FACTION_INT_FIELD_BUILDING_ID_END=747,a.FACTION_INT_FIELD_BUILDING_LVUP_ID=747,a.FACTION_INT_FIELD_BUILDING_LVUP_FINISH_TIME=748,a.FACTION_INT_FIELD_IS_DISSOLVED=749,a.FACTION_INT_FIELD_GIFT_WEEK_POINT_START=750,a.FACTION_INT_FIELD_GIFT_WEEK_POINT_END=800,a.FACTION_INT_FIELD_GIFT_UNCHECK_COUNT_START=800,a.FACTION_INT_FIELD_GIFT_UNCHECK_COUNT_END=850,a.FACTION_INT_FIELD_CHARM_POINT=851,a.FACTION_INT_FIELD_GIFT_SEND_COUNT_START=853,a.FACTION_INT_FIELD_GIFT_SEND_COUNT_END=903,a.FACTION_INT_FIELD_GIFT_LAST_SEND_TIME=903,a.FACTION_INT_FIELD_GIFT_QUEEN_UNCHECK_COUNT=905,a.FACTION_INT_FIELD_BOSSDENFENSE_START=906,a.FACTION_INT_FIELD_BOSSDENFENSE_END=930,a.FACTION_INT_FIELD_TOWER_TODAY_TOP_FLOOR=930,a.FACTION_INT_FIELD_TOWER_TODAY_TOP_ICON=931,a.FACTION_INT_FIELD_TOWER_TODAY_TOP_FORCE=932,a.FACTION_INT_FIELD_TOTAL_FORCE=934,a.FACTION_STRING_FIELD_MANGER_NAME=4,a.FACTION_STRING_FIELD_MANGER_GUID=5,a.FACTION_STRING_FIELD_PLAYER=6,a.FACTION_STRING_FIELD_PLAYER_END=106,a.FACTION_STRING_FIELD_APPLY_PLAYER=106,a.FACTION_STRING_FIELD_APPLY_PLAYER_END=112,a.FACTION_STRING_FIELD_EVENT=112,a.FACTION_STRING_FIELD_EVENT_END=122,a.FACTION_STRING_FIELD_GONGGAO=122,a.FACTION_STRING_FIELD_ZHAOMU_GONGGAO=123,a.FACTION_STRING_FIELD_CHALLENGE_BOSS_DAMAGE_RANK_START=124,a.FACTION_STRING_FIELD_CHALLENGE_BOSS_DAMAGE_RANK_END=174,a.FACTION_STRING_FIELD_CHALLENGE_BOSS_TOTAL_RANK_START=174,a.FACTION_STRING_FIELD_CHALLENGE_BOSS_TOTAL_RANK_END=224,a.FACTION_STRING_FIELD_STOREHOUSE_START=224,a.FACTION_STRING_FIELD_STOREHOUSE_END=324,a.FACTION_STRING_FIELD_STOREHOUSE_RECORD_START=324,a.FACTION_STRING_FIELD_STOREHOUSE_RECORD_END=334,a.FACTION_STRING_FIELD_GIFT_PLAYER_GUID_START=334,a.FACTION_STRING_FIELD_GIFT_PLAYER_GUID_END=384,a.FACTION_STRING_FIELD_TOWER_TODAY_TOP_NAME=384,a.FACTION_DATA_INT_FIELD_BOSSDEFENSE_DAMAGE_START=0,a.FACTION_DATA_INT_FIELD_BOSSDEFENSE_DAMAGE_END=300,a.FACTION_DATA_INT_FIELD_GIFT_START=300,a.FACTION_DATA_INT_FIELD_GIFT_TMP1=7500,a.FACTION_DATA_INT_FIELD_GIFT_TOTAL_LEN=37500,a.FACTION_DATA_INT_FIELD_GIFT_TOTAL_CACHE_LEN=5e3,a.FACTION_DATA_INT_FIELD_GIFT_TMP2=37800,a.FACTION_DATA_INT_FIELD_GIFT_END=42800,a.FACTION_DATA_INT_FIELD_GIFT_RANK_START=42800,a.FACTION_DATA_INT_FIELD_GIFT_RANK_END=50300,a.FACTION_DATA_STRING_FIELD_GIFT_START=4,a.FACTION_DATA_STRING_FIELD_GIFT_TEMP1=7500,a.FACTION_DATA_STRING_FIELD_GIFT_TEMP2=3e4,a.FACTION_DATA_STRING_FIELD_GIFT_TEMP3=4e3,a.FACTION_DATA_STRING_FIELD_GIFT_TEMP4=34e3,a.FACTION_DATA_STRING_FIELD_GIFT_END=34004,a.MAX_TRIAL_LAYER_COUNT=256,a.TRIAL_STATE_FACTOR_ACTIVE=1,a.TRIAL_STATE_FACTOR_PASS=10,a.TRIAL_STATE_FACTOR_F_PASS=100,a.MAX_ACTIVE_COUNT=50,a.MAX_ACTIVT_REWARD_COUNT=6,a.MAX_DOUJIANTAI_RECORD_COUNT=10,a.MAX_QUALIFY_RECORD_COUNT=30,a.INSTANCE_INT_FIELD_VIP_START=0,a.INSTANCE_INT_FIELD_VIP_END=3,a.INSTANCE_INT_FIELD_TRIAL_PASSED_SHORT=3,a.INSTANCE_INT_FIELD_TRIAL_SWEEP_SHORT=4,a.INSTANCE_INT_FIELD_RES_START=5,a.INSTANCE_INT_FIELD_RES_END=10,a.INSTANCE_INT_FIELD_ACTIVE_START=10,a.INSTANCE_INT_FIELD_ACTIVE_END=60,a.INSTANCE_INT_FIELD_ACTIVE=60,a.INSTANCE_INT_FIELD_ACTIVE_REWARD=61,a.INSTANCE_INT_FIELD_3V3_TIMES=62,a.INSTANCE_INT_FIELD_3V3_DAY_REWARD=63,a.INSTANCE_INT_FIELD_3V3_SEGMENT_TIME=64,a.INSTANCE_INT_FIELD_XIANFU_DAY_TIMES=65,a.INSTANCE_INT_FIELD_DOUJIANTAI_CURSOR=66,a.INSTANCE_INT_FIELD_DOUJIANTAI_ENEMY_S=67,a.INSTANCE_INT_FIELD_DOUJIANTAI_ENEMY_E=70,a.INSTANCE_INT_FIELD_DOUJIAN_TIMES=71,a.INSTANCE_INT_FIELD_DOUJIAN_FIGHT_CD=72,a.INSTANCE_INT_FIELD_DOUJIAN_FIRST_GET=73,a.INSTANCE_INT_FIELD_DOUJIAN_FIRST_REWARD=74,a.INSTANCE_INT_FIELD_DOUJIAN_COMBATWIN=75,a.INSTANCE_INT_FIELD_DOUJIAN_COMBATWIN_REWARD=76,a.INSTANCE_INT_FIELD_DOUJIAN_MAX_RANK=77,a.INSTANCE_INT_FIELD_GROUP_INSTANCE_CLEAR_FLAG=78,a.INSTANCE_INT_FIELD_GROUP_INSTANCE_CHALLENGE_COUNT=79,a.INSTANCE_INT_FIELD_GROUP_INSTANCE_BUY_COUNT=80,a.INSTANCE_INT_FIELD_QUALIFY_EXTRA=81,a.INSTANCE_INT_FIELD_QUALIFY_WINS=82,a.INSTANCE_INT_FIELD_QUALIFY_EXTRA_PICKED=83,a.INSTANCE_INT_FIELD_QUALIFY_DAILY_TIMES=84,a.INSTANCE_INT_FIELD_QUALIFY_BUY_TIMES=85,a.INSTANCE_INT_FIELD_QUALIFY_CURSOR=86,a.INSTANCE_STR_FIELD_DOUJIANTAI_RECORD_START=4,a.INSTANCE_STR_FIELD_DOUJIANTAI_RECORD_END=14,a.INSTANCE_STR_FIELD_QUALIFY_RECORD_START=14,a.INSTANCE_STR_FIELD_QUALIFY_RECORD_END=44,a.PEACE_MODE=0,a.FAMILY_MODE=1,a.GROUP_MODE=2,a.MAX_BATTLE_MODE=3,a.TYPE_SPELL_SLOT=0,a.TYPE_SPELL_PASSIVE=1,a.SPELL_SUPPORT=0,a.SPELL_INITIATIVE_DAMAGE=1,a.SPELL_INITIATIVE_PROTECT=2,a.SPELL_INITIATIVE_CONTROL=3,a.SPELL_INITIATIVE_CURE=4,a.SPELL_INITIATIVE_BUFF=5,a.SPELL_PASSIVE_DAMAGE=6,a.SPELL_PASSIVE_PROTECT=7,a.SPELL_PASSIVE_CONTROL=8,a.SPELL_PASSIVE_CURE=9,a.SPELL_PASSIVE_BUFF=10,a.GAME_CONFIG_FIELD_FLAGS_SHOW_PLATFORM_NAME=0,a.GAME_CONFIG_FIELD_FLAGS_SHOW_SERVER_ID=1,a.GAME_CONFIG_FIELD_FLAGS_SHOW_POST=2,a.GAME_CONFIG_INT_FIELD_KAIFUSHIJIAN=0,a.GAME_CONFIG_INT_FIELD_FLAGS=1,a.GAME_CONFIG_INT_FIELD_ADDTIME=9,a.GAME_CONFIG_INT_FIELD_WORLD_SVR_TYPE=10,a.GAME_CONFIG_STRING_FIELD_PLATFORM_ID=4,a.GAME_CONFIG_STRING_FIELD_GM_QQ=5,a.GAME_CONFIG_STRING_FIELD_DB_CONN=6,a.GAME_CONFIG_STRING_FIELD_LOGIN_KEY=7,a.GAME_CONFIG_STRING_FIELD_LOG_DB_CONN=8,a.GAME_CONFIG_STRING_LOCAL_HDD_PATH=9,a.GAME_CONFIG_STRING_EXT_WEB_INTERFACE=10,a.GAME_CONFIG_STRING_CONF_SVR_URL=11,a.GAME_CONFIG_STRING_WORLD_SERVER_URL=12,a.GAME_CONFIG_STRING_FIELD_SERVER=200,a.GAME_CONFIG_STRING_FIELD_SERVER_LIST_BEGIN=201,a.CLIENT_MODULE_CENTER=0,a.CLIENT_MODULE_CREATE=1,a.CLIENT_MODULE_SCENE=2,a.CLIENT_MODULE_UI=3,a.CLIENT_MODULE_SH=4,a.MAX_CLIENT_MODULE=5,a.CLIENT_VERSION_INT_CREATE_TIME=0,a.MAX_CLIENT_VERSION_INT=1,a.CLIENT_VERSION_STRING_VERSIONS=0,a.CLIENT_VERSION_STRING_COMMENT=1,a.MAX_CLIENT_VERSION_STRING=2,a.CLIENT_CONFIG_INT_FIELD_MODULE_INFO_BEGIN=0,a.CLIENT_CONFIG_INT_FIELD_MODULE_INFO_END=5,a.CLIENT_CONFIG_STRING_FIELD_MODULE_INFO_BEGIN=4,a.CLIENT_CONFIG_STRING_FIELD_MODULE_INFO_END=14,a.MAX_DEFAULT_LINE_COUNT=4,a.MAX_FIELD_BOSS_COUNT=40,a.FIELD_BOSS_PROCESS_TYPE_FINISH=0,a.FIELD_BOSS_PROCESS_START_COUNTDOWN=1,a.FIELD_BOSS_PROCESS_BORN=2,a.FIELD_BOSS_PROCESS_TREASURE=3,a.FIELD_BOSS_DATA_NEXT_BORN_TIME=0,a.FIELD_BOSS_DATA_CURR_HP=1,a.FIELD_BOSS_DATA_PROCESS_TYPE=3,a.FIELD_BOSS_DATA_PRIORITY_TIME=4,a.FIELD_BOSS_DATA_KILLED=5,a.MAX_FIELD_BOSS_INT_DATA_COUNT=6,a.FIELD_BOSS_DATA_MAX_DAMAGE_GUID=0,a.FIELD_BOSS_DATA_NAME=1,a.MAX_FIELD_BOSS_STR_DATA_COUNT=2,a.WORLD_BOSS_PROCESS_TYPE_FINISH=0,a.WORLD_BOSS_PROCESS_ENROLL=1,a.WORLD_BOSS_PROCESS_BORN=2,a.PLAYER_WORLD_BOSS_NONE=0,a.PLAYER_WORLD_BOSS_ENROLLED=1,a.PLAYER_WORLD_BOSS_ENTERED=2,a.MASS_BOSS_STATE=0,a.MASS_BOSS_TIME=1,a.MAX_MASS_BOSS_INT_FIELD_COUNT=2,a.MAX_XIANFU_RECORD_COUNT=10,a.MAX_MASS_BOSS_COUNT=10,a.MAX_LOTTERY_COUNT=10,a.MAX_LOTTERY_RECORD_COUNT=10,a.MAX_ACT_RANK_COUNT=10,a.MAX_ACT_RANK_INFO_COUNT=10,a.GLOBALVALUE_INT_FIELD_FLAGS=0,a.GLOBALVALUE_INT_FIELD_LIMIT_ACTIVITY_VERSION=8,a.GLOBALVALUE_INT_FIELD_LIMIT_ACTIVITY_END_TIME=9,a.GLOBALVALUE_INT_FIELD_LIMIT_ACTIVITY_ITEM=10,a.GLOBALVALUE_INT_FIELD_LIMIT_ACTIVITY_ITEM_END=40,a.GLOBALVALUE_INT_FIELD_ONLINE_PLAYER_NUM=40,a.GLOBALVALUE_INT_FIELD_WORLD_CONNECTION_STATUS=41,a.GLOBALVALUE_INT_FIELD_FIELD_BOSS_START=42,a.GLOBALVALUE_INT_FIELD_FIELD_BOSS_END=282,a.GLOBALVALUE_INT_FIELD_WORLD_BOSS_LEVEL=282,a.GLOBALVALUE_INT_FIELD_WORLD_BOSS_STATE=283,a.GLOBALVALUE_INT_FIELD_WORLD_BOSS_LINE_STATE=284,a.GLOBALVALUE_INT_FIELD_WORLD_BOSS_LAST_ENROLL_TIME=285,a.GLOBALVALUE_INT_FIELD_WORLD_BOSS_TIMES=286,a.GLOBALVALUE_INT_FIELD_WORLD_BOSS_ID=287,a.GLOBALVALUE_INT_FIELD_XIANFU_RECORD_CURSOR=288,a.GLOBALVALUE_INT_FIELD_GIFT_RANK_WINER_FACTION_FLAG=289,a.GLOBALVALUE_INT_FIELD_GIFT_RANK_NEXT_UPDATE_TIME=290,a.GLOBALVALUE_INT_FIELD_GIFT_RANK_CUR_ROUND=291,a.GLOBALVALUE_INT_FIELD_MASS_BOSS_START=292,a.GLOBALVALUE_INT_FIELD_MASS_BOSS_END=312,a.GLOBALVALUE_INT_FIELD_LOTTERY_RECORD_CURSOR_START=312,a.GLOBALVALUE_INT_FIELD_LOTTERY_RECORD_CURSOR_END=322,a.GLOBALVALUE_INT_FIELD_ACTIVITIES_RUNNING_START=322,a.GLOBALVALUE_INT_FIELD_ACTIVITIES_RUNNING_END=352,a.GLOBALVALUE_STRING_FIELD_LIMIT_ACTIVITY_SCRIPT=4,a.GLOBALVALUE_STRING_FIELD_FIELD_BOSS_START=5,a.GLOBALVALUE_STRING_FIELD_FIELD_BOSS_END=85,a.GLOBALVALUE_STRING_FIELD_XIANFU_RECORD_START=85,a.GLOBALVALUE_STRING_FIELD_XIANFU_RECORD_END=95,a.GLOBALVALUE_STRING_FIELD_GIFT_RANK_WINER_QUEEN_NAME=95,a.GLOBALVALUE_STRING_FIELD_GIFT_RANK_WINER_FACTION_NAME=96,a.GLOBALVALUE_STRING_FIELD_GIFT_RANK_WINER_GUARD_NAME=97,a.GLOBALVALUE_STRING_FIELD_LOTTERY_RECORD_START=98,a.GLOBALVALUE_STRING_FIELD_LOTTERY_RECORD_END=198,a.MAX_DOUJIANTAI_RANK_COUNT=1e3,a.MAX_RISK_RANK_COUNT=10,a.MAX_RISK_RANK_SWAPED_COUNT=11,a.RISK_RANK_INFO_SECTION_ID=0,a.RISK_RANK_INFO_TIME=1,a.MAX_RISK_RANK_INFO_COUNT=2,a.GLOBALCOUNTER_INT_FIELD_DOUJIANTAI_FLAG_START=0,a.GLOBALCOUNTER_INT_FIELD_DOUJIANTAI_FLAG_END=40,a.GLOBALCOUNTER_INT_FIELD_ACTIVITIES_FINISH_START=40,a.GLOBALCOUNTER_INT_FIELD_ACTIVITIES_FINISH_END=240,a.GLOBALCOUNTER_INT_FIELD_ACT_RANK_INFO_START=240,a.GLOBALCOUNTER_INT_FIELD_ACT_RANK_INFO_END=340,a.GLOBALCOUNTER_INT_FIELD_RISK_RANK_INFO_START=340,a.GLOBALCOUNTER_INT_FIELD_RISK_RANK_INFO_END=362,a.GLOBALCOUNTER_STRING_FIELD_DOUJIANTAI_START=4,a.GLOBALCOUNTER_STRING_FIELD_DOUJIANTAI_END=1004,a.GLOBALCOUNTER_STRING_FIELD_DOUJIANTAI_RECORD_START=1004,a.GLOBALCOUNTER_STRING_FIELD_DOUJIANTAI_RECORD_END=11004,a.GLOBALCOUNTER_STRING_FIELD_ACT_RANK_INFO_START=11004,a.GLOBALCOUNTER_STRING_FIELD_ACT_RANK_INFO_END=11104,a.GLOBALCOUNTER_STRING_FIELD_RISK_RANK_NAME_START=11104,a.GLOBALCOUNTER_STRING_FIELD_RISK_RANK_NAME_END=11115,a.GLOBALCOUNTER_INT_FIELD_ONLINE_AWARD_COUNT=0,a.GLOBALCOUNTER_INT_FIELD_DAILY_ADD_BIND_GOLD=2,
a.GLOBALCOUNTER_INT_FIELD_DAILY_SUB_BIND_GOLD=4,a.GLOBALCOUNTER_INT_FIELD_DAILY_ADD_GOLD_INGOT=6,a.GLOBALCOUNTER_INT_FIELD_DAILY_SUB_GOLD_INGOT=8,a.GLOBALCOUNTER_INT_FIELD_DAILY_ADD_SILVER=10,a.GLOBALCOUNTER_INT_FIELD_DAILY_SUB_SILVER=12,a.MAX_GLOBALCOUNTER_INT_FIELD=13,a.MAP_TYPE_MAIN=0,a.MAP_TYPE_FIELD=1,a.MAP_TYPE_INSTANCE=2,a.MAP_TYPE_ACTIVITY=3,a.MAP_TYPE_PVP=4,a.INSTANCE_QUEST_TYPE_KILL_MONSTER=1,a.INSTANCE_QUEST_TYPE_PICK_ITEM=2,a.INSTANCE_QUEST_TYPE_ACTIVE_MACHINE=3,a.INSTANCE_QUEST_TYPE_PROTECT_NPC=4,a.INSTANCE_QUEST_TYPE_ESCORT_NPC=5,a.INSTANCE_QUEST_TYPE_DEFENSE=6,a.INSTANCE_QUEST_TYPE_BREAK_THROUGH=7,a.MAX_INSTANCE_QUEST_COUNT=12,a.MAP_INT_FIELD_MAP_ID=0,a.MAP_INT_FIELD_INSTANCE_ID=1,a.MAP_INT_FIELD_LINE_NO=2,a.MAP_INT_FIELD_WARID=2,a.MAP_INT_FIELD_KUAFU_TYPE=3,a.MAP_INT_FIELD_STATE=4,a.MAP_INT_FIELD_KILL_NUM=5,a.MAP_INT_FIELD_RESERVE1=6,a.MAP_INT_FIELD_RESERVE2=7,a.MAP_INT_FIELD_RESERVE3=8,a.MAP_INT_FIELD_RESERVE4=9,a.MAP_INT_FIELD_INSTANCE_WAVE=10,a.MAP_INT_FIELD_QUESTS_START=11,a.MAP_INT_FIELD_QUESTS_END=35,a.MAP_INT_FIELD_QUESTS_PROCESS_START=35,a.MAP_INT_FIELD_QUESTS_PROCESS_END=38,a.MAP_INT_FIELD_CREATE_TM=38,a.MAP_INT_FIELD_START_TM=39,a.MAP_INT_FIELD_QUEST_END_TM=40,a.MAP_INT_FIELD_END_TM=41,a.MAP_INT_FIELD_INSTANCE_TYPE=42,a.MAP_STR_GENERAL_ID=4,a.MAP_STR_REWARD=5,a.REFRESH_MONSTER_FIELD_ID=46,a.REFRESH_MONSTER_FIELD_INFO_START=47,a.KUAFU_3V3_PLAYER_DAMAGE=0,a.KUAFU_3V3_PLAYER_SHOW_INFO=2,a.KUAFU_3V3_PLAYER_SETTLEMENT=3,a.KUAFU_3V3_PLAYER_HONOR=4,a.MAX_KUAFU_3V3_INT_COUNT=5,a.KUAFU_3V3_PLAYER_NAME=0,a.KUAFU_3V3_PLAYER_GUID=1,a.MAX_KUAFU_3V3_STR_COUNT=2,a.MAX_KUAFU_3V3_COUNT=6,a.KUAFU_3V3_FIELDS_INT_INFO_START=43,a.KUAFU_3V3_FIELDS_INT_INFO_END=73,a.KUAFU_3V3_FIELDS_STR_INFO_START=6,a.KUAFU_3V3_FIELDS_STR_INFO_END=18,a.KUAFU_XIANFU_PLAYER_SETTLEMENT=0,a.KUAFU_XIANFU_PLAYER_MONEY=2,a.KUAFU_XIANFU_PLAYER_MONEY_CHANGED=4,a.KUAFU_XIANFU_PLAYER_SHOW_INFO=6,a.MAX_KUAFU_XIANFU_INT_COUNT=7,a.KUAFU_XIANFU_PLAYER_NAME=0,a.KUAFU_XIANFU_PLAYER_GUID=1,a.MAX_KUAFU_XIANFU_STR_COUNT=2,a.KUAFU_XIANFU_BOSS_SHOW_INFO=0,a.KUAFU_XIANFU_BOSS_BORN_INFO=1,a.KUAFU_XIANFU_BOSS_BORN_TIME=2,a.MAX_KUAFU_XIANFU_BOSS_INT_COUNT=3,a.MAX_KUAFU_XIANFU_COUNT=10,a.MAX_KUAFU_XIANFU_BOSS_COUNT=5,a.KUAFU_XIANFU_FIELDS_INT_INFO_START=43,a.KUAFU_XIANFU_FIELDS_INT_INFO_END=113,a.KUAFU_XIANFU_FIELDS_INT_BOSS_INDX=113,a.KUAFU_XIANFU_FIELDS_INT_BOSS_INFO_START=114,a.KUAFU_XIANFU_FIELDS_INT_BOSS_INFO_END=129,a.KUAFU_XIANFU_FIELDS_HARD=129,a.XIANFU_TEST_DUMMY_COUNT=130,a.KUAFU_XIANFU_FIELDS_STR_INFO_START=6,a.KUAFU_XIANFU_FIELDS_STR_INFO_END=26,a.KUAFU_GROUP_INSTANCE_PLAYER_DAED_TIMES=0,a.KUAFU_GROUP_INSTANCE_PLAYER_REBRON_CD=1,a.MAX_KUAFU_GROUP_INSTANCE_PLAYER_INT_COUNT=2,a.KUAFU_GROUP_INSTANCE_PLAYER_NAME=0,a.KUAFU_GROUP_INSTANCE_PLAYER_GUID=1,a.KUAFU_GROUP_INSTANCE_PLAYER_REWARDS=2,a.MAX_KUAFU_GROUP_INSTANCE_PLAYER_STR_COUNT=3,a.MAX_GROUP_INSTANCE_PLAYER_COUNT=3,a.KUAFU_GROUP_INSTANCE_FIELDS_HARD=43,a.KUAFU_GROUP_INSTANCE_FIELDS_PART=44,a.KUAFU_GROUP_INSTANCE_INT_FIELDS_PLAYER_INFO_START=45,a.KUAFU_GROUP_INSTANCE_INT_FIELDS_PLAYER_INFO_END=51,a.KUAFU_GROUP_INSTANCE_STR_FIELDS_PLAYER_INFO_START=45,a.KUAFU_GROUP_INSTANCE_STR_FIELDS_PLAYER_INFO_END=54,a.DOUJIANTAI_FIELDS_INT_RANK=43,a.DOUJIANTAI_FIELDS_INT_COMBAT_WIN_INFO=44,a.XIULIANCHANG_FIELDS_INT_RANK=43,a.XIULIANCHANG_FIELDS_INT_ROBOT_ID=44,a.XIULIANCHANG_FIELDS_INT_LEVEL=45,a.XIULIANCHANG_FIELDS_STR_INFO_GUID=6,a.XIULIANCHANG_FIELDS_STR_INFO_CONTENT=7,a.XIULIANCHANG_FIELDS_STR_INFO_NAME=8,a.VIP_INSTANCE_FIELD_ID=43,a.MAP_MASS_BOSS_INT_FIELD_ID=43,a.WORLDBOSS_FIELDS_WAIT_TIME=43,a.WORLDBOSS_FIELDS_BORN_TIME=44,a.RES_INSTANCE_FIELD_ID=43,a.TRIAL_INSTANCE_FIELD_CURSOR=43,a.TRIAL_INSTANCE_FIELD_SECTION_ID=44,a.TRIAL_INSTANCE_FIELD_ORDER=45,a.TRIAL_INSTANCE_FIELD_BOSS_REFRESHED=46,a.FACTION_INSTANCE_FIELD_GUID=6,a.FACTION_BOSSDEFENSE_INSTANCE_FIELD_BUILDING_LV=43,a.FACTION_BOSSDEFENSE_INSTANCE_FIELD_INDEX=44,a.FACTION_BOSSDEFENSE_INSTANCE_FIELD_POOL_ID=45,a.FACTION_BOSSDEFENSE_INSTANCE_FIELD_HP=46,a.FACTION_BOSSDEFENSE_INSTANCE_FIELD_PLAYER_GUID=6,a.FACTION_BOSSDEFENSE_INSTANCE_FIELD_FACTION_GUID=7,a.FACTION_TOWER_INSTANCE_FIELD_FLOOR=43,a.FACTION_TOWER_INSTANCE_FIELD_BUFF=44,a.FACTION_TOWER_INSTANCE_FIELD_DEBUFF=45,a.FACTION_TOWER_INSTANCE_FIELD_MONSTER_NUM=46,a.TRIAL_INSTANCE_FIELD_ID=43,a.TAOHUA_REFRESH_TIMES=10,a.TAOHUA_INT_FIELD_REFRESH_TIMES=43,a.TAOHUA_INT_FIELD_BOSS_CURR_HP=44,a.TAOHUA_STR_FIELD_REAL_BOSS_GUID=5,a.TOWER_MAX_FLOOR=2,a.TAGUAI_INT_FIELD_FIRST_FLOOR=43,a.FIGHTING_INFO_STRING_CASTER=0,a.FIGHTING_INFO_STRING_TARGET=1,a.MAX_FIGHTING_INFO_STRING=2,a.MAX_FIGHTING_INFO_COUNT=100,a.FIGHTING_INFO_INT_VALUES=0,a.FIGHTING_INFO_INT_UINT8=2,a.FIGHTING_INFO_INT_SPELL_ID=3,a.FIGHTING_INFO_INT_HP=4,a.FIGHTING_INFO_INT_RESERVE_0=5,a.FIGHTING_INFO_INT_RESERVE_1=6,a.FIGHTING_INFO_INT_RESERVE_2=7,a.FIGHTING_INFO_INT_RESERVE_3=8,a.MAX_FIGHTING_INFO_INT=9,a.MAX_FIGHTING_INFO_INT_NOW_INDEX=0,a.MAX_FIGHTING_INFO_INT_START=1,a.MAX_FIGHTING_INFO_INT_FIELD=901,a.FIGHTING_INFO_STRING_FIELD_START=4,a.MAX_FIGHTING_INFO_STRING_FIELD=204,a.QUERY_PLAYER_INT_UINT16=0,a.QUERY_PLAYER_INT_BYTE1=1,a.QUERY_PLAYER_INT_BYTE2=2,a.QUERY_PLAYER_INT_BASE_ATTR_START=3,a.QUERY_PLAYER_INT_BASE_ATTR_END=21,a.QUERY_PLAYER_INT_FIXED_ATTR_START=21,a.QUERY_PLAYER_INT_FIXED_ATTR_END=39,a.QUERY_PLAYER_INT_LUCKY=39,a.QUERY_PLAYER_INT_MEILI=41,a.QUERY_PLAYER_INT_BEAR=43,a.QUERY_PLAYER_INT_POISON=45,a.QUERY_PLAYER_INT_ICE=47,a.QUERY_PLAYER_MOVESPEED=49,a.QUERY_PLAYER_PHYSICAL=51,a.QUERY_PLAYER_INT_FORCE=53,a.QUERY_PLAYER_ONLINE_TIME=55,a.QUERY_PLAYER_INT_EQUIPMENT=56,a.QUERY_PLAYER_INT_EQUIPMENT_END=76,a.QUERY_PLAYER_INT_FLAG=76,a.QUERY_PLAYER_INT_FORCE_LEVEL=77,a.QUERY_PLAYER_INT_FORCE_ITEM=79,a.QUERY_PLAYER_INT_FORCE_FACTION=81,a.QUERY_PLAYER_INT_FLAG_TYPE=83,a.QUERY_PLAYER_INT_FORGING_STRENG=84,a.QUERY_PLAYER_STRING_GUID=4,a.QUERY_PLAYER_STRING_NAME=5,a.QUERY_PLAYER_STRING_FACTION_ID=6,a.QUERY_PLAYER_STRING_FACTION_NAME=7,a.MAX_QUERY_PLAYER_STRING_FIELD=8,a.ITEM_QUERY_INT_FIELD_COUNT=0,a.ITEM_QUERY_STR_FIELD_START=4,a.GIFTPACKS_INFO_INT_ID=0,a.GIFTPACKS_INFO_INT_START_TIME=1,a.GIFTPACKS_INFO_INT_END_TIME=2,a.GIFTPACKS_INFO_INT_BYTE=3,a.MAX_GIFTPACKS_INFO_INT=4,a.GIFTPACKS_INFO_STRING_GIFT_NAME=0,a.GIFTPACKS_INFO_STRING_GIFT_DESC=1,a.GIFTPACKS_INFO_STRING_GIFT_FROM=2,a.GIFTPACKS_INFO_STRING_GIFT_ITEM=3,a.MAX_GIFTPACKS_INFO_STRING=4,a.MAX_GIFTPACKS_INFO_COUNT=100,a.MAX_GIFTPACKS_INFO_INT_NOW_INDEX=0,a.GIFTPACKS_INT_FIELD_BEGIN=1,a.MAX_GIFTPACKS_INT_FIELD=401,a.GIFTPACKS_STRING_FIELD_BEGIN=4,a.MAX_GIFTPACKS_STRING_FIELD=404,a.RANK_TYPE_POWER=0,a.RANK_TYPE_LEVEL=1,a.RANK_TYPE_MONEY=2,a.RANK_TYPE_ONLINE_TIME=3,a.RANK_TYPE_TRIAL=4,a.RANK_TYPE_FACTION=5,a.RANK_TYPE_DIVINE=6,a.RANK_TYPE_MOUNT=7,a.RANK_TYPE_SINGLE_PVP=8,a.RANK_TYPE_WINGS=9,a.MAX_RANK_TYPE=10,a.RANK_TYPE_DOUJIANTAI=11,a.RANK_LIST_MAX_VALUES=100,a.RANK_LIST_MAX_SHOW=4,a.RANK_LIST_CURRENT_OBJ_INT_FIELD_TYPE=0,a.RANK_LIST_CURRENT_OBJ_INT_FIELD_RANKING=1,a.RANK_LIST_CURRENT_OBJ_INT_FIELD_BYTE=2,a.RANK_LIST_CURRENT_OBJ_INT_FIELD_BYTE2=3,a.RANK_LIST_CURRENT_OBJ_INT_FIELD_TITLE=4,a.RANK_LIST_CURRENT_OBJ_INT_FIELD_FORCE=5,a.RANK_LIST_CURRENT_OBJ_INT_FIELD_LEVEL=7,a.RANK_LIST_CURRENT_OBJ_INT_FIELD_MONEY=8,a.RANK_LIST_CURRENT_OBJ_INT_FIELD_ONLINE_TIME=10,a.RANK_LIST_CURRENT_OBJ_INT_FIELD_TRIAL=11,a.RANK_LIST_CURRENT_OBJ_INT_FIELD_SHOW=12,a.RANK_LIST_CURRENT_OBJ_INT_FIELD_SHOW_END=16,a.RANK_LIST_CURRENT_OBJ_INT_FIELD_LIKE=17,a.RANK_LIST_CURRENT_OBJ_STR_FIELD_GUID=4,a.RANK_LIST_CURRENT_OBJ_STR_FIELD_PLAYER_GUID=5,a.RANK_LIST_CURRENT_OBJ_STR_FIELD_PLAYER_NAME=6,a.RANK_LIST_CURRENT_OBJ_STR_FIELD_FACTION_NAME=7,a.RANK_LIST_INT_FIELD_FACTION_LEV=2,a.RANK_LIST_INT_FIELD_FACTION_COUNT=3,a.RANK_LIST_INT_FIELD_FACTION_BYTE=4,a.RANK_LIST_STR_FIELD_FACTION_GUID=4,a.RANK_LIST_STR_FIELD_FACTION_NAME=5,a.RANK_LIST_STR_FIELD_FACTION_SQGG=6,a.ITEM_SHOW_TYPE_DEFAULT=0,a.ITEM_SHOW_TYPE_MINI_QUEST_BAR=1,a.ITEM_SHOW_TYPE_MINI_QUEST_DAILY2=2,a.RIGHTFLOAT_INFO_INT_ID=0,a.RIGHTFLOAT_INFO_INT_START_TIME=1,a.RIGHTFLOAT_INFO_INT_END_TIME=2,a.RIGHTFLOAT_INFO_INT_ZONE_1=3,a.RIGHTFLOAT_INFO_INT_ZONE_2=4,a.RIGHTFLOAT_INFO_INT_ZONE_3=5,a.RIGHTFLOAT_INFO_INT_BYTE=6,a.RIGHTFLOAT_INFO_INT_ADD_TIME=7,a.MAX_RIGHTFLOAT_INFO_INT=8,a.RIGHTFLOAT_INFO_STRING_SUBJECT=0,a.RIGHTFLOAT_INFO_STRING_CONTENT=1,a.RIGHTFLOAT_INFO_STRING_LINK=2,a.MAX_RIGHTFLOAT_INFO_STRING=3,a.MAX_RIGHTFLOAT_INFO_COUNT=100,a.MAX_RIGHTFLOAT_INFO_INT_NOW_INDEX=0,a.RIGHTFLOAT_INT_FIELD_START=1,a.MAX_RIGHTFLOAT_INT_FIELD=801,a.RIGHTFLOAT_STRING_FIELD_START=4,a.MAX_RIGHTFLOAT_STRING_FIELD=304,a.LIMIT_ACTIVITY_INT_FIELD_VERSION=0,a.LIMIT_ACTIVITY_INT_FIELD_START_TIME=1,a.LIMIT_ACTIVITY_INT_FIELD_END_TIME=2,a.LIMIT_ACTIVITY_INT_FIELD_RECHARGE_SUM=3,a.LIMIT_ACTIVITY_INT_FIELD_RECHARGE_TIME=4,a.LIMIT_ACTIVITY_INT_FIELD_REWARD_COUNT=100,a.LIMIT_ACTIVITY_INT_FIELD_REWARD_COUNT_END=500,a.LIMIT_ACTIVITY_STRING_FIELD_RECHARGE_ID=4,a.LIMIT_ACTIVITY_STRING_FIELD_CLIENT_CONFIG=5,a.MAX_NOTICE_MESSAGE_NUMBER=100,a.NOTICE_MESSAGE_INFO_TYPE_FISHING=0,a.NOTICE_MESSAGE_INFO_TYPE_MINING=1,a.NOTICE_MESSAGE_INFO_TYPE_WORLD_BOSS=2,a.NOTICE_MESSAGE_INFO_TYPE_KAIFUJIJIN=3,a.MAX_MESSAGE_INFO_TYPE=4,a.NOTICE_MESSAGE_INT_FIELD_INDEX=0,a.NOTICE_MESSAGE_INT_FIELD_INDEX_END=4,a.NOTICE_MESSAGE_STRING_FIELD_START=4,a.NOTICH_MESSAGE_STRING_FIELD_END=404,a.SYSTEM_MAIL_INFO_INT_ID=0,a.SYSTEM_MAIL_INFO_INT_START_TIME=1,a.SYSTEM_MAIL_INFO_INT_END_TIME=2,a.SYSTEM_MAIL_INFO_INT_TYPE=3,a.MAX_SYSTEM_MAIL_INFO_INT=4,a.SYSTEM_MAIL_INFO_STRING_NAME=0,a.SYSTEM_MAIL_INFO_STRING_DESC=1,a.SYSTEM_MAIL_INFO_STRING_FROM=2,a.SYSTEM_MAIL_INFO_STRING_ITEM=3,a.MAX_SYSTEM_MAIL_INFO_STRING=4,a.MAX_SYSTEM_MAIL_INFO_COUNT=8192,a.SYSTEM_MAIL_COUNT=0,a.MAX_SYSTEM_MAIL_INFO_INT_NOW_INDEX=1,a.SYSTEM_MAIL_INT_FIELD_BEGIN=2,a.SYSTEM_MAIL_INT_FIELD_END=32770,a.SYSTEM_MAIL_STRING_FIELD_BEGIN=4,a.SYSTEM_MAIL_STRING_FIELD_END=32772,a.MAX_OFFLINE_MAIL_INFO_COUNT=16384,a.OFFLINE_MAIL_STORE_RANK_LEVEL=0,a.MAX_OFFLINE_MAIL_STORE_COUNT=1,a.HOSTING_OPT_TYPE_APPLY=0,a.HOSTING_OPT_TYPE_AGREED=1,a.HOSTING_OPT_TYPE_CANCEL=2,a.HOSTING_OPT_TYPE_LOGIN=3,a.HOSTING_OPT_TYPE_REFUSE=4,a.HOSTING_OPT_TYPE_DUE_TO=5,a.HOSTING_OPT_TYPE_APPLY_DUE_TO=6,a.MAX_EQUIP_PART_NUMBER=10,a.ONE_EQUIP_PART_GEM_NUMBER=6,a.EQUIP_PART_OPT_TYPE_STRENGTH_LEVEL_OFFSET=0,a.EQUIP_PART_OPT_TYPE_GEM_INFO_OFFSET=1,a.EQUIP_PART_OPT_TYPE_GEM_LEVEL_OFFSET=0,a.EQUIP_PART_OPT_TYPE_GEM_EXP_OFFSET=1,a.EQUIP_PART_OPT_TYPE_ONE_GEM_INFO_LENGTH=2,a.EQUIP_PART_OPT_TYPE_ONE_PART_INFO_LENGTH=13,a.EQUIP_PART_OPT_TYPE_PARTS_INFO_LENGTH=130,a.APPD_LOGICAL_INFO_INT_FIELD_STRENGTH_START=0,a.APPD_LOGICAL_INFO_INT_FIELD_STRENGTH_END_EXCLUDE=130,a.TEXT_TYPE_POSITION=1,a.TEXT_TYPE_SUIT=2,a.TEXT_TYPE_GROUP=3,a.TEXT_TYPE_INSTANCE=4,a.PASSIVE_EFFECT_TYPE_SPELL_AMPLIFY=1,a.PASSIVE_EFFECT_TYPE_ADD_BUFF=2,a.PASSIVE_EFFECT_TYPE_CHANGE_SPELL=3,a.PASSIVE_EFFECT_TYPE_PLAYER_ATTR=4,a.PASSIVE_EFFECT_TYPE_ADDITIONAL_SPELL=5,a.PASSIVE_EFFECT_TYPE_PLAYER_LOOT_ATTR=6,a.PASSIVE_DISPATCH_TYPE_FOREVER=0,a.PASSIVE_DISPATCH_TYPE_ATTR_CHANGE=1,a.PASSIVE_DISPATCH_TYPE_HIT=2,a.PASSIVE_DISPATCH_TYPE_HURT=3,a.PASSIVE_DISPATCH_TYPE_DEAD=4,a.PASSIVE_DISPATCH_TYPE_ENEMY_DEAD=5,a.PASSIVE_DISPATCH_TYPE_ON_BUFF=6,a.PASSIVE_DISPATCH_TYPE_ENEMY_ON_BUFF=7,a.MODULE_SETTING=101,a.MODULE_BAG=102,a.MODULE_RONGLIAN=103,a.MODULE_QUEST=104,a.MODULE_DAILY_TASKS=105,a.MODULE_CHAT=106,a.MODULE_MAIL=107,a.MODULE_MAP=108,a.MODULE_STRENGTH=109,a.MODULE_CHATPERSON=110,a.MODULE_ACTIVE=111,a.MODULE_ROLE=201,a.MODULE_SPELL=202,a.MODULE_DIVINE=203,a.MODULE_FASHION=204,a.MODULE_MOUNT=205,a.MODULE_MIX=206,a.MODULE_WING=207,a.MODULE_TCM=208,a.MODULE_SOCIAL=301,a.MODULE_FACTION=302,a.MODULE_RANK=303,a.MODULE_FACTIONMAIN=304,a.MODULE_FACTIONSKILL=305,a.MODULE_FACTIONACTIVE=306,a.MODULE_FACTIONBOX=307,a.MODULE_MALL=401,a.MODULE_VIP=402,a.MODULE_INSTANCE=501,a.MODULE_WORLD_RISK=502,a.MODULE_ARENA=503,a.MODULE_BOSS=504,a.MODULE_WELFARE=601,a.MODULE_OPENSERVICE=701,a.MODULE_FIRST_RECHARGE=801,a.MODULE_SETTING_SYSTEM=1,a.MODULE_BAG_ITEM=1,a.MODULE_RONGLIAN_ALL=1,a.MODULE_QUEST_MAIN=1,a.MODULE_QUEST_EXTENSION=2,a.MODULE_QUEST_ACTIVITY=3,a.MODULE_DAILY_TASKS_ALL=1,a.MODULE_CHAT_ALL=1,a.MODULE_MAIL_ALL=1,a.MODULE_MAP_REGION=1,a.MODULE_MAP_WORLD=2,a.MODULE_STRENGTH_ALL=1,a.MODULE_CHATPERSON_ALL=1,a.MODULE_ACTIVE_ALL=1,a.MODULE_ROLE_ATTR=1,a.MODULE_ROLE_ACHIEVE=2,a.MODULE_ROLE_TITLE=3,a.MODULE_SPELL_ALL=1,a.MODULE_DIVINE_ALL=1,a.MODULE_FASHION_CLOTHES=1,a.MODULE_FASHION_WEAPON=2,a.MODULE_MOUNT_UPGRADE=1,a.MODULE_MOUNT_LEVEL=2,a.MODULE_MOUNT_SKILL=3,a.MODULE_MOUNT_ILLUSION=4,a.MODULE_MIX_STRENGTH=1,a.MODULE_MIX_POLISHED=2,a.MODULE_MIX_GEM=3,a.MODULE_MIX_WASH=4,a.MODULE_WING_UPGRADE=1,a.MODULE_WING_STRENGTH=2,a.MODULE_TCM_ALL=1,a.MODULE_SOCIAL_FRIEND=1,a.MODULE_SOCIAL_ENEMY=2,a.MODULE_FACTION_RECRUIT=1,a.MODULE_FACTION_CREATE=2,a.MODULE_FACTION_MEMBER=3,a.MODULE_FACTION_FUNCTION=4,a.MODULE_RANK_LOCAL=1,a.MODULE_RANK_KUAFU=2,a.MODULE_FACTIONMAIN_ALL=1,a.MODULE_FACTIONSKILL_ALL=1,a.MODULE_FACTIONACTIVE_TRIAL=1,a.MODULE_FACTIONACTIVE_BOSS=2,a.MODULE_FACTIONBOX_DEVOTE=1,a.MODULE_FACTIONBOX_ITEM=2,a.MODULE_MALL_GOLD=1,a.MODULE_MALL_SCORE=2,a.MODULE_MALL_RECHARGE=3,a.MODULE_VIP_ALL=1,a.MODULE_INSTANCE_PLOT=1,a.MODULE_INSTANCE_RES=2,a.MODULE_INSTANCE_TRIAL=3,a.MODULE_INSTANCE_TEAM=4,a.MODULE_WORLD_RISK_MAIN=1,a.MODULE_ARENA_DOUJIANTAI=1,a.MODULE_ARENA_XIANMO=2,a.MODULE_ARENA_XIANFU=3,a.MODULE_ARENA_RANK=4,a.MODULE_BOSS_WORLD_BOSS=2,a.MODULE_BOSS_RISK_BOSS=2,a.MODULE_WELFARE_MONTH=1,a.MODULE_WELFARE_LEVEL=2,a.MODULE_WELFARE_SEVEN=3,a.MODULE_WELFARE_RECHARGE=4,a.MODULE_WELFARE_CONSUME=5,a.MODULE_OPENSERVICE_SEVEN=1,a.MODULE_OPENSERVICE_DRAW=2,a.MODULE_OPENSERVICE_EVERYDAY=3,a.MODULE_OPENSERVICE_NEW=4,a.MODULE_FIRST_RECHARGE_ALL=1,a.MERIDIAN_EXP_SOURCE_GROUP_INSTANCE=1,a.MERIDIAN_EXP_SOURCE_TALISMAN_ZHULING=2,a.MERIDIAN_EXP_SOURCE_WINGS_STRENGTH=3,a.VITALITY_TYPE_SMELT_EQUIP=1,a.VITALITY_TYPE_RES_INSTANCE=2,a.VITALITY_TYPE_TRIAL_INSTANCE=3,a.VITALITY_TYPE_GROUP_INSTANCE=4,a.VITALITY_TYPE_MASS_BOSS=5,a.VITALITY_TYPE_WORLD_BOSS=6,a.VITALITY_TYPE_FACTION_BOSS=7,a.VITALITY_TYPE_FACTION_TOWER=8,a.VITALITY_TYPE_FACTION_DONATE=9,a.VITALITY_TYPE_DOUJIANTAI=10,a.VITALITY_TYPE_SINGLE_PVP=11,a}(),NetManager=function(){function a(){var a=this;this.connectState=0,this._handlerMap=new Object,this.protocolos=new Protocols(function(b){a.send(b)})}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.connect=function(a,b,c){var d=this;this._socket=new WebSocket("ws://"+a+":"+b),this._socket.binaryType="arraybuffer",this._socket.onopen=function(a){d.onopenEvent(a)},this._socket.onmessage=function(a){d.onmessageEvent(a)},this._socket.onclose=function(a){d.oncloseEvent(a)},this._socket.onerror=function(a){d.onErrorEvent(a)},this._connetFun=c,this.connectState=1},a.prototype.onErrorEvent=function(a){console.log("socket error",a),this.connectState=0},a.prototype.onopenEvent=function(a){console.log("连接服务器成功"),this._connetFun(),this.connectState=2},a.prototype.onmessageEvent=function(a){var b=new ByteArray(a.data);b.endian=Endian.LITTLE_ENDIAN;var c=b.readUnsignedShort();this._handlerMap[c]?this._handlerMap[c](b):console.log("未注册的消息号:"+c+":"+this.protocolos.getFuncName(c))},a.prototype.oncloseEvent=function(a){this.connectState=2,console.log("服务器断开")},a.prototype.reg=function(a){var b=a.getHanderMap();for(var c in b)this._handlerMap[c]=b[c]},a.prototype.send=function(a){this._socket.send(a.buffer)},a.prototype.close=function(){this._socket.close()},a}(),DualQuatFloat32Array=function(){function a(){}return a}(),AnimData=function(){function a(){this.inLoop=0,this.inter=new Array,this.bounds=new Array,this.nameHeight=0,this.posAry=new Array,this.hasProcess=!1}return a.prototype.processMesh=function(a){if(this.hasProcess)return void console.log("has process logic error");for(var b=0;b<this.matrixAry.length;b++)for(var c=this.matrixAry[b],d=0;d<c.length;d++)c[d].prepend(a.bindPosMatrixAry[d]);this.makeFrameDualQuatFloatArray(a),this.hasProcess=!0},a.prototype.makeFrameDualQuatFloatArray=function(a){this.boneQPAry=new Array;for(var b=0;b<a.meshAry.length;b++){for(var c=new Array,d=a.meshAry[b].boneNewIDAry,e=0;e<this.matrixAry.length;e++){var f=this.matrixAry[e],g=new DualQuatFloat32Array;g.quat=new Float32Array(4*d.length),g.pos=new Float32Array(3*d.length);for(var h=0;h<d.length;h++){var i=f[d[h]].clone();i.appendScale(-1,1,1);var j=new Quaternion;j.fromMatrix(i);var k=i.position;g.quat[4*h+0]=j.x,g.quat[4*h+1]=j.y,g.quat[4*h+2]=j.z,g.quat[4*h+3]=j.w,g.pos[3*h+0]=k.x,g.pos[3*h+1]=k.y,g.pos[3*h+2]=k.z}c.push(g)}this.boneQPAry.push(c)}},a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},SkinMesh=function(a){function b(){a.apply(this,arguments),this.meshAry=new Array,this.fileScale=1,this.tittleHeight=0,this.hitBox=new Vector2D(0,0),this.type=0,this.animDic=new Object,this.ready=!1}return __extends(b,a),b.prototype.makeHitBoxItem=function(){this.hitPosItem=new Array;var a=this.hitBox.x,b=this.hitBox.y,c=new Vector3D(-a,0,-a),d=new Vector3D(a,0,-a),e=new Vector3D(a,0,a),f=new Vector3D(-a,0,a);this.hitPosItem.push(c),this.hitPosItem.push(d),this.hitPosItem.push(e),this.hitPosItem.push(f);var g=new Vector3D(-a,b,-a),h=new Vector3D(a,b,-a),i=new Vector3D(a,b,a),j=new Vector3D(-a,b,a);this.hitPosItem.push(g),this.hitPosItem.push(h),this.hitPosItem.push(i),this.hitPosItem.push(j)},b.prototype.addMesh=function(a){a.uid=this.meshAry.length,this.meshAry.push(a)},b.prototype.loadParticle=function(){},b.prototype.loadMaterial=function(a){void 0===a&&(a=null);for(var b=0;b<this.meshAry.length;b++)this.loadByteMeshDataMaterial(this.meshAry[b],a)},b.prototype.loadByteMeshDataMaterial=function(a,b){void 0===b&&(b=null);var c=Scene_data.fileRoot+a.materialUrl;c=c.replace("_byte.txt",".txt"),c=c.replace(".txt","_byte.txt"),MaterialManager.getInstance().getMaterialByte(c,function(c){a.material=c,c.usePbr?MeshDataManager.getInstance().uploadPbrMesh(a,c.useNormal):(c.lightProbe||c.directLight)&&MeshDataManager.getInstance().uploadPbrMesh(a,!1),a.materialParamData&&(a.materialParam=new MaterialBaseParam,a.materialParam.setData(a.material,a.materialParamData)),b&&b(c)},null,!0,MaterialAnimShader.MATERIAL_ANIM_SHADER,MaterialAnimShader)},b.prototype.setAction=function(a,b){this.animUrlAry=new Array;for(var c=0;c<a.length;c++){var d=a[c],e=b+a[c],f=AnimManager.getInstance().getAnimDataImmediate(e);f.processMesh(this),this.animDic[d]=f,this.animUrlAry.push(e)}},b.prototype.destory=function(){if(this.allParticleDic){for(var a in this.allParticleDic)ParticleManager.getInstance().releaseUrl(a);this.allParticleDic=null}for(var b=0;b<this.meshAry.length;b++)this.meshAry[b].destory();this.meshAry.length=0,this.meshAry=null,this.bindPosMatrixAry.length=0,this.bindPosMatrixAry=null,this.bindPosInvertMatrixAry.length=0,this.bindPosInvertMatrixAry=null,this.boneSocketDic=null;for(var b=0;b<this.animUrlAry.length;b++)AnimManager.getInstance().clearAnim(this.animUrlAry[b]);for(var a in this.animDic)delete this.animDic[a];this.animDic=null},b}(ResCount),BoneSocketData=function(){function a(){}return a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},CollisionVo=function(a){function b(b,c,d){void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),a.call(this)}return __extends(b,a),b}(Object3D),CollisionItemVo=function(){function a(){}return a}(),CollisionType=function(){function a(){}return a.Polygon=0,a.BOX=1,a.BALL=2,a.Cylinder=3,a.Cone=4,a}(),CapsuleVo=function(){function a(a,b){this.radius=a,this.height=b}return a}(),LightVo=function(){function a(){this.sunDirect=new Array(0,1,0),this.sunColor=new Array(2,0,0),this.ambientColor=new Array(0,0,0)}return a.prototype.setData=function(a,b,c){this.sunDirect[0]=a.x,this.sunDirect[1]=a.y,this.sunDirect[2]=a.z,this.sunColor[0]=b.x,this.sunColor[1]=b.y,this.sunColor[2]=b.z,this.ambientColor[0]=c.x,this.ambientColor[1]=c.y,this.ambientColor[2]=c.z},a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},LineDisplayShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Position"),a.bindAttribLocation(this.program,1,"v3Color")},b.prototype.getVertexShaderString=function(){var a="attribute vec3 v3Position;attribute vec3 v3Color;uniform mat4 viewMatrix3D;uniform mat4 camMatrix3D;uniform mat4 posMatrix3D;varying vec4 colorData;void main(void){   vec4 vt0= vec4(v3Position, 1.0);   colorData =vec4(v3Color,1) ;   vt0 = posMatrix3D * vt0;   vt0 = camMatrix3D * vt0;   vt0 = viewMatrix3D * vt0;   gl_Position = vt0;}";return a},b.prototype.getFragmentShaderString=function(){var a=" precision mediump float;\nvarying vec4 colorData;\nvoid main(void)\n{\ngl_FragColor =colorData;\n}";return a},b.LineShader="LineShader",b}(Shader3D),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},LineDisplaySprite=function(a){function b(){a.call(this),this.baseColor=new Vector3D(1,0,0),this.objData=new ObjData,this.shader=ProgrmaManager.getInstance().getProgram(LineDisplayShader.LineShader),this.program=this.shader.program,this.makeLineMode(new Vector3D(0,0,0),new Vector3D(100,0,0),new Vector3D),this.makeLineMode(new Vector3D(0,0,0),new Vector3D(100,0,100),new Vector3D),this.makeLineMode(new Vector3D(100,0,0),new Vector3D(100,0,100),new Vector3D),this.upToGpu()}return __extends(b,a),b.prototype.makeLineMode=function(a,b,c){void 0===c&&(c=null),this.lineVecPos&&this.lineIndex||this.clear(),c&&(this.baseColor=c),this.lineVecPos.push(a.x,a.y,a.z),this.lineVecPos.push(b.x,b.y,b.z),this.lineColor.push(this.baseColor.x,this.baseColor.y,this.baseColor.z),this.lineColor.push(this.baseColor.x,this.baseColor.y,this.baseColor.z),this.lineIndex.push(this.lineIndex.length+0,this.lineIndex.length+1)},b.prototype.clear=function(){this.lineVecPos=new Array,this.lineIndex=new Array,this.lineColor=new Array,this.objData.indexBuffer&&(this.objData.indexBuffer=null)},b.prototype.upToGpu=function(){this.lineIndex.length&&(this.objData.treNum=this.lineIndex.length,this.objData.vertexBuffer=Scene_data.context3D.uploadBuff3D(this.lineVecPos),this.objData.normalsBuffer=Scene_data.context3D.uploadBuff3D(this.lineColor),this.objData.indexBuffer=Scene_data.context3D.uploadIndexBuff3D(this.lineIndex))},b.prototype.update=function(){this.objData&&this.objData.indexBuffer&&(Scene_data.context3D.setProgram(this.program),Scene_data.context3D.setVcMatrix4fv(this.shader,"viewMatrix3D",Scene_data.viewMatrx3D.m),Scene_data.context3D.setVcMatrix4fv(this.shader,"camMatrix3D",Scene_data.cam3D.cameraMatrix.m),Scene_data.context3D.setVcMatrix4fv(this.shader,"posMatrix3D",this.posMatrix.m),Scene_data.context3D.setVa(0,3,this.objData.vertexBuffer),Scene_data.context3D.setVa(1,3,this.objData.normalsBuffer),Scene_data.context3D.drawLine(this.objData.indexBuffer,this.objData.treNum))},b}(Display3D),GridLineSprite=function(a){function b(){a.call(this),this.makeGridData()}return __extends(b,a),b.prototype.makeGridData=function(){var a=100,b=10,c=a/b;this.clear();var d,e;d=new Vector3D(0,0,+a),e=new Vector3D(0,0,-a),this.makeLineMode(d,e,new Vector3D(0,0,1,1)),d=new Vector3D(+a,0,0),e=new Vector3D(-a,0,0),this.makeLineMode(d,e,new Vector3D(1,0,0,1)),this.baseColor=new Vector3D(128/255,128/255,128/255,1);for(var f=1;b>=f;f++)d=new Vector3D(+f*c,0,+a),e=new Vector3D(+f*c,0,-a),this.makeLineMode(d,e),d=new Vector3D(-f*c,0,+a),e=new Vector3D(-f*c,0,-a),this.makeLineMode(d,e),d=new Vector3D(+a,0,+f*c),e=new Vector3D(-a,0,+f*c),this.makeLineMode(d,e),d=new Vector3D(+a,0,-f*c),e=new Vector3D(-a,0,-f*c),this.makeLineMode(d,e);this.upToGpu()},b}(LineDisplaySprite),FpsMc=function(){function a(){this.drawNum=0,this.fpsStr=""}return a.update=function(){},a.prototype.getStr=function(){return a.fpsNowNum=Math.min(this.drawNum,600),this.fpsStr="Fps:"+String(a.fpsNowNum)+"-"+a.tipStr,this.fpsStr},a.addFps=0,a.fpsNowNum=0,a.tipStr="",a}(),FpsStage=function(){function a(){this.lastTime=0,this.cPos=new Vector2D(150,100)}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.init=function(a,b){var c=this;this.canvas2D=a,this.loadCav=b,this.fps=new FpsMc,this.canvasUi=this.canvas2D.getContext("2d"),this.loadCtx=this.loadCav.getContext("2d"),TimeUtil.addFrameTick(function(){c.upData()})},a.prototype.showLoadInfo=function(a){this.loadCtx.clearRect(0,0,this.loadCav.width,this.loadCav.height),this.loadCtx.font="40px Helvetica",this.loadCtx.fillStyle="#ffffff",this.loadCtx.textBaseline="top",this.loadCtx.textAlign="left",this.loadCtx.fillText(a,0,0)},a.prototype.removeShowLoad=function(){this.loadCav.parentElement&&this.loadCav.parentElement.removeChild(this.loadCav),a.showFps=!0},a.prototype.upData=function(){if(this.fps.drawNum++,!(this.lastTime>=TimeUtil.getTimer()-1e3)){if(this.lastTime=TimeUtil.getTimer(),!a.showFps)return void this.canvasUi.clearRect(0,0,this.canvas2D.width,this.canvas2D.height);this.canvasUi.font="40px Helvetica";var b=this.canvasUi.measureText(this.fps.getStr()).width;this.canvas2D.width=b,this.canvas2D.height=30,this.canvasUi.clearRect(50,0,this.canvas2D.width-50,this.canvas2D.height),this.canvasUi.fillStyle="#000000",this.canvasUi.fillRect(50,0,this.canvas2D.width-50,this.canvas2D.height),this.canvasUi.font="30px Helvetica",this.canvasUi.fillStyle="#ffffff",this.canvasUi.textBaseline=TextAlign.TOP,this.canvasUi.textAlign=TextAlign.LEFT,this.canvasUi.fillText(this.fps.getStr(),50,0),this.fps.drawNum=0}},a.prototype.makeXyzLine=function(){var a=new Vector3D(80,0,0),b=new Vector3D(0,70,0),c=new Vector3D(0,0,80),d=new Matrix3D;d.appendRotation(Scene_data.cam3D.rotationY,Vector3D.Y_AXIS),d.appendRotation(Scene_data.cam3D.rotationX,Vector3D.X_AXIS),a=d.transformVector(a),b=d.transformVector(b),c=d.transformVector(c),this.drawLine(new Vector2D(0,0),new Vector2D(a.x,-a.y),"#ff0000"),this.drawLine(new Vector2D(0,0),new Vector2D(b.x,-b.y),"#00ff00"),this.drawLine(new Vector2D(0,0),new Vector2D(c.x,-c.y),"#0000ff"),this.canvasUi.font="12px Helvetica",this.canvasUi.fillStyle="#ff0000",this.canvasUi.fillText("x",a.x+this.cPos.x,-a.y+this.cPos.y),this.canvasUi.fillStyle="#00ff00",this.canvasUi.fillText("y",b.x+this.cPos.x,-b.y+this.cPos.y),this.canvasUi.fillStyle="#0000ff",this.canvasUi.fillText("z",c.x+this.cPos.x,-c.y+this.cPos.y)},a.prototype.drawLine=function(a,b,c){void 0===c&&(c="red"),this.canvasUi.beginPath(),this.canvasUi.lineWidth=2,this.canvasUi.strokeStyle=c,this.canvasUi.moveTo(a.x+this.cPos.x,a.y+this.cPos.y),this.canvasUi.lineTo(b.x+this.cPos.x,b.y+this.cPos.y),this.canvasUi.stroke()},a.prototype.resetSize=function(){this.cPos=new Vector2D(150,Scene_data.stageHeight-100)},a.showFps=!1,a}(),Module=function(){function a(){this.processorMap=new Object}return a.prototype.getModuleName=function(){throw new Error("module必须复写命名")},a.prototype.listProcessors=function(){return null},a.prototype.registerProcessors=function(){var a=this.listProcessors();if(null!=a&&a.length>0)for(var b=0;b<a.length;b++)this.registerProcessor(a[b])},a.prototype.registerProcessor=function(a){if(null!=this.processorMap[a.getName()])throw new Error("同一Module不能注册两个相同的Processor");this.processorMap[a.getName()]=a,a.registerEvents(),NetManager.getInstance().reg(a)},a.registerModule=function(b){if(null!=a.moduleMap[b.getModuleName()])throw new Error("不能注册两个相同的Module");a.moduleMap[b.getModuleName()]=b,b.registerProcessors()},a.moduleMap=new Object,a}(),ModuleEventManager=function(){function a(){}return a.addEvents=function(b,c,d){for(var e=0;e<b.length;e++)a._instance.addEventListener(b[e].type,c,d)},a.dispatchEvent=function(b){a._instance.dispatchEvent(b)},a._instance=new EventDispatcher,a}(),Processor=function(){function a(){}return a.prototype.getName=function(){throw new Error("process必须复写命名")},a.prototype.receivedModuleEvent=function(a){},a.prototype.listenModuleEvents=function(){return null},a.prototype.registerEvents=function(){var a=this.listenModuleEvents();null!=a&&a.length>0&&ModuleEventManager.addEvents(a,this.receivedModuleEvent,this)},a.prototype.getHanderMap=function(){var a=new Object;return a},a}(),CharAction=function(){function a(){}return a.STANAD="stand",a.WALK="walk",a.DEATH="death",a.JUMP="jump",a.SIT="sit",a.ATTACK_01="attack_01",a.ATTACK_02="attack_02",a.ATTACK_03="attack_03",a.ATTACK_04="attack_04",a.ATTACK_05="attack_05",a.ATTACK_06="attack_06",a.ATTACK_010="attack_010",a.ATTACK_020="attack_020",a.STAND_MOUNT="stand_mount_01",a.WALK_MOUNT="walk_mount_01",a.s_attack_01="s_attack_01",a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},UIPanelEvent=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.DISPOSE_PANEL_EVENT="dispose_panel_event",b}(BaseEvent),UIPanel=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.onAdd=function(){this._disposeEventFun&&TimeUtil.removeTimeOut(this._disposeEventFun)},b.prototype.onRemove=function(){var a=this;this._disposeEventFun||(this._disposeEventFun=function(){var b=new UIPanelEvent(UIPanelEvent.DISPOSE_PANEL_EVENT);b.panel=a,ModuleEventManager.dispatchEvent(b)}),TimeUtil.addTimeOut(1e6,this._disposeEventFun)},b}(UIConatiner),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},BaseProcessor=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(Processor),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},SceneBaseChar=function(a){function b(){a.apply(this,arguments),this._avatar=-1,this._visible=!0}return __extends(b,a),Object.defineProperty(b.prototype,"visible",{get:function(){return this._visible},set:function(a){this._visible=a},enumerable:!0,configurable:!0}),b.prototype.setAvatar=function(a){0==a&&(a=this.getDefaultAvatar()),this._avatar!=a&&(this._avatar=a,this.setRoleUrl(this.getSceneCharAvatarUrl(a)))},b.prototype.update=function(){this.visible&&a.prototype.update.call(this),this._shadow&&(this._shadow._visible=this.visible)},b.prototype.getDefaultAvatar=function(){return 0},b.prototype.getSceneCharAvatarUrl=function(a){getRoleUrl(String(a));return getRoleUrl(String(a))},b.prototype.getSceneCharWeaponUrl=function(a,b){return void 0===b&&(b=""),getModelUrl(String(a+b))},b}(Display3dMovie),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},ScenePerfab=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.setPerfabName=function(a){var b=this;this.item=new Array,GroupDataManager.getInstance().getGroupData(Scene_data.fileRoot+getModelUrl(a),function(a){b.loadPartRes("",a,b.item)})},b.prototype.updateRotationMatrix=function(){a.prototype.updateRotationMatrix.call(this);for(var b=0;b<this.item.length;b++){var c=this.item[b];c&&c.rotationData&&c.rotationData&&this._rotationMatrix.getRotaion(c.rotationData)}},b}(Display3dMovie),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},SceneModSprite=function(a){function b(){a.apply(this,arguments);
}return __extends(b,a),b.prototype.setModelById=function(a){var b=this;GroupDataManager.getInstance().getGroupData(Scene_data.fileRoot+getModelUrl(a),function(a){for(var c=0;c<a.dataAry.length;c++){var d=a.dataAry[c];if(d.types==BaseRes.PREFAB_TYPE){b.setObjUrl(d.objUrl),b.setMaterialUrl(d.materialUrl,d.materialInfoArr),b.dynamic=!0;break}}})},b}(Display3DSprite),keyProp=["生命","攻击","防御","命中","闪避","暴击","坚韧","攻速","移速","忽视防御","忽视闪避","生命值回复","伤害加深","伤害减免","反弹伤害","吸血","回复效率","暴击率","抗暴率","暴击伤害倍数","降暴伤害倍数","命中率","闪避率","眩晕","定身","沉默","混乱","魅惑","控制增强","控制减免"],costProp=["元宝","绑定元宝","银币","","","","真气","兽灵","宝石精华","帮贡","荣誉","斗魂"],costItemProp=["","元宝","绑定元宝","银币","绑定银币","声望","家族贡献","荣誉","斗魂","功勋"],quaColorAry=[ColorType.color2daa35,ColorType.color4392ff,ColorType.colorb759ff,ColorType.colorff7200,ColorType.colorce0a00],ModulePageManager=function(){function a(){}return a.showResTittle=function(a){},a}(),GameData=function(){function a(){}return a.getPublicUiAtlas=function(a){var b=this;this.publicbgUiAtlas?a(this.publicbgUiAtlas):(this.publicbgUiAtlas=new UIAtlas,this.publicbgUiAtlas.setInfo("ui/uidata/public/publicbg.xml","ui/uidata/public/publicbg.png",function(){a(b.publicbgUiAtlas)}))},a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},CharUint=function(a){function b(){a.call(this),b.skipId||(b.skipId=1),b.skipId++,this.inScene=!1,this.guid=b.skipId,this._hp=100,this._maxhp=100,this.isDeath=!1}return __extends(b,a),b.prototype.addChar=function(){this.inScene||(this.inScene=!0,this["char"]=this.addRole(new Vector3D(this.x,this.y,this.z),this.avatar),this["char"].rotationY=this.rotationY,this["char"].charUint=this,this["char"].charUint.isDeath=!1,this["char"].charUint.setHp(this["char"].charUint.getMaxHp()),this.isMain?this["char"].showBlood(0):0==this.type&&this["char"].showBlood(1))},b.prototype.removeChar=function(){this.inScene&&(this.inScene=!1,this["char"]&&(SceneManager.getInstance().removeMovieDisplay(this["char"]),this["char"].destory(),this["char"]=null))},b.prototype.addRole=function(a,b){var c=new SceneChar;return c.setRoleUrl(getRoleUrl(b)),c.x=a.x,c.y=a.y,c.z=a.z,c.px=a.x,c.py=a.y,c.pz=a.z,SceneManager.getInstance().addMovieDisplay(c),c.refreshY(),c},b.prototype.getHp=function(){return this._hp},b.prototype.setHp=function(a){this._hp=a},b.prototype.getMaxHp=function(){return this._maxhp},b.prototype.setMaxHp=function(a){this._maxhp=a},b}(Object3D),SceneChar=function(a){function b(){a.call(this),this.speedTX=.075*1.5,this.life=0,this._px=0,this._py=0,this._pz=0,this._pRotationY=0,this.tittleHeight=50,this.toRotationY=0,this.shadow=!0}return __extends(b,a),Object.defineProperty(b.prototype,"px",{get:function(){return this._px},set:function(a){this._px=a,this.x=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"py",{get:function(){return this._py},set:function(a){this._py=a,this.y=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"pz",{get:function(){return this._pz},set:function(a){this._pz=a,this.z=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"forceRotationY",{set:function(a){this.pRotationY=a,this.rotationY=a,this.toRotationY=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"pRotationY",{get:function(){return this._pRotationY},set:function(a){this._pRotationY=a,this.rotationY=a},enumerable:!0,configurable:!0}),b.prototype.refreshTittle=function(){this.refreshPos()},b.prototype.showName=function(a){void 0===a&&(a=null),this.refreshPos()},b.prototype.showBlood=function(a){void 0===a&&(a=0),this._charBloodVo?this._charBloodVo.colortype=a:(this._charBloodVo=BloodManager.getInstance().getBloodLineMeshVo(),this._charBloodVo.colortype=a),this.refreshPos()},b.prototype.onMeshLoaded=function(){this._skinMesh&&(this.tittleHeight=this._skinMesh.tittleHeight,this.loadFinishFun&&this.loadFinishFun())},b.prototype.refreshPos=function(){this._charBloodVo&&(this._charBloodVo.pos.x=this.px,this._charBloodVo.pos.z=this.pz,this._charBloodVo.pos.y=this.py+this.tittleHeight,this._charBloodVo.visible=this.visible)},b.prototype.refreshLifeNum=function(){this.life=this.charUint.getHp()/this.charUint.getMaxHp()*100,this._charBloodVo&&(this._charBloodVo.num=this.life)},Object.defineProperty(b.prototype,"walkPath",{set:function(a){0!=a.length&&(this.curentAction&&this.curentAction!=CharAction.STANAD&&this.curentAction!=CharAction.STAND_MOUNT||this.play(CharAction.WALK),this._walkPath=a,this.setTarget())},enumerable:!0,configurable:!0}),b.prototype.fixAstartData=function(a){if(this._walkPath)for(var b=0;b<this._walkPath.length;b++)this._walkPath[b].x+=a.x,this._walkPath[b].z=a.y-this._walkPath[b].z,this._walkPath[b].y=AstarUtil.getHeightByPos(this._walkPath[b]);this.px+=a.x,this.pz=a.y-this.pz,this._astatTopos&&(this._astatTopos.x+=a.x,this._astatTopos.z=a.y-this._astatTopos.z,this.setAstarNrmAndRotation()),this.refreshY()},b.prototype.applyWalk=function(a){a&&2==a.length&&a[0].x==a[1].x&&a[0].y==a[1].y||(this.walkPath=AstarUtil.Path2dTo3d(a))},Object.defineProperty(b.prototype,"moveToPos2D",{set:function(a){this._walkPath=null,this.play(this._defaultAction);var b=AstarUtil.getWorldPosByStart2D(a);this.px=b.x,this.pz=b.z,this.refreshY()},enumerable:!0,configurable:!0}),b.prototype.stopToPos=function(a){var b=AstarUtil.getWorldPosByStart2D(a),c=new Array;c.push(b),this.walkPath=c},b.prototype.moveTile=function(a,b){this.moveToPos2D=new Vector2D(a,b)},b.prototype.updateFrame=function(b){a.prototype.updateFrame.call(this,b),this._walkPath&&(this.walkAstar(b),this.refreshY()),this._rotationMatrix&&this.rotationToNew(this.toRotationY,2)},b.prototype.rotationToNew=function(a,b){void 0===b&&(b=1);var c=a-this.pRotationY;if(0!=c){if(1>c)return void(this.pRotationY=a);var d=((a-this.pRotationY)%360+360)%360;d>180?this.pRotationY-=(360-d)/b:this.pRotationY+=d/b}},b.prototype.refreshY=function(){this.py=AstarUtil.getHeightByPos(this.getCurrentPos()),this.refreshPos()},Object.defineProperty(b.prototype,"speedUseTime",{set:function(a){this.speedTX=.01*(a/10)},enumerable:!0,configurable:!0}),b.prototype.walkAstar=function(a){var b=Math.min(a,50),c=Vector3D.distance(new Vector3D(this.px,0,this.pz),this._astatTopos);if(c>5){var d=b*this.speedTX;if(d>c){this.px=this._astatTopos.x,this.pz=this._astatTopos.z;var e=(d-c)/this.speedTX;this.walkAstar(e)}else this.px+=this._astarDirect.x*d,this.pz+=this._astarDirect.z*d}else this.setTarget(),this._walkPath?this.walkAstar(a):(this.px=this._astatTopos.x,this.pz=this._astatTopos.z,this.walkComplete())},b.prototype.changeAction=function(b){a.prototype.changeAction.call(this,b),this.changeActionFun&&this.changeActionFun(b)},b.prototype.walkComplete=function(){this.walkCompleteBackFun&&this.walkCompleteBackFun()},b.prototype.setTarget=function(){if(this._walkPath){if(0==this._walkPath.length)return this._walkPath=null,void this.play(CharAction.STANAD);this._astatTopos=this._walkPath.shift(),this.setAstarNrmAndRotation()}},b.prototype.setAstarNrmAndRotation=function(){this._astatTopos&&(this._astarDirect=this._astatTopos.subtract(this.getCurrentPos()),this._astarDirect.y=0,this._astarDirect.normalize(),Vector3D.distance(this.getCurrentPos(),this._astatTopos)>10&&(this.toRotationY=this.mathAngle(this._astatTopos.z,this._astatTopos.x,this.pz,this.px)+180))},b.prototype.mathAngle=function(a,b,c,d){return 180*Math.atan2(d-b,c-a)/Math.PI},b.prototype.stopMove=function(){this.play(CharAction.STANAD),this._walkPath=null},b.prototype.getEndWalkPathPos=function(){return this._walkPath?this._walkPath[this._walkPath.length-1]:null},b.prototype.watch=function(a,b){if(void 0===b&&(b=!1),!a)return void console.log("面向对象无");var c=a.x-this.px,d=a.z-this.pz,e=Math.sqrt(c*c+d*d);c/=e,d/=e;var f=Math.asin(c)/Math.PI*180;0>=d&&(f=180-f),isNaN(f)||(this.forceRotationY=f)},b.prototype.getCurrentPos=function(){return new Vector3D(this.px,this.py,this.pz)},b.prototype.getAstarPos=function(){return AstarUtil.getGrapIndexByPos(this.getCurrentPos())},b.prototype.removeStage=function(){a.prototype.removeStage.call(this),this._charBloodVo&&(this._charBloodVo.visible=!1)},b.prototype.addStage=function(){a.prototype.addStage.call(this),this._charBloodVo&&(this._charBloodVo.visible=!0)},b.prototype.playSkill=function(a){this._walkPath=null,SkillManager.getInstance().playSkill(a)},b.prototype.setWeaponByAvatar=function(a,c){void 0===c&&(c="");var d=tb.TB_item_slot.getTempVo(a);d?this.addPart(b.WEAPON_PART,d.slot,this.getSceneCharWeaponUrl(a,c)):this.addPart(b.WEAPON_PART,b.WEAPON_DEFAULT_SLOT,this.getSceneCharWeaponUrl(a,c))},b.prototype.destory=function(){this._hasDestory||(a.prototype.destory.call(this),this._charNameVo&&(this._charNameVo.destory(),this._charNameVo=null),this._charBloodVo&&(this._charBloodVo.destory(),this._charBloodVo=null))},b.prototype.setMount=function(a){this.mountChar||(this.mountChar=new MountChar),this.mountChar.x=this.px,this.mountChar.y=this.py,this.mountChar.z=this.pz,this.mountChar.rotationY=this._pRotationY,this.mountChar.setRoleUrl(getRoleUrl(a)),this.setBind(this.mountChar,b.MOUNT_SLOT),SceneManager.getInstance().addMovieDisplay(this.mountChar),this.play(this.curentAction)},b.prototype.setWing=function(a){this._wingDisplay||(this._wingDisplay=new Display3dMovie),this._wingDisplay.setRoleUrl(getRoleUrl(a)),this._wingDisplay.setBind(this,b.WING_SLOT),SceneManager.getInstance().addMovieDisplay(this._wingDisplay)},b.prototype.play=function(b,c,d){return void 0===c&&(c=0),void 0===d&&(d=!0),this.mountChar?(this.mountChar.visible=Boolean(b!=CharAction.JUMP),b==CharAction.STANAD?a.prototype.play.call(this,CharAction.STAND_MOUNT):b==CharAction.WALK?a.prototype.play.call(this,CharAction.WALK_MOUNT):this.mountChar.visible?a.prototype.play.call(this,CharAction.STAND_MOUNT):a.prototype.play.call(this,CharAction.JUMP),this.mountChar.play(b,c,d)):a.prototype.play.call(this,b,c,d)},b.WEAPON_PART="weapon",b.WEAPON_DEFAULT_SLOT="w_01",b.MOUNT_SLOT="mount_01",b.WING_SLOT="wing_01",b}(SceneBaseChar),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},MountChar=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(SceneBaseChar),KeyMouseManeger=function(){function a(){}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.addMouseEvent=function(){var a=this;Scene_data.isPc?(document.addEventListener(MouseType.MouseDown,function(b){a.onMouse(b)}),document.addEventListener(MouseType.MouseUp,function(b){a.onMouse(b)}),document.addEventListener(MouseType.MouseMove,function(b){a.onMouse(b)}),document.addEventListener(MouseType.MouseWheel,function(b){a.onMouseWheel(b)})):(document.addEventListener(MouseType.TouchMove,function(b){a.mouseToEvent(b)}),document.addEventListener(MouseType.TouchEnd,function(b){a.mouseToEvent(b)}),document.addEventListener(MouseType.TouchStart,function(b){a.mouseToEvent(b)}))},a.prototype.onMouseWheel=function(a){AstarUtil.sceneVectList=null,Scene_data.gameAngle+=a.wheelDelta/100},a.prototype.onMouse=function(a){var b,c=new Vector2D;a instanceof MouseEvent&&(a.type==MouseType.MouseDown?b=new InteractiveEvent(InteractiveEvent.Down):a.type==MouseType.MouseUp?b=new InteractiveEvent(InteractiveEvent.Up):a.type==MouseType.MouseMove?b=new InteractiveEvent(InteractiveEvent.Move):a.type==MouseType.MouseClick,c.x=a.pageX,c.y=a.pageY),this.makeMouseEvent(b,c)},a.prototype.makeMouseEvent=function(a,b){UIManager.getInstance().mouseEvetData(a,b)},a.prototype.mouseToEvent=function(a){var b,c=new Vector2D;a.type==MouseType.TouchStart?b=new InteractiveEvent(InteractiveEvent.Down):a.type==MouseType.TouchEnd?(b=new InteractiveEvent(InteractiveEvent.Up),c.x=a.changedTouches[0].pageX,c.y=a.changedTouches[0].pageY):a.type==MouseType.TouchMove&&(b=new InteractiveEvent(InteractiveEvent.Move)),a.touches.length&&(c.x=a.touches[a.touches.length-1].clientX,c.y=a.touches[a.touches.length-1].clientY),this.makeMouseEvent(b,c)},a}(),GameInstance=function(){function a(){}return a.initData=function(){this.threeBattarId=0},a.getModelUrl=function(a){return"lyf/"+a+getBaseUrl()+".txt"},a.playLyf=function(a,b){var c=this;GroupDataManager.getInstance().getGroupData(Scene_data.fileRoot+this.getModelUrl(a),function(d){for(var e=0;e<d.dataAry.length;e++){var f=d.dataAry[e];if(f.types==BaseRes.SCENE_PARTICLE_TYPE){var g=ParticleManager.getInstance().getParticleByte(Scene_data.fileRoot+f.particleUrl);g.setPos(b.x,b.y,b.z),ParticleManager.getInstance().addParticle(g),g.addEventListener(BaseEvent.COMPLETE,c.onPlayCom,c),console.log(g.sourceData.maxTime,a),g.sourceData.maxTime>1e7&&(c.allStr+=a,c.allStr+=",",console.log(c.allStr))}else console.log("播放的不是单纯特效")}})},a.onPlayCom=function(a){var b=a.target;b.removeEventListener(BaseEvent.COMPLETE,this.onPlayCom,this),ParticleManager.getInstance().removeParticle(b)},a.allStr="",a}(),tb;!function(a){var b=function(){function a(){}return a}();a.SkillLevelVo=b;var c=function(){function b(a){a||traceNoTabelData(),this.id=a.id,this.name=a.name,this.info=a.info,this.output_info=a.output_info,this.zhuangbility=a.zhuangbility,this.icon=a.icon,this.avatar=a.avatar,this.level=a.level,this.money_type=a.money_type,this.rank=a.rank,this.bind_type=a.bind_type,this.type=a.type,this.type_c=a.type_c,this.type_name=a.type_name,this.pos=a.pos,this.quality=a.quality,this.sex=a.sex,this.price=a.price,this.is_transaction=a.is_transaction,this.max_overlap=a.max_overlap,this.is_slather=a.is_slather,this.output=new Array,makeArray(a.output,this.output),this.use_result=a.use_result,this.isdoubleclick=a.isdoubleclick,this.double_click=new Array,makeArray(a.double_click,this.double_click),this.basic_properties=new Array,makeArray(a.basic_properties,this.basic_properties),this.suit_id=new Array,makeArray(a.suit_id,this.suit_id),this.using_effect=new Array,makeArray(a.using_effect,this.using_effect),this.category=a.category,this.category_cooldown=a.category_cooldown,this.cooldown=a.cooldown,this.goods_id=a.goods_id,this.arrange=a.arrange,this.expend_data=a.expend_data,this.use_object=a.use_object,this.quest=a.quest,this.forge_pro_max=new Array,makeArray(a.forge_pro_max,this.forge_pro_max),this.is_auction=a.is_auction,this.auction_money=a.auction_money,this.out_bag=a.out_bag,this.handInReward=new Array,makeArray(a.handInReward,this.handInReward),this.exchangeCost=new Array,makeArray(a.exchangeCost,this.exchangeCost),this.destroyReward=a.destroyReward,this.avatar||(this.avatar=this.id)}return b.get_TB_item_template=function(a){var c=TableData.getInstance().getData(TableData.tb_item_template,a),d=new b(c);return d},b.getAvatarById=function(a){return 0==a?0:this.get_TB_item_template(a).avatar},b.prototype.getColorName=function(){var b="["+a.TB_item_quality_color.getTempVo(this.quality).color+"]";return b+this.name},b}();a.TB_item_template=c;var d=function(){function a(){}return a.prototype.parse=function(a){this.playerLevel=a.playerLevel,this.questid=a.questid,this.Pre_skill=a.Pre_skill,this.item=new Array,makeArray(a.item,this.item),this.resource=new Array,makeArray(a.resource,this.resource)},a}();a.SkillLearnVo=d;var e=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.distance=a.distance,this.mcd=a.mcd,this.num=a.num,this.hurt_percent=a.hurt_percent,this.cannot_defence_hure=a.cannot_defence_hure,this.fight_value=a.fight_value,this.uplevel_item=new Array,makeArray(a.uplevel_item,this.uplevel_item),this.need_level=a.need_level,this.uplevel_cost=new Array,makeArray(a.uplevel_cost,this.uplevel_cost)}return a.get_TB_skill_uplevel=function(b){var c=TableData.getInstance().getData(TableData.tb_skill_uplevel,b),d=new a(c);return d},a}();a.TB_skill_uplevel=e;var f=function(){function a(a){a||console.log("空"),this.id=a.id,this.mapid=a.mapid,this.level=a.level,this.x=a.x,this.y=a.y}return a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_world_map);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_world_map,b),d=new a(c);return d},a}();a.TB_world_map=f;var g=function(){function a(a){a||console.log("空"),this.id=a.id,this.itemId=a.itemId,this.name=a.name,this.exp=a.exp}return a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_meridian_item);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_meridian_item,b),d=new a(c);return d},a}();a.TB_meridian_item=g;var h=function(){function a(a){a||console.log("空"),this.id=a.id,this.name=a.name,this.exp=a.exp,this.limit=a.limit,this["goto"]=new Array,makeArray(a["goto"],this["goto"])}return a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_meridian_source);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_meridian_source,b),d=new a(c);return d},a}();a.TB_meridian_source=h;var i=function(){function a(a){a||console.log("空"),this.id=a.id,this.costExp=a.costExp,this.pic=a.pic,this.costMoney=new Array,makeArray(a.costMoney,this.costMoney),this.currAttr=new Array,makeArray(a.currAttr,this.currAttr),this.attrKeys=new Array,makeArray(a.attrKeys,this.attrKeys),this.attrValues=new Array,makeArray(a.attrValues,this.attrValues),this.pos=new Array,makeArray(a.pos,this.pos)}return a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_meridian_info);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_meridian_info,b),d=new a(c);return d},a}();a.TB_meridian_info=i;var j=function(){function a(a){a||console.log("空"),this.id=a.id,this.mapid=a.mapid,this.name=a.name,this.info=a.info,this.need_Num=a.need_Num,this.recom_force=a.recom_force,this.map_pic=a.map_pic,this.monster=new Array,makeArray(a.monster,this.monster),this.passRewardId=new Array,makeArray(a.passRewardId,this.passRewardId),this.passRewardCnt=new Array,makeArray(a.passRewardCnt,this.passRewardCnt),this.fpRewardId=new Array,makeArray(a.fpRewardId,this.fpRewardId),this.fpRewardCnt=new Array,makeArray(a.fpRewardCnt,this.fpRewardCnt),this.times=a.times,this.limLev=a.limLev}return a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_group_instance_base);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_group_instance_base,b),d=new a(c);return d},a}();a.TB_group_instance_base=j;var k=function(){function a(a){a||console.log("空"),this.id=a.id,this.daily_reset=a.daily_reset,this.buy_type=new Array,makeArray(a.buy_type,this.buy_type),this.buy_price=new Array,makeArray(a.buy_price,this.buy_price)}return a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_group_instance_buy);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_group_instance_buy,b),d=new a(c);return d},a}();a.TB_group_instance_buy=k;var l=function(){function a(a){a||console.log("空"),this.id=a.id,this.mapid=a.mapid,this.bossEntry=a.bossEntry,this.permitLevel=a.permitLevel,this.show=new Array,makeArray(a.show,this.show)}return a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_mass_boss_info);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_mass_boss_info,b),d=new a(c);return d},a}();a.TB_mass_boss_info=l;var m=function(){function a(a){a||console.log("空"),this.id=a.id,this.cd=a.mapid,this.dailytimes=a.dailytimes}return a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_mass_boss_base,b),d=new a(c);return d},a}();a.TB_mass_boss_base=m;var n=function(){function a(a){a||console.log("空"),this.id=a.id,this.cost=new Array,makeArray(a.cost,this.cost)}return a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_mass_boss_times);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_mass_boss_times,b),d=new a(c);return d},a}();a.TB_mass_boss_times=n;var o=function(){function a(a){a||console.log("空"),this.id=a.id,this.limit=a.limit}return a.get_TB_anger_limit=function(b){var c=TableData.getInstance().getData(TableData.tb_anger_limit,b),d=new a(c);return d},a}();a.TB_anger_limit=o;var p=function(){function a(a){a||console.log("空"),this.id=a.id,this.divine=a.divine,this.avatar=a.avatar,this.skills=new Array,makeArray(a.skills,this.skills)}return a.get_TB_item_illusion=function(b){var c=TableData.getInstance().getData(TableData.tb_item_illusion,b),d=new a(c);return d},a}();a.TB_item_illusion=p;var q=function(){function a(a){if(!a)return void console.log("空");this.id=a.id,this.params=a.params,this.skinName=this.params.split(",")[1],this.isMainui=Boolean(1==Number(this.params.split(",")[0])),this.isfinish=a.isfinish,this.type=a.type,this.text=a.text,this.area=new Array,makeArray(a.area,this.area);var b=a.layout.split(",");this.layout=new Object;for(var c=0;c<b.length;c++){var d=b[c].split(":"),e=trim(d[0]);this.layout[e]=Number(d[1])}}return a.get_TB_system_guide=function(b){var c=TableData.getInstance().getData(TableData.tb_system_guide,b);if(c){var d=new a(c);return d}return null},a}();a.TB_system_guide=q;var r=function(){function a(a){a||console.log("空"),this.id=a.id,this.dailyLimit=a.dailyLimit,this.questshow=a.questshow}return a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_quest_daily2_base,b),d=new a(c);return d},a}();a.TB_quest_daily2_base=r;var s=function(){function a(a){a||console.log("空"),this.id=a.id,this.indx=a.indx,this.entry=a.entry,this.show=new Array,makeArray(a.show,this.show)}return a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_map_field_boss);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_map_field_boss,b),d=new a(c);return d},a}();a.TB_map_field_boss=s;var t=function(){function a(a){a||console.log("空"),this.id=a.id,this.slot=a.slot}return a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_item_slot);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_item_slot,b);if(c){var d=new a(c);return d}return null},a}();a.TB_item_slot=t;var u=function(){function a(a){a||console.log("空"),this.id=a.id,this.questSet=new Array,makeArray(a.questSet,this.questSet),this.rewards=new Array,makeArray(a.rewards,this.rewards),this.quality=a.quality}return a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_quest_daily2_set,b),d=new a(c);return d},a}();a.TB_quest_daily2_set=u;var v=function(){function a(a){a||console.log("空"),this.id=a.id,this.rewards=new Array,makeArray(a.rewards,this.rewards)}return a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_quest_daily2_finish_reward,b),d=new a(c);return d},a}();a.TB_quest_daily2_finish_reward=v;var w=function(){function a(a){a||console.log("空"),this.id=a.id,this.levelrange=new Array,makeArray(a.levelrange,this.levelrange),this.questSet=new Array,makeArray(a.questSet,this.questSet),this.questSelectNum=new Array,makeArray(a.questSelectNum,this.questSelectNum),this.finishQuestsNum=new Array,makeArray(a.finishQuestsNum,this.finishQuestsNum),this.rewardsSelect=new Array,makeArray(a.rewardsSelect,this.rewardsSelect),this.allFinishrewards=new Array,makeArray(a.allFinishrewards,this.allFinishrewards)}return a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_quest_daily2,b),d=new a(c);return d},a}();a.TB_quest_daily2=w;var x=function(){function a(a){a||console.log("空"),this.id=a.id,this.color=a.color}return a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_item_quality_color,b),d=new a(c);return d},a}();a.TB_item_quality_color=x;var y=function(){function a(a){a||console.log("空"),this.id=a.id,this.dailyLimit=a.dailyLimit}return a.getTempByID=function(b){var c=TableData.getInstance().getData(TableData.tb_quest_daily_base,b),d=new a(c);return d},a}();a.TB_quest_daily_base=y;var z=function(){function a(a){a||console.log("空"),this.id=a.id,this.name=a.name,this.score=a.score,this.title=a.title,this.type=a.type,this.reward=new Array,makeArray(a.reward,this.reward),this.rewardtype=new Array,makeArray(a.rewardtype,this.rewardtype)}return a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_kuafu3v3_month_reward);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.getTempByID=function(b){var c=TableData.getInstance().getData(TableData.tb_kuafu3v3_month_reward,b),d=new a(c);return d},a}();a.TB_kuafu3v3_month_reward=z;var A=function(){function a(a){a||console.log("空"),this.id=a.id,this.last=a.last,this.show=new Array,makeArray(a.show,this.show)}return a.getTempByID=function(b){var c=TableData.getInstance().getData(TableData.tb_map_jump_point_detail,b),d=new a(c);return d},a}();a.TB_map_jump_point_detail=A;var B=function(){function a(a){a||console.log("空"),this.id=a.id,this.reward=new Array,makeArray(a.reward,this.reward),this.rank=new Array,makeArray(a.rank,this.rank)}return a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_kuafu3v3_week_reward);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.getTempByID=function(b){var c=TableData.getInstance().getData(TableData.tb_kuafu3v3_week_reward,b),d=new a(c);return d},a}();a.TB_kuafu3v3_week_reward=B;var C=function(){function a(a){a||console.log("空"),this.daytimes=a.daytimes,this.daybuytimes=a.daybuytimes,this.daybuycost=new Array,makeArray(a.daybuycost,this.daybuycost)}return a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_kuafu3v3_base);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_kuafu3v3_base=C;var D=function(){function a(a){a||console.log("空"),this.id=a.id,this.num=a.num,this.reward=new Array,makeArray(a.reward,this.reward)}return a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_kuafu3v3_day_reward);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.getTempByID=function(b){var c=TableData.getInstance().getData(TableData.tb_kuafu3v3_day_reward,b),d=new a(c);return d},a}();a.TB_kuafu3v3_day_reward=D;var E=function(){function a(a){a||console.log("空"),this.id=a.id,this.type=a.type,this.rank=a.rank,this.reward=a.reward}return a.getTempByID=function(b){var c=TableData.getInstance().getData(TableData.tb_rank_reward,b),d=new a(c);return d},a}();a.Tb_rank_reward=E;var F=function(){function a(a){a||console.log("空"),this.id=a.id,this.cost=new Array,makeArray(a.cost,this.cost),this.maxnum=a.maxnum}return a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_faction_creat);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_faction_creat=F;var G=function(){function a(a){a||console.log("空"),this.id=a.id,this.icon=a.icon}return a.getTempByID=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_faction_icon);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);e.isactivityflag=!1,e.isvisiable=!1,b.push(e)}return b},Object.defineProperty(a.prototype,"isactivityflag",{get:function(){return this.isactivity},set:function(a){this.isactivity=a},enumerable:!0,configurable:!0}),a}();a.Tb_faction_icon=G;var H=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.cost=a.cost,this.maxnum=a.maxnum,this.golddonation=a.golddonation,this.ybdonation=a.ybdonation,this.shop=a.shop,this.token_max_buy=a.token_max_buy,this.token_buy_price=new Array,makeArray(a.token_buy_price,this.token_buy_price),this.token_daily=a.token_daily,this.token_max_keep=a.token_max_keep,this.token_points=a.token_points,this.gift_points_must_reply=a.gift_points_must_reply,this.gift_view_rows=a.gift_view_rows}return a.get_Tb_faction_base=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_faction_base);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.get_Tb_faction_baseById=function(b){var c=TableData.getInstance().getData(TableData.tb_faction_base,b),d=new a(c);return d},a}();a.Tb_faction_base=H;var I=function(){function a(a){a||console.log("空"),this.id=a.id,this.num=a.num,this.reward=a.reward,this.info=a.info,this.title=a.title}return a.get_Tb_faction_zhiwei=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_faction_zhiwei);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.get_Tb_faction_zhiweiById=function(b){var c=TableData.getInstance().getData(TableData.tb_faction_zhiwei,b),d=new a(c);return d},a}();a.Tb_faction_zhiwei=I;var J=function(){function a(a){a||console.log("空"),this.id=a.id,this.devote=a.devote,this.money=a.money,this.cost=new Array,makeArray(a.cost,this.cost)}return a.get_Tb_faction_donation=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_faction_donation);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.get_Tb_faction_donationById=function(b){var c=TableData.getInstance().getData(TableData.tb_faction_donation,b),d=new a(c);return d},a}();a.Tb_faction_donation=J;var K=function(){function a(a){a||console.log("空"),this.id=a.id,this.itemId=a.itemId,this.num=a.num,this.lev=a.lev,this.costResource=new Array,makeArray(a.costResource,this.costResource),this.discount_flag=a.discount_flag}return a.get_Tb_faction_shop=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_faction_shop);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.get_Tb_faction_shopById=function(b){var c=TableData.getInstance().getData(TableData.tb_faction_shop,b),d=new a(c);return d},a}();a.Tb_faction_shop=K;var L=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.name=a.name,this.desc=a.desc,this.info=a.info,this.icon=a.icon,this.is_initiative=a.is_initiative,this.skill_type=a.skill_type,this.type=a.type,this.target_type=a.target_type,this.pre=a.pre,this.is_end=a.is_end,this.follow=new Array,makeArray(a.follow,this.follow),this.time_change=new Array,makeArray(a.time_change,this.time_change),this.singleCD=a.singleCD,this.groupCD=a.groupCD,this.self_cd=a.self_cd,this.group=a.group,this.uplevel_id=new Array,makeArray(a.uplevel_id,this.uplevel_id),this.magic_type=a.magic_type,this.nuqi_change=a.nuqi_change,this.attack_mast=new Array,makeArray(a.attack_mast,this.attack_mast),this.is_fix=a.is_fix,this.effect_file=a.effect_file,this.effect=a.effect,this.isOrbit=a.isOrbit,this.condition_skill=a.condition_skill,this.study_requirement=a.study_requirement,this.alarmEffect=a.alarmEffect,this.can_move=a.can_move,this.is_remain=a.is_remain,this.is_play_forbid=a.is_play_forbid,this.lock_type=a.lock_type}return a.get_TB_skill_base=function(b){var c=TableData.getInstance().getData(TableData.tb_skill_base,b),d=new a(c);return d},a}();a.TB_skill_base=L;var M=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.name=a.name,this.mountID=a.mountID,this.addTrainExp=a.addTrainExp,this.speed=a.speed,this.skills=new Array,makeArray(a.skills,this.skills),this.traincost=new Array,makeArray(a.traincost,this.traincost)}return a.get_TB_mount_base_vo=function(b){
var c=TableData.getInstance().getData(TableData.tb_mount_base,b),d=new a(c);return d},a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_mount_base);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_mount_base_vo=M;var N=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.items=new Array,makeArray(a.items,this.items)}return a.get_TB_quest_chapter=function(b){var c=TableData.getInstance().getData(TableData.tb_quest_chapter,b),d=new a(c);return d},a}();a.TB_quest_chapter=N;var O=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.name=a.name,this.icon=a.icon,this.iconpos=new Array,makeArray(a.iconpos,this.iconpos)}return a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_risk_chapter);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.get_TB_risk_chapter=function(b){var c=TableData.getInstance().getData(TableData.tb_risk_chapter,b),d=new a(c);return d},a}();a.TB_risk_chapter=O;var P=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.mapid=a.mapid,this.name=a.name,this.nextId=a.nextId,this.advisepoint=a.advisepoint,this.suitCount=a.suitCount,this.bossId=a.bossId,this.itemReward=new Array,makeArray(a.itemReward,this.itemReward),this.showitems=new Array,makeArray(a.showitems,this.showitems),this.chapterId=Math.floor(this.id%1e6/1e3),this.bossmap=Math.floor(this.id/1e6)}return a.get_TB_risk_data=function(b){var c=TableData.getInstance().getData(TableData.tb_risk_data,b),d=new a(c);return d},a}();a.TB_risk_data=P;var Q=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.firstSection=a.firstSection}return a.get_TB_risk_base=function(b){var c=TableData.getInstance().getData(TableData.tb_risk_base,b),d=new a(c);return d},a}();a.TB_risk_base=Q;var R=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.quality=a.quality,this.text=a.text}return a}();a.TB_hook_quality_Vo=R;var S=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.items=new Array,makeArray(a.items,this.items)}return a.get_TB_hook_hp_item_Vo=function(b){var c=TableData.getInstance().getData(TableData.tb_hook_hp_item,b),d=new a(c);return d},a}();a.TB_hook_hp_item_Vo=S;var T=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.level=a.level,this.star=a.star,this.exp=a.exp,this.prosKeys=new Array,makeArray(a.prosKeys,this.prosKeys),this.prosValues=new Array,makeArray(a.prosValues,this.prosValues)}return a.getTB_mount_train_vo=function(b,c){var d=11*(b-1)+c+1,e=TableData.getInstance().getData(TableData.tb_mount_train,d),f=new a(e);return f},a.getTabelItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_mount_train);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_mount_train_vo=T;var U=function(){function a(a){this.id=a.id,this.upgradeExp=a.upgradeExp,this.upgradeMode=a.upgradeMode,this.upgradecost=new Array,makeArray(a.upgradecost,this.upgradecost)}return a.get_TB_mount_upgrade=function(b){var c=TableData.getInstance().getData(TableData.tb_mount_upgrade,b),d=new a(c);return d},a}();a.TB_mount_upgrade=U;var V=function(){function a(a){this.spellVolist=new Array,this.prosKeys=new Array,this.prosValues=new Array,a||traceNoTabelData(),this.id=a.id,this.name=a.name,this.mountID=a.mountID,this.condition=a.condition,this.mountLevel=a.mountLevel,this.last=a.last,this.battlepoint=a.battlepoint,this.force=a.force,this.costResource=new Array,this.costItem=new Array,this.spells=new Array,makeArray(a.costResource,this.costResource),makeArray(a.costItem,this.costItem),makeArray(a.spells,this.spells),this.prosKeys=new Array,makeArray(a.prosKeys,this.prosKeys),this.prosValues=new Array,makeArray(a.prosValues,this.prosValues)}return a.getTabelItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_mount_illusion);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.get_TB_mount_illusion_vo=function(b){var c=TableData.getInstance().getData(TableData.tb_mount_illusion,b),d=new a(c);return d},a}();a.TB_mount_illusion_vo=V;var W=function(){function a(){}return a.prototype.parse=function(a){a||traceNoTabelData(),this.id=a.id,this.name=a.name,this.desc=a.desc,this.info=a.info,this.icon=a.icon,this.is_initiative=a.is_initiative,this.uplevel_id=new Array,makeArray(a.uplevel_id,this.uplevel_id)},a}();a.SpellVo=W;var X=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.divineid=a.divineid,this.lev=a.lev,this.props=new Array,makeArray(a.props,this.props)}return a.get_TB_divine_streng=function(b){var c=TableData.getInstance().getData(TableData.tb_divine_streng,b),d=new a(c);return d},a}();a.TB_divine_streng=X;var Y=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.bless=a.bless,this.cost=new Array,makeArray(a.cost,this.cost)}return a.get_TB_divine_bless=function(b){var c=TableData.getInstance().getData(TableData.tb_divine_bless,b),d=new a(c);return d},a}();a.TB_divine_bless=Y;var Z=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.name=a.name,this.info=a.info,this.npcflag=a.npcflag,this.monster_type=a.monster_type,this.hp_num=a.hp_num,this.level=a.level,this.pro=new Array,makeArray(a.pro,this.pro),this.spell=new Array,makeArray(a.spell,this.spell),this.ainame=a.ainame,this.attack_type=a.attack_type,this.avatar=Number(a.avatar),this.lockfaceto=a.lockfaceto,this.title_flag=a.title_flag,this.drop_belong=a.drop_belong,this.dialogue_id=a.dialogue_id}return a.getTabelItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_creature_template);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.get_TB_creature_template=function(b){var c=TableData.getInstance().getData(TableData.tb_creature_template,b),d=new a(c);return d},a}();a.TB_creature_template=Z;var $=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.texst=a.texst}return a.get_TB_quest_vip_instance=function(b){var c=TableData.getInstance().getData(TableData.tb_quest_vip_instance,b),d=new a(c);return d},a}();a.TB_quest_vip_instance=$;var _=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.name=a.name,this.model=Number(a.model),this.skill=a.skill,this.avtivetype=a.avtivetype,this.icon=a.icon,this.time=a.time,this.strength=a.strength,this.type=a.type,this.avtivedata=new Array,makeArray(a.avtivedata,this.avtivedata),this.passiveskill=new Array,makeArray(a.passiveskill,this.passiveskill)}return a.get_TB_divine_base=function(b){var c=TableData.getInstance().getData(TableData.tb_divine_base,b),d=new a(c);return d},a}();a.TB_divine_base=_;var aa=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.name=a.name,this.type=a.type,this.mapres=a.mapres,this.inst_sub_type=a.inst_sub_type,this.inst_type=a.inst_type,this.is_instance=a.is_instance;var b=new Array;makeArray(a.mainshow,b);var c=new Array;makeArray(a.show,c),this.show=b.concat(c),this.path=new Array,makeArray(a.path,this.path)}return a.prototype.showAreaById=function(a){for(var b=0;b<this.show.length;b++)if(this.show[b]==a)return!0;return!1},a.getTB_map=function(b){var c=TableData.getInstance().getData(TableData.tb_map,b),d=new a(c);return d},a.getTabelItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_map);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_map=aa;var ba=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.model=a.model,this.force=a.force,this.resetgold=a.resetgold,this.time=a.time,this.firstReward=new Array,makeArray(a.firstReward,this.firstReward),this.showreward=new Array,makeArray(a.showreward,this.showreward)}return a.get_TB_map_trial=function(b){var c=TableData.getInstance().getData(TableData.tb_map_trial,b),d=new a(c);return d},a.getTabelItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_map_trial);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_map_trial=ba;var ca=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.limit=a.limit,this.costResource=new Array,makeArray(a.costResource,this.costResource)}return a.get_TB_store=function(b){var c=TableData.getInstance().getData(TableData.tb_store,b),d=new a(c);return d},a}();a.TB_store=ca;var da=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.shopid=new Array,makeArray(a.shopid,this.shopid)}return a.get_TB_shop_item_relate_id=function(b){var c=TableData.getInstance().getData(TableData.tb_shop_item_relate_id,b),d=new a(c);return d},a.getRalateIdByNum=function(a,b){for(var c=this.get_TB_shop_item_relate_id(a),d=0;d<c.shopid.length;d++)if(c.shopid[d][0]==b)return c.shopid[d][1];return null},a}();a.TB_shop_item_relate_id=da;var ea=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.itemId=a.itemId,this.type=a.type,this.costtype=a.costtype,this.recommend=a.recommend,this.limtime=a.limtime,this.limtype=a.limtype,this.limdata=a.limdata,this.discount=a.discount,this.time=a.time,this.limit=a.limit,this.count=a.count,this.costResource=new Array,makeArray(a.costResource,this.costResource),this.timeCostResource=new Array,makeArray(a.timeCostResource,this.timeCostResource)}return a.get_TB_shopById=function(b){var c=TableData.getInstance().getData(TableData.tb_shop,b),d=new a(c);return d},a.get_TB_shop=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_shop);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_shop=ea;var fa=function(){function a(a){return this.navi=new Array,a?(this.id=a.id,void makeArray(a.navi,this.navi)):void traceNoTabelData()}return a.get_TB_map_navigation=function(b){var c=TableData.getInstance().getData(TableData.tb_map_navigation,b),d=new a(c);return d},a}();a.TB_map_navigation=fa;var ga=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.type=a.type,this.name=a.name,this.color=a.color,this.position=new Vector2D,this.position.x=a.position[0],this.position.y=a.position[1]}return a.get_TB_map_object=function(b){var c=TableData.getInstance().getData(TableData.tb_map_object,b),d=new a(c);return d},a}();a.TB_map_object=ga;var ha=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.name=a.name,this.vip=a.vip,this.times=a.times,this.forces=new Array,makeArray(a.forces,this.forces),this.reward=new Array,makeArray(a.reward,this.reward),this.cost=new Array,makeArray(a.cost,this.cost),this.creatures=new Array,makeArray(a.creatures,this.creatures)}return a.get_TB_map_vip=function(b){var c=TableData.getInstance().getData(TableData.tb_map_vip,b),d=new a(c);return d},a.getTabelItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_map_vip);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_map_vip=ha;var ia=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.exp=a.exp}return a.get_Tb_social_familiay=function(b){var c=TableData.getInstance().getData(TableData.tb_social_familiay,b),d=new a(c);return d},a}();a.Tb_social_familiay=ia;var ja=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.itemId=a.itemId,this.familiay=a.familiay,this.costResource=new Array,makeArray(a.costResource,this.costResource)}return a.get_Tb_social_shopItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_social_shop);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.Tb_social_shop=ja;var ka=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.content=a.content}return a.get_TB_msg_text_type=function(b){var c=TableData.getInstance().getData(TableData.tb_msg_text_type,b),d=new a(c);return d},a}();a.TB_msg_text_type=ka;var la=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.entry=a.entry,this.items=new Array,makeArray(a.items,this.items)}return a.get_TB_worldboss_base=function(b){var c=TableData.getInstance().getData(TableData.tb_worldboss_base,b),d=new a(c);return d},a}();a.TB_worldboss_base=la;var ma=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.enrolllast=a.enrolllast,this.time_last=a.time_last,this.time=new Array,makeArray(a.time,this.time)}return a.get_TB_worldboss_time=function(b){var c=TableData.getInstance().getData(TableData.tb_worldboss_time,b),d=new a(c);return d},a}();a.TB_worldboss_time=ma;var na=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.factiondonation=a.factiondonation,this.factionybdonation=a.factionybdonation,this.instance=a.instance,this.chongzhi=a.chongzhi}return a.get_TB_vip_base=function(b){var c=TableData.getInstance().getData(TableData.tb_vip_base,b),d=new a(c);return d},a.getTB_vip_base=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_vip_base);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_vip_base=na;var oa=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.id2=a.id2,this.reward=a.reward}return a.getTabelItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_worldboss_rank_reward);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_worldboss_rank_reward=oa;var pa=function(){function a(a){a||traceNoTabelData(),this.zhudong_list=new Array,makeArray(a.zhudong_list,this.zhudong_list),this.anger_list=new Array,makeArray(a.anger_list,this.anger_list),this.passive_list=new Array,makeArray(a.passive_list,this.passive_list)}return a.get_TB_skill_show=function(b){var c=TableData.getInstance().getData(TableData.tb_skill_show,b),d=new a(c);return d},a}();a.TB_skill_show=pa;var qa=function(){function a(a){return a?(this.id=a.id,this.type=a.type,this.reason=a.reason,this.text=a.text,void(this.msgtype=a.msgtype)):void traceNoTabelData()}return a.get_TB_msg=function(b){var c=TableData.getInstance().getData(TableData.tb_msg,b),d=new a(c);return d},a}();a.TB_msg=qa;var ra=function(){function a(a){return a?(this.id=a.id,this.name=a.name,this.nums=a.nums,this.active=a.active,this.icon=a.icon,this.greptimelim=a.greptimelim,this.grepone=a.grepone,this.grepgroup=a.grepgroup,this.grepfaction=a.grepfaction,this.recommend=a.recommend,this.pvp=a.pvp,this.limtype=a.limtype,this.limdata=a.limdata,this["goto"]=a["goto"],this.goto_sub=a.goto_sub,this.vipnums=new Array,makeArray(a.vipnums,this.vipnums),this.time=new Array,makeArray(a.time,this.time),this.basereward=new Array,makeArray(a.basereward,this.basereward),this.reward=new Array,makeArray(a.reward,this.reward),void(this.info=a.info)):void traceNoTabelData()}return a.get_TB_activity_baseByid=function(b){var c=TableData.getInstance().getData(TableData.tb_activity_base,b),d=new a(c);return d},a.get_TB_activity_base=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_activity_base);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_activity_base=ra;var sa=function(){function a(a){return a?(this.id=a.id,this.active=a.active,this.reward=new Array,makeArray(a.reward,this.reward),this.vipreward=new Array,void makeArray(a.vipreward,this.vipreward)):void traceNoTabelData()}return a.get_TB_activity_rewardByid=function(b){var c=TableData.getInstance().getData(TableData.tb_activity_reward,b),d=new a(c);return d},a.get_TB_activity_reward=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_activity_reward);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_activity_reward=sa;var ta=function(){function a(a){return a?(this.id=a.id,void(this.num=a.num)):void traceNoTabelData()}return a.get_TB_social_num=function(b){var c=TableData.getInstance().getData(TableData.tb_social_num,b),d=new a(c);return d},a}();a.TB_social_num=ta;var ua=function(){function a(a){return a?(this.id=a.id,this.npc_dialogue=a.npc_dialogue,void(this.next_id=a.next_id)):void traceNoTabelData()}return a.get_TB_creature_dialogue=function(b){var c=TableData.getInstance().getData(TableData.tb_creature_dialogue,b),d=new a(c);return d},a}();a.TB_creature_dialogue=ua;var va=function(){function a(a){return a?(this.id=a.id,this.start=a.start,this.type=a.type,this.showpage=Number(a.showpage),this.level=a.level,this.chapterName=a.chapterName,this.chapter=a.chapter,this.questName=a.questName,this.desc=a.desc,this.popup=a.popup,this.flag=a.flag,this.dialogue=a.dialogue,this.belongSet=a.belongSet,this.specialButton=a.specialButton,this.hint=new Array,makeArray(a.hint,this.hint),this.icon=new Array,makeArray(a.icon,this.icon),this.text=new Array,makeArray(a.text,this.text),this.targetsPosition=new Array,makeArray(a.targetsPosition,this.targetsPosition),this.rewards=new Array,void makeArray(a.rewards,this.rewards)):void traceNoTabelData()}return a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_quest);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.getTbById=function(b){var c=TableData.getInstance().getData(TableData.tb_quest,b),d=new a(c);return d},a}();a.TB_quest=va;var wa=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.mapid=a.mapid,this.name=a.name,this.type=a.type,this.time=a.time,this.times=a.times,this.limLev=a.limLev,this.boss=a.boss,this.refresnum=a.refresnum,this.randomreward=new Array,makeArray(a.randomreward,this.randomreward),this.basereward=new Array,makeArray(a.basereward,this.basereward),console.log("TB_instance_res",this,a)}return a.getTabelItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_instance_res);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.get_TB_TB_instance_res=function(b){var c=TableData.getInstance().getData(TableData.tb_instance_res,b),d=new a(c);return d},a}();a.TB_instance_res=wa;var xa=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.name=a.name,this.type=a.type,this.stype=a.stype,this.info=a.info,this.maxnum=a.maxnum,this.icon=a.icon,this.linktype=a.linktype,this.reward=new Array,makeArray(a.reward,this.reward),this.achval=a.achval,this.title=a.title}return a.getTB_achieve_base=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_achieve_base);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.get_TB_achieve_baseById=function(b){var c=TableData.getInstance().getData(TableData.tb_achieve_base,b),d=new a(c);return d},a}();a.TB_achieve_base=xa;var ya=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.achval=a.achval,this.reward=new Array,makeArray(a.reward,this.reward)}return a.getTB_achieve_progress=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_achieve_progress);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.get_TB_achieve_progressById=function(b){var c=TableData.getInstance().getData(TableData.tb_achieve_progress,b),d=new a(c);return d},a}();a.TB_achieve_progress=ya;var za=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.name=a.name,this.type=a.type,this.info=a.info,this.getinfo=a.getinfo,this.icon=a.icon,this.limtime=a.limtime,this.achieve=a.achieve,this.specialinfo=a.specialinfo,this.qua=a.qua,this.prop=new Array,makeArray(a.prop,this.prop)}return a.getTB_title_base=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_title_base);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.get_TB_title_baseById=function(b){var c=TableData.getInstance().getData(TableData.tb_title_base,b),d=new a(c);return d},a}();a.TB_title_base=za;var Aa=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.yuanbao=a.yuanbao}return a.getTB_shop_chongzhi=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_shop_chongzhi);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_shop_chongzhi=Aa;var Ba=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.name=a.name,this.time=a.time,this.actionState=a.actionState,this.regX=a.regX,this.regY=a.regY,this.taskShow=a.taskShow,this.judge=a.judge,this.quest_id0=a.quest_id0,this.quest_id1=a.quest_id1,this.quest_id2=a.quest_id2,this.quest_id3=a.quest_id3,this.trigger_width=a.trigger_width,this.trigger_height=a.trigger_height,this.avatar=Number(a.avatar),this.style=a.style}return a.get_TB_gameobject_template=function(b){var c=TableData.getInstance().getData(TableData.tb_gameobject_template,b),d=new a(c);return d},a}();a.TB_gameobject_template=Ba;var Ca=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.item=new Array,makeArray(a.item,this.item)}return a.get_TB_welfare_shouchongById=function(b){var c=TableData.getInstance().getData(TableData.tb_welfare_shouchong,b),d=new a(c);return d},a.get_TB_welfare_shouchong=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_welfare_shouchong);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_welfare_shouchong=Ca;var Da=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.item=new Array,makeArray(a.item,this.item),this.vip=a.vip,this.times=a.times}return a.get_TB_welfare_checkinById=function(b){var c=TableData.getInstance().getData(TableData.tb_welfare_checkin,b),d=new a(c);return d},a.get_TB_welfare_checkin=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_welfare_checkin);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_welfare_checkin=Da;var Ea=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.num=a.num,this.item=new Array,makeArray(a.item,this.item)}return a.get_TB_welfare_checkin_allById=function(b){var c=TableData.getInstance().getData(TableData.tb_welfare_checkin_all,b),d=new a(c);return d},a.get_TB_welfare_checkin_all=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_welfare_checkin_all);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_welfare_checkin_all=Ea;var Fa=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.lev=a.lev,this.item=new Array,makeArray(a.item,this.item)}return a.get_TB_welfare_levelById=function(b){var c=TableData.getInstance().getData(TableData.tb_welfare_level,b),d=new a(c);return d},a.get_TB_welfare_level=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_welfare_level);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_welfare_level=Fa;var Ga=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.basecost=new Array,makeArray(a.basecost,this.basecost),this.allcost=new Array,makeArray(a.allcost,this.allcost),this.basedc=a.basedc,this.alldc=a.alldc,this.name=a.name,this.basereward=new Array,makeArray(a.basereward,this.basereward),this.allreward=new Array,makeArray(a.allreward,this.allreward)}return a.get_TB_welfare_backById=function(b){var c=TableData.getInstance().getData(TableData.tb_welfare_back,b),d=new a(c);return d},a.get_TB_welfare_back=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_welfare_back);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_welfare_back=Ga;var Ha=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.levelrange=new Array,makeArray(a.levelrange,this.levelrange),this.ticket=new Array,makeArray(a.ticket,this.ticket),this.price=new Array,makeArray(a.price,this.price),this.boxid=a.boxid,this.joinReward=new Array,makeArray(a.joinReward,this.joinReward),this.ticketid=a.ticketid,this.showReward=new Array,makeArray(a.showReward,this.showReward)}return a.get_TB_kuafu_xianfu_conditionById=function(b){var c=TableData.getInstance().getData(TableData.tb_kuafu_xianfu_condition,b),d=new a(c);return d},a.get_TB_kuafu_xianfu_condition=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_kuafu_xianfu_condition);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_kuafu_xianfu_condition=Ha;var Ia=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.item=new Array,makeArray(a.item,this.item)}return a.get_TB_welfare_level_show=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_welfare_level_show);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_welfare_level_show=Ia;var Ja=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.dailytimes=a.dailytimes,this.boxid=a.boxid,this.joinTime=new Array,makeArray(a.joinTime,this.joinTime)}return a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_kuafu_xianfu_base,b),d=new a(c);return d},a}();a.TB_kuafu_xianfu_base=Ja;var Ka=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.rank=a.rank,this.reward=new Array,makeArray(a.reward,this.reward)}return a.get_TB_doujiantai_firstById=function(b){var c=TableData.getInstance().getData(TableData.tb_doujiantai_first,b),d=new a(c);return d},a.get_TB_doujiantai_first=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_doujiantai_first);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_doujiantai_first=Ka;var La=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.rank=a.rank,this.reward=a.reward}return a.get_TB_doujiantai_dayById=function(b){var c=TableData.getInstance().getData(TableData.tb_doujiantai_day,b),d=new a(c);return d},a.get_TB_doujiantai_day=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_doujiantai_day);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_doujiantai_day=La;var Ma=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.name=a.name,this.type=a.type,this.level=a.level,this.info=a.info,this.system_id=a.system_id,this.p_name=a.p_name,this.p_info=a.p_info,this.p_model=new Array,makeArray(a.p_model,this.p_model)}return a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_system_preview,b),d=new a(c);return d},a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_system_preview);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_system_preview=Ma;var Na=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.position=a.position,this.index=a.index,this.move=a.move,this.index=a.index,this.text=a.text,this.list=new Array,makeArray(a.list,this.list),this.optional_list=new Array,a.optional_list&&makeArray(a.optional_list,this.optional_list)}return a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_system_icon);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_system_icon,b),d=new a(c);return d},a}();a.TB_system_icon=Na;var Oa=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.name=a.name,this.level=a.level,this.position=a.position,this.index=a.index,this.view=a.view,this.isguide=a.isguide,this.guide_id=a.guide_id,this.condition_info=a.condition_info,this.info=a.info,this.show=a.show}return a.getTempVo=function(b){var c=TableData.getInstance().getData(TableData.tb_system_base,b),d=new a(c);return d},a.getItem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_system_base);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_system_base=Oa;var Pa=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.reward=a.reward}return a.get_TB_doujiantai_combat_winById=function(b){var c=TableData.getInstance().getData(TableData.tb_doujiantai_combat_win,b);if(c){var d=new a(c);return d}return null},a.get_TB_doujiantai_combat_win=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_doujiantai_combat_win);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_doujiantai_combat_win=Pa;var Qa=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.joinTime=new Array,makeArray(a.joinTime,this.joinTime),this.dailytimes=a.dailytimes,this.level=a.level,this.changeRate=a.changeRate,this.refreshCountdown=a.refreshCountdown,this.tryReward=new Array,makeArray(a.tryReward,this.tryReward),this.buyInfo=new Array,makeArray(a.buyInfo,this.buyInfo),this.battleCountdown=new Array,makeArray(a.battleCountdown,this.battleCountdown)}return a.get_TB_doujiantai_baseById=function(b){var c=TableData.getInstance().getData(TableData.tb_doujiantai_base,b),d=new a(c);return d},a.get_TB_doujiantai_base=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_doujiantai_base);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_doujiantai_base=Qa;var Ra=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.parent_id=a.parent_id,this.icon=a.icon,this.name=a.name,this.info=a.info,this.value_type=a.value_type,this.priority=a.priority,this["goto"]=a["goto"],this.goto_sub=new Array,makeArray(a.goto_sub,this.goto_sub),this.limitlev=a.limitlev}return a.get_TB_bianqiang_subById=function(b){var c=TableData.getInstance().getData(TableData.tb_bianqiang_sub,b),d=new a(c);return d},a.get_TB_bianqiang_sub=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_bianqiang_sub);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_bianqiang_sub=Ra;var Sa=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.value=a.value,this.value_devide=new Array,makeArray(a.value_devide,this.value_devide)}return a.get_TB_bianqiang_valueById=function(b){var c=TableData.getInstance().getData(TableData.tb_bianqiang_value,b),d=new a(c);return d},a.get_TB_bianqiang_value=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_bianqiang_value);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_bianqiang_value=Sa;var Ta=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.name=a.name,this.info=a.info,this.color=a.color,this.percent=a.percent,this.icon=a.icon}return a.get_TB_bianqiang_rankById=function(b){var c=TableData.getInstance().getData(TableData.tb_bianqiang_rank,b),d=new a(c);return d},a.get_TB_bianqiang_rank=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_bianqiang_rank);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_bianqiang_rank=Ta;var Ua=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.max_plunder_recover_count=a.max_plunder_recover_count,this.plunder_recover_time=a.plunder_recover_time,this.rival_refresh_cd=a.rival_refresh_cd,this.module_id=a.module_id,this.base_exp_reward=a.base_exp_reward,this.plunder_exp_reward=a.plunder_exp_reward,this.get_reward_time_limit=a.get_reward_time_limit,this.base_exp_time_unit=a.base_exp_time_unit,this.max_been_plunder_count=a.max_been_plunder_count,this.plunder_exp_lost=a.plunder_exp_lost}return a.get_TB_xiulianchang_baseById=function(b){var c=TableData.getInstance().getData(TableData.tb_xiulianchang_base,b),d=new a(c);return d},a.get_TB_xiulianchang_base=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_xiulianchang_base);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_xiulianchang_base=Ua;var Va=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.time_limit=a.time_limit,this.buy_limit=a.buy_limit,this.plunder_limit=a.plunder_limit,this.extend_exp_reward=a.extend_exp_reward,this.buy_price=new Array,makeArray(a.buy_price,this.buy_price)}return a.get_TB_xiulianchang_vipById=function(b){var c=TableData.getInstance().getData(TableData.tb_xiulianchang_vip,b),d=new a(c);return d},a.get_TB_xiulianchang_vip=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_xiulianchang_vip);
console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_xiulianchang_vip=Va;var Wa=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.destroyItem=a.destroyItem,this.manager=a.manager,this.coreManager=a.coreManager,this.replaceFlag=a.replaceFlag,this.handInQuality=a.handInQuality}return a.get_TB_faction_privilege=function(b){var c=TableData.getInstance().getData(TableData.tb_faction_privilege,b),d=new a(c);return d},a}();a.TB_faction_privilege=Wa;var Xa=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.time=a.time,this.vip_label=a.vip_label,this.reward=new Array,makeArray(a.reward,this.reward)}return a.get_TB_xiulianchang_rewardById=function(b){var c=TableData.getInstance().getData(TableData.tb_xiulianchang_reward,b),d=new a(c);return d},a.get_TB_xiulianchang_reward=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_xiulianchang_reward);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_xiulianchang_reward=Xa;var Ya=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.next_exp=a.next_exp}return a.get_TB_char_levelById=function(b){var c=TableData.getInstance().getData(TableData.tb_char_level,b),d=new a(c);return d},a.get_TB_char_level=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_char_level);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_char_level=Ya;var Za=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.day=a.day,this.reward=new Array,makeArray(a.reward,this.reward),this.menu_title=a.menu_title,this.indx=a.indx}return a.get_TB_login_activity_rewardById=function(b){var c=TableData.getInstance().getData(TableData.tb_login_activity_reward,b),d=new a(c);return d},a.get_TB_login_activity_reward=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_login_activity_reward);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_login_activity_reward=Za;var $a=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.preview_name=a.preview_name,this.preview_model=a.preview_model,this.preview_effect=a.preview_effect,this.preview_info=a.preview_info,this.day=a.day,this.type=a.type}return a.get_TB_login_activity_previewById=function(b){var c=TableData.getInstance().getData(TableData.tb_login_activity_preview,b),d=new a(c);return d},a.get_TB_login_activity_preview=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_login_activity_preview);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_login_activity_preview=$a;var _a=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.itemid=a.itemid}return a.get_TB_worldboss_rollById=function(b){var c=TableData.getInstance().getData(TableData.tb_worldboss_roll,b),d=new a(c);return d},a.get_TB_worldboss_roll=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_worldboss_roll);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_worldboss_roll=_a;var ab=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.entry=a.entry,this.faction_zhiwei_limit=new Array,makeArray(a.faction_zhiwei_limit,this.faction_zhiwei_limit),this.faction_lv_limit=a.faction_lv_limit,this.wait_time=a.wait_time,this.time=a.time,this.token_cost=a.token_cost,this.difficult=a.difficult,this.all_rewards=new Array,makeArray(a.all_rewards,this.all_rewards)}return a.get_TB_faction_bossById=function(b){var c=TableData.getInstance().getData(TableData.tb_faction_boss,b),d=new a(c);return d},a.get_TB_faction_boss=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_faction_boss);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_faction_boss=ab;var bb=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.monster_id=a.monster_id,this.rank=new Array,makeArray(a.rank,this.rank),this.reward=new Array,makeArray(a.reward,this.reward),this.fail_reward=new Array,makeArray(a.fail_reward,this.fail_reward)}return a.get_TB_faction_boss_rewardById=function(b){var c=TableData.getInstance().getData(TableData.tb_faction_boss_reward,b),d=new a(c);return d},a.get_TB_faction_boss_reward=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_faction_boss_reward);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_faction_boss_reward=bb;var cb=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.zhiwei_limit=new Array,makeArray(a.zhiwei_limit,this.zhiwei_limit),this.speedup_cost=new Array,makeArray(a.speedup_cost,this.speedup_cost),this.speedup_time=a.speedup_time,this.speedup_limit=a.speedup_limit,this.speedup_donate=a.speedup_donate}return a.get_TB_faction_building_baseById=function(b){var c=TableData.getInstance().getData(TableData.tb_faction_building_base,b),d=new a(c);return d},a.get_TB_faction_building_base=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_faction_building_base);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_faction_building_base=cb;var db=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.type=a.type,this.level=a.level,this.name=a.name,this.unlock=a.unlock,this.need_buildinglv=new Array,makeArray(a.need_buildinglv,this.need_buildinglv),this.cost=a.cost,this.time=a.time,this.can_lvup=a.can_lvup,this.desc=new Array,makeArray(a.desc,this.desc),this.params=new Array,makeArray(a.params,this.params),this["goto"]=a["goto"],this.goto_sub=a.goto_sub,this.icon=a.icon}return a.get_TB_faction_buildingById=function(b){var c=TableData.getInstance().getData(TableData.tb_faction_building,b),d=new a(c);return d},a.get_TB_faction_building=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_faction_building);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_faction_building=db;var eb=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.point=a.point,this.reward=new Array,makeArray(a.reward,this.reward),this.ex_reward=new Array,makeArray(a.ex_reward,this.ex_reward)}return a.get_TB_faction_giftById=function(b){var c=TableData.getInstance().getData(TableData.tb_faction_gift,b),d=new a(c);return d},a.get_TB_faction_gift=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_faction_gift);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_faction_gift=eb;var fb=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.name=a.name,this.quality=a.quality,this.model=a.model,this.icon=a.icon,this.avtivetype=a.avtivetype,this.passiveskill=new Array,makeArray(a.passiveskill,this.passiveskill),this.avtivedata=new Array,makeArray(a.avtivedata,this.avtivedata),this.props=new Array,makeArray(a.props,this.props)}return a.get_TB_talisman_baseById=function(b){var c=TableData.getInstance().getData(TableData.tb_talisman_base,b),d=new a(c);return d},a.get_TB_talisman_base=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_talisman_base);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_talisman_base=fb;var gb=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.cost=new Array,makeArray(a.cost,this.cost),this.prosKeys=new Array,makeArray(a.prosKeys,this.prosKeys),this.prosValues=new Array,makeArray(a.prosValues,this.prosValues)}return a.get_TB_mount_raise_levelById=function(b){var c=TableData.getInstance().getData(TableData.tb_mount_raise_level,b),d=new a(c);return d},a.get_TB_mount_raise_level=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_mount_raise_level);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_mount_raise_level=gb;var hb=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.attr_id=new Array,makeArray(a.attr_id,this.attr_id),this.attr_value=new Array,makeArray(a.attr_value,this.attr_value),this.item_cost=new Array,makeArray(a.item_cost,this.item_cost),this.money_cost=new Array,makeArray(a.money_cost,this.money_cost)}return a.get_TB_talisman_spiritById=function(b){var c=TableData.getInstance().getData(TableData.tb_talisman_spirit,b),d=new a(c);return d},a.get_TB_talisman_spirit=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_talisman_spirit);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_talisman_spirit=hb;var ib=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.part=a.part,this.level=a.level,this.props=new Array,makeArray(a.props,this.props),this.cost=new Array,makeArray(a.cost,this.cost)}return a.get_TB_equipdevelop_strengthById=function(b,c){var d=1e3*b+c,e=TableData.getInstance().getData(TableData.tb_equipdevelop_strength,d),f=new a(e);return f},a.get_TB_equipdevelop_strength=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_equipdevelop_strength);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_equipdevelop_strength=ib;var jb=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.part=a.part,this.rank=a.rank,this.star=a.star,this.lvup_type=a.lvup_type,this.improve=a.improve,this.chance=a.chance,this.cost=new Array,makeArray(a.cost,this.cost)}return a.get_TB_equipdevelop_refineById=function(b,c,d){var e=1e4*b+100*c+d,f=TableData.getInstance().getData(TableData.tb_equipdevelop_refine,e),g=new a(f);return g},a.get_TB_equipdevelop_refine=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_equipdevelop_refine);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_equipdevelop_refine=jb;var kb=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.gem_array=new Array,makeArray(a.gem_array,this.gem_array),this.unlock_strength_lv=new Array,makeArray(a.unlock_strength_lv,this.unlock_strength_lv),this.unlock_refine_lv=new Array,makeArray(a.unlock_refine_lv,this.unlock_refine_lv)}return a.get_TB_equipdevelop_gem_partById=function(b){var c=TableData.getInstance().getData(TableData.tb_equipdevelop_gem_part,b),d=new a(c);return d},a.get_TB_equipdevelop_gem_part=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_equipdevelop_gem_part);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_equipdevelop_gem_part=kb;var lb=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.type=a.type,this.level=a.level,this.cost=new Array,makeArray(a.cost,this.cost)}return a.get_TB_equipdevelop_gemById=function(b,c){var d=1e3*b+c,e=TableData.getInstance().getData(TableData.tb_equipdevelop_gem,d),f=new a(e);return f},a.get_TB_equipdevelop_gem=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_equipdevelop_gem);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_equipdevelop_gem=lb;var mb=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.part=a.part,this.rare=a.rare,this.cost=new Array,makeArray(a.cost,this.cost)}return a.get_TB_equipdevelop_washattrsById=function(b){var c=TableData.getInstance().getData(TableData.tb_equipdevelop_washattrs,b),d=new a(c);return d},a.get_TB_equipdevelop_washattrs=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_equipdevelop_washattrs);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_equipdevelop_washattrs=mb;var nb=function(){function a(a){a||traceNoTabelData(),this.id=a.id,this.type=a.type,this.level=a.level,this.need_lv=a.need_lv,this.props=new Array,makeArray(a.props,this.props)}return a.get_TB_equipdevelop_bonusById=function(b){var c=TableData.getInstance().getData(TableData.tb_equipdevelop_bonus,b),d=new a(c);return d},a.get_TB_equipdevelop_bonus=function(){var b=new Array,c=TableData.getInstance().getTableByName(TableData.tb_equipdevelop_bonus);console.log("基本数据",c);for(var d in c.data){var e=new a(c.data[d]);b.push(e)}return b},a}();a.TB_equipdevelop_bonus=nb}(tb||(tb={}));var ResTabelVo=function(){function a(){this.size=0}return a.prototype.parseTable=function(a,b,c,d){this.name=a,this.field=c.split(","),this.typs=b.split(",");var e=d.split(String.fromCharCode(1)),f=this.field.length,g=e.length/f,h=0;this.data=new Object;for(var i=0;g>i;i++){for(var j=new Object,k=0;f>k;k++){var l=e[h];switch(this.typs[k]){case"int":j[this.field[k]]=Number(l);break;case"string":j[this.field[k]]=l;break;case"array":j[this.field[k]]=JSON.parse(l);break;default:j[this.field[k]]=l}h++}this.data[j.id]=j}this.size=g},a.prototype.getDataByID=function(a){return this.data[a]},a}(),TableData=function(){function a(){this.tb=new Object}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.loadGameData=function(a,b){var c=this;void 0===a&&(a=null),void 0===b&&(b=null);var d=Scene_data.fileRoot+"data/scene.txt",e=Scene_data.fileRoot+"data/tb.txt",f=!1,g=!1,h=function(){f&&g&&a()};LoadManager.getInstance().load(d,LoadManager.XML_TYPE,function(a){SceneRes.sceneConfigData=JSON.parse(a),f=!0,h()}),LoadManager.getInstance().load(e,LoadManager.XML_TYPE,function(a){c.parseLineByStr(a),g=!0,h()},null,b)},a.prototype.loadZipGameData=function(a,b){var c=this;void 0===a&&(a=null),void 0===b&&(b=null);var d=Scene_data.fileRoot+"data/tb.zip.txt";LoadManager.getInstance().load(d,LoadManager.BYTE_TYPE,function(b){var d=new ByteArray(b),e=d.readInt(),f=b.slice(4,4+e);d.position+=e;var g=d.readInt(),h=d.readUTFBytes(g);SceneRes.sceneConfigData=JSON.parse(h),f=unZip(f),d=new ByteArray(f),h=d.readUTFBytes(d.length),c.parseLineByStr(h),a()},null,b)},a.prototype.loadTbDataByName=function(a,b){var c=this;void 0===b&&(b=null);var d=Scene_data.fileRoot+"data/"+a+".txt";LoadManager.getInstance().load(d,LoadManager.XML_TYPE,function(a){c.parseLineByStr(a),b&&b()})},a.prototype.loadTbItemByArr=function(a,b){var c=this;if(a.length>0){var d=Scene_data.fileRoot+"data/"+a.pop()+".txt";LoadManager.getInstance().load(d,LoadManager.XML_TYPE,function(d){c.parseLineByStr(d),c.loadTbItemByArr(a,b)})}else b()},a.prototype.parseLineByStr=function(a){for(var b=a.split(String.fromCharCode(13)),c=b.length/4,d=0;c>d;++d){var e=b[4*d+0],f=b[4*d+1],g=b[4*d+2],h=b[4*d+3],i=new ResTabelVo;i.parseTable(e,g,f,h),this.tb[e]=i}},a.prototype.getData=function(a,b){return this.tb[a]?this.tb[a].getDataByID(b):null},a.prototype.getTabSize=function(a){return this.tb[a]?this.tb[a].size:0},a.prototype.getTableByName=function(a){return this.tb[a]?this.tb[a]:null},a.tb_creature_template="tb_creature_template",a.tb_item_slot="tb_item_slot",a.tb_skill_base="tb_skill_base",a.tb_skill_uplevel="tb_skill_uplevel",a.tb_gameobject_template="tb_gameobject_template",a.tb_skill_show="tb_skill_show",a.tb_anger_limit="tb_anger_limit",a.tb_learn_spell="tb_learn_spell",a.tb_assistangerspell_upgrade="tb_assistangerspell_upgrade",a.tb_mount_illusion="tb_mount_illusion",a.tb_mount_base="tb_mount_base",a.tb_mount_upgrade="tb_mount_upgrade",a.tb_mount_train="tb_mount_train",a.tb_item_template="tb_item_template",a.tb_strengthen_bless="tb_strengthen_bless",a.tb_strengthen_base="tb_strengthen_base",a.tb_strengthen_mul="tb_strengthen_mul",a.tb_gem_pos="tb_gem_pos",a.tb_gem_cost="tb_gem_cost",a.tb_gem_icon="tb_gem_icon",a.tb_gem_base="tb_gem_base",a.tb_gem_mul="tb_gem_mul",a.tb_divine_base="tb_divine_base",a.tb_divine_streng="tb_divine_streng",a.tb_divine_clinet="tb_divine_clinet",a.tb_divine_bless="tb_divine_bless",a.tb_map_vip="tb_map_vip",a.tb_map="tb_map",a.tb_map_field_boss_time="tb_map_field_boss_time",a.tb_map_trial="tb_map_trial",a.tb_quest_vip_instance="tb_quest_vip_instance",a.tb_hook_quality="tb_hook_quality",a.tb_hook_hp_item="tb_hook_hp_item",a.tb_store="tb_store",a.tb_shop="tb_shop",a.tb_shop_item_relate_id="tb_shop_item_relate_id",a.tb_social_familiay="tb_social_familiay",a.tb_social_shop="tb_social_shop",a.tb_msg_text_type="tb_msg_text_type",a.tb_map_field_boss="tb_map_field_boss",a.tb_world_map="tb_world_map",a.tb_faction_icon="tb_faction_icon",a.tb_faction_creat="tb_faction_creat",a.tb_faction_base="tb_faction_base",a.tb_faction_zhiwei="tb_faction_zhiwei",a.tb_faction_donation="tb_faction_donation",a.tb_faction_shop="tb_faction_shop",a.tb_map_object="tb_map_object",a.tb_map_navigation="tb_map_navigation",a.tb_worldboss_base="tb_worldboss_base",a.tb_worldboss_rank_reward="tb_worldboss_rank_reward",a.tb_worldboss_time="tb_worldboss_time",a.tb_instance_res="tb_instance_res",a.tb_vip_base="tb_vip_base",a.tb_rank_reward="tb_rank_reward",a.tb_msg="tb_msg",a.tb_social_num="tb_social_num",a.tb_activity_base="tb_activity_base",a.tb_activity_reward="tb_activity_reward",a.tb_quest="tb_quest",a.tb_achieve_base="tb_achieve_base",a.tb_achieve_progress="tb_achieve_progress",a.tb_title_base="tb_title_base",a.tb_shop_chongzhi="tb_shop_chongzhi",a.tb_creature_dialogue="tb_creature_dialogue",a.tb_quest_chapter="tb_quest_chapter",a.tb_welfare_shouchong="tb_welfare_shouchong",a.tb_welfare_checkin="tb_welfare_checkin",a.tb_welfare_checkin_all="tb_welfare_checkin_all",a.tb_welfare_level="tb_welfare_level",a.tb_welfare_back="tb_welfare_back",a.tb_welfare_level_show="tb_welfare_level_show",a.tb_kuafu3v3_base="tb_kuafu3v3_base",a.tb_kuafu3v3_month_reward="tb_kuafu3v3_month_reward",a.tb_kuafu3v3_day_reward="tb_kuafu3v3_day_reward",a.tb_kuafu3v3_week_reward="tb_kuafu3v3_week_reward",a.tb_kuafu_xianfu_base="tb_kuafu_xianfu_base",a.tb_kuafu_xianfu_condition="tb_kuafu_xianfu_condition",a.tb_doujiantai_first="tb_doujiantai_first",a.tb_doujiantai_day="tb_doujiantai_day",a.tb_doujiantai_combat_win="tb_doujiantai_combat_win",a.tb_doujiantai_base="tb_doujiantai_base",a.tb_map_jump_point_detail="tb_map_jump_point_detail",a.tb_quest_daily_base="tb_quest_daily_base",a.tb_quest_daily2_base="tb_quest_daily2_base",a.tb_quest_daily2="tb_quest_daily2",a.tb_quest_daily2_set="tb_quest_daily2_set",a.tb_system_preview="tb_system_preview",a.tb_quest_daily2_finish_reward="tb_quest_daily2_finish_reward",a.tb_system_base="tb_system_base",a.tb_item_quality_color="tb_item_quality_color",a.tb_system_icon="tb_system_icon",a.tb_bianqiang_sub="tb_bianqiang_sub",a.tb_bianqiang_value="tb_bianqiang_value",a.tb_bianqiang_rank="tb_bianqiang_rank",a.tb_system_guide="tb_system_guide",a.tb_xiulianchang_base="tb_xiulianchang_base",a.tb_xiulianchang_vip="tb_xiulianchang_vip",a.tb_xiulianchang_reward="tb_xiulianchang_reward",a.tb_char_level="tb_char_level",a.tb_item_illusion="tb_item_illusion",a.tb_login_activity_preview="tb_login_activity_preview",a.tb_login_activity_reward="tb_login_activity_reward",a.tb_worldboss_roll="tb_worldboss_roll",a.tb_faction_boss="tb_faction_boss",a.tb_faction_boss_reward="tb_faction_boss_reward",a.tb_faction_gift_rank_reward="tb_faction_gift_rank_reward",a.tb_risk_data="tb_risk_data",a.tb_risk_base="tb_risk_base",a.tb_risk_chapter="tb_risk_chapter",a.tb_faction_building_base="tb_faction_building_base",a.tb_faction_building="tb_faction_building",a.tb_faction_gift="tb_faction_gift",a.tb_faction_privilege="tb_faction_privilege",a.tb_talisman_base="tb_talisman_base",a.tb_talisman_spirit="tb_talisman_spirit",a.tb_mass_boss_info="tb_mass_boss_info",a.tb_mass_boss_base="tb_mass_boss_base",a.tb_mass_boss_times="tb_mass_boss_times",a.tb_wings_bless="tb_wings_bless",a.tb_wings_base="tb_wings_base",a.tb_wings_strength="tb_wings_strength",a.tb_group_instance_base="tb_group_instance_base",a.tb_group_instance_buy="tb_group_instance_buy",a.tb_meridian_info="tb_meridian_info",a.tb_meridian_source="tb_meridian_source",a.tb_mount_raise_level="tb_mount_raise_level",a.tb_meridian_item="tb_meridian_item",a.tb_faction_bossdefense_pool="tb_faction_bossdefense_pool",a.tb_faction_bossdefense_point="tb_faction_bossdefense_point",a.tb_faction_bossdefense_base="tb_faction_bossdefense_base",a.tb_faction_tower_base="tb_faction_tower_base",a.tb_faction_tower_floor="tb_faction_tower_floor",a.tb_single_pvp_base="tb_single_pvp_base",a.tb_single_pvp_extra="tb_single_pvp_extra",a.tb_single_pvp_grade="tb_single_pvp_grade",a.tb_single_pvp_times="tb_single_pvp_times",a.tb_buff_effect="tb_buff_effect",a.tb_equipdevelop_strength="tb_equipdevelop_strength",a.tb_equipdevelop_refine="tb_equipdevelop_refine",a.tb_equipdevelop_gem_part="tb_equipdevelop_gem_part",a.tb_equipdevelop_gem="tb_equipdevelop_gem",a.tb_equipdevelop_washattrs="tb_equipdevelop_washattrs",a.tb_equipdevelop_bonus="tb_equipdevelop_bonus",a.tb_faction_skill_base="tb_faction_skill_base",a.tb_faction_skill_building="tb_faction_skill_building",a.tb_faction_skill_lvup="tb_faction_skill_lvup",a}(),GameMouseManager=function(){function a(){}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.addMouseEvent=function(){var a=this;Scene_data.isPc?(document.addEventListener(MouseType.MouseDown,function(b){a.onMouse(b)}),document.addEventListener(MouseType.MouseUp,function(b){a.onMouse(b)}),document.addEventListener(MouseType.MouseMove,function(b){a.onMouse(b)}),document.addEventListener(MouseType.MouseWheel,function(b){a.onMouseWheel(b)})):(document.addEventListener(MouseType.TouchMove,function(b){a.mouseToEvent(b)}),document.addEventListener(MouseType.TouchEnd,function(b){a.mouseToEvent(b)}),document.addEventListener(MouseType.TouchStart,function(b){a.mouseToEvent(b)}))},a.prototype.onMouseWheel=function(a){},a.prototype.onMouse=function(a){var b,c=new Vector2D;a instanceof MouseEvent&&(a.type==MouseType.MouseDown?b=new InteractiveEvent(InteractiveEvent.Down):a.type==MouseType.MouseUp?b=new InteractiveEvent(InteractiveEvent.Up):a.type==MouseType.MouseMove?b=new InteractiveEvent(InteractiveEvent.Move):a.type==MouseType.MouseClick,c.x=a.pageX,c.y=a.pageY),this.makeMouseEvent(b,c)},a.prototype.mouseToEvent=function(a){var b,c=new Vector2D;a.type==MouseType.TouchStart?b=new InteractiveEvent(InteractiveEvent.Down):a.type==MouseType.TouchEnd?(b=new InteractiveEvent(InteractiveEvent.Up),c.x=a.changedTouches[0].pageX,c.y=a.changedTouches[0].pageY):a.type==MouseType.TouchMove&&(b=new InteractiveEvent(InteractiveEvent.Move)),a.touches.length&&(c.x=a.touches[a.touches.length-1].clientX,c.y=a.touches[a.touches.length-1].clientY),this.makeMouseEvent(b,c)},a.prototype.makeMouseEvent=function(a,b){var c=UIManager.getInstance().mouseEvetData(a,b);c||a.type==InteractiveEvent.Up&&this.clikSceneGround(b)},a.prototype.clikSceneGround=function(a){},a.prototype.walkPathComplete=function(){},a}(),SceneMouseEventModel=function(){function a(){this.lastRotationY=0,this.lastRotationX=0,this._lastMousePos=new Vector2D}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.initSceneFocueEvent=function(){var a=this;Scene_data.uiBlankStage.addEventListener(InteractiveEvent.Down,this.onMouseDown,this),Scene_data.uiBlankStage.addEventListener(InteractiveEvent.Up,this.onMouseUp,this),Scene_data.uiBlankStage.addEventListener(InteractiveEvent.Move,this.onMouseMove,this),document.addEventListener(MouseType.MouseWheel,function(b){a.onMouseWheel(b)})},a.prototype.onMouseWheel=function(a){Scene_data.cam3D.distance+=a.wheelDelta/10},a.prototype.onMouseMove=function(a){if(this._isMouseDown){var b=a.x-this._lastMousePos.x;Scene_data.focus3D.rotationY=this.lastRotationY-b;var c=a.y-this._lastMousePos.y;Scene_data.focus3D.rotationX=this.lastRotationX-c}},a.prototype.onMouseDown=function(a){this._lastMousePos.x=a.x,this._lastMousePos.y=a.y,this.lastRotationY=Scene_data.focus3D.rotationY,this.lastRotationX=Scene_data.focus3D.rotationX,this._isMouseDown=!0},a.prototype.onMouseUp=function(a){this._isMouseDown=!1},a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},PointListShader=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.binLocation=function(a){a.bindAttribLocation(this.program,0,"v3Position"),a.bindAttribLocation(this.program,1,"n3Position")},b.prototype.getVertexShaderString=function(){var a="attribute vec3 v3Position;attribute vec3 n3Position;uniform mat4 viewMatrix3D;uniform mat4 camMatrix3D;uniform mat4 posMatrix3D;uniform vec4 scalesizenum;varying vec3 v_colorvec;void main(void){   v_colorvec = n3Position;   vec4 vt0= vec4(v3Position, 1.0);   vt0 = posMatrix3D * vt0;   vt0 = camMatrix3D * vt0;   vt0 = viewMatrix3D * vt0;   gl_Position = vt0;   gl_PointSize     = scalesizenum.x;}";return a},b.prototype.getFragmentShaderString=function(){var a="precision mediump float;\nvarying vec3 v_colorvec;void main(void)\n{\ngl_FragColor =vec4(v_colorvec, 1.0);\n}";return a},b.PointListShader="PointListShader",b}(Shader3D),PointListSpriter=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.initData=function(){ProgrmaManager.getInstance().registe(PointListShader.PointListShader,new PointListShader),this.shader=ProgrmaManager.getInstance().getProgram(PointListShader.PointListShader),this.program=this.shader.program,this.objData=new ObjData;for(var a=new Array,b=new Array,c=0;1e3>c;c++)a.push(random(100)-50,random(100)-50,random(100)-50),b.push(Math.random(),Math.random(),Math.random());this.setNewItemData(a,b)},b.prototype.setNewItemData=function(a,b){void 0===b&&(b=null),this.objData.vertices=new Array,this.objData.normals=new Array;for(var c=0;c<a.length/3;c++)if(this.objData.vertices.push(a[3*c+0],a[3*c+1],a[3*c+2]),b)if(a.length==b.length)this.objData.normals.push(b[3*c+0],b[3*c+1],b[3*c+2]);else{var d=b[4*c+3];this.objData.normals.push(b[4*c+0]*d,b[4*c+1]*d,b[4*c+2]*d)}else this.objData.normals.push(1,0,0);this.upToGpu()},b.prototype.upToGpu=function(){this.objData.treNum=this.objData.vertices.length/3,this.objData.vertexBuffer=Scene_data.context3D.uploadBuff3D(this.objData.vertices),this.objData.normalsBuffer=Scene_data.context3D.uploadBuff3D(this.objData.normals)},b.prototype.update=function(){this.objData&&this.objData.vertexBuffer&&(Scene_data.context3D.setProgram(this.shader.program),Scene_data.context3D.setWriteDepth(!1),Scene_data.context3D.setDepthTest(!1),Scene_data.context3D.setBlendParticleFactors(1),Scene_data.context3D.setVcMatrix4fv(this.shader,"viewMatrix3D",Scene_data.viewMatrx3D.m),Scene_data.context3D.setVcMatrix4fv(this.shader,"camMatrix3D",Scene_data.cam3D.cameraMatrix.m),Scene_data.context3D.setVcMatrix4fv(this.shader,"posMatrix3D",this.posMatrix.m),Scene_data.context3D.setVc4fv(this.shader,"scalesizenum",[b.PointSize,1,1,1]),Scene_data.context3D.setVa(0,3,this.objData.vertexBuffer),Scene_data.context3D.setVa(1,3,this.objData.normalsBuffer),Scene_data.context3D.renderContext.drawArrays(Scene_data.context3D.renderContext.POINTS,0,this.objData.treNum))},b.PointSize=1,b}(BaseDiplay3dSprite),PointShowModel=function(){function a(){}return a.init=function(){var a=this;Engine.init(document.getElementById("ArpgStageCanvas")),UIManager.getInstance().regEvent(null),this.loadDataComplet(),setInterval(function(){a.upFrameData()},1e3/60)},a.upFrameData=function(){PointListSpriter.PointSize=this.PointSize,Engine.update()},a.addGridLineSprite=function(){ProgrmaManager.getInstance().registe(LineDisplayShader.LineShader,new LineDisplayShader);var a=new GridLineSprite;SceneManager.getInstance().addDisplay(a)},a.loadDataComplet=function(){this._pointListSpriter=new PointListSpriter,SceneManager.getInstance().addDisplay(this._pointListSpriter),ProgrmaManager.getInstance().registe(LineDisplayShader.LineShader,new LineDisplayShader),this._hitBoxSprite=new LineDisplaySprite,SceneManager.getInstance().addDisplay(this._hitBoxSprite),this.setBoxScale(100,100,100),SceneManager.getInstance().ready=!0,this.hasMouseEvent&&(GameMouseManager.getInstance().addMouseEvent(),SceneMouseEventModel.getInstance().initSceneFocueEvent()),this.showGridline&&this.addGridLineSprite()},a.setBoxScale=function(a,b,c,d){void 0===d&&(d=null),a/=2,b/=2,c/=2,this._hitBoxSprite.clear(),this._hitBoxSprite.baseColor=new Vector3D(1,0,0),d&&d.length>=3&&(this._hitBoxSprite.baseColor=new Vector3D(d[0],d[1],d[2])),this._hitBoxSprite.makeLineMode(new Vector3D(-a,+b,+c),new Vector3D(+a,+b,+c)),this._hitBoxSprite.makeLineMode(new Vector3D(-a,-b,+c),new Vector3D(+a,-b,+c)),this._hitBoxSprite.makeLineMode(new Vector3D(-a,+b,+c),new Vector3D(-a,-b,+c)),this._hitBoxSprite.makeLineMode(new Vector3D(+a,+b,+c),new Vector3D(+a,-b,+c)),this._hitBoxSprite.makeLineMode(new Vector3D(-a,+b,-c),new Vector3D(+a,+b,-c)),this._hitBoxSprite.makeLineMode(new Vector3D(-a,-b,-c),new Vector3D(+a,-b,-c)),this._hitBoxSprite.makeLineMode(new Vector3D(-a,+b,-c),new Vector3D(-a,-b,-c)),this._hitBoxSprite.makeLineMode(new Vector3D(+a,+b,-c),new Vector3D(+a,-b,-c)),this._hitBoxSprite.makeLineMode(new Vector3D(-a,+b,+c),new Vector3D(-a,+b,-c)),this._hitBoxSprite.makeLineMode(new Vector3D(+a,+b,+c),new Vector3D(+a,+b,-c)),this._hitBoxSprite.makeLineMode(new Vector3D(-a,-b,+c),new Vector3D(-a,-b,-c)),this._hitBoxSprite.makeLineMode(new Vector3D(+a,-b,+c),new Vector3D(+a,-b,-c)),this._hitBoxSprite.upToGpu()},a.setPointData=function(a,b){void 0===b&&(b=null),this._pointListSpriter.setNewItemData(a,b)},a.PointSize=2,a.hasMouseEvent=!1,a.showGridline=!1,a}();